===============================================================
   Migration Tab Code - Add to SyncMonitor/Index.vue
===============================================================

STEP 1: Add Migrations Tab Button
----------------------------------
Find this section (around line 152):

              <button
                @click="activeTab = 'backups'"
                :class="['px-6 py-3 text-sm font-medium border-b-2 transition-colors', activeTab === 'backups' ? 'border-yellow-500 text-yellow-600 dark:text-yellow-400' : 'border-transparent text-gray-500 dark:text-gray-400']"
              >
                ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
              </button>

ADD AFTER IT:

              <button
                @click="activeTab = 'migrations'"
                :class="['px-6 py-3 text-sm font-medium border-b-2 transition-colors', activeTab === 'migrations' ? 'border-orange-500 text-orange-600 dark:text-orange-400' : 'border-transparent text-gray-500 dark:text-gray-400']"
              >
                ğŸ“¦ Migrations
              </button>


STEP 2: Add Migrations Tab Content
-----------------------------------
Find the backups tab content (around line 831):

          <div v-if="activeTab === 'backups'" class="p-6">
            ...
          </div>

ADD AFTER IT (before closing the main div):

          <!-- ØªØ¨ÙˆÙŠØ¨ Migrations -->
          <div v-if="activeTab === 'migrations'" class="p-6">
            <div class="flex justify-between items-center mb-6">
              <div>
                <h3 class="text-xl font-semibold dark:text-gray-200 mb-2">
                  ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Migrations
                </h3>
                <p class="text-sm text-gray-600 dark:text-gray-400">
                  ØªÙ†ÙÙŠØ° migration Ù…Ø­Ø¯Ø¯ Ø¨Ø£Ù…Ø§Ù† Ø¨Ø¯ÙˆÙ† Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </p>
              </div>
              <div class="flex gap-2">
                <button
                  @click="loadMigrations"
                  :disabled="loadingMigrations"
                  class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  <span v-if="!loadingMigrations">ğŸ”„ ØªØ­Ø¯ÙŠØ«</span>
                  <span v-else>â³ Ø¬Ø§Ø±ÙŠ...</span>
                </button>
              </div>
            </div>

            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
              <div class="bg-orange-50 dark:bg-orange-900 p-4 rounded-lg">
                <div class="text-2xl font-bold text-orange-600">{{ dbMigrationStats.total_pending || 0 }}</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
              </div>
              <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                <div class="text-2xl font-bold text-gray-600">{{ dbMigrationStats.total_executed || 0 }}</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ù†ÙØ°Ø©</div>
              </div>
            </div>

            <!-- ÙÙ„ØªØ± Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ÙØ°Ø© -->
            <div class="mb-4 flex items-center">
              <input
                type="checkbox"
                v-model="showExecutedMigrations"
                @change="loadMigrations"
                id="showExecuted"
                class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
              >
              <label for="showExecuted" class="mr-2 text-sm text-gray-700 dark:text-gray-300">
                Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ÙØ°Ø©
              </label>
            </div>

            <div v-if="loadingMigrations" class="text-center py-12">
              <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"></div>
              <p class="mt-4 text-gray-600 dark:text-gray-400">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
            </div>

            <div v-else class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                  <thead class="bg-gray-50 dark:bg-gray-700">
                    <tr>
                      <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Ø§Ø³Ù… Migration</th>
                      <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù</th>
                      <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                      <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                    <tr
                      v-for="migration in migrations"
                      :key="migration.file"
                      class="hover:bg-gray-50 dark:hover:bg-gray-700"
                      :class="{'opacity-60': migration.executed}"
                    >
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200">
                        <div class="flex items-center">
                          {{ migration.name }}
                          <span v-if="migration.executed" class="mr-2 px-2 py-1 text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 rounded-full">
                            âœ“ Ù…Ù†ÙØ°
                          </span>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 font-mono text-xs">
                        {{ migration.file }}
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                        {{ migration.date }}
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button
                          v-if="!migration.executed"
                          @click="runSpecificMigration(migration.name)"
                          :disabled="runningMigration === migration.name"
                          class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                          <span v-if="runningMigration !== migration.name">â–¶ï¸ ØªÙ†ÙÙŠØ°</span>
                          <span v-else>â³ Ø¬Ø§Ø±ÙŠ...</span>
                        </button>
                        <span v-else class="text-gray-400 dark:text-gray-500 text-sm">
                          ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°
                        </span>
                      </td>
                    </tr>
                    <tr v-if="migrations.length === 0">
                      <td colspan="4" class="px-6 py-8 text-center text-gray-500 dark:text-gray-400">
                        <div class="text-5xl mb-2">ğŸ“­</div>
                        <p class="text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ migrations</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- ØªØ­Ø°ÙŠØ± ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª -->
            <div v-if="migrationWarning" class="mt-6 bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-500 p-4 rounded-lg">
              <div class="flex items-start">
                <div class="flex-shrink-0">
                  <span class="text-2xl">âš ï¸</span>
                </div>
                <div class="mr-3 flex-1">
                  <h4 class="text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2">
                    ØªØ­Ø°ÙŠØ±: ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„!
                  </h4>
                  <p class="text-sm text-yellow-700 dark:text-yellow-300 mb-3">
                    ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Migration Ù‚Ø¯ ÙŠØ­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©!
                  </p>
                  <div v-if="migrationWarning.tables" class="mb-3">
                    <p class="text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-2">
                      Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…ØªØ£Ø«Ø±Ø© ({{ migrationWarning.total_records }} Ø³Ø¬Ù„):
                    </p>
                    <ul class="list-disc list-inside text-sm text-yellow-700 dark:text-yellow-300 space-y-1">
                      <li v-for="table in migrationWarning.tables" :key="table.name">
                        {{ table.name }}: {{ table.count }} Ø³Ø¬Ù„
                      </li>
                    </ul>
                  </div>
                  <div v-else-if="migrationWarning.table" class="mb-3">
                    <p class="text-sm text-yellow-700 dark:text-yellow-300">
                      Ø¬Ø¯ÙˆÙ„ <strong>{{ migrationWarning.table }}</strong>: {{ migrationWarning.record_count }} Ø³Ø¬Ù„
                    </p>
                  </div>
                  <div class="flex gap-2 mt-4">
                    <button
                      @click="forceRunMigration(migrationWarning.migration)"
                      class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm font-medium"
                    >
                      âš ï¸ ØªÙ†ÙÙŠØ° Ø±ØºÙ… Ø§Ù„ØªØ­Ø°ÙŠØ± (Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
                    </button>
                    <button
                      @click="migrationWarning = null"
                      class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm"
                    >
                      Ø¥Ù„ØºØ§Ø¡
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ø¹Ø±Ø¶ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ° -->
            <div v-if="migrationOutput" class="mt-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg">
              <div class="p-4 border-b border-gray-200 dark:border-gray-600">
                <h4 class="text-lg font-semibold dark:text-gray-200">ğŸ“‹ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:</h4>
              </div>
              <div class="p-4">
                <pre class="text-xs font-mono bg-gray-900 text-green-400 p-4 rounded overflow-x-auto max-h-64 overflow-y-auto">{{ migrationOutput }}</pre>
                <button
                  @click="migrationOutput = ''"
                  class="mt-4 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm"
                >
                  Ø¥ØºÙ„Ø§Ù‚
                </button>
              </div>
            </div>
          </div>


STEP 3: Add Data Variables in <script setup>
---------------------------------------------
Find the data/ref section and ADD:

// Database Migrations
const migrations = ref([]);
const loadingMigrations = ref(false);
const runningMigration = ref(null);
const migrationOutput = ref('');
const migrationWarning = ref(null);
const showExecutedMigrations = ref(false);
const dbMigrationStats = ref({
  total_pending: 0,
  total_executed: 0
});


STEP 4: Add Functions at the end of <script setup>
---------------------------------------------------

// ============================================
// Database Migrations Functions
// ============================================
async function loadMigrations() {
  loadingMigrations.value = true;
  try {
    const response = await axios.get('/api/sync-monitor/migrations', {
      params: {
        show_executed: showExecutedMigrations.value
      }
    });
    migrations.value = response.data.migrations || [];
    dbMigrationStats.value = {
      total_pending: response.data.total_pending || 0,
      total_executed: response.data.total_executed || 0
    };
  } catch (error) {
    console.error('Error loading migrations:', error);
    toast.error('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Migrations');
  } finally {
    loadingMigrations.value = false;
  }
}

async function checkMigrationSafety(migrationName) {
  try {
    const response = await axios.post('/api/sync-monitor/check-migration', {
      migration_name: migrationName
    });
    
    if (response.data.success && response.data.has_data) {
      return {
        hasData: true,
        tables: response.data.tables_with_data,
        totalRecords: response.data.total_records
      };
    }
    return { hasData: false };
  } catch (error) {
    console.error('Error checking migration safety:', error);
    return { hasData: false };
  }
}

async function runSpecificMigration(migrationName, force = false) {
  // Check for data before running
  if (!force) {
    const safetyCheck = await checkMigrationSafety(migrationName);
    
    if (safetyCheck.hasData) {
      migrationWarning.value = {
        migration: migrationName,
        tables: safetyCheck.tables,
        total_records: safetyCheck.totalRecords
      };
      return;
    }
  }

  runningMigration.value = migrationName;
  migrationOutput.value = '';
  migrationWarning.value = null;

  try {
    const response = await axios.post('/api/sync-monitor/run-migration', {
      migration_name: migrationName,
      force: force
    });

    if (response.data.success) {
      toast.success('ØªÙ… ØªÙ†ÙÙŠØ° Migration Ø¨Ù†Ø¬Ø§Ø­');
      migrationOutput.value = response.data.output || '';
      await loadMigrations();
    } else {
      // Check if it's a warning about data
      if (response.data.warning && response.data.table) {
        migrationWarning.value = {
          migration: migrationName,
          table: response.data.table,
          record_count: response.data.record_count
        };
      } else {
        toast.error(response.data.error || 'ÙØ´Ù„ ØªÙ†ÙÙŠØ° Migration');
        migrationOutput.value = response.data.output || response.data.error || '';
      }
    }
  } catch (error) {
    console.error('Error running migration:', error);
    
    if (error.response?.data?.warning) {
      migrationWarning.value = {
        migration: migrationName,
        table: error.response.data.table,
        record_count: error.response.data.record_count
      };
    } else {
      toast.error(error.response?.data?.error || error.message || 'ÙØ´Ù„ ØªÙ†ÙÙŠØ° Migration');
      migrationOutput.value = error.response?.data?.output || error.message || '';
    }
  } finally {
    runningMigration.value = null;
  }
}

function forceRunMigration(migrationName) {
  runSpecificMigration(migrationName, true);
}


STEP 5: Update onMounted to load migrations
--------------------------------------------
Find onMounted section and ADD this line:

onMounted(async () => {
  await loadEssentialData();
  await loadTabData(activeTab.value);
  // ADD THIS LINE:
  await loadMigrations();
});


STEP 6: Update loadTabData function
------------------------------------
Find the loadTabData function and ADD migrations case:

const loadTabData = async (tabName) => {
  switch (tabName) {
    case 'tables':
      await loadTables();
      break;
    case 'sync':
      await loadSyncMetadata();
      await loadSyncFromServerJobs();
      break;
    case 'health':
      await checkSyncHealth();
      await checkPendingChanges();
      break;
    case 'backups':
      await loadBackups();
      break;
    // ADD THIS CASE:
    case 'migrations':
      await loadMigrations();
      break;
  }
};


DONE! Now you have a safe Migration tab that:
  âœ… Lists all migrations
  âœ… Shows executed vs pending
  âœ… Checks for data before running
  âœ… Warns if data exists
  âœ… Forces run only with confirmation
  âœ… Shows output/errors

===============================================================
