# ๐ง ุฅุตูุงุญ: Job ูุชุญูู ูู MySQL ุญุชู ูุน API Sync

## โ ุงููุดููุฉ

`SyncPendingChangesJob` ูุงู ูุชุญูู ูู MySQL ูุจุงุดุฑุฉ ุญุชู ูู ูุงู `SYNC_VIA_API=true`.

**ุงููุชูุฌุฉ**: ุฎุทุฃ "MySQL ุบูุฑ ูุชุงุญ" ุญุชู ูุน ุชูุนูู API Sync.

---

## โ ุงูุญู

ุชู ุชุนุฏูู `SyncPendingChangesJob::handle()` ููุญูู ูู:
1. **ุฅุฐุง ูุงู API Sync ููุนูู**: ูุชุญูู ูู API ูููุณ MySQL
2. **ุฅุฐุง ูุงู MySQL Sync ููุนูู**: ูุชุญูู ูู MySQL

---

## ๐ ุงูุชุบููุฑุงุช

### ูุจู:
```php
// ูุงู ูุชุญูู ูู MySQL ุฏุงุฆูุงู
DB::connection('mysql')->getPdo();
```

### ุจุนุฏ:
```php
// ูุชุญูู ูู ููุน ุงููุฒุงููุฉ ุฃููุงู
if ($useApi) {
    // ุชุญูู ูู API
    if (!$apiSyncService->isApiAvailable()) {
        throw new \Exception('API ุบูุฑ ูุชุงุญ');
    }
} else {
    // ุชุญูู ูู MySQL
    DB::connection('mysql')->getPdo();
}
```

---

## โ ุงููุชูุฌุฉ

ุงูุขู Job:
- โ ูุชุญูู ูู API ุฅุฐุง ูุงู `SYNC_VIA_API=true`
- โ ูุชุญูู ูู MySQL ููุท ุฅุฐุง ูุงู `SYNC_VIA_API=false`
- โ ูุง ูุธูุฑ ุฎุทุฃ "MySQL ุบูุฑ ูุชุงุญ" ุนูุฏ ุงุณุชุฎุฏุงู API

---

**ุชุงุฑูุฎ**: 2025-12-23

