import{X as ee,r as y,k as te,o as oe,a as i,c as l,b as e,e as d,t as u,d as m,F as k,f as _,n as C,y as se,j as ie,g as U}from"./app-BK41XzZo.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"detail-container"},ae={class:"detail-header"},ce={class:"header-content"},re={class:"logo-section"},de=["src"],ue={class:"company-name"},ve={class:"detail-content"},me={class:"detail-grid"},be={class:"media-section"},ge={class:"main-media"},ye={key:0,class:"images-slider-container"},he={class:"image-navigation"},fe=["disabled"],ke={class:"image-counter"},_e=["disabled"],Ie={class:"image-display"},Ce=["src","alt","onClick"],we={key:0,class:"image-thumbnails"},$e=["onClick"],xe=["src","alt"],De=["src","alt"],Me=["src"],Ye={key:3,class:"youtube-slider-container"},Ve={class:"video-navigation"},Le=["disabled"],Te={class:"video-counter"},ze=["disabled"],pe={class:"video-display"},Fe={class:"video-title"},Ue=["src"],je={key:0,class:"video-thumbnails"},Ae=["onClick"],Be={class:"thumbnail-number"},Ee=["src"],Se={class:"media-controls-outside"},We={class:"info-section"},Ne={class:"info-header"},Oe={class:"decoration-title"},Pe={key:0,class:"featured-badge"},Xe={class:"decoration-type"},qe={class:"price-section"},Re={class:"price"},Ze={class:"price-value"},Ge={class:"description"},He={key:0,class:"features"},Je={class:"features-list"},Ke={key:1,class:"optional-items"},Qe={class:"optional-list"},et={class:"contact-section"},tt={class:"contact-buttons"},ot=["href"],st=["href"],it=["href"],lt=["href"],nt={key:0,class:"related-section"},at={class:"related-grid"},ct=["onClick"],rt={class:"related-image"},dt=["src","alt"],ut={class:"related-info"},vt={class:"related-price"},mt={class:"modal-header"},bt={class:"image-counter"},gt={class:"image-container-modal"},yt=["src","alt"],ht=["disabled"],ft=["disabled"],kt={key:1,class:"loading-overlay"},_t={__name:"DecorationDetail",props:{decoration:Object,relatedDecorations:Array,companyInfo:Object},setup(o){ee(s=>({d257f7ea:o.companyInfo.primary_color,"793d732a":o.companyInfo.primary_color_dark}));const n=o,j=y(!1),b=y(!1),c=y(0),v=y(0),$=y(!1),h=y(1),f=y({x:0,y:0}),w=y(!1),x=y({x:0,y:0});te(()=>n.decoration.images_urls&&n.decoration.images_urls.length>0?n.decoration.images_urls[c.value]:n.decoration.image_url);const Y=s=>{c.value=s,b.value=!1},A=()=>{n.decoration.images_urls&&c.value<n.decoration.images_urls.length-1&&c.value++},B=()=>{c.value>0&&c.value--},E=s=>{v.value=s},S=()=>{v.value<g().length-1&&v.value++},W=()=>{v.value>0&&v.value--},V=s=>{c.value=s,$.value=!0,h.value=1,f.value={x:0,y:0},document.body.style.overflow="hidden"},L=()=>{$.value=!1,h.value=1,f.value={x:0,y:0},document.body.style.overflow="auto"},N=()=>n.decoration.images_urls&&n.decoration.images_urls.length>0?n.decoration.images_urls[c.value]:n.decoration.image_url,T=()=>{h.value<3&&(h.value+=.2)},z=()=>{h.value>.5&&(h.value-=.2)},D=()=>{h.value=1,f.value={x:0,y:0}},O=s=>{w.value=!0,x.value={x:s.clientX-f.value.x,y:s.clientY-f.value.y}},P=s=>{w.value&&(f.value={x:s.clientX-x.value.x,y:s.clientY-x.value.y})},p=()=>{w.value=!1},X=s=>{s.preventDefault(),s.deltaY<0?T():z()},q=()=>{n.decoration.images_urls&&c.value<n.decoration.images_urls.length-1&&(c.value++,D())},R=()=>{c.value>0&&(c.value--,D())},Z=()=>{const s=n.companyInfo.whatsapp||n.companyInfo.phone;if(!s)return"#";const t=s.replace(/\D/g,""),a=(t.startsWith("964")?"":"964")+t,r=`مرحباً، أريد الاستفسار عن ديكور: ${n.decoration.name}`;return`https://wa.me/${a}?text=${encodeURIComponent(r)}`},G=()=>{U.visit(route("public.gallery"))},H=s=>{U.visit(route("public.decoration.show",s.id))},M=s=>s?s.includes("youtube.com")||s.includes("youtu.be"):!1,g=()=>{const s=[];if(console.log("Decoration data:",n.decoration),console.log("youtube_links:",n.decoration.youtube_links),console.log("video_url:",n.decoration.video_url),n.decoration.youtube_links&&Array.isArray(n.decoration.youtube_links)){const I=n.decoration.youtube_links.filter(a=>a&&a.trim()!=="");console.log("Filtered youtube_links:",I),s.push(...I)}n.decoration.video_url&&M(n.decoration.video_url)&&(s.includes(n.decoration.video_url)||s.push(n.decoration.video_url));const t=[...new Set(s)];return console.log("Final YouTube links:",t),t},J=s=>{if(!s)return"";let t="";return s.includes("youtube.com/watch?v=")?t=s.split("v=")[1].split("&")[0]:s.includes("youtu.be/")?t=s.split("youtu.be/")[1].split("?")[0]:s.includes("youtube.com/embed/")&&(t=s.split("embed/")[1].split("?")[0]),`https://www.youtube.com/embed/${t}?rel=0&modestbranding=1&autoplay=0&controls=1&showinfo=0&iv_load_policy=3&fs=1&cc_load_policy=0&start=0&end=0&loop=0&playlist=${t}`},K=()=>{},Q=s=>{console.error("YouTube iframe error:",s)};return oe(()=>{n.decoration.images_urls&&n.decoration.images_urls.length>0&&(c.value=0),g().length>0&&(v.value=0),console.log("Decoration data:",n.decoration),console.log("Images URLs:",n.decoration.images_urls),console.log("Current image index:",c.value)}),(s,t)=>{var I;return i(),l("div",ne,[e("header",ae,[e("div",ce,[e("div",re,[o.companyInfo.logo?(i(),l("img",{key:0,src:o.companyInfo.logo,alt:"Logo",class:"logo"},null,8,de)):d("",!0),e("h1",ue,u(o.companyInfo.name),1)]),e("button",{onClick:G,class:"back-btn"},t[4]||(t[4]=[e("i",{class:"bi bi-arrow-right"},null,-1),m(" العودة ")]))])]),e("div",ve,[e("div",me,[e("div",be,[e("div",ge,[!b.value&&o.decoration.images_urls&&o.decoration.images_urls.length>0?(i(),l("div",ye,[e("div",he,[e("button",{onClick:B,disabled:c.value===0,class:"nav-btn prev-btn"},t[5]||(t[5]=[e("i",{class:"bi bi-chevron-left"},null,-1)]),8,fe),e("div",ke,u(c.value+1)+" / "+u(o.decoration.images_urls.length),1),e("button",{onClick:A,disabled:c.value===o.decoration.images_urls.length-1,class:"nav-btn next-btn"},t[6]||(t[6]=[e("i",{class:"bi bi-chevron-right"},null,-1)]),8,_e)]),e("div",Ie,[(i(!0),l(k,null,_(o.decoration.images_urls,(a,r)=>(i(),l("div",{key:r,class:C(["image-container",{active:c.value===r}])},[e("img",{src:a,alt:`${o.decoration.name} - صورة ${r+1}`,class:"main-image",onClick:F=>V(r)},null,8,Ce)],2))),128))]),o.decoration.images_urls.length>1?(i(),l("div",we,[(i(!0),l(k,null,_(o.decoration.images_urls,(a,r)=>(i(),l("div",{key:r,onClick:F=>Y(r),class:C(["image-thumbnail",{active:c.value===r}])},[e("img",{src:a,alt:`مصغرة ${r+1}`,class:"thumbnail-img"},null,8,xe),t[7]||(t[7]=e("div",{class:"thumbnail-overlay"},[e("i",{class:"bi bi-eye"})],-1))],10,$e))),128))])):d("",!0)])):!b.value&&o.decoration.image_url?(i(),l("img",{key:1,src:o.decoration.image_url,alt:o.decoration.name,class:"main-image",onClick:t[0]||(t[0]=a=>V(0))},null,8,De)):d("",!0),b.value&&o.decoration.video_url_attribute&&!M(o.decoration.video_url_attribute)?(i(),l("video",{key:2,src:o.decoration.video_url_attribute,controls:"",class:"main-video"}," متصفحك لا يدعم تشغيل الفيديو ",8,Me)):d("",!0),b.value&&g().length>0?(i(),l("div",Ye,[e("div",Ve,[e("button",{onClick:W,disabled:v.value===0,class:"nav-btn prev-btn"},t[8]||(t[8]=[e("i",{class:"bi bi-chevron-left"},null,-1)]),8,Le),e("div",Te,u(v.value+1)+" / "+u(g().length),1),e("button",{onClick:S,disabled:v.value===g().length-1,class:"nav-btn next-btn"},t[9]||(t[9]=[e("i",{class:"bi bi-chevron-right"},null,-1)]),8,ze)]),e("div",pe,[(i(!0),l(k,null,_(g(),(a,r)=>(i(),l("div",{key:r,class:C(["youtube-container",{active:v.value===r}])},[e("div",Fe,[t[10]||(t[10]=e("i",{class:"bi bi-play-circle"},null,-1)),m(" فيديو "+u(r+1),1)]),e("iframe",{src:J(a),frameborder:"0",allowfullscreen:"",class:"youtube-video",onLoad:K,onError:Q},null,40,Ue)],2))),128))]),g().length>1?(i(),l("div",je,[(i(!0),l(k,null,_(g(),(a,r)=>(i(),l("div",{key:r,onClick:F=>E(r),class:C(["video-thumbnail",{active:v.value===r}])},[e("div",Be,u(r+1),1),t[11]||(t[11]=e("div",{class:"thumbnail-overlay"},[e("i",{class:"bi bi-play-circle"})],-1))],10,Ae))),128))])):d("",!0)])):d("",!0),b.value&&o.decoration.video_url&&!M(o.decoration.video_url)&&!o.decoration.video_url_attribute?(i(),l("video",{key:4,src:o.decoration.video_url,controls:"",class:"main-video"}," متصفحك لا يدعم تشغيل الفيديو ",8,Ee)):d("",!0)]),e("div",Se,[o.decoration.images_urls&&o.decoration.images_urls.length>0?(i(),l("button",{key:0,onClick:t[1]||(t[1]=a=>{b.value=!1,Y(0)}),class:C(["media-btn",{active:!b.value}])},[t[12]||(t[12]=e("i",{class:"bi bi-image"},null,-1)),m(" الصور ("+u(o.decoration.images_urls.length)+") ",1)],2)):d("",!0),g().length>0||o.decoration.video_url?(i(),l("button",{key:1,onClick:t[2]||(t[2]=a=>b.value=!0),class:C(["media-btn",{active:b.value}])},[t[13]||(t[13]=e("i",{class:"bi bi-play-circle"},null,-1)),m(" الفيديو ("+u(g().length)+") ",1)],2)):d("",!0)])]),e("div",We,[e("div",Ne,[e("h1",Oe,u(o.decoration.name),1),o.decoration.is_featured?(i(),l("div",Pe,t[14]||(t[14]=[e("i",{class:"bi bi-star-fill"},null,-1),m(" مميز ")]))):d("",!0)]),e("div",Xe,[t[15]||(t[15]=e("i",{class:"bi bi-tag"},null,-1)),e("span",null,u(o.decoration.type_name),1)]),e("div",qe,[e("div",Re,[t[16]||(t[16]=e("span",{class:"price-label"},"السعر",-1)),e("span",Ze,u(o.decoration.formatted_price),1)])]),e("div",Ge,[t[17]||(t[17]=e("h3",null,"الوصف",-1)),e("p",null,u(o.decoration.description),1)]),o.decoration.included_items&&o.decoration.included_items.length>0?(i(),l("div",He,[t[19]||(t[19]=e("h3",null,"المميزات المشمولة",-1)),e("ul",Je,[(i(!0),l(k,null,_(o.decoration.included_items,a=>(i(),l("li",{key:a},[t[18]||(t[18]=e("i",{class:"bi bi-check-circle"},null,-1)),m(" "+u(a),1)]))),128))])])):d("",!0),o.decoration.optional_items&&o.decoration.optional_items.length>0?(i(),l("div",Ke,[t[21]||(t[21]=e("h3",null,"عناصر اختيارية",-1)),e("ul",Qe,[(i(!0),l(k,null,_(o.decoration.optional_items,a=>(i(),l("li",{key:a},[t[20]||(t[20]=e("i",{class:"bi bi-plus-circle"},null,-1)),m(" "+u(a),1)]))),128))])])):d("",!0),e("div",et,[t[26]||(t[26]=e("h3",null,"تواصل معنا",-1)),e("div",tt,[o.companyInfo.phone?(i(),l("a",{key:0,href:`tel:${o.companyInfo.phone}`,class:"contact-btn phone"},t[22]||(t[22]=[e("i",{class:"bi bi-telephone"},null,-1),m(" اتصل بنا ")]),8,ot)):d("",!0),o.companyInfo.whatsapp||o.companyInfo.phone?(i(),l("a",{key:1,href:Z(),target:"_blank",class:"contact-btn whatsapp"},t[23]||(t[23]=[e("i",{class:"bi bi-whatsapp"},null,-1),m(" واتساب ")]),8,st)):d("",!0),o.companyInfo.email?(i(),l("a",{key:2,href:`mailto:${o.companyInfo.email}`,class:"contact-btn email"},t[24]||(t[24]=[e("i",{class:"bi bi-envelope"},null,-1),m(" أرسل رسالة ")]),8,it)):d("",!0),o.companyInfo.address?(i(),l("a",{key:3,href:`https://maps.google.com/?q=${o.companyInfo.address}`,target:"_blank",class:"contact-btn location"},t[25]||(t[25]=[e("i",{class:"bi bi-geo-alt"},null,-1),m(" الموقع ")]),8,lt)):d("",!0)])])])]),o.relatedDecorations.length>0?(i(),l("div",nt,[t[27]||(t[27]=e("h2",null,"ديكورات مشابهة",-1)),e("div",at,[(i(!0),l(k,null,_(o.relatedDecorations,a=>(i(),l("div",{key:a.id,onClick:r=>H(a),class:"related-item"},[e("div",rt,[e("img",{src:a.thumbnail_url||a.image_url||"/dashboard-assets/img/placeholder.jpg",alt:a.name},null,8,dt)]),e("div",ut,[e("h4",null,u(a.name),1),e("p",null,u(a.type_name),1),e("span",vt,u(a.formatted_price),1)])],8,ct))),128))])])):d("",!0)]),$.value?(i(),l("div",{key:0,class:"image-modal",onClick:L},[e("div",{class:"modal-content",onClick:t[3]||(t[3]=ie(()=>{},["stop"]))},[e("div",mt,[e("div",bt,u(c.value+1)+" / "+u(((I=o.decoration.images_urls)==null?void 0:I.length)||1),1),e("div",{class:"modal-controls"},[e("button",{onClick:T,class:"control-btn",title:"تكبير"},t[28]||(t[28]=[e("i",{class:"bi bi-zoom-in"},null,-1)])),e("button",{onClick:z,class:"control-btn",title:"تصغير"},t[29]||(t[29]=[e("i",{class:"bi bi-zoom-out"},null,-1)])),e("button",{onClick:D,class:"control-btn",title:"إعادة تعيين"},t[30]||(t[30]=[e("i",{class:"bi bi-arrow-clockwise"},null,-1)])),e("button",{onClick:L,class:"control-btn close-btn",title:"إغلاق"},t[31]||(t[31]=[e("i",{class:"bi bi-x"},null,-1)]))])]),e("div",gt,[e("img",{src:N(),alt:`${o.decoration.name} - صورة ${c.value+1}`,class:"modal-image",style:se({transform:`scale(${h.value}) translate(${f.value.x}px, ${f.value.y}px)`,cursor:w.value?"grabbing":"grab"}),onMousedown:O,onMousemove:P,onMouseup:p,onMouseleave:p,onWheel:X},null,44,yt)]),o.decoration.images_urls&&o.decoration.images_urls.length>1?(i(),l("button",{key:0,onClick:R,class:"nav-arrow prev-arrow",disabled:c.value===0},t[32]||(t[32]=[e("i",{class:"bi bi-chevron-left"},null,-1)]),8,ht)):d("",!0),o.decoration.images_urls&&o.decoration.images_urls.length>1?(i(),l("button",{key:1,onClick:q,class:"nav-arrow next-arrow",disabled:c.value===o.decoration.images_urls.length-1},t[33]||(t[33]=[e("i",{class:"bi bi-chevron-right"},null,-1)]),8,ft)):d("",!0)])])):d("",!0),j.value?(i(),l("div",kt,t[34]||(t[34]=[e("div",{class:"loading-spinner"},[e("i",{class:"bi bi-arrow-clockwise"})],-1)]))):d("",!0)])}}},wt=le(_t,[["__scopeId","data-v-fdb044c9"]]);export{wt as default};
