import{s as Z,r as x,B as it,a as r,c as G,w as z,e as d,b as t,d as u,t as e,l as w,y as D,A,v as lt,f,D as rt,E as ct,Q as dt,x as ut,h as R,i as Q,u as O,p as K,n as M,F as X,g as Y}from"./app-Dyo3CGUB.js";import{_ as mt}from"./AuthenticatedLayout-DQQOHWHW.js";import{_ as bt}from"./Pagination-ByRiNjxu.js";/* empty css                                                                       */import{_ as ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as U}from"./sweetalert2.esm.all-DwEdJQJv.js";import{l as W}from"./lodash-BWRDsr-N.js";const vt={key:0,class:"modal-mask"},pt={class:"modal-wrapper max-h-[80vh]"},ft={class:"modal-container"},gt={class:"modal-header"},_t={class:"text-primary"},yt={class:"modal-body"},xt={class:"row g-3"},wt={class:"col-12"},kt={class:"alert alert-info"},$t={class:"col-md-6"},Ct={for:"price_cost",class:"form-label"},qt=["placeholder"],Bt={class:"col-md-6"},St={for:"price",class:"form-label"},Pt=["placeholder"],Vt={class:"col-md-6"},Ut={for:"quantity",class:"form-label"},Ft=["placeholder"],Tt={class:"col-md-6"},jt={class:"col-md-6"},Et={for:"date",class:"form-label"},Dt={class:"col-md-6"},It={class:"form-control-plaintext bg-light p-2 rounded"},Lt={class:"col-12"},Ot={class:"form-check"},Mt={class:"text-muted"},zt={class:"modal-footer"},At={class:"d-flex w-100 gap-2"},Nt=["disabled"],Rt=["disabled"],Qt={key:0,class:"spinner-border spinner-border-sm me-2"},Gt={key:1,class:"bi bi-check-circle"},Ht={__name:"ModalPurchasesProduct",props:{show:Boolean,data:Object,accounts:Array,translations:Array},emits:["close","success"],setup(o,{emit:m}){const S=o,y=m,g=Z(),l=x({date:$(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}),_=x(!1);function $(){const c=new Date,a=c.getFullYear(),P=String(c.getMonth()+1).padStart(2,"0"),V=String(c.getDate()).padStart(2,"0");return`${a}-${P}-${V}`}const h=()=>{l.value={date:$(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}};it(()=>S.data,c=>{c&&c.id&&(l.value.price_cost=c.price_cost||0,l.value.price=c.price||0,l.value.quantity=0)},{immediate:!0});const C=async()=>{if(!S.data||!S.data.id){g.error("Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†ØªØ¬");return}if(l.value.quantity<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ…ÙŠØ© Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±");return}if(l.value.price_cost<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ©");return}if(l.value.price<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹");return}_.value=!0;try{const c=await ct.post(route("products.processPurchase"),{product_id:S.data.id,quantity:l.value.quantity,price_cost:l.value.price_cost,price:l.value.price,date:l.value.date,withdraw_from_box:l.value.withdraw_from_box,currency:l.value.currency});c.data.success?(g.success(c.data.message),y("success",c.data),y("close"),h()):g.error(c.data.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©")}catch(c){console.error("Purchase error:",c),c.response&&c.response.data&&c.response.data.message?g.error(c.response.data.message):g.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª")}finally{_.value=!1}},I=()=>(l.value.quantity*l.value.price_cost).toFixed(2);return(c,a)=>(r(),G(rt,{name:"modal"},{default:z(()=>{var P,V,F,T,j;return[o.show?(r(),d("div",vt,[t("div",pt,[t("div",ft,[t("div",gt,[t("h3",_t,[a[7]||(a[7]=t("i",{class:"bi bi-cart-plus"},null,-1)),u(" Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±ÙŠØ§Øª - "+e(((P=o.data)==null?void 0:P.name)||"Ù…Ù†ØªØ¬"),1)])]),t("div",yt,[t("div",xt,[t("div",wt,[t("div",kt,[a[8]||(a[8]=t("strong",null,"Ø§Ù„Ù…Ù†ØªØ¬:",-1)),u(" "+e(((V=o.data)==null?void 0:V.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"),1),a[9]||(a[9]=t("br",null,null,-1)),a[10]||(a[10]=t("strong",null,"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:",-1)),u(" "+e(((F=o.data)==null?void 0:F.quantity)||0),1),a[11]||(a[11]=t("br",null,null,-1)),a[12]||(a[12]=t("strong",null,"Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠ:",-1)),u(" "+e(((T=o.data)==null?void 0:T.price_cost)||0),1),a[13]||(a[13]=t("br",null,null,-1)),a[14]||(a[14]=t("strong",null,"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:",-1)),u(" "+e(((j=o.data)==null?void 0:j.price)||0),1)])]),t("div",$t,[t("label",Ct,[a[15]||(a[15]=t("i",{class:"bi bi-currency-dollar"},null,-1)),u(" "+e(o.translations.price_cost),1)]),w(t("input",{id:"price_cost",type:"number",step:"0.01",class:"form-control",placeholder:o.translations.price_cost,"onUpdate:modelValue":a[0]||(a[0]=v=>l.value.price_cost=v),required:""},null,8,qt),[[D,l.value.price_cost]])]),t("div",Bt,[t("label",St,[a[16]||(a[16]=t("i",{class:"bi bi-tag"},null,-1)),u(" "+e(o.translations.price),1)]),w(t("input",{id:"price",type:"number",step:"0.01",class:"form-control",placeholder:o.translations.price,"onUpdate:modelValue":a[1]||(a[1]=v=>l.value.price=v),required:""},null,8,Pt),[[D,l.value.price]])]),t("div",Vt,[t("label",Ut,[a[17]||(a[17]=t("i",{class:"bi bi-box"},null,-1)),u(" "+e(o.translations.quantity),1)]),w(t("input",{id:"quantity",type:"number",min:"1",class:"form-control",placeholder:o.translations.quantity,"onUpdate:modelValue":a[2]||(a[2]=v=>l.value.quantity=v),required:""},null,8,Ft),[[D,l.value.quantity]])]),t("div",Tt,[a[19]||(a[19]=t("label",{for:"currency",class:"form-label"},[t("i",{class:"bi bi-currency-exchange"}),u(" Ø§Ù„Ø¹Ù…Ù„Ø© ")],-1)),w(t("select",{id:"currency",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=v=>l.value.currency=v)},a[18]||(a[18]=[t("option",{value:"IQD"},"Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ",-1),t("option",{value:"$"},"Ø¯ÙˆÙ„Ø§Ø±",-1)]),512),[[A,l.value.currency]])]),t("div",jt,[t("label",Et,[a[20]||(a[20]=t("i",{class:"bi bi-calendar"},null,-1)),u(" "+e(o.translations.date),1)]),w(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=v=>l.value.date=v),required:""},null,512),[[D,l.value.date]])]),t("div",Dt,[a[21]||(a[21]=t("label",{class:"form-label"},[t("i",{class:"bi bi-calculator"}),u(" Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ© ")],-1)),t("div",It,[t("strong",null,e(I())+" "+e(l.value.currency),1)])]),t("div",Lt,[t("div",Ot,[w(t("input",{class:"form-check-input",type:"checkbox",id:"withdraw_from_box","onUpdate:modelValue":a[5]||(a[5]=v=>l.value.withdraw_from_box=v)},null,512),[[lt,l.value.withdraw_from_box]]),a[22]||(a[22]=t("label",{class:"form-check-label",for:"withdraw_from_box"},[t("i",{class:"bi bi-wallet2"}),u(" Ø³Ø­Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ")],-1))]),t("small",Mt," Ø¹Ù†Ø¯ ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø±ØŒ Ø³ÙŠØªÙ… Ø³Ø­Ø¨ "+e(I())+" "+e(l.value.currency)+" Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ",1)])])]),t("div",zt,[t("div",At,[t("button",{class:"btn btn-secondary flex-fill",onClick:a[6]||(a[6]=v=>c.$emit("close")),disabled:_.value},a[23]||(a[23]=[t("i",{class:"bi bi-x-circle"},null,-1),u(" Ø¥Ù„ØºØ§Ø¡ ")]),8,Nt),t("button",{class:"btn btn-primary flex-fill",onClick:C,disabled:_.value||l.value.quantity<=0||l.value.price_cost<=0||l.value.price<=0},[_.value?(r(),d("span",Qt)):(r(),d("i",Gt)),u(" "+e(_.value?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª"),1)],8,Rt)])])])])])):f("",!0)]}),_:1}))}},Jt={class:"pagetitle dark:text-white"},Kt={class:"dark:text-white"},Xt={class:"breadcrumb"},Yt={class:"breadcrumb-item"},Wt={class:"breadcrumb-item active dark:text-white"},Zt={class:"section dashboard"},ts={class:"row mb-4"},ss={class:"col-xl-3 col-md-6"},es={class:"card info-card sales-card"},os={class:"card-body"},ns={class:"card-title"},as={class:"d-flex align-items-center"},is={class:"ps-3"},ls={class:"text-success small pt-1 fw-bold"},rs={class:"col-xl-3 col-md-6"},cs={class:"card info-card revenue-card"},ds={class:"card-body"},us={class:"card-title"},ms={class:"d-flex align-items-center"},bs={class:"ps-3"},hs={class:"text-warning small pt-1 fw-bold"},vs={class:"col-xl-3 col-md-6"},ps={class:"card info-card customers-card"},fs={class:"card-body"},gs={class:"card-title"},_s={class:"d-flex align-items-center"},ys={class:"ps-3"},xs={class:"text-success small pt-1 fw-bold"},ws={class:"col-xl-3 col-md-6"},ks={class:"card info-card revenue-card"},$s={class:"card-body"},Cs={class:"card-title"},qs={class:"d-flex align-items-center"},Bs={class:"ps-3"},Ss={class:"text-primary small pt-1 fw-bold"},Ps={class:"card"},Vs={class:"card-header d-flex justify-content-between align-items-center"},Us={class:"card-title mb-0"},Fs={class:"d-flex gap-2"},Ts={class:"card-body"},js={class:"row mb-4"},Es={class:"col-md-4"},Ds={class:"search-box"},Is=["placeholder"],Ls={class:"col-md-2"},Os={value:""},Ms={value:"active"},zs={value:"inactive"},As={class:"col-md-2"},Ns={value:""},Rs={value:"low"},Qs={value:"out"},Gs={value:"available"},Hs={class:"col-md-2"},Js={value:"name"},Ks={value:"price"},Xs={value:"quantity"},Ys={value:"created"},Ws={class:"col-md-2"},Zs={key:0},te={class:"table-responsive"},se={class:"table table-hover"},ee={class:"table-dark"},oe={scope:"col"},ne={scope:"col"},ae={scope:"col"},ie={scope:"col"},le={scope:"col"},re={scope:"col",class:"text-center"},ce={class:"text-center"},de={class:"product-image-container"},ue=["src","alt"],me={key:0,class:"stock-badge low-stock"},be={key:1,class:"stock-badge out-of-stock"},he={class:"product-info"},ve={class:"product-name mb-1"},pe={class:"text-muted"},fe={class:"text-muted"},ge={class:"barcode-info"},_e={key:0,class:"barcode-text"},ye={key:1,class:"text-muted"},xe={class:"stock-info"},we={class:"d-block text-muted"},ke={class:"price-info"},$e={class:"price-amount"},Ce={class:"d-block text-muted"},qe={class:"status-toggle"},Be={class:"switch"},Se=["checked","onChange"],Pe={class:"action-buttons"},Ve={class:"btn-group-vertical",role:"group"},Ue=["href"],Fe=["onClick"],Te={class:"btn-group",role:"group"},je=["onClick","disabled"],Ee=["onClick"],De=["onClick"],Ie={key:1,class:"row"},Le={class:"card product-card h-100"},Oe={class:"card-body"},Me={class:"product-image-container mb-3"},ze=["src","alt"],Ae={key:0,class:"stock-badge low-stock"},Ne={key:1,class:"stock-badge out-of-stock"},Re={class:"card-title"},Qe={class:"card-text text-muted small"},Ge={class:"row mb-3"},He={class:"col-6"},Je={class:"text-muted d-block"},Ke={class:"col-6"},Xe={class:"text-muted d-block"},Ye={class:"fw-bold text-primary"},We={class:"d-flex justify-content-between align-items-center"},Ze={class:"status-toggle"},to={class:"switch"},so=["checked","onChange"],eo={class:"btn-group",role:"group"},oo=["href"],no=["onClick"],ao=["onClick"],io={__name:"index",props:{products:Object,translations:Object},setup(o){const m=o,S=dt(),y=Z(),g=x(!1),l=x({}),_=x(!1);x(!1),x(null),x(null);const $=x({checking:!1,isValid:!0,message:""}),h=ut({search:"",status:"",stock:"",sort:"name"}),C=x("table"),I=async i=>{if(!i||i.length<3){$.value={checking:!1,isValid:!0,message:""};return}$.value.checking=!0;try{const p=await(await fetch(route("products.checkBarcodeUnique",i))).json();$.value={checking:!1,isValid:p.unique,message:p.message},p.unique||y.warning(p.message)}catch(s){console.error("Barcode validation error:",s),$.value={checking:!1,isValid:!1,message:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯"}}};W.debounce(I,500);const c=W.debounce(()=>{E()},500),a=i=>{y.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),window.location.reload()},P=()=>{C.value=C.value==="table"?"grid":"table"},V=()=>{h.search="",h.status="",h.stock="",h.sort="name",E()},F=i=>i.image&&i.image!=="products/default_product.png"?`/storage/${i.image}`:"/dashboard-assets/img/product-placeholder.svg",T=i=>{i.target.src="/dashboard-assets/img/product-placeholder.svg"},j=i=>i===0?"text-danger":i<=5?"text-warning":"text-success",v=i=>parseFloat(i||0).toFixed(2),tt=i=>i?new Date(i).toLocaleDateString("ar-SA"):"-",st=()=>{var i;return(i=m.products)!=null&&i.data?m.products.data.filter(s=>s.quantity<=5).length:0},et=()=>{var i;return(i=m.products)!=null&&i.data?m.products.data.filter(s=>s.is_active).length:0},ot=()=>{var s;return(s=m.products)!=null&&s.data?m.products.data.reduce((p,B)=>p+parseFloat(B.price||0)*parseInt(B.quantity||0),0).toFixed(2):"0.00"},nt=async i=>{_.value=!0;try{const p=await(await fetch(route("barcode.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({product_id:i.id,type:"PNG",width:2,height:30})})).json();p.success?(y.success("ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­"),window.location.reload()):y.error(p.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}catch(s){console.error("Generate barcode error:",s),y.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}finally{_.value=!1}},at=async i=>{if(!i.barcode){y.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©");return}_.value=!0;try{const s=new URLSearchParams({code:i.barcode,type:"PNG",width:2,height:30}),p=await fetch(`/barcode/preview?${s}`);if(!p.ok)throw new Error("Failed to generate barcode image");const B=await p.blob(),k=URL.createObjectURL(B),b=document.createElement("div");b.id="barcode-print-overlay",b.style.position="fixed",b.style.top="0",b.style.left="0",b.style.width="100%",b.style.height="100%",b.style.backgroundColor="white",b.style.zIndex="9999",b.style.padding="20px",b.style.textAlign="center",b.style.fontFamily="Arial, sans-serif",b.style.overflow="auto",b.innerHTML=`
      <style>
        @media print {
          body { margin: 0; padding: 0; }
          .print-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 20px !important; 
            border: none !important;
            box-shadow: none !important;
          }
          .barcode-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 30px !important; 
            border: 2px solid #000 !important;
            background: white !important;
          }
          .barcode-image { 
            width: 100% !important; 
            height: auto !important; 
            min-height: 300px !important; 
            max-height: 500px !important;
            border: 1px solid #000 !important;
          }
          .product-name { 
            font-size: 24px !important; 
            font-weight: bold !important; 
            margin-bottom: 20px !important; 
            text-align: center !important;
          }
          .barcode-text { 
            font-size: 18px !important; 
            margin-top: 20px !important; 
            font-family: monospace !important; 
            text-align: center !important;
            font-weight: bold !important;
          }
          .no-print { display: none !important; }
        }
      </style>
      <div class="print-container" style="max-width: 400px; margin: 50px auto; border: 2px solid #333; padding: 30px; background: white; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #333;">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</h3>
        
        <div class="barcode-container" style="border: 1px solid #ddd; padding: 20px; margin: 20px 0; background: #f9f9f9;">
          <div class="product-name" style="font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #2c3e50;">${i.name||"Product"}</div>
          <img class="barcode-image" src="${k}" alt="Barcode" style="max-width: 100%;width: 100%; height: auto; border: 1px solid #ccc;" onload="console.log('Barcode image loaded successfully')" onerror="console.error('Failed to load barcode image')">
          <div class="barcode-text" style="font-size: 14px; margin-top: 15px; font-family: monospace; color: #666;">${i.barcode}</div>
        </div>
        
        <div class="no-print" style="margin-top: 30px;">
          <button onclick="printBarcodeContent()" style="padding: 12px 25px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 15px; font-size: 16px;">
            <i class="bi bi-printer"></i> Ø·Ø¨Ø§Ø¹Ø©
          </button>
          <button onclick="closePrintOverlay()" style="padding: 12px 25px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
            <i class="bi bi-x"></i> Ø¥Ù„ØºØ§Ø¡
          </button>
        </div>
        
        <div class="no-print" style="margin-top: 20px; font-size: 12px; color: #666;">
          <p>ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø®ØªØ± "Microsoft Print to PDF" Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¥Ù„Ù‰ Ù…Ù„Ù PDF</p>
        </div>
      </div>
    `,window.printBarcodeContent=function(){const n=b.querySelector("img");if(n&&!n.complete){n.onload=function(){window.print()};return}window.print()},window.closePrintOverlay=function(){document.body.removeChild(b),k&&URL.revokeObjectURL(k)},document.body.appendChild(b),y.success("ØªÙ… ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©. Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰."),k&&setTimeout(()=>{document.getElementById("barcode-print-overlay")&&URL.revokeObjectURL(k)},3e4)}catch(s){console.error("Print error:",s),y.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©")}finally{_.value=!1}},E=()=>{R.get(route("products.index"),h,{preserveState:!0,preserveScroll:!0})},q=i=>S.props.auth_permissions.includes(i),H=i=>{U.fire({title:m.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:m.translations.yes,cancelButtonText:m.translations.cancel}).then(s=>{s.isConfirmed&&R.post(`/products/${i}/activate`,{onSuccess:()=>{U.fire("Updated !","product stuaus item has been updated.","success")},onError:()=>{U.fire("Error!","There was an issue updating product status.","error")}})})},J=i=>{U.fire({title:m.translations.are_you_sure,text:m.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:m.translations.yes,cancelButtonText:m.translations.cancel}).then(s=>{s.isConfirmed&&R.delete("products/"+i,{onSuccess:()=>{U.fire({title:m.translations.data_deleted_successfully,icon:"success"})},onError:()=>{U.fire("Error!","There was an issue deleting the product.","error")}})})};return(i,s)=>(r(),G(mt,{translations:o.translations},{default:z(()=>{var p,B,k,b;return[t("div",Jt,[t("h1",Kt,e(o.translations.products),1),t("nav",null,[t("ol",Xt,[t("li",Yt,[Q(O(K),{class:"nav-link dark:text-white",href:i.route("dashboard")},{default:z(()=>[u(e(o.translations.home),1)]),_:1},8,["href"])]),t("li",Wt,e(o.translations.products),1)])])]),t("section",Zt,[t("div",ts,[t("div",ss,[t("div",es,[t("div",os,[t("h5",ns,[u(e(o.translations.total_products)+" ",1),t("span",null,"| "+e(o.translations.all),1)]),t("div",as,[s[6]||(s[6]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-box-seam"})],-1)),t("div",is,[t("h6",null,e(((p=m.products)==null?void 0:p.total)||0),1),t("span",ls,e(o.translations.products),1)])])])])]),t("div",rs,[t("div",cs,[t("div",ds,[t("h5",us,[u(e(o.translations.low_stock)+" ",1),t("span",null,"| "+e(o.translations.warning),1)]),t("div",ms,[s[7]||(s[7]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-exclamation-triangle"})],-1)),t("div",bs,[t("h6",null,e(st()),1),t("span",hs,e(o.translations.items),1)])])])])]),t("div",vs,[t("div",ps,[t("div",fs,[t("h5",gs,[u(e(o.translations.active_products)+" ",1),t("span",null,"| "+e(o.translations.enabled),1)]),t("div",_s,[s[8]||(s[8]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",ys,[t("h6",null,e(et()),1),t("span",xs,e(o.translations.active),1)])])])])]),t("div",ws,[t("div",ks,[t("div",$s,[t("h5",Cs,[u(e(o.translations.total_value)+" ",1),t("span",null,"| "+e(o.translations.inventory),1)]),t("div",qs,[s[9]||(s[9]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",Bs,[t("h6",null,e(ot()),1),t("span",Ss,e(o.translations.value),1)])])])])])]),t("div",Ps,[t("div",Vs,[t("h5",Us,[s[10]||(s[10]=t("i",{class:"bi bi-box-seam me-2"},null,-1)),u(" "+e(o.translations.products_management),1)]),t("div",Fs,[t("button",{class:"btn btn-outline-primary",onClick:P},[t("i",{class:M(C.value==="grid"?"bi bi-list":"bi bi-grid")},null,2),u(" "+e(C.value==="grid"?o.translations.list_view:o.translations.grid_view),1)]),q("create product")?(r(),G(O(K),{key:0,class:"btn btn-primary",href:i.route("products.create")},{default:z(()=>[s[11]||(s[11]=t("i",{class:"bi bi-plus-circle"},null,-1)),u(" "+e(o.translations.add_product),1)]),_:1},8,["href"])):f("",!0)])]),t("div",Ts,[t("div",js,[t("div",Es,[t("div",Ds,[w(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=n=>h.search=n),placeholder:o.translations.search_by_name_or_barcode,onInput:s[1]||(s[1]=(...n)=>O(c)&&O(c)(...n))},null,40,Is),[[D,h.search]]),s[12]||(s[12]=t("i",{class:"bi bi-search search-icon"},null,-1))])]),t("div",Ls,[w(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=n=>h.status=n),onChange:E},[t("option",Os,e(o.translations.all_status),1),t("option",Ms,e(o.translations.active),1),t("option",zs,e(o.translations.inactive),1)],544),[[A,h.status]])]),t("div",As,[w(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=n=>h.stock=n),onChange:E},[t("option",Ns,e(o.translations.all_stock),1),t("option",Rs,e(o.translations.low_stock),1),t("option",Qs,e(o.translations.out_of_stock),1),t("option",Gs,e(o.translations.in_stock),1)],544),[[A,h.stock]])]),t("div",Hs,[w(t("select",{class:"form-select","onUpdate:modelValue":s[4]||(s[4]=n=>h.sort=n),onChange:E},[t("option",Js,e(o.translations.sort_by_name),1),t("option",Ks,e(o.translations.sort_by_price),1),t("option",Xs,e(o.translations.sort_by_quantity),1),t("option",Ys,e(o.translations.sort_by_date),1)],544),[[A,h.sort]])]),t("div",Ws,[t("button",{class:"btn btn-outline-secondary w-100",onClick:V},[s[13]||(s[13]=t("i",{class:"bi bi-arrow-clockwise"},null,-1)),u(" "+e(o.translations.clear),1)])])]),C.value==="table"?(r(),d("div",Zs,[t("div",te,[t("table",se,[t("thead",ee,[t("tr",null,[s[14]||(s[14]=t("th",{scope:"col",class:"text-center"},[t("i",{class:"bi bi-image"})],-1)),t("th",oe,e(o.translations.product_info),1),t("th",ne,e(o.translations.barcode),1),t("th",ae,e(o.translations.stock),1),t("th",ie,e(o.translations.price),1),t("th",le,e(o.translations.status),1),t("th",re,e(o.translations.actions),1)])]),t("tbody",null,[(r(!0),d(X,null,Y((B=m.products)==null?void 0:B.data,(n,N)=>(r(),d("tr",{key:n.id,class:"product-row"},[t("td",ce,[t("div",de,[t("img",{src:F(n),alt:n.name,class:"product-image",onError:T},null,40,ue),n.quantity<=5?(r(),d("div",me,s[15]||(s[15]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):f("",!0),n.quantity===0?(r(),d("div",be,s[16]||(s[16]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):f("",!0)])]),t("td",null,[t("div",he,[t("h6",ve,e(n.name),1),t("small",pe,e(n.model),1),s[17]||(s[17]=t("br",null,null,-1)),t("small",fe,e(o.translations.created)+": "+e(tt(n.created)),1)])]),t("td",null,[t("div",ge,[n.barcode?(r(),d("span",_e,e(n.barcode),1)):(r(),d("span",ye,e(o.translations.no_barcode),1))])]),t("td",null,[t("div",xe,[t("span",{class:M(["stock-quantity",j(n.quantity)])},e(n.quantity),3),t("small",we,e(o.translations.units),1)])]),t("td",null,[t("div",ke,[t("span",$e,e(v(n.price)),1),t("small",Ce,e(o.translations.selling_price),1)])]),t("td",null,[t("div",qe,[t("label",Be,[t("input",{type:"checkbox",checked:n.is_active==1,onChange:L=>H(n.id)},null,40,Se),s[18]||(s[18]=t("span",{class:"slider round"},null,-1))]),t("small",{class:M(["d-block mt-1",n.is_active?"text-success":"text-danger"])},e(n.is_active?o.translations.active:o.translations.inactive),3)])]),t("td",null,[t("div",Pe,[t("div",Ve,[q("update product")?(r(),d("button",{key:0,class:"btn btn-sm btn-outline-primary mb-1",href:i.route("products.edit",{product:n.id}),title:"{{ translations.edit }}"},s[19]||(s[19]=[t("i",{class:"bi bi-pencil"},null,-1)]),8,Ue)):f("",!0),q("update product")?(r(),d("button",{key:1,class:"btn btn-sm btn-outline-success mb-1",onClick:L=>{g.value=!0,l.value=n},title:"{{ translations.add_stock }}"},s[20]||(s[20]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,Fe)):f("",!0),t("div",Te,[n.barcode?f("",!0):(r(),d("button",{key:0,class:"btn btn-sm btn-outline-info",onClick:L=>nt(n),disabled:_.value,title:"{{ translations.generate_barcode }}"},s[21]||(s[21]=[t("i",{class:"bi bi-qr-code"},null,-1)]),8,je)),n.barcode?(r(),d("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:L=>at(n),title:"{{ translations.print_barcode }}"},s[22]||(s[22]=[t("i",{class:"bi bi-printer"},null,-1)]),8,Ee)):f("",!0)]),q("delete product")?(r(),d("button",{key:2,class:"btn btn-sm btn-outline-danger mt-1",onClick:L=>J(n.id),title:"{{ translations.delete }}"},s[23]||(s[23]=[t("i",{class:"bi bi-trash"},null,-1)]),8,De)):f("",!0)])])])]))),128))])])])])):(r(),d("div",Ie,[(r(!0),d(X,null,Y((k=m.products)==null?void 0:k.data,n=>(r(),d("div",{key:n.id,class:"col-xl-3 col-lg-4 col-md-6 mb-4"},[t("div",Le,[t("div",Oe,[t("div",Me,[t("img",{src:F(n),alt:n.name,class:"product-image-large",onError:T},null,40,ze),n.quantity<=5?(r(),d("div",Ae,s[24]||(s[24]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):f("",!0),n.quantity===0?(r(),d("div",Ne,s[25]||(s[25]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):f("",!0)]),t("h6",Re,e(n.name),1),t("p",Qe,e(n.model),1),t("div",Ge,[t("div",He,[t("small",Je,e(o.translations.stock),1),t("span",{class:M(["fw-bold",j(n.quantity)])},e(n.quantity),3)]),t("div",Ke,[t("small",Xe,e(o.translations.price),1),t("span",Ye,e(v(n.price)),1)])]),t("div",We,[t("div",Ze,[t("label",to,[t("input",{type:"checkbox",checked:n.is_active==1,onChange:N=>H(n.id)},null,40,so),s[26]||(s[26]=t("span",{class:"slider round"},null,-1))])]),t("div",eo,[q("update product")?(r(),d("button",{key:0,class:"btn btn-sm btn-outline-primary",href:i.route("products.edit",{product:n.id}),title:"{{ translations.edit }}"},s[27]||(s[27]=[t("i",{class:"bi bi-pencil"},null,-1)]),8,oo)):f("",!0),q("update product")?(r(),d("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:N=>{g.value=!0,l.value=n},title:"{{ translations.add_stock }}"},s[28]||(s[28]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,no)):f("",!0),q("delete product")?(r(),d("button",{key:2,class:"btn btn-sm btn-outline-danger",onClick:N=>J(n.id),title:"{{ translations.delete }}"},s[29]||(s[29]=[t("i",{class:"bi bi-trash"},null,-1)]),8,ao)):f("",!0)])])])])]))),128))]))])]),Q(bt,{links:(b=m.products)==null?void 0:b.links},null,8,["links"])]),Q(Ht,{show:g.value,translations:o.translations,data:l.value,onClose:s[5]||(s[5]=n=>g.value=!1),onSuccess:a},null,8,["show","translations","data"])]}),_:1},8,["translations"]))}},vo=ht(io,[["__scopeId","data-v-2af552b0"]]);export{vo as default};
