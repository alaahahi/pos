import{r as k,z as j,k as V,a as u,c as m,b as t,t as s,j as P,l as _,x as b,e as v,d as C,g as E,E as M}from"./app-rfKy2ZWt.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"modal-mask"},T={class:"modal-wrapper"},U={class:"modal-container"},$={class:"modal-header"},B={class:"modal-body"},I={class:"mb-3"},N={class:"form-label"},O={class:"input-group"},z={class:"input-group-text"},q={class:"mb-3"},A={class:"form-label"},G={class:"input-group"},H={class:"input-group-text"},J={class:"text-muted"},K={class:"mb-3"},L={class:"form-label"},Q={class:"input-group"},R={class:"input-group-text"},W={class:"text-muted"},X={class:"mb-4"},Y={class:"card bg-light"},Z={class:"card-body"},tt={class:"card-title"},st={class:"d-flex justify-content-between mb-2"},et={key:0,class:"d-flex justify-content-between mb-2"},ot={class:"text-success"},at={key:1,class:"d-flex justify-content-between mb-2"},nt={class:"text-danger"},it={class:"d-flex justify-content-between"},lt={class:"text-primary"},ct={class:"mb-3"},dt={class:"form-label"},rt=["placeholder"],ut={class:"d-flex justify-content-center gap-2"},mt=["disabled"],_t={key:0,class:"spinner-border spinner-border-sm me-2"},bt={__name:"PricingEditModal",props:{order:Object,translations:Object},emits:["close","success"],setup(e,{emit:x}){const c=e,F=x,d=k(!1),o=j({base_price:parseFloat(c.order.base_price)||0,additional_cost:parseFloat(c.order.additional_cost)||0,discount:parseFloat(c.order.discount)||0,notes:c.order.notes||""}),p=V(()=>{const n=parseFloat(o.base_price)||0,a=parseFloat(o.additional_cost)||0,r=parseFloat(o.discount)||0;return(n+a-r).toFixed(2)}),f=()=>{o.total_price=p.value},l=n=>n==="dollar"?"دولار":"دينار",w=()=>{d.value=!0;const n={base_price:parseFloat(o.base_price)||0,additional_cost:parseFloat(o.additional_cost)||0,discount:parseFloat(o.discount)||0,total_price:parseFloat(p.value)||0,notes:o.notes};E.patch(route("decoration.orders.pricing",c.order.id),n,{onSuccess:()=>{d.value=!1,M.post("/logs",{module_name:"Decoration Order",action:"Pricing Modal Submit",affected_record_id:c.order.id,updated_data:n}).catch(()=>{}),F("success")},onError:()=>{d.value=!1}})};return(n,a)=>{var r,h,y,g;return u(),m("div",D,[t("div",T,[t("div",U,[t("div",$,[t("h3",null,s(e.translations.edit_pricing),1),t("button",{onClick:a[0]||(a[0]=i=>n.$emit("close")),class:"btn-close"})]),t("div",B,[t("form",{onSubmit:P(w,["prevent"])},[t("div",I,[t("label",N,s(e.translations.base_price),1),t("div",O,[_(t("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=i=>o.base_price=i),readonly:""},null,512),[[b,o.base_price]]),t("span",z,s(l(e.order.currency)),1)])]),t("div",q,[t("label",A,s(e.translations.additional_cost),1),t("div",G,[_(t("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=i=>o.additional_cost=i),onInput:f},null,544),[[b,o.additional_cost]]),t("span",H,s(l(e.order.currency)),1)]),t("small",J,s(e.translations.additional_cost_help),1)]),t("div",K,[t("label",L,s(e.translations.discount),1),t("div",Q,[_(t("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=i=>o.discount=i),onInput:f},null,544),[[b,o.discount]]),t("span",R,s(l(e.order.currency)),1)]),t("small",W,s(e.translations.discount_help),1)]),t("div",X,[t("div",Y,[t("div",Z,[t("h6",tt,s(e.translations.price_summary),1),t("div",st,[t("span",null,s(e.translations.base_price)+":",1),t("span",null,s(o.base_price)+" "+s(l((r=e.order.decoration)==null?void 0:r.currency)),1)]),o.additional_cost>0?(u(),m("div",et,[t("span",null,s(e.translations.additional_cost)+":",1),t("span",ot,"+"+s(o.additional_cost)+" "+s(l((h=e.order.decoration)==null?void 0:h.currency)),1)])):v("",!0),o.discount>0?(u(),m("div",at,[t("span",null,s(e.translations.discount)+":",1),t("span",nt,"-"+s(o.discount)+" "+s(l((y=e.order.decoration)==null?void 0:y.currency)),1)])):v("",!0),a[6]||(a[6]=t("hr",null,null,-1)),t("div",it,[t("strong",null,s(e.translations.total_price)+":",1),t("strong",lt,s(p.value)+" "+s(l((g=e.order.decoration)==null?void 0:g.currency)),1)])])])]),t("div",ct,[t("label",dt,s(e.translations.notes),1),_(t("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":a[4]||(a[4]=i=>o.notes=i),placeholder:e.translations.add_notes},null,8,rt),[[b,o.notes]])]),t("div",ut,[t("button",{type:"button",class:"btn btn-secondary text-center w-100",onClick:a[5]||(a[5]=i=>n.$emit("close"))},s(e.translations.cancel),1),t("button",{type:"submit",class:"btn btn-primary w-100 text-center",disabled:d.value},[d.value?(u(),m("span",_t)):v("",!0),C(" "+s(e.translations.update_pricing),1)],8,mt)])],32)])])])])}}},vt=S(bt,[["__scopeId","data-v-004c034d"]]);export{vt as P};
