import{s as nt,r as w,B as ft,a as u,h as H,w as E,c as m,b as t,d as c,t as o,l as b,x,A as J,v as I,e as f,D as pt,E as gt,Q as yt,y as et,g as L,i as R,u as F,p as G,n as j,F as ot,f as lt,z as _t}from"./app-hyZiV4Sx.js";import{_ as kt}from"./AuthenticatedLayout-BeBCZfZC.js";import{_ as wt}from"./Pagination-Brbe5kiB.js";import{a as xt}from"./BarcodePrinter.vue_vue_type_style_index_0_scoped_4fb4eefc_lang-4EuhrVZa.js";import{_ as $t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as D}from"./sweetalert2.esm.all-DwEdJQJv.js";import{l as at}from"./lodash-D12HjqaS.js";const Ct={key:0,class:"modal-mask"},St={class:"modal-wrapper max-h-[80vh]"},qt={class:"modal-container"},Vt={class:"modal-header"},Bt={class:"text-primary"},Pt={class:"modal-body"},Ut={class:"row g-3"},Tt={class:"col-12"},Dt={class:"alert alert-info"},zt={class:"col-md-6"},Ft={for:"price_cost",class:"form-label"},jt=["placeholder"],Et={class:"col-md-6"},It={for:"price",class:"form-label"},Mt=["placeholder"],Nt={class:"col-md-6"},Ht={for:"quantity",class:"form-label"},Qt=["placeholder"],At={class:"col-md-6"},Wt={class:"col-md-6"},Ot={for:"date",class:"form-label"},Lt={class:"col-md-6"},Gt={class:"form-control-plaintext bg-light p-2 rounded"},Jt={class:"col-12"},Rt={class:"form-check"},Xt={class:"text-muted"},Yt={class:"modal-footer"},Kt={class:"d-flex w-100 gap-2"},Zt=["disabled"],ts=["disabled"],ss={key:0,class:"spinner-border spinner-border-sm me-2"},es={key:1,class:"bi bi-check-circle"},os={__name:"ModalPurchasesProduct",props:{show:Boolean,data:Object,accounts:Array,translations:Array},emits:["close","success"],setup(l,{emit:v}){const q=l,_=v,y=nt(),r=w({date:$(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}),g=w(!1);function $(){const d=new Date,a=d.getFullYear(),z=String(d.getMonth()+1).padStart(2,"0"),B=String(d.getDate()).padStart(2,"0");return`${a}-${z}-${B}`}const C=()=>{r.value={date:$(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}};ft(()=>q.data,d=>{d&&d.id&&(r.value.price_cost=d.price_cost||0,r.value.price=d.price||0,r.value.quantity=0)},{immediate:!0});const n=async()=>{if(!q.data||!q.data.id){y.error("لم يتم تحديد المنتج");return}if(r.value.quantity<=0){y.error("يجب إدخال كمية أكبر من صفر");return}if(r.value.price_cost<=0){y.error("يجب إدخال سعر التكلفة");return}if(r.value.price<=0){y.error("يجب إدخال سعر البيع");return}g.value=!0;try{console.log("Sending data:",{product_id:q.data.id,quantity:r.value.quantity,price_cost:r.value.price_cost,price:r.value.price,date:r.value.date,withdraw_from_box:r.value.withdraw_from_box,currency:r.value.currency});const d=await gt.post("api/products/process-purchase",{product_id:q.data.id,quantity:r.value.quantity,price_cost:r.value.price_cost,price:r.value.price,date:r.value.date,withdraw_from_box:r.value.withdraw_from_box,currency:r.value.currency});d.data.success?(y.success(d.data.message),_("success",d.data),_("close"),C()):y.error(d.data.message||"حدث خطأ أثناء المعالجة")}catch(d){console.error("Purchase error:",d),d.response&&d.response.data&&d.response.data.message?y.error(d.response.data.message):y.error("حدث خطأ أثناء معالجة المشتريات")}finally{g.value=!1}},V=()=>(r.value.quantity*r.value.price_cost).toFixed(2);return(d,a)=>(u(),H(pt,{name:"modal"},{default:E(()=>{var z,B,Q,A,W;return[l.show?(u(),m("div",Ct,[t("div",St,[t("div",qt,[t("div",Vt,[t("h3",Bt,[a[7]||(a[7]=t("i",{class:"bi bi-cart-plus"},null,-1)),c(" إضافة مشتريات - "+o(((z=l.data)==null?void 0:z.name)||"منتج"),1)])]),t("div",Pt,[t("div",Ut,[t("div",Tt,[t("div",Dt,[a[8]||(a[8]=t("strong",null,"المنتج:",-1)),c(" "+o(((B=l.data)==null?void 0:B.name)||"غير محدد"),1),a[9]||(a[9]=t("br",null,null,-1)),a[10]||(a[10]=t("strong",null,"الكمية الحالية:",-1)),c(" "+o(((Q=l.data)==null?void 0:Q.quantity)||0),1),a[11]||(a[11]=t("br",null,null,-1)),a[12]||(a[12]=t("strong",null,"سعر التكلفة الحالي:",-1)),c(" "+o(((A=l.data)==null?void 0:A.price_cost)||0),1),a[13]||(a[13]=t("br",null,null,-1)),a[14]||(a[14]=t("strong",null,"سعر البيع الحالي:",-1)),c(" "+o(((W=l.data)==null?void 0:W.price)||0),1)])]),t("div",zt,[t("label",Ft,[a[15]||(a[15]=t("i",{class:"bi bi-currency-dollar"},null,-1)),c(" "+o(l.translations.price_cost),1)]),b(t("input",{id:"price_cost",type:"number",step:"0.01",class:"form-control",placeholder:l.translations.price_cost,"onUpdate:modelValue":a[0]||(a[0]=p=>r.value.price_cost=p),required:""},null,8,jt),[[x,r.value.price_cost]])]),t("div",Et,[t("label",It,[a[16]||(a[16]=t("i",{class:"bi bi-tag"},null,-1)),c(" "+o(l.translations.price),1)]),b(t("input",{id:"price",type:"number",step:"0.01",class:"form-control",placeholder:l.translations.price,"onUpdate:modelValue":a[1]||(a[1]=p=>r.value.price=p),required:""},null,8,Mt),[[x,r.value.price]])]),t("div",Nt,[t("label",Ht,[a[17]||(a[17]=t("i",{class:"bi bi-box"},null,-1)),c(" "+o(l.translations.quantity),1)]),b(t("input",{id:"quantity",type:"number",min:"1",class:"form-control",placeholder:l.translations.quantity,"onUpdate:modelValue":a[2]||(a[2]=p=>r.value.quantity=p),required:""},null,8,Qt),[[x,r.value.quantity]])]),t("div",At,[a[19]||(a[19]=t("label",{for:"currency",class:"form-label"},[t("i",{class:"bi bi-currency-exchange"}),c(" العملة ")],-1)),b(t("select",{id:"currency",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=p=>r.value.currency=p)},a[18]||(a[18]=[t("option",{value:"IQD"},"دينار عراقي",-1),t("option",{value:"$"},"دولار",-1)]),512),[[J,r.value.currency]])]),t("div",Wt,[t("label",Ot,[a[20]||(a[20]=t("i",{class:"bi bi-calendar"},null,-1)),c(" "+o(l.translations.date),1)]),b(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=p=>r.value.date=p),required:""},null,512),[[x,r.value.date]])]),t("div",Lt,[a[21]||(a[21]=t("label",{class:"form-label"},[t("i",{class:"bi bi-calculator"}),c(" إجمالي التكلفة ")],-1)),t("div",Gt,[t("strong",null,o(V())+" "+o(r.value.currency),1)])]),t("div",Jt,[t("div",Rt,[b(t("input",{class:"form-check-input",type:"checkbox",id:"withdraw_from_box","onUpdate:modelValue":a[5]||(a[5]=p=>r.value.withdraw_from_box=p)},null,512),[[I,r.value.withdraw_from_box]]),a[22]||(a[22]=t("label",{class:"form-check-label",for:"withdraw_from_box"},[t("i",{class:"bi bi-wallet2"}),c(" سحب المبلغ من الصندوق تلقائياً ")],-1))]),t("small",Xt," عند تفعيل هذا الخيار، سيتم سحب "+o(V())+" "+o(r.value.currency)+" من الصندوق الرئيسي تلقائياً ",1)])])]),t("div",Yt,[t("div",Kt,[t("button",{class:"btn btn-secondary flex-fill",onClick:a[6]||(a[6]=p=>d.$emit("close")),disabled:g.value},a[23]||(a[23]=[t("i",{class:"bi bi-x-circle"},null,-1),c(" إلغاء ")]),8,Zt),t("button",{class:"btn btn-primary flex-fill",onClick:n,disabled:g.value||r.value.quantity<=0||r.value.price_cost<=0||r.value.price<=0},[g.value?(u(),m("span",ss)):(u(),m("i",es)),c(" "+o(g.value?"جاري المعالجة...":"تأكيد المشتريات"),1)],8,ts)])])])])])):f("",!0)]}),_:1}))}},ls={class:"pagetitle dark:text-white"},as={class:"dark:text-white"},ns={class:"breadcrumb"},is={class:"breadcrumb-item"},rs={class:"breadcrumb-item active dark:text-white"},ds={class:"section dashboard"},cs={class:"row mb-4"},us={class:"col-xl-3 col-md-6"},ms={class:"card info-card sales-card"},bs={class:"card-body"},vs={class:"card-title"},hs={class:"d-flex align-items-center"},fs={class:"ps-3"},ps={class:"text-success small pt-1 fw-bold"},gs={class:"col-xl-3 col-md-6"},ys={class:"card info-card customers-card"},_s={class:"card-body"},ks={class:"card-title"},ws={class:"d-flex align-items-center"},xs={class:"ps-3"},$s={class:"text-success small pt-1 fw-bold"},Cs={class:"col-xl-3 col-md-6"},Ss={class:"card info-card revenue-card"},qs={class:"card-body"},Vs={class:"card-title"},Bs={class:"d-flex align-items-center"},Ps={class:"ps-3"},Us={class:"text-primary small pt-1 fw-bold"},Ts={class:"col-xl-3 col-md-6"},Ds={class:"card info-card revenue-card"},zs={class:"card-body"},Fs={class:"card-title"},js={class:"d-flex align-items-center"},Es={class:"ps-3"},Is={class:"text-primary small pt-1 fw-bold"},Ms={class:"card"},Ns={class:"card-header d-flex justify-content-between align-items-center"},Hs={class:"card-title mb-0"},Qs={class:"d-flex gap-2"},As={class:"card-body"},Ws={class:"row mb-4"},Os={class:"col-md-4"},Ls={class:"search-box"},Gs=["placeholder"],Js={class:"col-md-2"},Rs={value:""},Xs={value:"active"},Ys={value:"inactive"},Ks={class:"col-md-2"},Zs={value:""},te={value:"low"},se={value:"out"},ee={value:"available"},oe={class:"col-md-2"},le={value:"name"},ae={value:"price"},ne={value:"quantity"},ie={value:"created"},re={class:"col-md-2"},de={key:0},ce={class:"table-responsive"},ue={class:"table table-hover"},me={class:"table-dark"},be={scope:"col"},ve={scope:"col"},he={scope:"col"},fe={scope:"col"},pe={scope:"col"},ge={scope:"col",class:"text-center"},ye={class:"text-center"},_e={class:"product-image-container"},ke=["src","alt"],we={key:0,class:"stock-badge low-stock"},xe={key:1,class:"stock-badge out-of-stock"},$e={class:"product-info"},Ce={class:"product-name mb-1"},Se={class:"text-muted"},qe={class:"text-muted"},Ve={class:"barcode-info"},Be={key:0,class:"barcode-text"},Pe={key:1,class:"text-muted"},Ue={class:"stock-info"},Te={class:"d-block text-muted"},De={class:"price-info"},ze={class:"price-amount"},Fe={class:"d-block text-muted"},je={class:"status-toggle"},Ee={class:"switch"},Ie=["checked","onChange"],Me={class:"featured-toggle mt-2"},Ne={class:"switch"},He=["checked","onChange"],Qe={key:0,class:"bi bi-star-fill"},Ae={key:0,class:"best-selling-badge mt-2"},We={class:"d-block mt-1 text-muted"},Oe={class:"action-buttons"},Le={class:"btn-group-vertical",role:"group"},Ge=["onClick"],Je={class:"btn-group",role:"group"},Re=["onClick","disabled"],Xe=["onClick"],Ye=["onClick"],Ke={key:1,class:"row"},Ze={class:"card product-card h-100"},to={class:"card-body"},so={class:"product-image-container mb-3"},eo=["src","alt"],oo={key:0,class:"stock-badge low-stock"},lo={key:1,class:"stock-badge out-of-stock"},ao={class:"card-title"},no={class:"card-text text-muted small"},io={class:"row mb-3"},ro={class:"col-6"},co={class:"text-muted d-block"},uo={class:"col-6"},mo={class:"text-muted d-block"},bo={class:"fw-bold text-primary"},vo={class:"d-flex justify-content-between align-items-center"},ho={class:"status-toggle"},fo={class:"switch"},po=["checked","onChange"],go={class:"btn-group",role:"group"},yo=["onClick"],_o=["onClick"],ko={class:"modal-dialog modal-lg"},wo={class:"modal-content"},xo={class:"modal-header"},$o={class:"modal-body"},Co={class:"alert alert-info mb-3"},So={class:"mb-3"},qo={class:"text-muted"},Vo={class:"barcode-settings p-3",style:{background:"#f8f9fa","border-radius":"8px",border:"1px solid #dee2e6"}},Bo={class:"row mb-2"},Po={class:"col-md-6"},Uo={class:"col-md-6"},To={class:"mb-3"},Do={class:"btn-group btn-group-sm mt-1",role:"group"},zo={class:"row"},Fo={class:"col-md-6"},jo={class:"text-muted"},Eo={class:"col-md-6"},Io={class:"text-muted"},Mo={class:"row mt-3"},No={class:"col-md-4"},Ho={class:"form-check"},Qo={class:"col-md-4"},Ao={class:"form-check"},Wo={class:"col-md-4"},Oo={class:"form-check"},Lo={key:0,class:"row mt-3"},Go={class:"col-md-6"},Jo={class:"col-md-6"},Ro={class:"form-check mt-4"},Xo={key:1,class:"row mt-2"},Yo={class:"col-md-6"},Ko={class:"form-check"},Zo={class:"modal-footer"},tl=["disabled"],sl={key:0,class:"spinner-border spinner-border-sm me-2"},el={__name:"index",props:{products:Object,translations:Array},setup(l){const v=l,q=yt(),_=nt(),y=w(!1),r=w({}),g=w(!1);w(!1),w(null),w(null);const $=w(!1),C=w(null),n=et({width:2,height:70,fontSize:10,margin:2,landscape:!0,highQuality:!0,pageWidth:38,pageHeight:26,copies:1,showBarcodeNumber:!0,showPrice:!1,price:0}),V=w({checking:!1,isValid:!0,message:""}),d=et({search:"",status:"",stock:"",sort:"created"}),a=w("table"),z=async i=>{if(!i||i.length<3){V.value={checking:!1,isValid:!0,message:""};return}V.value.checking=!0;try{const h=await(await fetch(route("products.checkBarcodeUnique",i))).json();V.value={checking:!1,isValid:h.unique,message:h.message},h.unique||_.warning(h.message)}catch(s){console.error("Barcode validation error:",s),V.value={checking:!1,isValid:!1,message:"خطأ في التحقق من الباركود"}}};at.debounce(z,500);const B=at.debounce(()=>{M()},500),Q=i=>{_.success("تم تحديث المنتج بنجاح"),window.location.reload()},A=()=>{a.value=a.value==="table"?"grid":"table"},W=()=>{d.search="",d.status="",d.stock="",d.sort="created",M()},p=i=>i.image&&i.image.trim()!==""?`/public/storage/${i.image}`:"/public/dashboard-assets/img/product-placeholder.svg",X=i=>{i.target.src="/dashboard-assets/img/product-placeholder.svg"},Y=i=>i===0?"text-danger":i<=5?"text-warning":"text-success",K=(i,s="IQD")=>parseFloat(i||0).toFixed(2)+" "+s,it=i=>i?new Date(i).toLocaleDateString("ar-SA"):"-",rt=()=>{var i;return(i=v.products)!=null&&i.data?v.products.data.filter(s=>s.is_active).length:0},dt=()=>{var s;return(s=v.products)!=null&&s.data?v.products.data.filter(h=>h.currency==="USD").reduce((h,k)=>h+parseFloat(k.price||0)*parseInt(k.quantity||0),0).toFixed(2):"0.00"},ct=()=>{var s;return(s=v.products)!=null&&s.data?v.products.data.filter(h=>h.currency==="IQD").reduce((h,k)=>h+parseFloat(k.price||0)*parseInt(k.quantity||0),0).toFixed(2):"0.00"},ut=async i=>{g.value=!0;try{const h=await(await fetch(route("barcode.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({product_id:i.id,type:"PNG",width:2,height:30})})).json();h.success?(_.success("تم توليد الباركود بنجاح"),window.location.reload()):_.error(h.message||"حدث خطأ أثناء توليد الباركود")}catch(s){console.error("Generate barcode error:",s),_.error("حدث خطأ أثناء توليد الباركود")}finally{g.value=!1}},mt=i=>{if(!i.barcode){_.error("لا يوجد باركود للطباعة");return}C.value=i,$.value=!0},bt=async()=>{if(C.value){g.value=!0;try{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");xt(i,C.value.barcode,{format:"CODE128",width:n.width,height:n.height,displayValue:!1,margin:n.margin,background:"#ffffff",lineColor:"#000000",xmlDocument:document});const s=new XMLSerializer().serializeToString(i),h="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(s))),k=window.open("","_blank","width=400,height=600");if(!k){_.error("فشل فتح نافذة الطباعة. يرجى السماح بالنوافذ المنبثقة.");return}const O=n.landscape?"landscape":"portrait",U=`${n.pageWidth}mm`,T=`${n.pageHeight}mm`,e=n.landscape?`${U} ${T}`:`${T} ${U}`,N=n.landscape?"18mm":"22mm";let S="";for(let st=0;st<n.copies;st++)S+=`
  <div class="label-page">
    <div class="label-container">
      <div class="product-name">${C.value.name}</div>
      <img class="barcode-image" src="${h}" alt="Barcode">
      ${n.showBarcodeNumber?`<div class="barcode-text">${C.value.barcode}</div>`:""}
      ${n.showPrice&&n.price>0?`<div class="price-text">${n.price} دينار</div>`:""}
    </div>
  </div>
      `;const ht=`
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>طباعة الباركود</title>
  <style>
    /* Optimized for thermal printers */
    @page { 
      size: ${e}; 
      margin: 0; 
      orientation: ${O};
    }
    
    @media print {
      * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        color-adjust: exact !important;
      }
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    
    .label-page {
      width: ${U};
      height: ${T};
      margin: 0;
      padding: 0;
      overflow: hidden;
      page-break-after: always;
    }
    
    .label-container {
      width: ${U};
      height: ${T};
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 1mm;
      box-sizing: border-box;
    }
    
    .product-name {
      width: 100%;
      font-size: ${n.fontSize}px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 1mm;
      line-height: 1.1;
      max-height: 8mm;
      overflow: hidden;
      word-wrap: break-word;
    }
    
    .barcode-image {
      width: auto;
      max-width: 90%;
      height: auto;
      max-height: ${N};
      margin: 1mm auto;
      display: block;
      object-fit: contain;
    }
    
    .barcode-text {
      width: 100%;
      font-size: ${Math.max(n.fontSize-2,4)}px;
      font-family: monospace;
      text-align: center;
      margin-top: 1mm;
      font-weight: bold;
    }
    
    .price-text {
      width: 100%;
      font-size: ${Math.max(n.fontSize-1,5)}px;
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 1mm;
      font-weight: bold;
      color: #dc3545;
    }
  </style>
</head>
<body>
  ${S}
  
  <script>
    window.onload = function() {
      setTimeout(function() {
        window.print();
        setTimeout(function() {
          window.close();
        }, 2000);
      }, 1500);
    }
  <\/script>
</body>
</html>
    `;k.document.write(ht),k.document.close(),$.value=!1,_.success(`تم إرسال ${n.copies} نسخة من الباركود للطباعة`)}catch(i){console.error("Print error:",i),_.error("حدث خطأ أثناء الطباعة")}finally{g.value=!1}}},M=()=>{L.get(route("products.index"),d,{preserveState:!0,preserveScroll:!0})},P=i=>q.props.auth_permissions.includes(i),Z=i=>{D.fire({title:v.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:v.translations.yes,cancelButtonText:v.translations.cancel}).then(s=>{s.isConfirmed&&L.post(`/products/${i}/activate`,{onSuccess:()=>{D.fire("Updated !","product stuaus item has been updated.","success")},onError:()=>{D.fire("Error!","There was an issue updating product status.","error")}})})},vt=i=>{L.post(`/products/${i}/toggle-featured`,{onSuccess:()=>{},onError:()=>{D.fire("خطأ!","حدث خطأ أثناء تحديث حالة المنتج المميز.","error")}})},tt=i=>{D.fire({title:v.translations.are_you_sure,text:v.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:v.translations.yes,cancelButtonText:v.translations.cancel}).then(s=>{s.isConfirmed&&L.delete("products/"+i,{onSuccess:()=>{D.fire({title:v.translations.data_deleted_successfully,icon:"success"})},onError:()=>{D.fire("Error!","There was an issue deleting the product.","error")}})})};return(i,s)=>(u(),H(kt,{translations:l.translations},{default:E(()=>{var h,k,O,U,T;return[t("div",ls,[t("h1",as,o(l.translations.products),1),t("nav",null,[t("ol",ns,[t("li",is,[R(F(G),{class:"nav-link dark:text-white",href:i.route("dashboard")},{default:E(()=>[c(o(l.translations.home),1)]),_:1},8,["href"])]),t("li",rs,o(l.translations.products),1)])])]),t("section",ds,[t("div",cs,[t("div",us,[t("div",ms,[t("div",bs,[t("h5",vs,[c(o(l.translations.total_products)+" ",1),t("span",null,"| "+o(l.translations.all),1)]),t("div",hs,[s[23]||(s[23]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-box-seam"})],-1)),t("div",fs,[t("h6",null,o(((h=v.products)==null?void 0:h.total)||0),1),t("span",ps,o(l.translations.products),1)])])])])]),t("div",gs,[t("div",ys,[t("div",_s,[t("h5",ks,[c(o(l.translations.active_products)+" ",1),t("span",null,"| "+o(l.translations.enabled),1)]),t("div",ws,[s[24]||(s[24]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",xs,[t("h6",null,o(rt()),1),t("span",$s,o(l.translations.active),1)])])])])]),t("div",Cs,[t("div",Ss,[t("div",qs,[t("h5",Vs,[c(o(l.translations.total_value)+" ",1),t("span",null,"| "+o(l.translations.dollar),1)]),t("div",Bs,[s[25]||(s[25]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",Ps,[t("h6",null,o(dt())+" $",1),t("span",Us,o(l.translations.value),1)])])])])]),t("div",Ts,[t("div",Ds,[t("div",zs,[t("h5",Fs,[c(o(l.translations.total_value)+" ",1),t("span",null,"| "+o(l.translations.dinar),1)]),t("div",js,[s[26]||(s[26]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-exchange"})],-1)),t("div",Es,[t("h6",null,o(ct())+" IQD",1),t("span",Is,o(l.translations.value),1)])])])])])]),t("div",Ms,[t("div",Ns,[t("h5",Hs,[s[27]||(s[27]=t("i",{class:"bi bi-box-seam me-2"},null,-1)),c(" "+o(l.translations.products_management),1)]),t("div",Qs,[t("button",{class:"btn btn-outline-primary",onClick:A},[t("i",{class:j(a.value==="grid"?"bi bi-list":"bi bi-grid")},null,2),c(" "+o(a.value==="grid"?l.translations.list_view:l.translations.grid_view),1)]),P("create product")?(u(),H(F(G),{key:0,class:"btn btn-primary",href:i.route("products.create")},{default:E(()=>[s[28]||(s[28]=t("i",{class:"bi bi-plus-circle"},null,-1)),c(" "+o(l.translations.add_product),1)]),_:1},8,["href"])):f("",!0)])]),t("div",As,[t("div",Ws,[t("div",Os,[t("div",Ls,[b(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>d.search=e),placeholder:l.translations.search_by_name_or_barcode,onInput:s[1]||(s[1]=(...e)=>F(B)&&F(B)(...e))},null,40,Gs),[[x,d.search]]),s[29]||(s[29]=t("i",{class:"bi bi-search search-icon"},null,-1))])]),t("div",Js,[b(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=e=>d.status=e),onChange:M},[t("option",Rs,o(l.translations.all_status),1),t("option",Xs,o(l.translations.active),1),t("option",Ys,o(l.translations.inactive),1)],544),[[J,d.status]])]),t("div",Ks,[b(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=e=>d.stock=e),onChange:M},[t("option",Zs,o(l.translations.all_stock),1),t("option",te,o(l.translations.low_stock),1),t("option",se,o(l.translations.out_of_stock),1),t("option",ee,o(l.translations.in_stock),1)],544),[[J,d.stock]])]),t("div",oe,[b(t("select",{class:"form-select","onUpdate:modelValue":s[4]||(s[4]=e=>d.sort=e),onChange:M},[t("option",le,o(l.translations.sort_by_name),1),t("option",ae,o(l.translations.sort_by_price),1),t("option",ne,o(l.translations.sort_by_quantity),1),s[30]||(s[30]=t("option",{value:"best_selling"},"الأكثر مبيعاً",-1)),t("option",ie,o(l.translations.sort_by_date),1)],544),[[J,d.sort]])]),t("div",re,[t("button",{class:"btn btn-outline-secondary w-100",onClick:W},[s[31]||(s[31]=t("i",{class:"bi bi-arrow-clockwise"},null,-1)),c(" "+o(l.translations.clear),1)])])]),a.value==="table"?(u(),m("div",de,[t("div",ce,[t("table",ue,[t("thead",me,[t("tr",null,[s[32]||(s[32]=t("th",{scope:"col",class:"text-center"},[t("i",{class:"bi bi-image"})],-1)),t("th",be,o(l.translations.product_info),1),t("th",ve,o(l.translations.barcode),1),t("th",he,o(l.translations.stock),1),t("th",fe,o(l.translations.price),1),t("th",pe,o(l.translations.status),1),t("th",ge,o(l.translations.actions),1)])]),t("tbody",null,[(u(!0),m(ot,null,lt((k=v.products)==null?void 0:k.data,(e,N)=>(u(),m("tr",{key:e.id,class:"product-row"},[t("td",ye,[t("div",_e,[t("img",{src:p(e),alt:e.name,class:"product-image",onError:X},null,40,ke),e.quantity<=5?(u(),m("div",we,s[33]||(s[33]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):f("",!0),e.quantity===0?(u(),m("div",xe,s[34]||(s[34]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):f("",!0)])]),t("td",null,[t("div",$e,[t("h6",Ce,o(e.name),1),t("small",Se,o(e.model),1),s[35]||(s[35]=t("br",null,null,-1)),t("small",qe,o(l.translations.created)+": "+o(it(e.created)),1)])]),t("td",null,[t("div",Ve,[e.barcode?(u(),m("span",Be,o(e.barcode),1)):(u(),m("span",Pe,o(l.translations.no_barcode),1))])]),t("td",null,[t("div",Ue,[t("span",{class:j(["stock-quantity",Y(e.quantity)])},o(e.quantity),3),t("small",Te,o(l.translations.units),1)])]),t("td",null,[t("div",De,[t("span",ze,o(K(e.price,e.currency)),1),t("small",Fe,o(l.translations.selling_price),1)])]),t("td",null,[t("div",je,[t("label",Ee,[t("input",{type:"checkbox",checked:e.is_active==1,onChange:S=>Z(e.id)},null,40,Ie),s[36]||(s[36]=t("span",{class:"slider round"},null,-1))]),t("small",{class:j(["d-block mt-1",e.is_active?"text-success":"text-danger"])},o(e.is_active?l.translations.active:l.translations.inactive),3)]),t("div",Me,[t("label",Ne,[t("input",{type:"checkbox",checked:e.is_featured==1,onChange:S=>vt(e.id)},null,40,He),s[37]||(s[37]=t("span",{class:"slider round featured-slider"},null,-1))]),t("small",{class:j(["d-block mt-1",e.is_featured?"text-warning":"text-muted"])},[e.is_featured?(u(),m("i",Qe)):f("",!0),c(" "+o(e.is_featured?"مميز":"عادي"),1)],2)]),e.total_sales>0?(u(),m("div",Ae,[s[39]||(s[39]=t("div",{class:"badge bg-warning text-dark"},[t("i",{class:"bi bi-trophy-fill me-1"}),c(" الأكثر مبيعاً ")],-1)),t("small",We,[s[38]||(s[38]=t("i",{class:"bi bi-cart-fill me-1"},null,-1)),c(" "+o(e.total_sales)+" مبيع ",1)])])):f("",!0)]),t("td",null,[t("div",Oe,[t("div",Le,[P("update product")?(u(),H(F(G),{key:0,class:"btn btn-sm btn-outline-primary mb-1",href:i.route("products.edit",{product:e.id}),title:l.translations.edit},{default:E(()=>s[40]||(s[40]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):f("",!0),P("update product")?(u(),m("button",{key:1,class:"btn btn-sm btn-outline-success mb-1",onClick:S=>{y.value=!0,r.value=e},title:"{{ translations.add_stock }}"},s[41]||(s[41]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,Ge)):f("",!0),t("div",Je,[e.barcode?f("",!0):(u(),m("button",{key:0,class:"btn btn-sm btn-outline-info",onClick:S=>ut(e),disabled:g.value,title:"{{ translations.generate_barcode }}"},s[42]||(s[42]=[t("i",{class:"bi bi-qr-code"},null,-1)]),8,Re)),e.barcode?(u(),m("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:S=>mt(e),title:"{{ translations.print_barcode }}"},s[43]||(s[43]=[t("i",{class:"bi bi-printer"},null,-1)]),8,Xe)):f("",!0)]),P("delete product")?(u(),m("button",{key:2,class:"btn btn-sm btn-outline-danger mt-1",onClick:S=>tt(e.id),title:"{{ translations.delete }}"},s[44]||(s[44]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Ye)):f("",!0)])])])]))),128))])])])])):(u(),m("div",Ke,[(u(!0),m(ot,null,lt((O=v.products)==null?void 0:O.data,e=>(u(),m("div",{key:e.id,class:"col-xl-3 col-lg-4 col-md-6 mb-4"},[t("div",Ze,[t("div",to,[t("div",so,[t("img",{src:p(e),alt:e.name,class:"product-image-large",onError:X},null,40,eo),e.quantity<=5?(u(),m("div",oo,s[45]||(s[45]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):f("",!0),e.quantity===0?(u(),m("div",lo,s[46]||(s[46]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):f("",!0)]),t("h6",ao,o(e.name),1),t("p",no,o(e.model),1),t("div",io,[t("div",ro,[t("small",co,o(l.translations.stock),1),t("span",{class:j(["fw-bold",Y(e.quantity)])},o(e.quantity),3)]),t("div",uo,[t("small",mo,o(l.translations.price),1),t("span",bo,o(K(e.price,e.currency)),1)])]),t("div",vo,[t("div",ho,[t("label",fo,[t("input",{type:"checkbox",checked:e.is_active==1,onChange:N=>Z(e.id)},null,40,po),s[47]||(s[47]=t("span",{class:"slider round"},null,-1))])]),t("div",go,[P("update product")?(u(),H(F(G),{key:0,class:"btn btn-sm btn-outline-primary",href:i.route("products.edit",{product:e.id}),title:l.translations.edit},{default:E(()=>s[48]||(s[48]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):f("",!0),P("update product")?(u(),m("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:N=>{y.value=!0,r.value=e},title:"{{ translations.add_stock }}"},s[49]||(s[49]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,yo)):f("",!0),P("delete product")?(u(),m("button",{key:2,class:"btn btn-sm btn-outline-danger",onClick:N=>tt(e.id),title:"{{ translations.delete }}"},s[50]||(s[50]=[t("i",{class:"bi bi-trash"},null,-1)]),8,_o)):f("",!0)])])])])]))),128))]))])]),R(wt,{links:(U=v.products)==null?void 0:U.links},null,8,["links"])]),R(os,{show:y.value,translations:l.translations,data:r.value,onClose:s[5]||(s[5]=e=>y.value=!1),onSuccess:Q},null,8,["show","translations","data"]),t("div",{class:j(["modal fade",{show:$.value}]),style:_t({display:$.value?"block":"none"})},[t("div",ko,[t("div",wo,[t("div",xo,[s[51]||(s[51]=t("h5",{class:"modal-title"},[t("i",{class:"bi bi-printer"}),c(" طباعة الباركود ")],-1)),t("button",{type:"button",class:"btn-close",onClick:s[6]||(s[6]=e=>$.value=!1)})]),t("div",$o,[t("div",Co,[s[52]||(s[52]=t("strong",null,[t("i",{class:"bi bi-box"}),c(" المنتج:")],-1)),c(" "+o((T=C.value)==null?void 0:T.name),1)]),t("div",So,[s[53]||(s[53]=t("label",{class:"form-label"},[t("strong",null,[t("i",{class:"bi bi-files"}),c(" عدد النسخ")])],-1)),b(t("input",{type:"number",class:"form-control",min:"1",max:"100","onUpdate:modelValue":s[7]||(s[7]=e=>n.copies=e),placeholder:"أدخل عدد النسخ المطلوبة"},null,512),[[x,n.copies,void 0,{number:!0}]]),t("small",qo,"سيتم طباعة "+o(n.copies)+" نسخة من الباركود",1)]),t("div",Vo,[s[66]||(s[66]=t("h6",{class:"mb-3"},[t("i",{class:"bi bi-sliders"}),c(" إعدادات الباركود")],-1)),t("div",Bo,[t("div",Po,[s[54]||(s[54]=t("label",{class:"form-label"},[t("strong",null,"📏 عرض الورق (mm)")],-1)),b(t("input",{type:"number",class:"form-control form-control-sm",min:"20",max:"80",step:"1","onUpdate:modelValue":s[8]||(s[8]=e=>n.pageWidth=e)},null,512),[[x,n.pageWidth,void 0,{number:!0}]])]),t("div",Uo,[s[55]||(s[55]=t("label",{class:"form-label"},[t("strong",null,"📏 ارتفاع الورق (mm)")],-1)),b(t("input",{type:"number",class:"form-control form-control-sm",min:"20",max:"80",step:"1","onUpdate:modelValue":s[9]||(s[9]=e=>n.pageHeight=e)},null,512),[[x,n.pageHeight,void 0,{number:!0}]])])]),t("div",To,[s[57]||(s[57]=t("small",{class:"text-muted"},"أحجام شائعة:",-1)),t("div",Do,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:s[10]||(s[10]=e=>{n.pageWidth=38,n.pageHeight=26})},s[56]||(s[56]=[t("strong",null,"38×26",-1)])),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[11]||(s[11]=e=>{n.pageWidth=35,n.pageHeight=28})}," 35×28 "),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[12]||(s[12]=e=>{n.pageWidth=38,n.pageHeight=28})}," 38×28 "),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[13]||(s[13]=e=>{n.pageWidth=40,n.pageHeight=30})}," 40×30 ")])]),s[67]||(s[67]=t("hr",null,null,-1)),t("div",zo,[t("div",Fo,[s[58]||(s[58]=t("label",{class:"form-label"},"ارتفاع الباركود",-1)),b(t("input",{type:"range",class:"form-range",min:"30",max:"150",step:"5","onUpdate:modelValue":s[14]||(s[14]=e=>n.height=e)},null,512),[[x,n.height]]),t("small",jo,o(n.height)+"px",1)]),t("div",Eo,[s[59]||(s[59]=t("label",{class:"form-label"},"حجم الخط",-1)),b(t("input",{type:"range",class:"form-range",min:"6",max:"20",step:"1","onUpdate:modelValue":s[15]||(s[15]=e=>n.fontSize=e)},null,512),[[x,n.fontSize]]),t("small",Io,o(n.fontSize)+"px",1)])]),t("div",Mo,[t("div",No,[t("div",Ho,[b(t("input",{class:"form-check-input",type:"checkbox",id:"printLandscapeMode","onUpdate:modelValue":s[16]||(s[16]=e=>n.landscape=e)},null,512),[[I,n.landscape]]),s[60]||(s[60]=t("label",{class:"form-check-label",for:"printLandscapeMode"}," طباعة بالعرض (Landscape) ",-1))])]),t("div",Qo,[t("div",Ao,[b(t("input",{class:"form-check-input",type:"checkbox",id:"printHighQuality","onUpdate:modelValue":s[17]||(s[17]=e=>n.highQuality=e)},null,512),[[I,n.highQuality]]),s[61]||(s[61]=t("label",{class:"form-check-label",for:"printHighQuality"}," جودة عالية (SVG) ",-1))])]),t("div",Wo,[t("div",Oo,[b(t("input",{class:"form-check-input",type:"checkbox",id:"showBarcodeNumber","onUpdate:modelValue":s[18]||(s[18]=e=>n.showBarcodeNumber=e)},null,512),[[I,n.showBarcodeNumber]]),s[62]||(s[62]=t("label",{class:"form-check-label",for:"showBarcodeNumber"}," عرض رقم الباركود ",-1))])])]),n.showPrice?(u(),m("div",Lo,[t("div",Go,[s[63]||(s[63]=t("label",{class:"form-label"},[t("strong",null,[t("i",{class:"bi bi-currency-dollar"}),c(" سعر البيع")])],-1)),b(t("input",{type:"number",class:"form-control",min:"0",step:"0.01","onUpdate:modelValue":s[19]||(s[19]=e=>n.price=e),placeholder:"أدخل سعر البيع"},null,512),[[x,n.price,void 0,{number:!0}]])]),t("div",Jo,[t("div",Ro,[b(t("input",{class:"form-check-input",type:"checkbox",id:"showPrice","onUpdate:modelValue":s[20]||(s[20]=e=>n.showPrice=e)},null,512),[[I,n.showPrice]]),s[64]||(s[64]=t("label",{class:"form-check-label",for:"showPrice"}," عرض سعر البيع ",-1))])])])):f("",!0),n.showPrice?f("",!0):(u(),m("div",Xo,[t("div",Yo,[t("div",Ko,[b(t("input",{class:"form-check-input",type:"checkbox",id:"showPrice","onUpdate:modelValue":s[21]||(s[21]=e=>n.showPrice=e)},null,512),[[I,n.showPrice]]),s[65]||(s[65]=t("label",{class:"form-check-label",for:"showPrice"}," عرض سعر البيع ",-1))])])]))])]),t("div",Zo,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[22]||(s[22]=e=>$.value=!1)},o(l.translations.cancel||"إلغاء"),1),t("button",{type:"button",class:"btn btn-success",onClick:bt,disabled:g.value},[g.value?(u(),m("span",sl)):f("",!0),s[68]||(s[68]=t("i",{class:"bi bi-printer"},null,-1)),c(" "+o(l.translations.print||"طباعة")+" ("+o(n.copies)+") ",1)],8,tl)])])])],6)]}),_:1},8,["translations"]))}},cl=$t(el,[["__scopeId","data-v-ff73628a"]]);export{cl as default};
