import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a,c as l,b as e,e as u,Q as Z,o as q,K as ce,i as b,w as k,t as d,n as w,u as y,p as $,g as X,s as oe,r as _,k as S,M as R,d as T,y as ie,D,j as ve,F as Y,f as ne,q as pe}from"./app-HEdDoXdd.js";const fe={data(){return{darkMode:!1}},created(){this.darkMode=localStorage.getItem("darkMode")==="true",this.darkMode&&document.documentElement.classList.add("dark")},methods:{toggleDarkMode(){this.darkMode=!this.darkMode,this.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",this.darkMode)}},computed:{iconClass(){return this.darkMode?"fas fa-sun":"fas fa-moon"}}},ge={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},me={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function be(h,v,o,g,p,s){return a(),l("button",{onClick:v[0]||(v[0]=(...n)=>s.toggleDarkMode&&s.toggleDarkMode(...n)),class:"px-2 py-1 rounded-full focus:outline-none dark:text-gray-400"},[p.darkMode?u("",!0):(a(),l("svg",ge,v[1]||(v[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"},null,-1)]))),p.darkMode?(a(),l("svg",me,v[2]||(v[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"},null,-1)]))):u("",!0)])}const he=N(fe,[["render",be]]),we={id:"sidebar",class:"sidebar bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"},ye={class:"sidebar-nav",id:"sidebar-nav"},ke={class:"nav-item"},$e={key:0,class:"nav-item"},_e={key:1,class:"nav-item"},xe={key:2,class:"nav-item"},Ce={key:3,class:"nav-item"},Le={key:4,class:"nav-item"},Me={key:5,class:"nav-item"},Se={key:6,class:"nav-item"},Ie={key:7,class:"nav-item"},We={key:8,class:"nav-item"},Oe={class:"nav-item"},Ee={id:"components-nav",class:"nav-content collapse","data-bs-parent":"#sidebar-nav"},je={key:9,class:"nav-item"},Te={class:"nav-item"},Ue={key:10,class:"nav-item"},Ae={key:11,class:"nav-item"},ze={key:12,class:"nav-item"},Be={name:"Sidebar"},De=Object.assign(Be,{props:{message:String,translations:Object},setup(h){const v=Z(),o=s=>v.props.auth_permissions.includes(s),g=()=>{window.innerWidth<1200&&document.body.classList.remove("toggle-sidebar")},p=s=>{s&&typeof X<"u"&&X.prefetch&&X.prefetch(s)};return q(()=>{ce(()=>{document.querySelectorAll("#sidebar .nav-link, #sidebar a[href]").forEach(n=>{n.addEventListener("click",g);const i=n.getAttribute("href");i&&i.startsWith("/")&&!i.startsWith("/logout")&&n.addEventListener("mouseenter",()=>{p(i)},{once:!0})})})}),(s,n)=>(a(),l("aside",we,[e("ul",ye,[e("li",ke,[b(y($),{class:w(["nav-link",{collapsed:s.$page.url!=="/dashboard"}]),href:s.route("dashboard")},{default:k(()=>[n[0]||(n[0]=e("i",{class:"bi bi-grid"},null,-1)),e("span",null,d(h.translations.dashboard),1)]),_:1},8,["href","class"])]),o("read order")?(a(),l("li",$e,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/orders")}]),href:s.route("orders.index")},{default:k(()=>[n[1]||(n[1]=e("i",{class:"bi bi-people"},null,-1)),e("span",null,d(h.translations.orders),1)]),_:1},8,["href","class"])])):u("",!0),o("read product")?(a(),l("li",_e,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/products")}]),href:s.route("products.index")},{default:k(()=>[n[2]||(n[2]=e("i",{class:"bi bi-people"},null,-1)),e("span",null,d(h.translations.products),1)]),_:1},8,["href","class"])])):u("",!0),o("read product")?(a(),l("li",xe,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/barcode")}]),href:s.route("barcode.index")},{default:k(()=>[n[3]||(n[3]=e("i",{class:"bi bi-qr-code"},null,-1)),e("span",null,d(h.translations.barcode_generation),1)]),_:1},8,["href","class"])])):u("",!0),o("read category")?(a(),l("li",Ce,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/categories")}]),href:s.route("categories.index")},{default:k(()=>n[4]||(n[4]=[e("i",{class:"bi bi-tags"},null,-1),e("span",null,"Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª",-1)])),_:1},8,["href","class"])])):u("",!0),o("read decoration")?(a(),l("li",Le,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/decorations-orders-simple")}]),href:s.route("decorations.orders.simple")},{default:k(()=>[n[5]||(n[5]=e("i",{class:"bi bi-palette"},null,-1)),e("span",null,d(h.translations.decorations||"Ø§Ù„Ø¯ÙŠÙƒÙˆØ±"),1)]),_:1},8,["href","class"])])):u("",!0),o("read boxes")?(a(),l("li",Me,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/boxes")}]),href:s.route("boxes.index")},{default:k(()=>[n[6]||(n[6]=e("i",{class:"bi bi-people"},null,-1)),e("span",null,d(h.translations.boxes),1)]),_:1},8,["href","class"])])):u("",!0),o("read supplier")?(a(),l("li",Se,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/customers")}]),href:s.route("customers.index")},{default:k(()=>[n[7]||(n[7]=e("i",{class:"bi bi-people"},null,-1)),e("span",null,d(h.translations.customers),1)]),_:1},8,["href","class"])])):u("",!0),o("read supplier")?(a(),l("li",Ie,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/suppliers")}]),href:s.route("suppliers.index")},{default:k(()=>[n[8]||(n[8]=e("i",{class:"bi bi-people"},null,-1)),e("span",null,d(h.translations.suppliers),1)]),_:1},8,["href","class"])])):u("",!0),o("read users")?(a(),l("li",We,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/users")}]),href:s.route("users.index")},{default:k(()=>[n[9]||(n[9]=e("i",{class:"bi bi-people"},null,-1)),e("span",null,d(h.translations.users),1)]),_:1},8,["href","class"])])):u("",!0),e("li",Oe,[e("a",{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/roles")&&!s.$page.url.startsWith("/permissions")}]),"data-bs-target":"#components-nav","data-bs-toggle":"collapse",href:"#"},[n[10]||(n[10]=e("i",{class:"bi bi-lock"},null,-1)),e("span",null,d(h.translations.roles_control),1),n[11]||(n[11]=e("i",{class:"bi bi-chevron-down ms-auto"},null,-1))],2),e("ul",Ee,[e("li",null,[b(y($),{href:s.route("roles.index"),class:w({collapsed:!s.$page.url.startsWith("/roles")})},{default:k(()=>[n[12]||(n[12]=e("i",{class:"bi bi-circle"},null,-1)),e("span",null,d(h.translations.roles),1)]),_:1},8,["href","class"])]),e("li",null,[b(y($),{href:s.route("permissions.index"),class:w({collapsed:!s.$page.url.startsWith("/permissions")})},{default:k(()=>[n[13]||(n[13]=e("i",{class:"bi bi-circle"},null,-1)),e("span",null,d(h.translations.permissions),1)]),_:1},8,["href","class"])])])]),o("read logs")?(a(),l("li",je,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/logs")}]),href:s.route("logs")},{default:k(()=>[n[14]||(n[14]=e("i",{class:"bi bi-database"},null,-1)),e("span",null,d(h.translations.logs),1)]),_:1},8,["href","class"])])):u("",!0),e("li",Te,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/admin/migrations")}]),href:s.route("admin.migrations")},{default:k(()=>n[15]||(n[15]=[e("i",{class:"bi bi-gear"},null,-1),e("span",null,"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙŠØ´Ù†Ø§Øª",-1)])),_:1},8,["href","class"])]),o("read system_config")?(a(),l("li",Ue,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/system-config")}]),href:s.route("system-config.index")},{default:k(()=>[n[16]||(n[16]=e("i",{class:"bi bi-gear-fill"},null,-1)),e("span",null,d(h.translations.system_settings),1)]),_:1},8,["href","class"])])):u("",!0),o("read reports")?(a(),l("li",Ae,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/reports")}]),href:s.route("reports.index")},{default:k(()=>n[17]||(n[17]=[e("i",{class:"bi bi-graph-up"},null,-1),e("span",null,"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",-1)])),_:1},8,["href","class"])])):u("",!0),o("read expenses")?(a(),l("li",ze,[b(y($),{class:w(["nav-link",{collapsed:!s.$page.url.startsWith("/expenses")}]),href:s.route("expenses.index")},{default:k(()=>n[18]||(n[18]=[e("i",{class:"bi bi-receipt"},null,-1),e("span",null,"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ",-1)])),_:1},8,["href","class"])])):u("",!0)])]))}}),re=N(De,[["__scopeId","data-v-276d78eb"]]),Ne={class:"container"},Ve={class:"status-content"},qe={class:"status-icon"},Pe={key:0,class:"animate-spin",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Fe={key:1,class:"status-emoji"},He={class:"status-message"},Qe={class:"message-text"},Re={key:0,class:"pending-badge"},Ge={key:0,class:"progress-info"},Ke={class:"status-actions"},Je=["disabled"],Xe={key:0},Ye={key:1},Ze={key:0,class:"progress-bar"},es={__name:"SyncStatusBar",setup(h){const v=oe(),o=_(!1),g=_(navigator.onLine),p=_(!1),s=_(0),n=_(0),i=_(0),r=_(!1),m=_(window.location.href.startsWith("http://127.0.0.1")||window.location.href.startsWith("http://localhost")),L=S(()=>g.value&&s.value>0&&!p.value),c=S(()=>i.value===0?0:Math.round(n.value/i.value*100)),P=S(()=>p.value?"syncing":g.value?s.value>0?"pending":"online":"offline"),U=S(()=>g.value?s.value>0?"â³":"âœ…":"ðŸ“´"),E=S(()=>p.value?`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©... ${c.value}%`:g.value?s.value>0?`${s.value} Ø¹Ù…Ù„ÙŠØ© ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©`:"ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ø­Ø¯Ù‘Ø«":"ØºÙŠØ± Ù…ØªØµÙ„ - ÙˆØ¶Ø¹ Offline Ù…ÙØ¹Ù‘Ù„"),W=async()=>{try{if(!g.value){o.value=!0;return}try{const x=await D.get("/api/sync-monitor/metadata");if(x.data.success){const M=x.data.queue_stats||{};s.value=M.pending||0,(s.value>0||!g.value)&&!r.value?o.value=!0:s.value===0&&g.value&&(o.value=!1)}}catch(x){console.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©:",x),o.value=!1}}catch(x){console.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©:",x)}},F=async()=>{var x,M,H;if(L.value){p.value=!0,n.value=0,i.value=s.value;try{const O=await D.post("/api/sync-monitor/smart-sync",{limit:100});if(!O.data||!O.data.success)throw new Error(((x=O.data)==null?void 0:x.message)||"ÙØ´Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©");const A=O.data.job_id;v.info("ðŸ”„ ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©...");const B=setInterval(async()=>{try{const f=await D.get("/api/sync-monitor/sync-status",{params:{job_id:A}});if(f.data&&f.data.success){const t=f.data.status;if(t.synced!==void 0&&(n.value=t.synced||0),t.total_processed!==void 0&&(i.value=t.total_processed||s.value),t.status==="completed"){clearInterval(B),p.value=!1;const C=t.synced||0,I=t.failed||0;await W(),I===0&&s.value===0?(v.success(`âœ… ØªÙ…Øª Ù…Ø²Ø§Ù…Ù†Ø© ${C} Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!`),o.value=!1):C>0?v.warning(`âš ï¸ ØªÙ…Øª Ù…Ø²Ø§Ù…Ù†Ø© ${C} Ø¹Ù…Ù„ÙŠØ©ØŒ ÙØ´Ù„ ${I}ØŒ Ù…ØªØ¨Ù‚ÙŠ ${s.value}`):v.error("âŒ ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©")}if(t.status==="failed"){clearInterval(B),p.value=!1;const C=t.error||"ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©";v.error("âŒ "+C),await W()}}else f.data&&f.data.status==="not_found"&&(clearInterval(B),p.value=!1,await W(),s.value===0&&(v.success("âœ… ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨Ù†Ø¬Ø§Ø­!"),o.value=!1))}catch(f){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©:",f)}},1e3);setTimeout(()=>{clearInterval(B),p.value&&(p.value=!1,v.warning("â±ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©. Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù„Ø§ ØªØ²Ø§Ù„ Ø¬Ø§Ø±ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©."),W())},6e5)}catch(O){console.error("ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©:",O);const A=((H=(M=O.response)==null?void 0:M.data)==null?void 0:H.message)||O.message||"ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©";A.includes("MySQL ØºÙŠØ± Ù…ØªØ§Ø­")||A.includes("Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„")?v.error("âŒ MySQL ØºÙŠØ± Ù…ØªØ§Ø­ - Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±."):v.error("âŒ ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©: "+A),n.value=0,i.value=s.value}finally{p.value=!1,await W()}}},j=()=>{r.value=!0,o.value=!1,setTimeout(()=>{r.value=!1,W()},6e4)},z=()=>{g.value=!0,r.value=!1,W(),setTimeout(()=>{s.value>0&&F()},2e3)},V=()=>{g.value=!1,o.value=!0},K=()=>{var x;if(window.switchToLocal)window.switchToLocal();else{const M=((x=window.connectionInfo)==null?void 0:x.local_url)||"http://127.0.0.1:8000/";window.location.href=M}},J=()=>{var x;if(window.switchToOnline)window.switchToOnline();else{const M=((x=window.connectionInfo)==null?void 0:x.online_url)||"https://system.intellijapp.com/dashboard";window.location.href=M}};return q(()=>{W(),window.addEventListener("online",z),window.addEventListener("offline",V);const x=setInterval(W,5e3);R(()=>{window.removeEventListener("online",z),window.removeEventListener("offline",V),clearInterval(x)})}),(x,M)=>o.value?(a(),l("div",{key:0,class:w(["sync-status-bar",P.value])},[e("div",Ne,[e("div",Ve,[e("div",qe,[p.value?(a(),l("svg",Pe,M[0]||(M[0]=[e("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},null,-1)]))):(a(),l("span",Fe,d(U.value),1))]),e("div",He,[e("span",Qe,d(E.value),1),s.value>0?(a(),l("span",Re,d(s.value),1)):u("",!0)]),p.value&&c.value>0?(a(),l("div",Ge,d(n.value)+" / "+d(i.value),1)):u("",!0),e("div",Ke,[m.value?(a(),l("button",{key:0,onClick:J,class:"btn-switch",title:"Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±"}," ðŸŒ Online ")):u("",!0),m.value?u("",!0):(a(),l("button",{key:1,onClick:K,class:"btn-switch",title:"Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù„ÙˆÙƒÙ„"}," ðŸ’» Local ")),L.value?(a(),l("button",{key:2,onClick:F,class:"btn-sync",disabled:p.value,title:"Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø°ÙƒÙŠØ© - Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù…Ù† sync_queue Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±"},[p.value?(a(),l("span",Ye,"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©...")):(a(),l("span",Xe,"ðŸ”„ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø°ÙƒÙŠØ©"))],8,Je)):u("",!0),b(y($),{href:x.route("sync-monitor.index"),class:"btn-details"},{default:k(()=>M[1]||(M[1]=[T(" ðŸ“Š Ø§Ù„ØªÙØ§ØµÙŠÙ„ ")])),_:1},8,["href"]),e("button",{onClick:j,class:"btn-close"}," âœ• ")])]),p.value?(a(),l("div",Ze,[e("div",{class:"progress-fill",style:ie({width:c.value+"%"})},null,4)])):u("",!0)])],2)):u("",!0)}},ss=N(es,[["__scopeId","data-v-6b373022"]]),ts={class:"wifi-icon-header"},ns=["title"],as={key:0,class:"badge bg-warning badge-number position-absolute top-0 start-100 translate-middle"},ls={class:"dropdown-item-text"},os={class:"d-flex justify-content-between align-items-center mb-2"},is={class:"d-flex justify-content-between align-items-center mb-2"},rs={class:"badge bg-warning"},ds={key:0,class:"d-flex justify-content-between align-items-center mb-2"},us={key:1,class:"d-flex justify-content-between align-items-center"},cs={class:"badge bg-info"},vs=["disabled"],ps={key:0},fs={key:1},gs={__name:"WiFiIconHeader",props:{pendingCount:{type:Number,default:0}},setup(h){const v=h,o=oe(),g=_(!1),p=_(navigator.onLine),s=_(!0),n=window.location.origin,i=_(n.includes("127.0.0.1")||n.includes("localhost")),r=_(!1),m=_(!1),L=_(!1),c=_(null),P=_(null),U=_("--:--"),E=S(()=>p.value&&s.value),W=S(()=>E.value?v.pendingCount>0?`${v.pendingCount} Ù…Ù„Ù Ù…Ø¹Ù„Ù‚`:"Ù…ØªØµÙ„ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ØªØ²Ø§Ù…Ù†Ø©":"ØºÙŠØ± Ù…ØªØµÙ„"),F=()=>{g.value=!g.value},j=()=>{g.value=!1},z=async(f=!1)=>{var t;if(!i.value)return s.value=!0,!0;try{const C=await D.get("/api/sync-monitor/check-health",{timeout:5e3,withCredentials:!0});return s.value=((t=C.data)==null?void 0:t.success)!==!1,f&&(s.value?o.success("âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ù…ØªØ§Ø­"):o.warning("âš ï¸ Ø§Ù„Ø³ÙŠØ±ÙØ± ØºÙŠØ± Ù…ØªØ§Ø­")),s.value}catch{return s.value=!1,f&&o.error("âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±"),!1}},V=async()=>{var f,t;if(i.value)try{const C=await D.get("/api/sync-monitor/auto-sync-status",{timeout:3e3,withCredentials:!0});if((f=C.data)!=null&&f.success&&((t=C.data)!=null&&t.status)){const I=C.data.status;m.value=I.enabled,L.value=I.is_running,c.value=I.next_sync_in,P.value=I.last_sync_at}}catch{m.value=!1}},K=f=>{if(f==null)return"--:--";if(f<=0)return"â±ï¸ Ø§Ù„Ø¢Ù†";const t=Math.floor(f/60),C=f%60;return`${t.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},J=()=>{c.value!==null&&c.value>0?(c.value--,U.value=K(c.value)):c.value===0?U.value="â±ï¸ Ø§Ù„Ø¢Ù†":U.value="--:--"},x=async()=>{await z(!0),j()},M=()=>{var t;const f=((t=window.connectionInfo)==null?void 0:t.local_url)||"http://127.0.0.1:8000/";o.info("ðŸ”„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Local...",{timeout:2e3}),j(),setTimeout(()=>{window.location.href=f},500)},H=()=>{var t;const f=((t=window.connectionInfo)==null?void 0:t.online_url)||"https://system.intellijapp.com/";o.info("ðŸ”„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Online...",{timeout:2e3}),j(),setTimeout(()=>{window.location.href=f},500)},O=async()=>{var f,t,C;if(!E.value||!i.value){o.warning("ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");return}if(!r.value){r.value=!0;try{const I=await D.post("/api/sync-monitor/auto-sync",{},{timeout:3e4,withCredentials:!0});if((f=I.data)!=null&&f.success){const ee=((C=(t=I.data)==null?void 0:t.data)==null?void 0:C.push)||{},se=ee.synced||0,te=ee.failed||0;se>0?(o.success(`âœ… ØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© ${se} Ø³Ø¬Ù„`),setTimeout(()=>{window.location.reload()},1e3)):te>0?o.warning(`âš ï¸ ÙØ´Ù„ ${te} Ø³Ø¬Ù„`):o.info("â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø©")}else o.error("âŒ ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©")}catch(I){console.error("Quick sync error:",I),o.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©")}finally{r.value=!1,j()}}},A=async()=>{p.value=!0,await z(!1)},B=()=>{p.value=!1,s.value=!1};return q(()=>{window.addEventListener("online",A),window.addEventListener("offline",B),z(!1),i.value&&V();const f=setInterval(()=>{i.value&&p.value&&z(!1)},3e4),t=setInterval(()=>{i.value&&V()},1e4),C=setInterval(()=>{i.value&&m.value&&J()},1e3);R(()=>{window.removeEventListener("online",A),window.removeEventListener("offline",B),clearInterval(f),clearInterval(t),clearInterval(C)})}),(f,t)=>(a(),l("div",ts,[e("button",{onClick:F,class:"nav-link nav-icon position-relative",title:W.value},[e("i",{class:w(["bi",E.value?"bi-wifi":"bi-wifi-off",E.value?"text-success":"text-danger"])},null,2),h.pendingCount>0?(a(),l("span",as,d(h.pendingCount>99?"99+":h.pendingCount),1)):u("",!0)],8,ns),g.value?(a(),l("div",{key:0,class:"wifi-dropdown-menu dropdown-menu-end",onClick:t[0]||(t[0]=ve(()=>{},["stop"]))},[e("div",{class:"dropdown-header"},[t[1]||(t[1]=e("span",{class:"fw-bold"},"âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©",-1)),e("button",{onClick:j,class:"btn-close btn-sm"})]),t[12]||(t[12]=e("div",{class:"dropdown-divider"},null,-1)),e("div",ls,[e("div",os,[t[2]||(t[2]=e("small",{class:"text-muted"},"Ø§Ù„Ø­Ø§Ù„Ø©:",-1)),e("span",{class:w(["badge",E.value?"bg-success":"bg-danger"])},d(E.value?"ðŸŸ¢ Ù…ØªØµÙ„":"ðŸ”´ ØºÙŠØ± Ù…ØªØµÙ„"),3)]),e("div",is,[t[3]||(t[3]=e("small",{class:"text-muted"},"Ù…Ù„ÙØ§Øª Ù…Ø¹Ù„Ù‚Ø©:",-1)),e("span",rs,d(h.pendingCount),1)]),i.value?(a(),l("div",ds,[t[4]||(t[4]=e("small",{class:"text-muted"},"Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:",-1)),e("span",{class:w(["badge",m.value?"bg-success":"bg-secondary"])},[e("i",{class:w(["bi",m.value?"bi-check-circle":"bi-x-circle","me-1"])},null,2),T(" "+d(m.value?"ØªØ¹Ù…Ù„":"Ù…ØªÙˆÙ‚ÙØ©"),1)],2)])):u("",!0),i.value&&m.value?(a(),l("div",us,[t[6]||(t[6]=e("small",{class:"text-muted"},"Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:",-1)),e("span",cs,[t[5]||(t[5]=e("i",{class:"bi bi-clock me-1"},null,-1)),T(" "+d(U.value),1)])])):u("",!0)]),t[13]||(t[13]=e("div",{class:"dropdown-divider"},null,-1)),i.value&&E.value?(a(),l("button",{key:0,onClick:O,class:"dropdown-item",disabled:r.value},[t[7]||(t[7]=e("i",{class:"bi bi-lightning-charge-fill text-warning me-2"},null,-1)),r.value?(a(),l("span",fs,"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©...")):(a(),l("span",ps,"Ù…Ø²Ø§Ù…Ù†Ø© Ø³Ø±ÙŠØ¹Ø©"))],8,vs)):u("",!0),e("button",{onClick:x,class:"dropdown-item"},t[8]||(t[8]=[e("i",{class:"bi bi-arrow-clockwise text-primary me-2"},null,-1),T(" ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ ")])),t[14]||(t[14]=e("div",{class:"dropdown-divider"},null,-1)),i.value?(a(),l("button",{key:1,onClick:H,class:"dropdown-item"},t[9]||(t[9]=[e("i",{class:"bi bi-cloud-fill text-info me-2"},null,-1),T(" Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Online ")]))):u("",!0),i.value?u("",!0):(a(),l("button",{key:2,onClick:M,class:"dropdown-item"},t[10]||(t[10]=[e("i",{class:"bi bi-laptop-fill text-success me-2"},null,-1),T(" Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Local ")]))),t[15]||(t[15]=e("div",{class:"dropdown-divider"},null,-1)),b(y($),{href:f.route("sync-monitor.index"),class:"dropdown-item",onClick:j},{default:k(()=>t[11]||(t[11]=[e("i",{class:"bi bi-gear-fill text-secondary me-2"},null,-1),T(" ØµÙØ­Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ")])),_:1},8,["href"])])):u("",!0),g.value?(a(),l("div",{key:1,class:"menu-overlay-header",onClick:j})):u("",!0)]))}},de=N(gs,[["__scopeId","data-v-17970a50"]]),ms={class:"nav-item dropdown"},bs={class:"nav-link nav-icon position-relative active-users-icon",href:"#","data-bs-toggle":"dropdown","aria-expanded":"false",title:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†"},hs={class:"active-users-wrapper"},ws={class:"active-users-avatars"},ys=["title"],ks={class:"user-initials"},$s={key:0,class:"user-avatar-circle empty-state",title:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù†Ø´Ø·ÙŠÙ†"},_s={key:0,class:"badge bg-success badge-number position-absolute top-0 start-100 translate-middle",style:{"font-size":"0.65rem",padding:"0.25em 0.4em"}},xs={class:"dropdown-menu dropdown-menu-end dropdown-menu-arrow",style:{"min-width":"250px"}},Cs={key:0,class:"px-3 py-2 text-muted text-center"},Ls={class:"d-flex align-items-center"},Ms=["src"],Ss={class:"flex-grow-1"},Is={class:"fw-semibold",style:{"font-size":"0.9rem"}},Ws={class:"text-muted"},Os={key:1},Es={__name:"ActiveUsers",setup(h){const v=_([]),o=_(0);let g=null;const p=async()=>{try{const i=await D.get("/api/active-users");v.value=i.data.active_users||[],o.value=i.data.count||0}catch(i){console.error("Error fetching active users:",i)}},s=i=>{if(!i)return"??";const r=i.trim().split(" ");return r.length>=2?(r[0][0]+r[1][0]).toUpperCase():i.substring(0,2).toUpperCase()},n=i=>{if(!i)return"#6c757d";const r=["#3498db","#e74c3c","#2ecc71","#f39c12","#9b59b6","#1abc9c","#e67e22","#34495e","#16a085","#c0392b","#2980b9","#27ae60","#d35400","#8e44ad","#2c3e50"];let m=0;for(let c=0;c<i.length;c++)m=i.charCodeAt(c)+((m<<5)-m);const L=Math.abs(m)%r.length;return r[L]};return q(()=>{p(),g=setInterval(p,3e4)}),R(()=>{g&&clearInterval(g)}),(i,r)=>(a(),l("li",ms,[e("a",bs,[e("div",hs,[e("div",ws,[(a(!0),l(Y,null,ne(v.value.slice(0,3),(m,L)=>(a(),l("div",{key:m.id,class:"user-avatar-circle",style:ie({backgroundColor:n(m.name),zIndex:10-L,marginLeft:L>0?"-8px":"0"}),title:m.name},[e("span",ks,d(s(m.name)),1),r[0]||(r[0]=e("span",{class:"user-status-indicator"},null,-1))],12,ys))),128)),v.value.length===0?(a(),l("div",$s,r[1]||(r[1]=[e("i",{class:"bi bi-people"},null,-1)]))):u("",!0)])]),o.value>3?(a(),l("span",_s," +"+d(o.value-3),1)):u("",!0)]),e("ul",xs,[r[5]||(r[5]=e("li",{class:"dropdown-header"},[e("h6",null,"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†"),e("span",{class:"text-muted",style:{"font-size":"0.85rem"}},"Ø¢Ø®Ø± 3 Ø¯Ù‚Ø§Ø¦Ù‚")],-1)),r[6]||(r[6]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),v.value.length===0?(a(),l("li",Cs,r[2]||(r[2]=[e("small",null,"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù†Ø´Ø·ÙŠÙ†",-1)]))):u("",!0),(a(!0),l(Y,null,ne(v.value,m=>(a(),l("li",{key:m.id,class:"px-3 py-2"},[e("div",Ls,[e("img",{src:m.avatar_url||"/dashboard-assets/img/profile-img.jpg",alt:"",class:"rounded-circle me-2",style:{width:"32px",height:"32px","object-fit":"cover"}},null,8,Ms),e("div",Ss,[e("div",Is,d(m.name),1),e("small",Ws,d(m.last_activity_at),1)]),r[3]||(r[3]=e("span",{class:"badge bg-success rounded-pill",style:{width:"8px",height:"8px",padding:"0"}},null,-1))])]))),128)),v.value.length>0?(a(),l("li",Os,r[4]||(r[4]=[e("hr",{class:"dropdown-divider"},null,-1)]))):u("",!0),r[7]||(r[7]=e("li",{class:"px-3 py-2"},[e("small",{class:"text-muted"},[e("i",{class:"bi bi-arrow-clockwise"}),T(" ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ")])],-1))])]))}},ue=N(Es,[["__scopeId","data-v-ddb55599"]]),js={id:"header",class:"header fixed-top d-flex align-items-center justify-content-between bg-gray-100 dark:bg-gray-800"},Ts={class:"d-flex align-items-center"},Us=["src"],As={class:"d-none d-lg-block dark:text-white"},zs={class:"header-nav ms-auto text-gray-600 dark:text-gray-400"},Bs={class:"d-flex align-items-center text-gray-600 dark:text-gray-400"},Ds={class:"nav-item dropdown text-gray-600 dark:text-gray-400 me-2"},Ns={value:"",selected:""},Vs={class:"nav-item text-gray-600 dark:text-gray-400 me-2"},qs={class:"nav-item text-gray-600 dark:text-gray-400 me-2"},Ps={class:"nav-item dropdown text-gray-600 dark:text-gray-400 me-2"},Fs={key:0,class:"badge bg-primary badge-number position-absolute top-0 start-100 translate-middle"},Hs={class:"nav-item dropdown text-gray-600 dark:text-gray-400 me-2"},Qs={class:"nav-item dropdown pe-3 text-gray-600 dark:text-gray-400"},Rs={class:"nav-link nav-profile d-flex align-items-center pe-0",href:"#","data-bs-toggle":"dropdown"},Gs=["src"],Ks={class:"d-none d-md-block dropdown-toggle ps-2 dark:text-white"},Js={class:"dropdown-menu dropdown-menu-end dropdown-menu-arrow profile text-gray-600 dark:text-gray-400"},Xs={class:"dropdown-header"},Ys={class:"dark:text-white"},Zs={class:"dark:text-white"},et=["href"],st={id:"main",class:"main bg-gray-100 dark:bg-gray-800"},tt={key:0,class:"alert alert-success bg-success text-light border-0 alert-dismissible fade show",role:"alert"},G=Z(),ae=S(()=>G.props.flash.success),Q=S(()=>G.props.auth),le=S(()=>Math.min(G.props.auth.notificationCount,9)),nt=S(()=>G.props.syncPendingCount||0),at={components:{Sidebar:re,SyncStatusBar:ss,WiFiIconHeader:de,ActiveUsers:ue},data(){return{parentMessage:"Hello from Parent"}}},lt=Object.assign(at,{__name:"AuthenticatedLayout",props:{translations:Object},setup(h){const v=Z();_(!1);const o=_(!1),g=S(()=>window.translations||{}),p=S(()=>v.props.company_name||"WEDOO EVENTS"),s=S(()=>v.props.company_logo||"dashboard-assets/img/WEDOO  LOGO PNG.webp"),n=()=>{o.value=!o.value,o.value?document.body.classList.add("toggle-sidebar"):document.body.classList.remove("toggle-sidebar")},i=()=>{o.value=!1,document.body.classList.remove("toggle-sidebar")},r=()=>{window.innerWidth>=1200&&(o.value=!1,document.body.classList.remove("toggle-sidebar"))};q(()=>{window.addEventListener("resize",r),window.innerWidth<1200&&(document.body.classList.remove("toggle-sidebar"),o.value=!1)}),R(()=>{window.removeEventListener("resize",r)});const m=L=>{const c=L.target.value,U=`${window.location.origin}/lang/change?lang=${c}`;window.location.href=U};return(L,c)=>(a(),l(Y,null,[e("header",js,[e("div",Ts,[e("button",{onClick:n,class:"mobile-menu-toggle d-lg-none btn btn-link p-0 text-gray-600 dark:text-gray-400 me-3",type:"button","aria-label":"Toggle sidebar"},c[0]||(c[0]=[e("i",{class:"bi bi-list fs-3"},null,-1)])),b(y($),{class:"logo d-flex align-items-center",href:L.route("dashboard")},{default:k(()=>[e("img",{src:`/${s.value}`,alt:""},null,8,Us),e("span",As,d(p.value),1)]),_:1},8,["href"])]),e("nav",zs,[e("ul",Bs,[e("li",Ds,[e("select",{class:"form-control changeLang",onChange:m,style:{"min-width":"120px"}},[e("option",Ns,d(g.value.language||"Ø§Ù„Ù„ØºØ©")+" ðŸŒ ",1),c[1]||(c[1]=e("option",{value:"en"}," English",-1)),c[2]||(c[2]=e("option",{value:"ar"},"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",-1))],32)]),e("li",Vs,[b(he)]),e("li",qs,[b(ue)]),e("li",Ps,[b(y($),{class:"nav-link nav-icon position-relative",href:L.route("notification.index")},{default:k(()=>[c[3]||(c[3]=e("i",{class:"bi bi-bell"},null,-1)),le.value>0?(a(),l("span",Fs,d(le.value),1)):u("",!0)]),_:1},8,["href"])]),e("li",Hs,[b(de,{pendingCount:nt.value},null,8,["pendingCount"])]),e("li",Qs,[e("a",Rs,[e("img",{src:Q.value.avatar_url||"/dashboard-assets/img/profile-img.jpg",alt:"Profile",class:"rounded-circle",style:{width:"32px",height:"32px","object-fit":"cover"}},null,8,Gs),e("span",Ks,d(Q.value.name),1)]),e("ul",Js,[e("li",Xs,[e("h6",Ys,d(Q.value.name),1),e("span",Zs,d(Q.value.email),1)]),c[6]||(c[6]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item d-flex align-items-center dark:text-white",href:L.route("profile.edit")},[c[4]||(c[4]=e("i",{class:"bi bi-person"},null,-1)),e("span",null,d(g.value.my_profile||"Ø­Ø³Ø§Ø¨ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ"),1)],8,et)]),c[7]||(c[7]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[b(y($),{href:L.route("logout"),method:"post",as:"button",class:"dropdown-item d-flex align-items-center"},{default:k(()=>[c[5]||(c[5]=e("i",{class:"bi bi-box-arrow-right"},null,-1)),e("span",null,d(g.value.log_out||"ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"),1)]),_:1},8,["href"])])])])])])]),o.value?(a(),l("div",{key:0,onClick:i,class:"sidebar-overlay d-lg-none"})):u("",!0),b(re,{translations:g.value,permissions:y(v).props.Permissions},null,8,["translations","permissions"]),e("main",st,[ae.value?(a(),l("div",tt,[T(d(ae.value)+" ",1),c[8]||(c[8]=e("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):u("",!0),e("main",null,[pe(L.$slots,"default",{},void 0,!0)])])],64))}}),rt=N(lt,[["__scopeId","data-v-b1b80d02"]]);export{rt as A};
