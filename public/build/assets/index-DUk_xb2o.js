import{Q as bt,z as ft,a as n,h as it,w as nt,b as t,t as o,d,c as l,n as m,e as c,j as _t,l as at,x as lt,u as vt,p as yt,f as gt,F as xt,i as wt,g as ct}from"./app-3XmFid0x.js";import{_ as kt}from"./AuthenticatedLayout-CB5i1jAM.js";import{_ as St}from"./Pagination-BEQkrToc.js";import{S as b}from"./sweetalert2.esm.all-DwEdJQJv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const pt={class:"pagetitle dark:text-white"},Dt={class:"dark:text-white"},Qt={class:"section dashboard"},Bt={class:"row mb-4"},Ct={class:"col-xl-3 col-md-6"},It={class:"card info-card sales-card"},Lt={class:"card-body"},jt={class:"card-title"},Vt={class:"d-flex align-items-center"},Ft={class:"ps-3"},Tt={class:"text-success small pt-1 fw-bold"},Mt={class:"d-block text-muted"},Nt={class:"col-xl-3 col-md-6"},Et={class:"card info-card customers-card"},Ot={class:"card-body"},Ut={class:"d-flex align-items-center"},$t={class:"ps-3"},zt={class:"text-primary small pt-1 fw-bold"},At={class:"d-block text-muted"},Pt={class:"col-xl-3 col-md-6"},qt={class:"card info-card revenue-card"},Gt={class:"card-body"},Ht={class:"d-flex align-items-center"},Jt={class:"ps-3"},Kt={class:"text-info small pt-1 fw-bold"},Rt={class:"d-block text-muted"},Wt={class:"col-xl-3 col-md-6"},Xt={class:"card info-card"},Yt={class:"card-body"},Zt={class:"card-title"},ts={class:"d-flex align-items-center"},ss={class:"ps-3"},es={class:"text-muted small"},os={class:"card"},is={class:"card-body"},ns={class:"row filter_form"},as={class:"col-md-3"},ls=["placeholder"],cs={class:"col-md-3"},ds=["placeholder"],rs={class:"col-md-3"},us={type:"submit",class:"btn btn-primary"},hs={class:"col-md-3"},ms={class:"table-responsive"},bs={class:"table text-center"},fs={scope:"col"},_s={scope:"col"},vs={scope:"col"},ys={scope:"col"},gs={scope:"col"},xs={scope:"col"},ws={key:0,scope:"col"},ks={key:1,scope:"col"},Ss={key:2,scope:"col"},ps={key:3,scope:"col"},Ds={scope:"row"},Qs={key:0},Bs=["onClick"],Cs=["href"],Is={key:1},Ls=["href"],Es={__name:"index",props:{orders:Object,translations:Array,statistics:Object},setup(e){const u=e,dt=bt(),h=ft({name:"",model:""}),rt=()=>{ct.get(route("orders.index"),h,{preserveState:!0,preserveScroll:!0})},r=a=>dt.props.auth_permissions.includes(a),ut=a=>{b.fire({title:u.translations.are_you_sure,text:u.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:u.translations.yes,cancelButtonText:u.translations.cancel}).then(s=>{s.isConfirmed&&ct.delete("orders/"+a,{onSuccess:()=>{b.fire({title:u.translations.data_deleted_successfully,icon:"success"})},onError:()=>{b.fire("Error!","There was an issue deleting the order.","error")}})})},ht=a=>{if(!a)return"-";const s={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return new Date(a).toLocaleDateString("en-US",s)};return(a,s)=>(n(),it(kt,{translations:e.translations},{default:nt(()=>{var f,_,v,y,g,x,w,k,S,p,D,Q,B,C,I,L,j,V,F,T,M,N,E,O,U,$,z,A,P,q,G,H,J,K,R,W,X,Y,Z,tt,st,et;return[t("div",pt,[t("h1",Dt,o(e.translations.orders),1)]),t("section",Qt,[t("div",Bt,[t("div",Ct,[t("div",It,[t("div",Lt,[t("h5",jt,[s[3]||(s[3]=d(" فواتير اليوم ")),((_=(f=e.statistics)==null?void 0:f.changes)==null?void 0:_.count)!==0?(n(),l("span",{key:0,class:m(((y=(v=e.statistics)==null?void 0:v.changes)==null?void 0:y.count)>0?"text-success":"text-danger")},[s[2]||(s[2]=d(" | ")),t("i",{class:m(((x=(g=e.statistics)==null?void 0:g.changes)==null?void 0:x.count)>0?"bi bi-arrow-up":"bi bi-arrow-down")},null,2),d(" "+o(Math.abs(((k=(w=e.statistics)==null?void 0:w.changes)==null?void 0:k.count)||0))+"% ",1)],2)):c("",!0)]),t("div",Vt,[s[4]||(s[4]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-receipt"})],-1)),t("div",Ft,[t("h6",null,o(((p=(S=e.statistics)==null?void 0:S.today)==null?void 0:p.count)||0)+" فاتورة",1),t("span",Tt,o((((Q=(D=e.statistics)==null?void 0:D.today)==null?void 0:Q.total)||0).toLocaleString())+" IQD ",1),t("small",Mt," مدفوع: "+o((((C=(B=e.statistics)==null?void 0:B.today)==null?void 0:C.paid)||0).toLocaleString()),1)])])])])]),t("div",Nt,[t("div",Et,[t("div",Ot,[s[6]||(s[6]=t("h5",{class:"card-title"},"فواتير الأسبوع",-1)),t("div",Ut,[s[5]||(s[5]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-calendar-week"})],-1)),t("div",$t,[t("h6",null,o(((L=(I=e.statistics)==null?void 0:I.week)==null?void 0:L.count)||0)+" فاتورة",1),t("span",zt,o((((V=(j=e.statistics)==null?void 0:j.week)==null?void 0:V.total)||0).toLocaleString())+" IQD ",1),t("small",At," مدفوع: "+o((((T=(F=e.statistics)==null?void 0:F.week)==null?void 0:T.paid)||0).toLocaleString()),1)])])])])]),t("div",Pt,[t("div",qt,[t("div",Gt,[s[8]||(s[8]=t("h5",{class:"card-title"},"فواتير الشهر",-1)),t("div",Ht,[s[7]||(s[7]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-calendar-month"})],-1)),t("div",Jt,[t("h6",null,o(((N=(M=e.statistics)==null?void 0:M.month)==null?void 0:N.count)||0)+" فاتورة",1),t("span",Kt,o((((O=(E=e.statistics)==null?void 0:E.month)==null?void 0:O.total)||0).toLocaleString())+" IQD ",1),t("small",Rt," مدفوع: "+o(((($=(U=e.statistics)==null?void 0:U.month)==null?void 0:$.paid)||0).toLocaleString()),1)])])])])]),t("div",Wt,[t("div",Xt,[t("div",Yt,[t("h5",Zt,[s[10]||(s[10]=d(" المقارنة مع الأمس ")),((A=(z=e.statistics)==null?void 0:z.changes)==null?void 0:A.total)!==0?(n(),l("span",{key:0,class:m(((q=(P=e.statistics)==null?void 0:P.changes)==null?void 0:q.total)>0?"text-success":"text-danger")},[s[9]||(s[9]=d(" | ")),t("i",{class:m(((H=(G=e.statistics)==null?void 0:G.changes)==null?void 0:H.total)>0?"bi bi-arrow-up":"bi bi-arrow-down")},null,2),d(" "+o(Math.abs(((K=(J=e.statistics)==null?void 0:J.changes)==null?void 0:K.total)||0))+"% ",1)],2)):c("",!0)]),t("div",ts,[t("div",{class:m(["card-icon rounded-circle d-flex align-items-center justify-content-center",(((W=(R=e.statistics)==null?void 0:R.changes)==null?void 0:W.total)||0)>=0?"bg-success":"bg-danger"])},s[11]||(s[11]=[t("i",{class:"bi bi-graph-up-arrow text-white"},null,-1)]),2),t("div",ss,[t("h6",null,"الأمس: "+o(((Y=(X=e.statistics)==null?void 0:X.yesterday)==null?void 0:Y.count)||0),1),t("span",es,o((((tt=(Z=e.statistics)==null?void 0:Z.yesterday)==null?void 0:tt.total)||0).toLocaleString())+" IQD ",1)])])])])])]),t("div",os,[s[20]||(s[20]=t("div",{class:"card-header"},[t("div",{class:"d-flex"})],-1)),t("div",is,[t("form",{onSubmit:_t(rt,["prevent"])},[t("div",ns,[t("div",as,[at(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":s[0]||(s[0]=i=>h.name=i),placeholder:e.translations.name},null,8,ls),[[lt,h.name]])]),t("div",cs,[at(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":s[1]||(s[1]=i=>h.model=i),placeholder:e.translations.model},null,8,ds),[[lt,h.model]])]),t("div",rs,[t("button",us,[d(o(e.translations.search)+"   ",1),s[12]||(s[12]=t("i",{class:"bi bi-search"},null,-1))])]),t("div",hs,[r("create order")?(n(),it(vt(yt),{key:0,class:"btn btn-primary",href:a.route("orders.create")},{default:nt(()=>[d(o(e.translations.create_invoice)+" ",1),s[13]||(s[13]=t("i",{class:"bi bi-plus-circle"},null,-1))]),_:1},8,["href"])):c("",!0)])])],32),t("div",ms,[t("table",bs,[t("thead",null,[t("tr",null,[s[14]||(s[14]=t("th",{scope:"col"},"#",-1)),t("th",fs,o(e.translations.client),1),t("th",_s,o(e.translations.total)+" IQD",1),s[15]||(s[15]=t("th",{scope:"col"},"الخصم IQD",-1)),s[16]||(s[16]=t("th",{scope:"col"},"المبلغ النهائي IQD",-1)),t("th",vs,o(e.translations.paid_order)+" IQD",1),t("th",ys,o(e.translations.due_order)+" IQD",1),t("th",gs,o(e.translations.statusOrder),1),t("th",xs,o(e.translations.created_at),1),r("update order")?(n(),l("th",ws)):c("",!0),r("delete order")?(n(),l("th",ks)):c("",!0),r("delete order")?(n(),l("th",Ss)):c("",!0),r("update order")?(n(),l("th",ps)):c("",!0)])]),t("tbody",null,[(n(!0),l(xt,null,gt((st=e.orders)==null?void 0:st.data,(i,mt)=>{var ot;return n(),l("tr",{key:i.id},[t("th",Ds,o(mt+1),1),t("td",null,o((ot=i.customer)==null?void 0:ot.name),1),t("td",null,o(i.total_amount),1),t("td",null,o(i.discount_amount||0),1),t("td",null,o(i.final_amount||i.total_amount),1),t("td",null,o(i.total_paid),1),t("td",null,o((i.final_amount||i.total_amount)-i.total_paid),1),t("td",null,o(i.status),1),t("td",null,o(ht(i.created_at)),1),r("delete order")?(n(),l("td",Qs,[t("button",{type:"button",class:"btn btn-danger",onClick:js=>ut(i.id)},s[17]||(s[17]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Bs)])):c("",!0),t("td",null,[t("a",{class:"btn btn-secondary",href:a.route("order.print",{id:i.id})},s[18]||(s[18]=[t("i",{class:"bi bi-printer text-white"},null,-1)]),8,Cs)]),r("update order")&&i.status=="due"?(n(),l("td",Is,[t("a",{class:"btn btn-success",href:a.route("orders.edit",{order:i.id})},s[19]||(s[19]=[t("i",{class:"bi bi-currency-dollar"},null,-1)]),8,Ls)])):c("",!0)])}),128))])])])])]),wt(St,{links:(et=e.orders)==null?void 0:et.links},null,8,["links"])])]}),_:1},8,["translations"]))}};export{Es as default};
