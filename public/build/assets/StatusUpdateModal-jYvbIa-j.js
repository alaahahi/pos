import{r as x,x as w,a as i,e as c,b as e,t as n,j as S,F as b,g as _,n as p,d as v,l as u,A as C,f as m,y,h as V}from"./app-AYyl8aPx.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"modal-mask"},$={class:"modal-wrapper"},j={class:"modal-container"},B={class:"modal-header"},D={class:"modal-body"},F={class:"mb-4"},N={class:"form-label fw-bold"},O={class:"row g-2"},A=["onClick"],E={key:0,class:"mb-3"},T={class:"form-label"},z={value:""},I=["value"],L={key:1,class:"mb-3"},q={class:"form-label"},G={class:"mb-3"},H={class:"form-label"},J=["placeholder"],K={class:"d-flex justify-content-center gap-2"},P=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm me-2"},R={__name:"StatusUpdateModal",props:{order:Object,employees:Array,translations:Object},emits:["close","success"],setup(a,{emit:f}){const o=a,h=f,d=x(!1),s=w({status:o.order.status,assigned_employee_id:o.order.assigned_employee_id||"",paid_amount:o.order.paid_amount||0,notes:o.order.notes||""}),g=[{value:"created",label:o.translations.created,icon:"bi bi-plus-circle"},{value:"received",label:o.translations.received,icon:"bi bi-check-circle"},{value:"executing",label:o.translations.executing,icon:"bi bi-play-circle"},{value:"partial_payment",label:o.translations.partial_payment,icon:"bi bi-cash-coin"},{value:"full_payment",label:o.translations.full_payment,icon:"bi bi-credit-card"},{value:"completed",label:o.translations.completed,icon:"bi bi-check2-all"},{value:"cancelled",label:o.translations.cancelled,icon:"bi bi-x-circle"}],k=()=>{d.value=!0;const r={status:s.status,assigned_employee_id:s.assigned_employee_id,notes:s.notes};s.status==="partial_payment"&&(r.paid_amount=s.paid_amount),V.patch(route("decoration.orders.status",o.order.id),r,{onSuccess:()=>{d.value=!1,h("success")},onError:()=>{d.value=!1}})};return(r,l)=>(i(),c("div",U,[e("div",$,[e("div",j,[e("div",B,[e("h3",null,n(a.translations.update_status),1),e("button",{onClick:l[0]||(l[0]=t=>r.$emit("close")),class:"btn-close"})]),e("div",D,[e("form",{onSubmit:S(k,["prevent"])},[e("div",F,[e("label",N,n(a.translations.change_status_to),1),e("div",O,[(i(),c(b,null,_(g,t=>e("div",{class:"col-6",key:t.value},[e("button",{type:"button",class:p(["btn w-100 status-btn",{"btn-primary":s.status===t.value,"btn-outline-secondary":s.status!==t.value}]),onClick:W=>s.status=t.value},[e("i",{class:p(t.icon)},null,2),v(" "+n(t.label),1)],10,A)])),64))])]),a.order.assigned_employee_id?m("",!0):(i(),c("div",E,[e("label",T,n(a.translations.assign_employee),1),u(e("select",{class:"form-select","onUpdate:modelValue":l[1]||(l[1]=t=>s.assigned_employee_id=t)},[e("option",z,n(a.translations.select_employee),1),(i(!0),c(b,null,_(a.employees,t=>(i(),c("option",{key:t.id,value:t.id},n(t.name),9,I))),128))],512),[[C,s.assigned_employee_id]])])),s.status==="partial_payment"&&s.status!=="full_payment"?(i(),c("div",L,[e("label",q,n(a.translations.paid_amount),1),u(e("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=t=>s.paid_amount=t)},null,512),[[y,s.paid_amount]])])):m("",!0),e("div",G,[e("label",H,n(a.translations.notes),1),u(e("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":l[3]||(l[3]=t=>s.notes=t),placeholder:a.translations.add_notes},null,8,J),[[y,s.notes]])]),e("div",K,[e("button",{type:"button",class:"btn btn-secondary text-center w-100",onClick:l[4]||(l[4]=t=>r.$emit("close"))},n(a.translations.cancel),1),e("button",{type:"submit",class:"btn btn-primary w-100 text-center",disabled:d.value},[d.value?(i(),c("span",Q)):m("",!0),v(" "+n(a.translations.update_status),1)],8,P)])],32)])])])]))}},Z=M(R,[["__scopeId","data-v-1af19158"]]);export{Z as S};
