import{r as k,T as x,C as y,a as i,h as V,w as v,b as s,t as n,i as _,d as h,j as E,l as d,x as u,u as o,A as U,c as m,f as C,F as N,v as R,e as b}from"./app-DLChBEag.js";import{_ as S}from"./AuthenticatedLayout-BaBYr0b8.js";import{_ as p}from"./InputError-D0ouqqv7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"pagetitle dark:text-white"},A={class:"dark:text-white"},B={class:"breadcrumb"},D={class:"breadcrumb-item"},M={class:"breadcrumb-item active dark:text-white"},j={class:"breadcrumb-item active dark:text-white"},L={class:"section dashboard"},O={class:"row"},P={class:"col-lg-12"},F={class:"card"},$={class:"card-body"},H={class:"card-title"},I={class:"row mb-3"},q={for:"inputText",class:"col-sm-2 col-form-label"},z={class:"col-sm-10"},G={class:"row mb-3"},J={for:"inputEmail",class:"col-sm-2 col-form-label"},K={class:"col-sm-10"},Q={class:"row mb-3"},W={for:"inputPassword",class:"col-sm-2 col-form-label"},X={class:"col-sm-10"},Y={class:"row mb-3"},Z={for:"inputDate",class:"col-sm-2 col-form-label"},ss={class:"col-sm-10"},es={value:"",disabled:""},ts=["value"],os={class:"row mb-3"},as={class:"col-sm-10"},ls={class:"form-check form-switch mb-2"},ns={class:"input-group"},rs=["disabled"],is={class:"row mb-3"},ds={for:"inputDate",class:"col-sm-2 col-form-label"},cs={class:"col-sm-10"},ms={class:"row mb-3"},us={for:"inputNumber",class:"col-sm-2 col-form-label"},_s={class:"col-sm-10"},bs=["src"],ps=["value"],vs={class:"text-center"},hs=["disabled"],fs={key:0,class:"bi bi-save"},ws={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Vs={__name:"Edit",props:{user:Object,userRoles:Array,roles:Object,translations:Array},setup(l){const r=l,c=k(!1),t=x({avatar:null,name:r.user.name,email:r.user.email,password:r.user.password,created_at:r.user.created_at,selectedRoles:r.userRoles,commission_enabled:!!r.user.commission_enabled,commission_rate_percent:r.user.commission_rate_percent||0}),f=()=>{c.value=!0,t.post(route("users.update",{user:r.user.id}),{onSuccess:()=>{c.value=!1},onError:()=>{c.value=!1}})};return(w,e)=>{const g=y("Link");return i(),V(S,{translations:l.translations},{default:v(()=>[s("div",T,[s("h1",A,n(l.translations.users),1),s("nav",null,[s("ol",B,[s("li",D,[_(g,{class:"nav-link dark:text-white",href:w.route("dashboard")},{default:v(()=>[h(n(l.translations.Home),1)]),_:1},8,["href"])]),s("li",M,n(l.translations.users),1),s("li",j,n(l.translations.edit),1)])])]),s("section",L,[s("div",O,[s("div",P,[s("div",F,[s("div",$,[s("h5",H,n(l.translations.edit_user_info),1),s("form",{onSubmit:E(f,["prevent"]),class:"row g-3",method:"POST"},[s("div",I,[s("label",q,n(l.translations.name),1),s("div",z,[d(s("input",{type:"text",class:"form-control",placeholder:"user name","onUpdate:modelValue":e[0]||(e[0]=a=>o(t).name=a)},null,512),[[u,o(t).name]]),_(p,{message:o(t).errors.name},null,8,["message"])])]),s("div",G,[s("label",J,n(l.translations.email),1),s("div",K,[d(s("input",{type:"email",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>o(t).email=a),placeholder:"user Email"},null,512),[[u,o(t).email]]),_(p,{message:o(t).errors.email},null,8,["message"])])]),s("div",Q,[s("label",W,n(l.translations.password),1),s("div",X,[d(s("input",{type:"password",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>o(t).password=a),placeholder:"Password"},null,512),[[u,o(t).password]]),_(p,{message:o(t).errors.password},null,8,["message"])])]),s("div",Y,[s("label",Z,n(l.translations.role),1),s("div",ss,[d(s("select",{class:"form-control",multiple:"","onUpdate:modelValue":e[3]||(e[3]=a=>o(t).selectedRoles=a)},[s("option",es,n(l.translations.role),1),(i(!0),m(N,null,C(l.roles,a=>(i(),m("option",{key:a,value:a},n(a),9,ts))),128))],512),[[U,o(t).selectedRoles]])])]),s("div",os,[e[11]||(e[11]=s("label",{class:"col-sm-2 col-form-label"},"عمولة الديكورات",-1)),s("div",as,[s("div",ls,[d(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>o(t).commission_enabled=a),id:"commissionEnabled"},null,512),[[R,o(t).commission_enabled]]),e[8]||(e[8]=s("label",{class:"form-check-label",for:"commissionEnabled"},"تفعيل نسبة العمولة",-1))]),s("div",ns,[d(s("input",{type:"number",step:"0.01",min:"0",max:"100",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>o(t).commission_rate_percent=a),disabled:!o(t).commission_enabled,placeholder:"% نسبة العمولة (مثال: 5)"},null,8,rs),[[u,o(t).commission_rate_percent]]),e[9]||(e[9]=s("span",{class:"input-group-text"},"%",-1))]),e[10]||(e[10]=s("small",{class:"text-muted"},"تحسب العمولة من سعر المبيع النهائي للديكور.",-1))])]),s("div",is,[s("label",ds,n(l.translations.created_at),1),s("div",cs,[d(s("input",{type:"date",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>o(t).created_at=a),disabled:""},null,512),[[u,o(t).created_at]])])]),s("div",ms,[s("label",us,n(l.translations.avatar),1),s("div",_s,[s("input",{type:"file",onInput:e[7]||(e[7]=a=>o(t).avatar=a.target.files[0])},null,32),r.user.avatar?(i(),m("img",{key:0,src:r.user.avatar,alt:"Current Avatar",class:"img-thumbnail",width:"80"},null,8,bs)):b("",!0),o(t).progress?(i(),m("progress",{key:1,value:o(t).progress.percentage,max:"100"},n(o(t).progress.percentage)+"% ",9,ps)):b("",!0)])]),s("div",vs,[s("button",{type:"submit",class:"btn btn-primary",disabled:c.value},[h(n(l.translations.update)+"   ",1),c.value?b("",!0):(i(),m("i",fs)),c.value?(i(),m("span",ws)):b("",!0)],8,hs)])],32)])])])])])]),_:1},8,["translations"])}}};export{Vs as default};
