import{r as k,x as j,k as V,a as u,c as m,b as t,t as s,j as C,l as b,y as _,e as v,d as P,g as E}from"./app-CHz4vJ2a.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"modal-mask"},T={class:"modal-wrapper"},U={class:"modal-container"},$={class:"modal-header"},B={class:"modal-body"},D={class:"mb-3"},I={class:"form-label"},N={class:"input-group"},O={class:"input-group-text"},q={class:"mb-3"},z={class:"form-label"},A={class:"input-group"},G={class:"input-group-text"},H={class:"text-muted"},J={class:"mb-3"},K={class:"form-label"},L={class:"input-group"},Q={class:"input-group-text"},R={class:"text-muted"},W={class:"mb-4"},X={class:"card bg-light"},Y={class:"card-body"},Z={class:"card-title"},tt={class:"d-flex justify-content-between mb-2"},st={key:0,class:"d-flex justify-content-between mb-2"},et={class:"text-success"},ot={key:1,class:"d-flex justify-content-between mb-2"},nt={class:"text-danger"},at={class:"d-flex justify-content-between"},lt={class:"text-primary"},it={class:"mb-3"},ct={class:"form-label"},dt=["placeholder"],rt={class:"d-flex justify-content-center gap-2"},ut=["disabled"],mt={key:0,class:"spinner-border spinner-border-sm me-2"},bt={__name:"PricingEditModal",props:{order:Object,translations:Object},emits:["close","success"],setup(e,{emit:x}){const c=e,F=x,d=k(!1),o=j({base_price:parseFloat(c.order.base_price)||0,additional_cost:parseFloat(c.order.additional_cost)||0,discount:parseFloat(c.order.discount)||0,notes:c.order.notes||""}),p=V(()=>{const l=parseFloat(o.base_price)||0,n=parseFloat(o.additional_cost)||0,r=parseFloat(o.discount)||0;return(l+n-r).toFixed(2)}),y=()=>{o.total_price=p.value},i=l=>l==="dollar"?"دولار":"دينار",w=()=>{d.value=!0;const l={base_price:parseFloat(o.base_price)||0,additional_cost:parseFloat(o.additional_cost)||0,discount:parseFloat(o.discount)||0,total_price:parseFloat(p.value)||0,notes:o.notes};E.patch(route("decoration.orders.pricing",c.order.id),l,{onSuccess:()=>{d.value=!1,F("success")},onError:()=>{d.value=!1}})};return(l,n)=>{var r,h,f,g;return u(),m("div",S,[t("div",T,[t("div",U,[t("div",$,[t("h3",null,s(e.translations.edit_pricing),1),t("button",{onClick:n[0]||(n[0]=a=>l.$emit("close")),class:"btn-close"})]),t("div",B,[t("form",{onSubmit:C(w,["prevent"])},[t("div",D,[t("label",I,s(e.translations.base_price),1),t("div",N,[b(t("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":n[1]||(n[1]=a=>o.base_price=a),readonly:""},null,512),[[_,o.base_price]]),t("span",O,s(i(e.order.currency)),1)])]),t("div",q,[t("label",z,s(e.translations.additional_cost),1),t("div",A,[b(t("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":n[2]||(n[2]=a=>o.additional_cost=a),onInput:y},null,544),[[_,o.additional_cost]]),t("span",G,s(i(e.order.currency)),1)]),t("small",H,s(e.translations.additional_cost_help),1)]),t("div",J,[t("label",K,s(e.translations.discount),1),t("div",L,[b(t("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":n[3]||(n[3]=a=>o.discount=a),onInput:y},null,544),[[_,o.discount]]),t("span",Q,s(i(e.order.currency)),1)]),t("small",R,s(e.translations.discount_help),1)]),t("div",W,[t("div",X,[t("div",Y,[t("h6",Z,s(e.translations.price_summary),1),t("div",tt,[t("span",null,s(e.translations.base_price)+":",1),t("span",null,s(o.base_price)+" "+s(i((r=e.order.decoration)==null?void 0:r.currency)),1)]),o.additional_cost>0?(u(),m("div",st,[t("span",null,s(e.translations.additional_cost)+":",1),t("span",et,"+"+s(o.additional_cost)+" "+s(i((h=e.order.decoration)==null?void 0:h.currency)),1)])):v("",!0),o.discount>0?(u(),m("div",ot,[t("span",null,s(e.translations.discount)+":",1),t("span",nt,"-"+s(o.discount)+" "+s(i((f=e.order.decoration)==null?void 0:f.currency)),1)])):v("",!0),n[6]||(n[6]=t("hr",null,null,-1)),t("div",at,[t("strong",null,s(e.translations.total_price)+":",1),t("strong",lt,s(p.value)+" "+s(i((g=e.order.decoration)==null?void 0:g.currency)),1)])])])]),t("div",it,[t("label",ct,s(e.translations.notes),1),b(t("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":n[4]||(n[4]=a=>o.notes=a),placeholder:e.translations.add_notes},null,8,dt),[[_,o.notes]])]),t("div",rt,[t("button",{type:"button",class:"btn btn-secondary text-center w-100",onClick:n[5]||(n[5]=a=>l.$emit("close"))},s(e.translations.cancel),1),t("button",{type:"submit",class:"btn btn-primary w-100 text-center",disabled:d.value},[d.value?(u(),m("span",mt)):v("",!0),P(" "+s(e.translations.update_pricing),1)],8,ut)])],32)])])])])}}},ht=M(bt,[["__scopeId","data-v-54987409"]]);export{ht as P};
