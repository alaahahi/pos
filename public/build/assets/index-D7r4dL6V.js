import{Q as $,x as N,a as l,c as b,w as f,b as t,t as n,i as w,d as m,u as _,p as v,j as U,l as p,y as C,A as j,f as d,e as u,g as D,F as M,h as k}from"./app-Dyo3CGUB.js";import{_ as A}from"./AuthenticatedLayout-DQQOHWHW.js";import{_ as O}from"./Pagination-ByRiNjxu.js";import{S as h}from"./sweetalert2.esm.all-DwEdJQJv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"pagetitle dark:text-white"},H={class:"dark:text-white"},L={class:"breadcrumb"},P={class:"breadcrumb-item"},Q={class:"breadcrumb-item active dark:text-white"},Y={class:"section dashboard"},z={class:"card"},G={class:"card-body"},I={class:"row filter_form"},J={class:"col-md-2"},K=["placeholder"],R={class:"col-md-2"},W=["placeholder"],X={class:"col-md-2"},Z={value:"",selected:"",disabled:""},tt={value:1},et={value:0},st={class:"col-md-2"},nt={type:"submit",class:"btn btn-primary"},at={class:"col-md-2"},ot={class:"col-md-2"},lt={class:"table-responsive"},rt={class:"table text-center"},it={scope:"col"},ct={scope:"col"},dt={scope:"col"},ut={scope:"col"},ht={scope:"col"},ft={scope:"col"},mt={scope:"col"},bt={key:0,scope:"col"},_t={key:1,scope:"col"},vt={class:"text-center"},pt={scope:"row"},kt={class:"inline-flex items-center me-5 cursor-pointer"},yt=["checked","onChange"],xt={key:0},gt=["href"],wt={key:1},Ct=["onClick"],Ft={__name:"index",props:{customers:Object,translations:Object},setup(e){const r=e,B=$(),i=N({name:"",phone:"",is_active:""}),S=()=>{k.get(route("customers.index"),i,{preserveState:!0,preserveScroll:!0})},c=o=>B.props.auth_permissions.includes(o),T=o=>{h.fire({title:r.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:r.translations.yes,cancelButtonText:r.translations.cancel}).then(s=>{s.isConfirmed&&k.post(`/customers/${o}/activate`,{onSuccess:()=>{h.fire("Updated!","Client status has been updated.","success")},onError:()=>{h.fire("Error!","There was an issue updating customer status.","error")}})})},V=o=>{h.fire({title:r.translations.are_your_sure,text:r.translations.You_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:r.translations.yes,cancelButtonText:r.translations.cancel}).then(s=>{s.isConfirmed&&k.delete("customers/"+o,{onSuccess:()=>{h.fire({title:r.translations.data_deleted_successfully,icon:"success"})},onError:()=>{h.fire("Error!","There was an issue deleting the customer.","error")}})})};return(o,s)=>(l(),b(A,{translations:e.translations},{default:f(()=>[t("div",q,[t("h1",H,n(e.translations.customers),1),t("nav",null,[t("ol",L,[t("li",P,[w(_(v),{class:"nav-link dark:text-white",href:o.route("dashboard")},{default:f(()=>[m(n(e.translations.Home),1)]),_:1},8,["href"])]),t("li",Q,n(e.translations.customers),1)])])]),t("section",Y,[t("div",z,[s[10]||(s[10]=t("div",{class:"card-header"},[t("div",{class:"d-flex"})],-1)),t("div",G,[t("form",{onSubmit:U(S,["prevent"])},[t("div",I,[t("div",J,[p(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":s[0]||(s[0]=a=>i.name=a),placeholder:e.translations.name},null,8,K),[[C,i.name]])]),t("div",R,[p(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":s[1]||(s[1]=a=>i.phone=a),placeholder:e.translations.phone},null,8,W),[[C,i.phone]])]),t("div",X,[p(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=a=>i.is_active=a)},[t("option",Z,n(e.translations.status),1),t("option",tt,n(e.translations.active),1),t("option",et,n(e.translations.not_active),1)],512),[[j,i.is_active]])]),t("div",st,[t("button",nt,[m(n(e.translations.search)+"   ",1),s[3]||(s[3]=t("i",{class:"bi bi-search"},null,-1))])]),t("div",at,[c("read customers")?(l(),b(_(v),{key:0,class:"btn btn-success",href:o.route("export.customers")},{default:f(()=>[m(n(e.translations.export)+"   ",1),s[4]||(s[4]=t("i",{class:"bi bi-filetype-xls"},null,-1))]),_:1},8,["href"])):d("",!0)]),t("div",ot,[c("create customer")?(l(),b(_(v),{key:0,class:"btn btn-primary",href:o.route("customers.create")},{default:f(()=>[m(n(e.translations.create)+"   ",1),s[5]||(s[5]=t("i",{class:"bi bi-plus-circle"},null,-1))]),_:1},8,["href"])):d("",!0)])])],32),t("div",lt,[t("table",rt,[t("thead",null,[t("tr",null,[s[6]||(s[6]=t("th",{scope:"col"},"#",-1)),t("th",it,n(e.translations.name),1),t("th",ct,n(e.translations.phone),1),t("th",dt,n(e.translations.balance_dollar),1),t("th",ut,n(e.translations.balance_dinar),1),t("th",ht,n(e.translations.last_purchase_date),1),t("th",ft,n(e.translations.status),1),t("th",mt,n(e.translations.status),1),c("update customer")?(l(),u("th",bt,n(e.translations.edit),1)):d("",!0),c("delete customer")?(l(),u("th",_t,n(e.translations.delete),1)):d("",!0)])]),t("tbody",vt,[(l(!0),u(M,null,D(e.customers.data,(a,E)=>{var y,x,g;return l(),u("tr",{key:a.id},[t("th",pt,n(E+1),1),t("td",null,n(a.name),1),t("td",null,n(a.phone),1),t("td",null,n((y=a.balance)==null?void 0:y.balance_dollar),1),t("td",null,n((x=a.balance)==null?void 0:x.balance_dinar),1),t("td",null,n((g=a.balance)==null?void 0:g.last_transaction_date),1),t("td",null,n(a.is_active==1?e.translations.active:e.translations.not_active),1),t("td",null,[t("div",null,[t("label",kt,[t("input",{type:"checkbox",class:"sr-only peer",checked:a.is_active==1,onChange:F=>T(a.id)},null,40,yt),s[7]||(s[7]=t("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"},null,-1))])])]),c("update customer")?(l(),u("td",xt,[t("a",{class:"btn btn-primary",href:o.route("customers.edit",{customer:a.id})},s[8]||(s[8]=[t("i",{class:"bi bi-pencil-square"},null,-1)]),8,gt)])):d("",!0),c("delete customer")?(l(),u("td",wt,[t("button",{type:"button",class:"btn btn-danger",onClick:F=>V(a.id)},s[9]||(s[9]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Ct)])):d("",!0)])}),128))])])])])]),w(O,{links:e.customers.links},null,8,["links"])])]),_:1},8,["translations"]))}};export{Ft as default};
