import{r as v,Q as vt,k as yt,o as ft,a as n,h as I,w as F,b as t,i as V,d as o,u as Y,p as Z,t as a,n as C,c as d,e as u,l as x,G as tt,f as st,F as et,J as z,j as L,x as B,A as G,C as J,K as pt,g as T,D as P}from"./app-JWVPOn2h.js";import{A as gt}from"./AuthenticatedLayout-DTt4J0BF.js";import{S as p}from"./sweetalert2.esm.all-DwEdJQJv.js";import{_ as _t}from"./_plugin-vue_export-helper-DlAUqK2U.js";const wt={class:"section dashboard"},xt={class:"card mb-4"},ht={class:"card-header d-flex justify-content-between align-items-center"},kt={class:"card-body"},Ct={class:"row"},Mt={class:"col-md-3"},Ft={class:"col-md-3"},Bt={class:"col-md-3"},St={class:"col-md-3"},Vt={key:0,class:"row mt-3"},Tt={class:"col-md-3"},Ut={class:"badge bg-info fs-6"},Dt={class:"col-md-3"},$t={class:"badge bg-info fs-6"},At={class:"col-md-3"},jt=["disabled"],qt={key:0,class:"spinner-border spinner-border-sm me-2"},Et={class:"col-md-3"},Nt=["disabled"],It={class:"d-flex justify-content-between align-items-center"},Lt={key:0},Pt={key:1},Ot={key:2,class:"mt-2"},Wt={class:"text-danger"},Qt=["disabled"],zt={key:0,class:"spinner-border spinner-border-sm me-2"},Gt={class:"row mb-4"},Jt={class:"col-md-3"},Kt={class:"card text-center"},Ht={class:"card-body"},Rt={class:"text-primary"},Xt={class:"col-md-3"},Yt={class:"card text-center"},Zt={class:"card-body"},ts={class:"text-info"},ss={class:"col-md-3"},es={class:"card text-center"},ls={class:"card-body"},as={class:"text-success"},ns={class:"col-md-3"},os={class:"card text-center"},rs={class:"card-body"},ds={class:"text-danger"},is={class:"card"},us={class:"card-header"},cs={class:"nav nav-tabs card-header-tabs",role:"tablist"},ms={class:"nav-item",role:"presentation"},bs={class:"nav-item",role:"presentation"},vs={class:"card-body"},ys={class:"tab-content"},fs={class:"table-responsive"},ps={class:"table table-hover"},gs={class:"text-success"},_s=["onClick"],ws={key:0},xs={class:"tab-content"},hs={class:"table-responsive"},ks={class:"table table-hover"},Cs={key:0},Ms={class:"modal-container"},Fs={class:"modal-content"},Bs={class:"modal-header"},Ss={class:"modal-title"},Vs={class:"modal-body"},Ts={class:"mb-3"},Us=["value"],Ds={class:"mb-3"},$s=["max"],As={class:"mb-3"},js=["disabled"],qs={key:0},Es={key:0,class:"text-danger"},Ns={key:1,class:"text-success"},Is={class:"mb-3"},Ls={key:0,class:"alert alert-info"},Ps={class:"modal-footer"},Os=["disabled"],Ws={key:0,class:"spinner-border spinner-border-sm me-2"},Qs={class:"modal-container"},zs={class:"modal-content"},Gs={class:"modal-body"},Js={class:"mb-3"},Ks={class:"mb-3"},Hs={class:"mb-3"},Rs={class:"modal-footer"},Xs=["disabled"],Ys={key:0,class:"spinner-border spinner-border-sm me-2"},Zs={class:"modal-container"},te={class:"modal-content"},se={class:"modal-body"},ee={class:"alert alert-info"},le={class:"mb-3"},ae={class:"mb-3"},ne={class:"mb-3"},oe={class:"modal-footer"},re=["disabled"],de={key:0,class:"spinner-border spinner-border-sm me-2"},ie={__name:"Show",props:{customer:Object,invoices:Array,transactions:Array,statistics:Object,translations:Object},setup(i){const y=i,K=v(y.transactions||[]);vt();const O=v(!1),g=v(null),U=v(!1),D=v(null),W=v(!1),Q=v(!1),k=v(!1),$=v(!1),A=v(!1),_=v(null),M=v("invoices"),c=v({amount:"",payment_method:"cash",notes:""}),w=v({amount:"",currency:"dinar",notes:""}),m=v({amount:"",currency:"dinar",notes:""}),j=yt(()=>y.customer.balance?c.value.payment_method!=="balance"?!0:(y.customer.balance.balance_dinar||0)>=parseFloat(c.value.amount||0):!1),r=(l,s="dinar")=>{if(l==null||l==="")return"0";const e=parseFloat(l);return isNaN(e)?"0":`${e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(/\.00$/,"")} ${s==="dollar"?"$":"د.ع"}`},H=l=>l?new Date(l).toLocaleDateString("ar-IQ"):"-",lt=l=>({paid:"مدفوعة",due:"غير مدفوعة",pending:"قيد الانتظار",completed:"مكتملة",cancelled:"ملغاة"})[l]||l,at=l=>({paid:"badge bg-success",due:"badge bg-danger",pending:"badge bg-warning",completed:"badge bg-success",cancelled:"badge bg-secondary"})[l]||"badge bg-secondary",nt=l=>({cash:"نقدي",balance:"من الرصيد",transfer:"تحويل"})[l]||l,ot=l=>({deposit:"إيداع",withdrawal:"سحب",payment:"دفع",in:"داخل",out:"خارج"})[l]||l,rt=l=>({deposit:"badge bg-success",withdrawal:"badge bg-danger",payment:"badge bg-primary",in:"badge bg-success",out:"badge bg-danger"})[l]||"badge bg-secondary",dt=async l=>{g.value=l,c.value={amount:l.remaining.toFixed(2),payment_method:"cash",notes:""},O.value=!0,await pt(),D.value&&(D.value.focus(),D.value.select())},q=()=>{O.value=!1,g.value=null,c.value={amount:"",payment_method:"cash",notes:""}},R=()=>{if(!g.value)return;if(parseFloat(c.value.amount)<=0){p.fire("خطأ","المبلغ يجب أن يكون أكبر من صفر","error");return}if(parseFloat(c.value.amount)>g.value.remaining){p.fire("خطأ","المبلغ المدفوع أكبر من المبلغ المتبقي","error");return}if(c.value.payment_method==="balance"&&!j.value){p.fire("خطأ","الرصيد غير كافي","error");return}U.value=!0;const l=(g.value.total_paid||0)+parseFloat(c.value.amount),s={...c.value,total_paid:l,total_payments:y.statistics.total_paid||0};T.post(route("customers.orders.pay",{customer:y.customer.id,order:g.value.id}),s,{onSuccess:()=>{p.fire("نجح","تم دفع الفاتورة بنجاح","success"),q()},onError:e=>{const f=e.message||e.amount||"حدث خطأ أثناء الدفع";p.fire("خطأ",f,"error")},onFinish:()=>{U.value=!1}})},X=async(l=!1)=>{$.value=!0;try{const s=await P.get(route("customers.verify-balance",y.customer.id),{params:{auto_fix:!0}});s.data.success&&(_.value=s.data.balance,s.data.corrected&&T.reload({only:["customer"]}))}catch(s){console.error("Error verifying balance:",s)}finally{$.value=!1}},it=async()=>{A.value=!0;try{const l=await P.get(route("customers.verify-balance",y.customer.id),{params:{fix:!0}});l.data.success&&(_.value=l.data.balance,y.customer.balance&&(y.customer.balance.balance_dollar=l.data.balance.calculated.dollar,y.customer.balance.balance_dinar=l.data.balance.calculated.dinar),T.reload({only:["customer"]}))}catch(l){console.error("Error fixing balance:",l)}finally{A.value=!1}};ft(()=>{X(!1)});const ut=()=>{w.value={amount:"",currency:"dinar",notes:""},W.value=!0},E=()=>{W.value=!1,w.value={amount:"",currency:"dinar",notes:""}},ct=async()=>{var l,s;if(!w.value.amount||parseFloat(w.value.amount)<=0){p.fire("خطأ","يرجى إدخال مبلغ صحيح","error");return}k.value=!0;try{const e=await P.post("/decoration-payments/balance/add",{customer_id:y.customer.id,amount:w.value.amount,currency:w.value.currency,notes:w.value.notes});e.data.success?(p.fire("نجح","تم إضافة الرصيد بنجاح","success"),E(),T.reload()):p.fire("خطأ",e.data.message||"حدث خطأ أثناء إضافة الرصيد","error")}catch(e){console.error("Error adding balance:",e),p.fire("خطأ",((s=(l=e.response)==null?void 0:l.data)==null?void 0:s.message)||"حدث خطأ أثناء إضافة الرصيد","error")}finally{k.value=!1}},mt=()=>{m.value={amount:"",currency:"dinar",notes:""},Q.value=!0},N=()=>{Q.value=!1,m.value={amount:"",currency:"dinar",notes:""}},bt=async()=>{var s,e,f,b;if(!m.value.amount||parseFloat(m.value.amount)<=0){p.fire("خطأ","يرجى إدخال مبلغ صحيح","error");return}const l=m.value.currency==="dollar"?((s=y.customer.balance)==null?void 0:s.balance_dollar)||0:((e=y.customer.balance)==null?void 0:e.balance_dinar)||0;if(parseFloat(m.value.amount)>l){p.fire("خطأ","الرصيد غير كافي","error");return}k.value=!0;try{const h=await P.post("/decoration-payments/balance/withdraw",{customer_id:y.customer.id,amount:m.value.amount,currency:m.value.currency,notes:m.value.notes});h.data.success?(p.fire("نجح","تم سحب الرصيد بنجاح","success"),N(),T.reload()):p.fire("خطأ",h.data.message||"حدث خطأ أثناء سحب الرصيد","error")}catch(h){console.error("Error withdrawing balance:",h),p.fire("خطأ",((b=(f=h.response)==null?void 0:f.data)==null?void 0:b.message)||"حدث خطأ أثناء سحب الرصيد","error")}finally{k.value=!1}};return(l,s)=>(n(),I(gt,{translations:i.translations},{default:F(()=>[t("section",wt,[t("div",xt,[t("div",ht,[s[13]||(s[13]=t("h5",{class:"mb-0"},"معلومات العميل",-1)),V(Y(Z),{href:l.route("customers.index"),class:"btn btn-secondary btn-sm"},{default:F(()=>s[12]||(s[12]=[t("i",{class:"bi bi-arrow-right"},null,-1),o(" رجوع ")])),_:1},8,["href"])]),t("div",kt,[t("div",Ct,[t("div",Mt,[s[14]||(s[14]=t("strong",null,"الاسم:",-1)),o(" "+a(i.customer.name),1)]),t("div",Ft,[s[15]||(s[15]=t("strong",null,"الهاتف:",-1)),o(" "+a(i.customer.phone||"-"),1)]),t("div",Bt,[s[16]||(s[16]=t("strong",null,"البريد الإلكتروني:",-1)),o(" "+a(i.customer.email||"-"),1)]),t("div",St,[s[17]||(s[17]=t("strong",null,"الحالة:",-1)),t("span",{class:C(i.customer.is_active?"badge bg-success":"badge bg-danger")},a(i.customer.is_active?"نشط":"غير نشط"),3)])]),i.customer.balance?(n(),d("div",Vt,[t("div",Tt,[s[18]||(s[18]=t("strong",null,"الرصيد بالدولار:",-1)),t("span",Ut,a(r(i.customer.balance.balance_dollar||0,"dollar")),1)]),t("div",Dt,[s[19]||(s[19]=t("strong",null,"الرصيد بالدينار:",-1)),t("span",$t,a(r(i.customer.balance.balance_dinar||0,"dinar")),1)]),t("div",At,[t("button",{class:"btn btn-sm btn-primary",onClick:s[0]||(s[0]=e=>X(!0)),disabled:$.value},[$.value?(n(),d("span",qt)):u("",!0),s[20]||(s[20]=t("i",{class:"bi bi-check-circle"},null,-1)),s[21]||(s[21]=o(" التحقق من الرصيد "))],8,jt)]),t("div",Et,[t("button",{class:"btn btn-sm btn-success me-2",onClick:ut},s[22]||(s[22]=[t("i",{class:"bi bi-plus-circle"},null,-1),o(" إضافة رصيد ")])),t("button",{class:"btn btn-sm btn-warning",onClick:mt,disabled:(i.customer.balance.balance_dollar||0)<=0&&(i.customer.balance.balance_dinar||0)<=0},s[23]||(s[23]=[t("i",{class:"bi bi-dash-circle"},null,-1),o(" سحب رصيد ")]),8,Nt)])])):u("",!0),_.value?(n(),d("div",{key:1,class:C(["alert mt-3",_.value.is_balanced?"alert-success":"alert-warning"])},[t("div",It,[t("div",null,[_.value.is_balanced?(n(),d("strong",Lt,"✓ الرصيد متطابق")):(n(),d("strong",Pt,"⚠ يوجد اختلاف في الرصيد")),_.value.is_balanced?u("",!0):(n(),d("div",Ot,[t("small",null,[s[24]||(s[24]=t("strong",null,"المحفوظ:",-1)),o(" "+a(r(_.value.stored.dinar))+" / "+a(r(_.value.stored.dollar,"dollar"))+" ",1),s[25]||(s[25]=t("br",null,null,-1)),s[26]||(s[26]=t("strong",null,"المحسوب:",-1)),o(" "+a(r(_.value.calculated.dinar))+" / "+a(r(_.value.calculated.dollar,"dollar"))+" ",1),s[27]||(s[27]=t("br",null,null,-1)),s[28]||(s[28]=t("strong",null,"الفرق:",-1)),t("span",Wt,a(r(_.value.difference.dinar))+" / "+a(r(_.value.difference.dollar,"dollar")),1)])]))]),_.value.is_balanced?u("",!0):(n(),d("button",{key:0,class:"btn btn-sm btn-warning",onClick:it,disabled:A.value},[A.value?(n(),d("span",zt)):u("",!0),s[29]||(s[29]=o(" تصحيح الرصيد "))],8,Qt))])],2)):u("",!0)])]),t("div",Gt,[t("div",Jt,[t("div",Kt,[t("div",Ht,[s[30]||(s[30]=t("h6",{class:"text-muted"},"إجمالي الفواتير",-1)),t("h4",Rt,a(i.statistics.total_invoices),1)])])]),t("div",Xt,[t("div",Yt,[t("div",Zt,[s[31]||(s[31]=t("h6",{class:"text-muted"},"إجمالي المبلغ",-1)),t("h4",ts,a(r(i.statistics.total_amount)),1)])])]),t("div",ss,[t("div",es,[t("div",ls,[s[32]||(s[32]=t("h6",{class:"text-muted"},"إجمالي المدفوع",-1)),t("h4",as,a(r(i.statistics.total_paid)),1)])])]),t("div",ns,[t("div",os,[t("div",rs,[s[33]||(s[33]=t("h6",{class:"text-muted"},"إجمالي الدين",-1)),t("h4",ds,a(r(i.statistics.total_debt)),1)])])])]),t("div",is,[t("div",us,[t("ul",cs,[t("li",ms,[t("button",{class:C(["nav-link",{active:M.value==="invoices"}]),onClick:s[1]||(s[1]=e=>M.value="invoices"),type:"button"},s[34]||(s[34]=[t("i",{class:"bi bi-receipt"},null,-1),o(" الفواتير ")]),2)]),t("li",bs,[t("button",{class:C(["nav-link",{active:M.value==="transactions"}]),onClick:s[2]||(s[2]=e=>M.value="transactions"),type:"button"},s[35]||(s[35]=[t("i",{class:"bi bi-arrow-left-right"},null,-1),o(" الحركات المالية ")]),2)])])]),t("div",vs,[x(t("div",ys,[t("div",fs,[t("table",ps,[s[39]||(s[39]=t("thead",null,[t("tr",null,[t("th",null,"رقم الفاتورة"),t("th",null,"التاريخ"),t("th",null,"المبلغ الإجمالي"),t("th",null,"الخصم"),t("th",null,"المبلغ النهائي"),t("th",null,"المدفوع"),t("th",null,"المتبقي"),t("th",null,"الحالة"),t("th",null,"طريقة الدفع"),t("th",null,"الإجراءات")])],-1)),t("tbody",null,[(n(!0),d(et,null,st(i.invoices,e=>(n(),d("tr",{key:e.id},[t("td",null,a(e.order_number),1),t("td",null,a(H(e.date)),1),t("td",null,a(r(e.total_amount)),1),t("td",null,a(r(e.discount_amount)),1),t("td",null,[t("strong",null,a(r(e.final_amount)),1)]),t("td",gs,a(r(e.total_paid)),1),t("td",{class:C(["text-danger",{"fw-bold":e.remaining>0}])},a(r(e.remaining)),3),t("td",null,[t("span",{class:C(at(e.status))},a(lt(e.status)),3)]),t("td",null,a(nt(e.payment_method)),1),t("td",null,[e.remaining>0?(n(),d("button",{key:0,class:"btn btn-sm btn-primary",onClick:f=>dt(e)},s[36]||(s[36]=[t("i",{class:"bi bi-cash-coin"},null,-1),o(" دفع ")]),8,_s)):u("",!0),V(Y(Z),{href:l.route("order.print",e.id),class:"btn btn-sm btn-info",target:"_blank"},{default:F(()=>s[37]||(s[37]=[t("i",{class:"bi bi-printer"},null,-1),o(" طباعة ")])),_:2},1032,["href"])])]))),128)),i.invoices.length===0?(n(),d("tr",ws,s[38]||(s[38]=[t("td",{colspan:"10",class:"text-center text-muted"},"لا توجد فواتير",-1)]))):u("",!0)])])])],512),[[tt,M.value==="invoices"]]),x(t("div",xs,[t("div",hs,[t("table",ks,[s[41]||(s[41]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"التاريخ"),t("th",null,"نوع الحركة"),t("th",null,"المبلغ"),t("th",null,"العملة"),t("th",null,"الوصف"),t("th",null,"الملاحظات")])],-1)),t("tbody",null,[(n(!0),d(et,null,st(K.value,(e,f)=>{var b;return n(),d("tr",{key:e.id},[t("td",null,a(f+1),1),t("td",null,a(H(e.date)),1),t("td",null,[t("span",{class:C(rt(e.type))},a(ot(e.type)),3)]),t("td",{class:C(e.type==="deposit"?"text-success":e.type==="withdrawal"?"text-danger":"text-info")},[t("strong",null,a(e.type==="deposit"?"+":e.type==="withdrawal"?"-":"")+" "+a(r(e.amount,e.currency==="USD"||e.currency==="$"?"dollar":"dinar")),1)],2),t("td",null,a(e.currency==="USD"||e.currency==="$"?"دولار":"دينار"),1),t("td",null,a(e.description||e.name||"-"),1),t("td",null,a(((b=e.details)==null?void 0:b.notes)||"-"),1)])}),128)),K.value.length===0?(n(),d("tr",Cs,s[40]||(s[40]=[t("td",{colspan:"7",class:"text-center text-muted"},"لا توجد حركات مالية",-1)]))):u("",!0)])])])],512),[[tt,M.value==="transactions"]])])])]),(n(),I(z,{to:"body"},[V(J,{name:"modal"},{default:F(()=>{var e,f,b,h;return[O.value?(n(),d("div",{key:0,class:"modal-overlay",onClick:L(q,["self"])},[t("div",Ms,[t("div",Fs,[t("div",Bs,[t("h5",Ss,"دفع الفاتورة "+a((e=g.value)==null?void 0:e.order_number),1),t("button",{type:"button",class:"btn-close",onClick:q,"aria-label":"Close"},s[42]||(s[42]=[t("span",{"aria-hidden":"true"},"×",-1)]))]),t("div",Vs,[t("form",{onSubmit:L(R,["prevent"])},[t("div",Ts,[s[43]||(s[43]=t("label",{class:"form-label"},"المبلغ المتبقي",-1)),t("input",{type:"text",class:"form-control",value:r(((f=g.value)==null?void 0:f.remaining)||0),disabled:""},null,8,Us)]),t("div",Ds,[s[44]||(s[44]=t("label",{class:"form-label"},[o("المبلغ المدفوع "),t("span",{class:"text-danger"},"*")],-1)),x(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=S=>c.value.amount=S),step:"0.01",min:"0.01",max:(b=g.value)==null?void 0:b.remaining,required:"",ref_key:"amountInput",ref:D},null,8,$s),[[B,c.value.amount]])]),t("div",As,[s[48]||(s[48]=t("label",{class:"form-label"},[o("طريقة الدفع "),t("span",{class:"text-danger"},"*")],-1)),x(t("select",{class:"form-select","onUpdate:modelValue":s[4]||(s[4]=S=>c.value.payment_method=S),required:""},[s[46]||(s[46]=t("option",{value:"cash"},"نقدي",-1)),t("option",{value:"balance",disabled:!j.value},[s[45]||(s[45]=o(" من الرصيد ")),i.customer.balance?(n(),d("span",qs," (المتاح: "+a(r(i.customer.balance.balance_dinar||0))+") ",1)):u("",!0)],8,js),s[47]||(s[47]=t("option",{value:"transfer"},"تحويل",-1))],512),[[G,c.value.payment_method]]),c.value.payment_method==="balance"&&!j.value?(n(),d("small",Es," الرصيد غير كافي (المتاح: "+a(r(((h=i.customer.balance)==null?void 0:h.balance_dinar)||0))+") ",1)):u("",!0),c.value.payment_method==="balance"&&j.value?(n(),d("small",Ns," ✓ الرصيد كافي للدفع ")):u("",!0)]),t("div",Is,[s[49]||(s[49]=t("label",{class:"form-label"},"ملاحظات",-1)),x(t("textarea",{class:"form-control","onUpdate:modelValue":s[5]||(s[5]=S=>c.value.notes=S),rows:"3"},null,512),[[B,c.value.notes]])]),g.value?(n(),d("div",Ls,[s[50]||(s[50]=t("strong",null,"المبلغ النهائي:",-1)),o(" "+a(r(g.value.final_amount)),1),s[51]||(s[51]=t("br",null,null,-1)),s[52]||(s[52]=t("strong",null,"المدفوع سابقاً:",-1)),o(" "+a(r(g.value.total_paid)),1),s[53]||(s[53]=t("br",null,null,-1)),s[54]||(s[54]=t("strong",null,"المتبقي:",-1)),o(" "+a(r(g.value.remaining)),1)])):u("",!0)],32)]),t("div",Ps,[t("button",{type:"button",class:"btn btn-secondary",onClick:q},"إلغاء"),t("button",{type:"button",class:"btn btn-primary",onClick:R,disabled:U.value},[U.value?(n(),d("span",Ws)):u("",!0),s[55]||(s[55]=o(" دفع "))],8,Os)])])])])):u("",!0)]}),_:1})])),(n(),I(z,{to:"body"},[V(J,{name:"modal"},{default:F(()=>[W.value?(n(),d("div",{key:0,class:"modal-overlay",onClick:L(E,["self"])},[t("div",Qs,[t("div",zs,[t("div",{class:"modal-header"},[s[57]||(s[57]=t("h5",{class:"modal-title"},"إضافة رصيد للعميل",-1)),t("button",{type:"button",class:"btn-close",onClick:E},s[56]||(s[56]=[t("span",null,"×",-1)]))]),t("div",Gs,[t("div",Js,[s[58]||(s[58]=t("label",{class:"form-label"},[o("المبلغ "),t("span",{class:"text-danger"},"*")],-1)),x(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=e=>w.value.amount=e),step:"0.01",min:"0.01",required:""},null,512),[[B,w.value.amount]])]),t("div",Ks,[s[60]||(s[60]=t("label",{class:"form-label"},[o("العملة "),t("span",{class:"text-danger"},"*")],-1)),x(t("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=e=>w.value.currency=e),required:""},s[59]||(s[59]=[t("option",{value:"dollar"},"دولار",-1),t("option",{value:"dinar"},"دينار",-1)]),512),[[G,w.value.currency]])]),t("div",Hs,[s[61]||(s[61]=t("label",{class:"form-label"},"ملاحظات",-1)),x(t("textarea",{class:"form-control","onUpdate:modelValue":s[8]||(s[8]=e=>w.value.notes=e),rows:"3"},null,512),[[B,w.value.notes]])])]),t("div",Rs,[t("button",{type:"button",class:"btn btn-secondary",onClick:E},"إلغاء"),t("button",{type:"button",class:"btn btn-success",onClick:ct,disabled:k.value},[k.value?(n(),d("span",Ys)):u("",!0),s[62]||(s[62]=o(" إضافة "))],8,Xs)])])])])):u("",!0)]),_:1})])),(n(),I(z,{to:"body"},[V(J,{name:"modal"},{default:F(()=>{var e,f;return[Q.value?(n(),d("div",{key:0,class:"modal-overlay",onClick:L(N,["self"])},[t("div",Zs,[t("div",te,[t("div",{class:"modal-header"},[s[64]||(s[64]=t("h5",{class:"modal-title"},"سحب رصيد من العميل",-1)),t("button",{type:"button",class:"btn-close",onClick:N},s[63]||(s[63]=[t("span",null,"×",-1)]))]),t("div",se,[t("div",ee,[s[65]||(s[65]=t("strong",null,"الرصيد المتاح:",-1)),s[66]||(s[66]=t("br",null,null,-1)),o(" دولار: "+a(r(((e=i.customer.balance)==null?void 0:e.balance_dollar)||0,"dollar")),1),s[67]||(s[67]=t("br",null,null,-1)),o(" دينار: "+a(r(((f=i.customer.balance)==null?void 0:f.balance_dinar)||0,"dinar")),1)]),t("div",le,[s[68]||(s[68]=t("label",{class:"form-label"},[o("المبلغ "),t("span",{class:"text-danger"},"*")],-1)),x(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=b=>m.value.amount=b),step:"0.01",min:"0.01",required:""},null,512),[[B,m.value.amount]])]),t("div",ae,[s[70]||(s[70]=t("label",{class:"form-label"},[o("العملة "),t("span",{class:"text-danger"},"*")],-1)),x(t("select",{class:"form-select","onUpdate:modelValue":s[10]||(s[10]=b=>m.value.currency=b),required:""},s[69]||(s[69]=[t("option",{value:"dollar"},"دولار",-1),t("option",{value:"dinar"},"دينار",-1)]),512),[[G,m.value.currency]])]),t("div",ne,[s[71]||(s[71]=t("label",{class:"form-label"},"ملاحظات",-1)),x(t("textarea",{class:"form-control","onUpdate:modelValue":s[11]||(s[11]=b=>m.value.notes=b),rows:"3"},null,512),[[B,m.value.notes]])])]),t("div",oe,[t("button",{type:"button",class:"btn btn-secondary",onClick:N},"إلغاء"),t("button",{type:"button",class:"btn btn-warning",onClick:bt,disabled:k.value},[k.value?(n(),d("span",de)):u("",!0),s[72]||(s[72]=o(" سحب "))],8,re)])])])])):u("",!0)]}),_:1})]))]),_:1},8,["translations"]))}},ve=_t(ie,[["__scopeId","data-v-ab80b5df"]]);export{ve as default};
