import{s as Z,r as w,B as lt,a as r,h as M,w as D,c as u,b as t,d as c,t as e,l as k,y as O,A as Q,v as rt,e as h,D as ct,E as dt,Q as ut,x as bt,g as N,i as H,u as P,p as R,n as L,F as X,f as Y}from"./app--HWfM6KC.js";import{_ as mt}from"./AuthenticatedLayout-B0lmWw8w.js";import{_ as vt}from"./Pagination-S736lFum.js";/* empty css                                                                       */import{_ as ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as F}from"./sweetalert2.esm.all-DwEdJQJv.js";import{l as W}from"./lodash-YCOOl7Y6.js";const pt={key:0,class:"modal-mask"},ft={class:"modal-wrapper max-h-[80vh]"},gt={class:"modal-container"},_t={class:"modal-header"},yt={class:"text-primary"},xt={class:"modal-body"},wt={class:"row g-3"},kt={class:"col-12"},$t={class:"alert alert-info"},Ct={class:"col-md-6"},qt={for:"price_cost",class:"form-label"},St=["placeholder"],Bt={class:"col-md-6"},Ft={for:"price",class:"form-label"},Vt=["placeholder"],Ut={class:"col-md-6"},Pt={for:"quantity",class:"form-label"},Dt=["placeholder"],Tt={class:"col-md-6"},Et={class:"col-md-6"},It={for:"date",class:"form-label"},jt={class:"col-md-6"},At={class:"form-control-plaintext bg-light p-2 rounded"},Lt={class:"col-12"},Mt={class:"form-check"},Ot={class:"text-muted"},zt={class:"modal-footer"},Nt={class:"d-flex w-100 gap-2"},Rt=["disabled"],Qt=["disabled"],Gt={key:0,class:"spinner-border spinner-border-sm me-2"},Ht={key:1,class:"bi bi-check-circle"},Jt={__name:"ModalPurchasesProduct",props:{show:Boolean,data:Object,accounts:Array,translations:Array},emits:["close","success"],setup(o,{emit:m}){const C=o,y=m,g=Z(),l=w({date:q(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}),_=w(!1);function q(){const d=new Date,n=d.getFullYear(),V=String(d.getMonth()+1).padStart(2,"0"),U=String(d.getDate()).padStart(2,"0");return`${n}-${V}-${U}`}const p=()=>{l.value={date:q(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}};lt(()=>C.data,d=>{d&&d.id&&(l.value.price_cost=d.price_cost||0,l.value.price=d.price||0,l.value.quantity=0)},{immediate:!0});const S=async()=>{if(!C.data||!C.data.id){g.error("Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†ØªØ¬");return}if(l.value.quantity<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ…ÙŠØ© Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±");return}if(l.value.price_cost<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ©");return}if(l.value.price<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹");return}_.value=!0;try{console.log("Sending data:",{product_id:C.data.id,quantity:l.value.quantity,price_cost:l.value.price_cost,price:l.value.price,date:l.value.date,withdraw_from_box:l.value.withdraw_from_box,currency:l.value.currency});const d=await dt.post("api/products/process-purchase",{product_id:C.data.id,quantity:l.value.quantity,price_cost:l.value.price_cost,price:l.value.price,date:l.value.date,withdraw_from_box:l.value.withdraw_from_box,currency:l.value.currency});d.data.success?(g.success(d.data.message),y("success",d.data),y("close"),p()):g.error(d.data.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©")}catch(d){console.error("Purchase error:",d),d.response&&d.response.data&&d.response.data.message?g.error(d.response.data.message):g.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª")}finally{_.value=!1}},z=()=>(l.value.quantity*l.value.price_cost).toFixed(2);return(d,n)=>(r(),M(ct,{name:"modal"},{default:D(()=>{var V,U,T,E,I;return[o.show?(r(),u("div",pt,[t("div",ft,[t("div",gt,[t("div",_t,[t("h3",yt,[n[7]||(n[7]=t("i",{class:"bi bi-cart-plus"},null,-1)),c(" Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±ÙŠØ§Øª - "+e(((V=o.data)==null?void 0:V.name)||"Ù…Ù†ØªØ¬"),1)])]),t("div",xt,[t("div",wt,[t("div",kt,[t("div",$t,[n[8]||(n[8]=t("strong",null,"Ø§Ù„Ù…Ù†ØªØ¬:",-1)),c(" "+e(((U=o.data)==null?void 0:U.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"),1),n[9]||(n[9]=t("br",null,null,-1)),n[10]||(n[10]=t("strong",null,"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:",-1)),c(" "+e(((T=o.data)==null?void 0:T.quantity)||0),1),n[11]||(n[11]=t("br",null,null,-1)),n[12]||(n[12]=t("strong",null,"Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠ:",-1)),c(" "+e(((E=o.data)==null?void 0:E.price_cost)||0),1),n[13]||(n[13]=t("br",null,null,-1)),n[14]||(n[14]=t("strong",null,"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:",-1)),c(" "+e(((I=o.data)==null?void 0:I.price)||0),1)])]),t("div",Ct,[t("label",qt,[n[15]||(n[15]=t("i",{class:"bi bi-currency-dollar"},null,-1)),c(" "+e(o.translations.price_cost),1)]),k(t("input",{id:"price_cost",type:"number",step:"0.01",class:"form-control",placeholder:o.translations.price_cost,"onUpdate:modelValue":n[0]||(n[0]=f=>l.value.price_cost=f),required:""},null,8,St),[[O,l.value.price_cost]])]),t("div",Bt,[t("label",Ft,[n[16]||(n[16]=t("i",{class:"bi bi-tag"},null,-1)),c(" "+e(o.translations.price),1)]),k(t("input",{id:"price",type:"number",step:"0.01",class:"form-control",placeholder:o.translations.price,"onUpdate:modelValue":n[1]||(n[1]=f=>l.value.price=f),required:""},null,8,Vt),[[O,l.value.price]])]),t("div",Ut,[t("label",Pt,[n[17]||(n[17]=t("i",{class:"bi bi-box"},null,-1)),c(" "+e(o.translations.quantity),1)]),k(t("input",{id:"quantity",type:"number",min:"1",class:"form-control",placeholder:o.translations.quantity,"onUpdate:modelValue":n[2]||(n[2]=f=>l.value.quantity=f),required:""},null,8,Dt),[[O,l.value.quantity]])]),t("div",Tt,[n[19]||(n[19]=t("label",{for:"currency",class:"form-label"},[t("i",{class:"bi bi-currency-exchange"}),c(" Ø§Ù„Ø¹Ù…Ù„Ø© ")],-1)),k(t("select",{id:"currency",class:"form-control","onUpdate:modelValue":n[3]||(n[3]=f=>l.value.currency=f)},n[18]||(n[18]=[t("option",{value:"IQD"},"Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ",-1),t("option",{value:"$"},"Ø¯ÙˆÙ„Ø§Ø±",-1)]),512),[[Q,l.value.currency]])]),t("div",Et,[t("label",It,[n[20]||(n[20]=t("i",{class:"bi bi-calendar"},null,-1)),c(" "+e(o.translations.date),1)]),k(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":n[4]||(n[4]=f=>l.value.date=f),required:""},null,512),[[O,l.value.date]])]),t("div",jt,[n[21]||(n[21]=t("label",{class:"form-label"},[t("i",{class:"bi bi-calculator"}),c(" Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ© ")],-1)),t("div",At,[t("strong",null,e(z())+" "+e(l.value.currency),1)])]),t("div",Lt,[t("div",Mt,[k(t("input",{class:"form-check-input",type:"checkbox",id:"withdraw_from_box","onUpdate:modelValue":n[5]||(n[5]=f=>l.value.withdraw_from_box=f)},null,512),[[rt,l.value.withdraw_from_box]]),n[22]||(n[22]=t("label",{class:"form-check-label",for:"withdraw_from_box"},[t("i",{class:"bi bi-wallet2"}),c(" Ø³Ø­Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ")],-1))]),t("small",Ot," Ø¹Ù†Ø¯ ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø±ØŒ Ø³ÙŠØªÙ… Ø³Ø­Ø¨ "+e(z())+" "+e(l.value.currency)+" Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ",1)])])]),t("div",zt,[t("div",Nt,[t("button",{class:"btn btn-secondary flex-fill",onClick:n[6]||(n[6]=f=>d.$emit("close")),disabled:_.value},n[23]||(n[23]=[t("i",{class:"bi bi-x-circle"},null,-1),c(" Ø¥Ù„ØºØ§Ø¡ ")]),8,Rt),t("button",{class:"btn btn-primary flex-fill",onClick:S,disabled:_.value||l.value.quantity<=0||l.value.price_cost<=0||l.value.price<=0},[_.value?(r(),u("span",Gt)):(r(),u("i",Ht)),c(" "+e(_.value?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª"),1)],8,Qt)])])])])])):h("",!0)]}),_:1}))}},Kt={class:"pagetitle dark:text-white"},Xt={class:"dark:text-white"},Yt={class:"breadcrumb"},Wt={class:"breadcrumb-item"},Zt={class:"breadcrumb-item active dark:text-white"},ts={class:"section dashboard"},ss={class:"row mb-4"},es={class:"col-xl-3 col-md-6"},os={class:"card info-card sales-card"},as={class:"card-body"},ns={class:"card-title"},is={class:"d-flex align-items-center"},ls={class:"ps-3"},rs={class:"text-success small pt-1 fw-bold"},cs={class:"col-xl-3 col-md-6"},ds={class:"card info-card customers-card"},us={class:"card-body"},bs={class:"card-title"},ms={class:"d-flex align-items-center"},vs={class:"ps-3"},hs={class:"text-success small pt-1 fw-bold"},ps={class:"col-xl-3 col-md-6"},fs={class:"card info-card revenue-card"},gs={class:"card-body"},_s={class:"card-title"},ys={class:"d-flex align-items-center"},xs={class:"ps-3"},ws={class:"text-primary small pt-1 fw-bold"},ks={class:"col-xl-3 col-md-6"},$s={class:"card info-card revenue-card"},Cs={class:"card-body"},qs={class:"card-title"},Ss={class:"d-flex align-items-center"},Bs={class:"ps-3"},Fs={class:"text-primary small pt-1 fw-bold"},Vs={class:"card"},Us={class:"card-header d-flex justify-content-between align-items-center"},Ps={class:"card-title mb-0"},Ds={class:"d-flex gap-2"},Ts={class:"card-body"},Es={class:"row mb-4"},Is={class:"col-md-4"},js={class:"search-box"},As=["placeholder"],Ls={class:"col-md-2"},Ms={value:""},Os={value:"active"},zs={value:"inactive"},Ns={class:"col-md-2"},Rs={value:""},Qs={value:"low"},Gs={value:"out"},Hs={value:"available"},Js={class:"col-md-2"},Ks={value:"name"},Xs={value:"price"},Ys={value:"quantity"},Ws={value:"created"},Zs={class:"col-md-2"},te={key:0},se={class:"table-responsive"},ee={class:"table table-hover"},oe={class:"table-dark"},ae={scope:"col"},ne={scope:"col"},ie={scope:"col"},le={scope:"col"},re={scope:"col"},ce={scope:"col",class:"text-center"},de={class:"text-center"},ue={class:"product-image-container"},be=["src","alt"],me={key:0,class:"stock-badge low-stock"},ve={key:1,class:"stock-badge out-of-stock"},he={class:"product-info"},pe={class:"product-name mb-1"},fe={class:"text-muted"},ge={class:"text-muted"},_e={class:"barcode-info"},ye={key:0,class:"barcode-text"},xe={key:1,class:"text-muted"},we={class:"stock-info"},ke={class:"d-block text-muted"},$e={class:"price-info"},Ce={class:"price-amount"},qe={class:"d-block text-muted"},Se={class:"status-toggle"},Be={class:"switch"},Fe=["checked","onChange"],Ve={class:"featured-toggle mt-2"},Ue={class:"switch"},Pe=["checked","onChange"],De={key:0,class:"bi bi-star-fill"},Te={key:0,class:"best-selling-badge mt-2"},Ee={class:"d-block mt-1 text-muted"},Ie={class:"action-buttons"},je={class:"btn-group-vertical",role:"group"},Ae=["onClick"],Le={class:"btn-group",role:"group"},Me=["onClick","disabled"],Oe=["onClick"],ze=["onClick"],Ne={key:1,class:"row"},Re={class:"card product-card h-100"},Qe={class:"card-body"},Ge={class:"product-image-container mb-3"},He=["src","alt"],Je={key:0,class:"stock-badge low-stock"},Ke={key:1,class:"stock-badge out-of-stock"},Xe={class:"card-title"},Ye={class:"card-text text-muted small"},We={class:"row mb-3"},Ze={class:"col-6"},to={class:"text-muted d-block"},so={class:"col-6"},eo={class:"text-muted d-block"},oo={class:"fw-bold text-primary"},ao={class:"d-flex justify-content-between align-items-center"},no={class:"status-toggle"},io={class:"switch"},lo=["checked","onChange"],ro={class:"btn-group",role:"group"},co=["onClick"],uo=["onClick"],bo={__name:"index",props:{products:Object,translations:Array},setup(o){const m=o,C=ut(),y=Z(),g=w(!1),l=w({}),_=w(!1);w(!1),w(null),w(null);const q=w({checking:!1,isValid:!0,message:""}),p=bt({search:"",status:"",stock:"",sort:"created"}),S=w("table"),z=async i=>{if(!i||i.length<3){q.value={checking:!1,isValid:!0,message:""};return}q.value.checking=!0;try{const b=await(await fetch(route("products.checkBarcodeUnique",i))).json();q.value={checking:!1,isValid:b.unique,message:b.message},b.unique||y.warning(b.message)}catch(s){console.error("Barcode validation error:",s),q.value={checking:!1,isValid:!1,message:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯"}}};W.debounce(z,500);const d=W.debounce(()=>{j()},500),n=i=>{y.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),window.location.reload()},V=()=>{S.value=S.value==="table"?"grid":"table"},U=()=>{p.search="",p.status="",p.stock="",p.sort="created",j()},T=i=>i.image&&i.image.trim()!==""?`/public/storage/${i.image}`:"/public/dashboard-assets/img/product-placeholder.svg",E=i=>{i.target.src="/dashboard-assets/img/product-placeholder.svg"},I=i=>i===0?"text-danger":i<=5?"text-warning":"text-success",f=(i,s="IQD")=>parseFloat(i||0).toFixed(2)+" "+s,tt=i=>i?new Date(i).toLocaleDateString("ar-SA"):"-",st=()=>{var i;return(i=m.products)!=null&&i.data?m.products.data.filter(s=>s.is_active).length:0},et=()=>{var s;return(s=m.products)!=null&&s.data?m.products.data.filter(b=>b.currency==="USD").reduce((b,x)=>b+parseFloat(x.price||0)*parseInt(x.quantity||0),0).toFixed(2):"0.00"},ot=()=>{var s;return(s=m.products)!=null&&s.data?m.products.data.filter(b=>b.currency==="IQD").reduce((b,x)=>b+parseFloat(x.price||0)*parseInt(x.quantity||0),0).toFixed(2):"0.00"},at=async i=>{_.value=!0;try{const b=await(await fetch(route("barcode.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({product_id:i.id,type:"PNG",width:2,height:30})})).json();b.success?(y.success("ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­"),window.location.reload()):y.error(b.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}catch(s){console.error("Generate barcode error:",s),y.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}finally{_.value=!1}},nt=async i=>{if(!i.barcode){y.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©");return}_.value=!0;try{const s=new URLSearchParams({code:i.barcode,type:"PNG",width:2,height:30}),b=await fetch(`/barcode/preview?${s}`);if(!b.ok)throw new Error("Failed to generate barcode image");const x=await b.blob(),$=URL.createObjectURL(x),v=document.createElement("div");v.id="barcode-print-overlay",v.style.position="fixed",v.style.top="0",v.style.left="0",v.style.width="100%",v.style.height="100%",v.style.backgroundColor="white",v.style.zIndex="9999",v.style.padding="20px",v.style.textAlign="center",v.style.fontFamily="Arial, sans-serif",v.style.overflow="auto",v.innerHTML=`
      <style>
        @media print {
          body { margin: 0; padding: 0; }
          .print-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 20px !important; 
            border: none !important;
            box-shadow: none !important;
          }
          .barcode-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 30px !important; 
            border: 2px solid #000 !important;
            background: white !important;
          }
          .barcode-image { 
            width: 100% !important; 
            height: auto !important; 
            min-height: 300px !important; 
            max-height: 500px !important;
            border: 1px solid #000 !important;
          }
          .product-name { 
            font-size: 24px !important; 
            font-weight: bold !important; 
            margin-bottom: 20px !important; 
            text-align: center !important;
          }
          .barcode-text { 
            font-size: 18px !important; 
            margin-top: 20px !important; 
            font-family: monospace !important; 
            text-align: center !important;
            font-weight: bold !important;
          }
          .no-print { display: none !important; }
        }
      </style>
      <div class="print-container" style="max-width: 400px; margin: 50px auto; border: 2px solid #333; padding: 30px; background: white; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #333;">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</h3>
        
        <div class="barcode-container" style="border: 1px solid #ddd; padding: 20px; margin: 20px 0; background: #f9f9f9;">
          <div class="product-name" style="font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #2c3e50;">${i.name||"Product"}</div>
          <img class="barcode-image" src="${$}" alt="Barcode" style="max-width: 100%;width: 100%; height: auto; border: 1px solid #ccc;" onload="console.log('Barcode image loaded successfully')" onerror="console.error('Failed to load barcode image')">
          <div class="barcode-text" style="font-size: 14px; margin-top: 15px; font-family: monospace; color: #666;">${i.barcode}</div>
        </div>
        
        <div class="no-print" style="margin-top: 30px;">
          <button onclick="printBarcodeContent()" style="padding: 12px 25px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 15px; font-size: 16px;">
            <i class="bi bi-printer"></i> Ø·Ø¨Ø§Ø¹Ø©
          </button>
          <button onclick="closePrintOverlay()" style="padding: 12px 25px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
            <i class="bi bi-x"></i> Ø¥Ù„ØºØ§Ø¡
          </button>
        </div>
        
        <div class="no-print" style="margin-top: 20px; font-size: 12px; color: #666;">
          <p>ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø®ØªØ± "Microsoft Print to PDF" Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¥Ù„Ù‰ Ù…Ù„Ù PDF</p>
        </div>
      </div>
    `,window.printBarcodeContent=function(){const a=v.querySelector("img");if(a&&!a.complete){a.onload=function(){window.print()};return}window.print()},window.closePrintOverlay=function(){document.body.removeChild(v),$&&URL.revokeObjectURL($)},document.body.appendChild(v),y.success("ØªÙ… ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©. Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰."),$&&setTimeout(()=>{document.getElementById("barcode-print-overlay")&&URL.revokeObjectURL($)},3e4)}catch(s){console.error("Print error:",s),y.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©")}finally{_.value=!1}},j=()=>{N.get(route("products.index"),p,{preserveState:!0,preserveScroll:!0})},B=i=>C.props.auth_permissions.includes(i),J=i=>{F.fire({title:m.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:m.translations.yes,cancelButtonText:m.translations.cancel}).then(s=>{s.isConfirmed&&N.post(`/products/${i}/activate`,{onSuccess:()=>{F.fire("Updated !","product stuaus item has been updated.","success")},onError:()=>{F.fire("Error!","There was an issue updating product status.","error")}})})},it=i=>{N.post(`/products/${i}/toggle-featured`,{onSuccess:()=>{},onError:()=>{F.fire("Ø®Ø·Ø£!","Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ù…ÙŠØ².","error")}})},K=i=>{F.fire({title:m.translations.are_you_sure,text:m.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:m.translations.yes,cancelButtonText:m.translations.cancel}).then(s=>{s.isConfirmed&&N.delete("products/"+i,{onSuccess:()=>{F.fire({title:m.translations.data_deleted_successfully,icon:"success"})},onError:()=>{F.fire("Error!","There was an issue deleting the product.","error")}})})};return(i,s)=>(r(),M(mt,{translations:o.translations},{default:D(()=>{var b,x,$,v;return[t("div",Kt,[t("h1",Xt,e(o.translations.products),1),t("nav",null,[t("ol",Yt,[t("li",Wt,[H(P(R),{class:"nav-link dark:text-white",href:i.route("dashboard")},{default:D(()=>[c(e(o.translations.home),1)]),_:1},8,["href"])]),t("li",Zt,e(o.translations.products),1)])])]),t("section",ts,[t("div",ss,[t("div",es,[t("div",os,[t("div",as,[t("h5",ns,[c(e(o.translations.total_products)+" ",1),t("span",null,"| "+e(o.translations.all),1)]),t("div",is,[s[6]||(s[6]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-box-seam"})],-1)),t("div",ls,[t("h6",null,e(((b=m.products)==null?void 0:b.total)||0),1),t("span",rs,e(o.translations.products),1)])])])])]),t("div",cs,[t("div",ds,[t("div",us,[t("h5",bs,[c(e(o.translations.active_products)+" ",1),t("span",null,"| "+e(o.translations.enabled),1)]),t("div",ms,[s[7]||(s[7]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",vs,[t("h6",null,e(st()),1),t("span",hs,e(o.translations.active),1)])])])])]),t("div",ps,[t("div",fs,[t("div",gs,[t("h5",_s,[c(e(o.translations.total_value)+" ",1),t("span",null,"| "+e(o.translations.dollar),1)]),t("div",ys,[s[8]||(s[8]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",xs,[t("h6",null,e(et())+" $",1),t("span",ws,e(o.translations.value),1)])])])])]),t("div",ks,[t("div",$s,[t("div",Cs,[t("h5",qs,[c(e(o.translations.total_value)+" ",1),t("span",null,"| "+e(o.translations.dinar),1)]),t("div",Ss,[s[9]||(s[9]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-exchange"})],-1)),t("div",Bs,[t("h6",null,e(ot())+" IQD",1),t("span",Fs,e(o.translations.value),1)])])])])])]),t("div",Vs,[t("div",Us,[t("h5",Ps,[s[10]||(s[10]=t("i",{class:"bi bi-box-seam me-2"},null,-1)),c(" "+e(o.translations.products_management),1)]),t("div",Ds,[t("button",{class:"btn btn-outline-primary",onClick:V},[t("i",{class:L(S.value==="grid"?"bi bi-list":"bi bi-grid")},null,2),c(" "+e(S.value==="grid"?o.translations.list_view:o.translations.grid_view),1)]),B("create product")?(r(),M(P(R),{key:0,class:"btn btn-primary",href:i.route("products.create")},{default:D(()=>[s[11]||(s[11]=t("i",{class:"bi bi-plus-circle"},null,-1)),c(" "+e(o.translations.add_product),1)]),_:1},8,["href"])):h("",!0)])]),t("div",Ts,[t("div",Es,[t("div",Is,[t("div",js,[k(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=a=>p.search=a),placeholder:o.translations.search_by_name_or_barcode,onInput:s[1]||(s[1]=(...a)=>P(d)&&P(d)(...a))},null,40,As),[[O,p.search]]),s[12]||(s[12]=t("i",{class:"bi bi-search search-icon"},null,-1))])]),t("div",Ls,[k(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=a=>p.status=a),onChange:j},[t("option",Ms,e(o.translations.all_status),1),t("option",Os,e(o.translations.active),1),t("option",zs,e(o.translations.inactive),1)],544),[[Q,p.status]])]),t("div",Ns,[k(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=a=>p.stock=a),onChange:j},[t("option",Rs,e(o.translations.all_stock),1),t("option",Qs,e(o.translations.low_stock),1),t("option",Gs,e(o.translations.out_of_stock),1),t("option",Hs,e(o.translations.in_stock),1)],544),[[Q,p.stock]])]),t("div",Js,[k(t("select",{class:"form-select","onUpdate:modelValue":s[4]||(s[4]=a=>p.sort=a),onChange:j},[t("option",Ks,e(o.translations.sort_by_name),1),t("option",Xs,e(o.translations.sort_by_price),1),t("option",Ys,e(o.translations.sort_by_quantity),1),s[13]||(s[13]=t("option",{value:"best_selling"},"Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹",-1)),t("option",Ws,e(o.translations.sort_by_date),1)],544),[[Q,p.sort]])]),t("div",Zs,[t("button",{class:"btn btn-outline-secondary w-100",onClick:U},[s[14]||(s[14]=t("i",{class:"bi bi-arrow-clockwise"},null,-1)),c(" "+e(o.translations.clear),1)])])]),S.value==="table"?(r(),u("div",te,[t("div",se,[t("table",ee,[t("thead",oe,[t("tr",null,[s[15]||(s[15]=t("th",{scope:"col",class:"text-center"},[t("i",{class:"bi bi-image"})],-1)),t("th",ae,e(o.translations.product_info),1),t("th",ne,e(o.translations.barcode),1),t("th",ie,e(o.translations.stock),1),t("th",le,e(o.translations.price),1),t("th",re,e(o.translations.status),1),t("th",ce,e(o.translations.actions),1)])]),t("tbody",null,[(r(!0),u(X,null,Y((x=m.products)==null?void 0:x.data,(a,G)=>(r(),u("tr",{key:a.id,class:"product-row"},[t("td",de,[t("div",ue,[t("img",{src:T(a),alt:a.name,class:"product-image",onError:E},null,40,be),a.quantity<=5?(r(),u("div",me,s[16]||(s[16]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):h("",!0),a.quantity===0?(r(),u("div",ve,s[17]||(s[17]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):h("",!0)])]),t("td",null,[t("div",he,[t("h6",pe,e(a.name),1),t("small",fe,e(a.model),1),s[18]||(s[18]=t("br",null,null,-1)),t("small",ge,e(o.translations.created)+": "+e(tt(a.created)),1)])]),t("td",null,[t("div",_e,[a.barcode?(r(),u("span",ye,e(a.barcode),1)):(r(),u("span",xe,e(o.translations.no_barcode),1))])]),t("td",null,[t("div",we,[t("span",{class:L(["stock-quantity",I(a.quantity)])},e(a.quantity),3),t("small",ke,e(o.translations.units),1)])]),t("td",null,[t("div",$e,[t("span",Ce,e(f(a.price,a.currency)),1),t("small",qe,e(o.translations.selling_price),1)])]),t("td",null,[t("div",Se,[t("label",Be,[t("input",{type:"checkbox",checked:a.is_active==1,onChange:A=>J(a.id)},null,40,Fe),s[19]||(s[19]=t("span",{class:"slider round"},null,-1))]),t("small",{class:L(["d-block mt-1",a.is_active?"text-success":"text-danger"])},e(a.is_active?o.translations.active:o.translations.inactive),3)]),t("div",Ve,[t("label",Ue,[t("input",{type:"checkbox",checked:a.is_featured==1,onChange:A=>it(a.id)},null,40,Pe),s[20]||(s[20]=t("span",{class:"slider round featured-slider"},null,-1))]),t("small",{class:L(["d-block mt-1",a.is_featured?"text-warning":"text-muted"])},[a.is_featured?(r(),u("i",De)):h("",!0),c(" "+e(a.is_featured?"Ù…Ù…ÙŠØ²":"Ø¹Ø§Ø¯ÙŠ"),1)],2)]),a.total_sales>0?(r(),u("div",Te,[s[22]||(s[22]=t("div",{class:"badge bg-warning text-dark"},[t("i",{class:"bi bi-trophy-fill me-1"}),c(" Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹ ")],-1)),t("small",Ee,[s[21]||(s[21]=t("i",{class:"bi bi-cart-fill me-1"},null,-1)),c(" "+e(a.total_sales)+" Ù…Ø¨ÙŠØ¹ ",1)])])):h("",!0)]),t("td",null,[t("div",Ie,[t("div",je,[B("update product")?(r(),M(P(R),{key:0,class:"btn btn-sm btn-outline-primary mb-1",href:i.route("products.edit",{product:a.id}),title:o.translations.edit},{default:D(()=>s[23]||(s[23]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):h("",!0),B("update product")?(r(),u("button",{key:1,class:"btn btn-sm btn-outline-success mb-1",onClick:A=>{g.value=!0,l.value=a},title:"{{ translations.add_stock }}"},s[24]||(s[24]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,Ae)):h("",!0),t("div",Le,[a.barcode?h("",!0):(r(),u("button",{key:0,class:"btn btn-sm btn-outline-info",onClick:A=>at(a),disabled:_.value,title:"{{ translations.generate_barcode }}"},s[25]||(s[25]=[t("i",{class:"bi bi-qr-code"},null,-1)]),8,Me)),a.barcode?(r(),u("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:A=>nt(a),title:"{{ translations.print_barcode }}"},s[26]||(s[26]=[t("i",{class:"bi bi-printer"},null,-1)]),8,Oe)):h("",!0)]),B("delete product")?(r(),u("button",{key:2,class:"btn btn-sm btn-outline-danger mt-1",onClick:A=>K(a.id),title:"{{ translations.delete }}"},s[27]||(s[27]=[t("i",{class:"bi bi-trash"},null,-1)]),8,ze)):h("",!0)])])])]))),128))])])])])):(r(),u("div",Ne,[(r(!0),u(X,null,Y(($=m.products)==null?void 0:$.data,a=>(r(),u("div",{key:a.id,class:"col-xl-3 col-lg-4 col-md-6 mb-4"},[t("div",Re,[t("div",Qe,[t("div",Ge,[t("img",{src:T(a),alt:a.name,class:"product-image-large",onError:E},null,40,He),a.quantity<=5?(r(),u("div",Je,s[28]||(s[28]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):h("",!0),a.quantity===0?(r(),u("div",Ke,s[29]||(s[29]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):h("",!0)]),t("h6",Xe,e(a.name),1),t("p",Ye,e(a.model),1),t("div",We,[t("div",Ze,[t("small",to,e(o.translations.stock),1),t("span",{class:L(["fw-bold",I(a.quantity)])},e(a.quantity),3)]),t("div",so,[t("small",eo,e(o.translations.price),1),t("span",oo,e(f(a.price,a.currency)),1)])]),t("div",ao,[t("div",no,[t("label",io,[t("input",{type:"checkbox",checked:a.is_active==1,onChange:G=>J(a.id)},null,40,lo),s[30]||(s[30]=t("span",{class:"slider round"},null,-1))])]),t("div",ro,[B("update product")?(r(),M(P(R),{key:0,class:"btn btn-sm btn-outline-primary",href:i.route("products.edit",{product:a.id}),title:o.translations.edit},{default:D(()=>s[31]||(s[31]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):h("",!0),B("update product")?(r(),u("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:G=>{g.value=!0,l.value=a},title:"{{ translations.add_stock }}"},s[32]||(s[32]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,co)):h("",!0),B("delete product")?(r(),u("button",{key:2,class:"btn btn-sm btn-outline-danger",onClick:G=>K(a.id),title:"{{ translations.delete }}"},s[33]||(s[33]=[t("i",{class:"bi bi-trash"},null,-1)]),8,uo)):h("",!0)])])])])]))),128))]))])]),H(vt,{links:(v=m.products)==null?void 0:v.links},null,8,["links"])]),H(Jt,{show:g.value,translations:o.translations,data:l.value,onClose:s[5]||(s[5]=a=>g.value=!1),onSuccess:n},null,8,["show","translations","data"])]}),_:1},8,["translations"]))}},yo=ht(bo,[["__scopeId","data-v-e540a8e7"]]);export{yo as default};
