import{T as A,r as k,a as n,h as G,w as h,b as t,d as r,t as c,c as o,e as f,j as I,l as b,x as u,u as a,n as O,i as $,p as N,f as M,F as z,D as E}from"./app-BdwRZgQZ.js";import{A as Q}from"./AuthenticatedLayout-CSKvAGUW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"section dashboard"},H={class:"card"},J={class:"card-header"},K={class:"card-title mb-0"},P={class:"card-body"},X={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},Y={key:1,class:"alert alert-danger alert-dismissible fade show",role:"alert"},Z={class:"row"},tt={class:"col-md-6"},et={class:"card"},st={class:"card-body"},lt={class:"mb-3"},it={key:0,class:"invalid-feedback"},at={class:"col-md-6"},nt={class:"card"},ot={class:"card-body"},rt={class:"mb-3"},dt={class:"mb-3"},ct={class:"mb-3"},bt={class:"mb-3"},ut={class:"mb-3"},mt={class:"mb-3"},vt={class:"row mt-3"},_t={class:"col-12"},ft={class:"card"},gt={class:"card-header d-flex justify-content-between align-items-center"},yt={class:"card-body"},pt={key:0,class:"alert alert-success mb-3"},kt={class:"d-flex align-items-center"},ht={class:"mb-0"},xt={class:"badge bg-primary"},wt={key:0,class:"ms-2"},Vt={key:1,class:"ms-2"},Ct={key:2,class:"ms-2"},Ut={key:1,class:"alert alert-warning mb-3"},Tt={key:2,class:"alert alert-danger mb-3"},jt={class:"row"},Bt={class:"col-md-6"},Dt={class:"table table-sm table-borderless"},Ot={class:"small"},$t={key:0},Nt={key:1},Ft={class:"col-md-6"},Lt={class:"table table-sm table-borderless"},Rt={class:"small",style:{"word-break":"break-all"}},St={key:0,class:"badge bg-success"},qt={key:1,class:"badge bg-warning"},At={key:2,class:"badge bg-danger"},Gt={class:"mt-3 d-flex gap-2"},It=["disabled"],Mt={key:0,class:"spinner-border spinner-border-sm me-2"},zt={key:1,class:"bi bi-shield-check me-1"},Et={class:"row mt-3"},Qt={class:"col-12"},Wt={class:"card"},Ht={class:"card-body"},Jt={class:"table-responsive"},Kt={class:"table table-hover"},Pt=["onUpdate:modelValue"],Xt=["onUpdate:modelValue"],Yt=["onUpdate:modelValue"],Zt=["onClick","disabled"],te={class:"row mt-3"},ee={class:"col-12"},se=["disabled"],le={key:0,class:"spinner-border spinner-border-sm me-2"},oe={__name:"Index",props:{config:Object,translations:Object,license:{type:Object,default:()=>({})},server:{type:Object,default:()=>({})}},setup(l){var w,V,C,U,T,j,B,D;const m=l,i=A({first_title_ar:((w=m.config)==null?void 0:w.first_title_ar)||"",first_title_kr:((V=m.config)==null?void 0:V.first_title_kr)||"",second_title_ar:((C=m.config)==null?void 0:C.second_title_ar)||"",second_title_kr:((U=m.config)==null?void 0:U.second_title_kr)||"",third_title_ar:((T=m.config)==null?void 0:T.third_title_ar)||"",third_title_kr:((j=m.config)==null?void 0:j.third_title_kr)||"",exchange_rate:((B=m.config)==null?void 0:B.exchange_rate)||1500,decoration_types:((D=m.config)==null?void 0:D.decoration_types)||[{value:"birthday",label_ar:"عيد ميلاد",label_en:"Birthday"},{value:"gender_reveal",label_ar:"تحديد جنس المولود",label_en:"Gender Reveal"},{value:"baby_shower",label_ar:"حفلة الولادة",label_en:"Baby Shower"},{value:"wedding",label_ar:"زفاف",label_en:"Wedding"},{value:"graduation",label_ar:"تخرج",label_en:"Graduation"},{value:"corporate",label_ar:"شركات",label_en:"Corporate"},{value:"religious",label_ar:"ديني",label_en:"Religious"},{value:"other",label_ar:"أخرى",label_en:"Other"}]}),F=()=>{i.decoration_types.push({value:"",label_ar:"",label_en:""})},L=d=>{i.decoration_types.length>1&&i.decoration_types.splice(d,1)},R=()=>{i.put(route("system-config.update"))},y=k(!1),v=k(""),_=k(""),S=async()=>{var d,e;y.value=!0,_.value="",v.value="";try{const s=await E.get("/api/license/verify");s.data.success&&s.data.valid?(v.value="الترخيص صالح ومفعل",setTimeout(()=>{window.location.reload()},1500)):_.value="الترخيص غير صالح أو منتهي الصلاحية"}catch(s){_.value=((e=(d=s.response)==null?void 0:d.data)==null?void 0:e.message)||"حدث خطأ أثناء التحقق من الترخيص"}finally{y.value=!1}},x=d=>{navigator.clipboard.writeText(d).then(()=>{v.value="تم النسخ بنجاح",setTimeout(()=>{v.value=""},2e3)}).catch(()=>{_.value="فشل النسخ"})},q=d=>d===null||d>30?"badge bg-success":d>7?"badge bg-warning":"badge bg-danger";return(d,e)=>(n(),G(Q,{translations:l.translations},{default:h(()=>[t("section",W,[t("div",H,[t("div",J,[t("h5",K,[e[11]||(e[11]=t("i",{class:"bi bi-gear me-2"},null,-1)),r(" "+c(l.translations.system_settings),1)])]),t("div",P,[v.value?(n(),o("div",X,[e[12]||(e[12]=t("i",{class:"bi bi-check-circle me-2"},null,-1)),r(" "+c(v.value)+" ",1),t("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=s=>v.value="")})])):f("",!0),_.value?(n(),o("div",Y,[e[13]||(e[13]=t("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),r(" "+c(_.value)+" ",1),t("button",{type:"button",class:"btn-close",onClick:e[1]||(e[1]=s=>_.value="")})])):f("",!0),t("form",{onSubmit:I(R,["prevent"])},[t("div",Z,[t("div",tt,[t("div",et,[e[15]||(e[15]=t("div",{class:"card-header"},[t("h6",{class:"card-title"},"سعر الصرف")],-1)),t("div",st,[t("div",lt,[e[14]||(e[14]=t("label",{for:"exchange_rate",class:"form-label"},"سعر صرف الدولار (IQD)",-1)),b(t("input",{type:"number",step:"0.01",class:O(["form-control",{"is-invalid":a(i).errors.exchange_rate}]),id:"exchange_rate","onUpdate:modelValue":e[2]||(e[2]=s=>a(i).exchange_rate=s)},null,2),[[u,a(i).exchange_rate]]),a(i).errors.exchange_rate?(n(),o("div",it,c(a(i).errors.exchange_rate),1)):f("",!0)])])])]),t("div",at,[t("div",nt,[e[22]||(e[22]=t("div",{class:"card-header"},[t("h6",{class:"card-title"},"عناوين النظام")],-1)),t("div",ot,[t("div",rt,[e[16]||(e[16]=t("label",{for:"first_title_ar",class:"form-label"},"العنوان الأول (عربي)",-1)),b(t("input",{type:"text",class:"form-control",id:"first_title_ar","onUpdate:modelValue":e[3]||(e[3]=s=>a(i).first_title_ar=s)},null,512),[[u,a(i).first_title_ar]])]),t("div",dt,[e[17]||(e[17]=t("label",{for:"first_title_kr",class:"form-label"},"العنوان الأول (كردي)",-1)),b(t("input",{type:"text",class:"form-control",id:"first_title_kr","onUpdate:modelValue":e[4]||(e[4]=s=>a(i).first_title_kr=s)},null,512),[[u,a(i).first_title_kr]])]),t("div",ct,[e[18]||(e[18]=t("label",{for:"second_title_ar",class:"form-label"},"العنوان الثاني (عربي)",-1)),b(t("input",{type:"text",class:"form-control",id:"second_title_ar","onUpdate:modelValue":e[5]||(e[5]=s=>a(i).second_title_ar=s)},null,512),[[u,a(i).second_title_ar]])]),t("div",bt,[e[19]||(e[19]=t("label",{for:"second_title_kr",class:"form-label"},"العنوان الثاني (كردي)",-1)),b(t("input",{type:"text",class:"form-control",id:"second_title_kr","onUpdate:modelValue":e[6]||(e[6]=s=>a(i).second_title_kr=s)},null,512),[[u,a(i).second_title_kr]])]),t("div",ut,[e[20]||(e[20]=t("label",{for:"third_title_ar",class:"form-label"},"العنوان الثالث (عربي)",-1)),b(t("input",{type:"text",class:"form-control",id:"third_title_ar","onUpdate:modelValue":e[7]||(e[7]=s=>a(i).third_title_ar=s)},null,512),[[u,a(i).third_title_ar]])]),t("div",mt,[e[21]||(e[21]=t("label",{for:"third_title_kr",class:"form-label"},"العنوان الثالث (كردي)",-1)),b(t("input",{type:"text",class:"form-control",id:"third_title_kr","onUpdate:modelValue":e[8]||(e[8]=s=>a(i).third_title_kr=s)},null,512),[[u,a(i).third_title_kr]])])])])])]),t("div",vt,[t("div",_t,[t("div",ft,[t("div",gt,[e[24]||(e[24]=t("h6",{class:"card-title mb-0"},[t("i",{class:"bi bi-shield-check me-2"}),r(" حالة الترخيص ")],-1)),$(a(N),{href:d.route("license.activate"),class:"btn btn-sm btn-primary"},{default:h(()=>e[23]||(e[23]=[t("i",{class:"bi bi-key me-1"},null,-1),r(" إدارة الترخيص ")])),_:1},8,["href"])]),t("div",yt,[l.license.activated&&l.license.valid?(n(),o("div",pt,[t("div",kt,[e[32]||(e[32]=t("i",{class:"bi bi-check-circle me-2 fs-4"},null,-1)),t("div",null,[e[31]||(e[31]=t("h6",{class:"mb-1"},"الترخيص مفعل وصالح",-1)),t("p",ht,[e[30]||(e[30]=t("strong",null,"النوع:",-1)),t("span",xt,c(l.license.type),1),l.license.expires_at?(n(),o("span",wt,[e[25]||(e[25]=r(" | ")),e[26]||(e[26]=t("strong",null,"تاريخ الانتهاء:",-1)),r(" "+c(l.license.expires_at),1)])):(n(),o("span",Vt,e[27]||(e[27]=[r(" | "),t("span",{class:"badge bg-success"},"ترخيص دائم",-1)]))),l.license.days_remaining!==null?(n(),o("span",Ct,[e[28]||(e[28]=r(" | ")),e[29]||(e[29]=t("strong",null,"الأيام المتبقية:",-1)),t("span",{class:O(q(l.license.days_remaining))},c(l.license.days_remaining)+" يوم ",3)])):f("",!0)])])])])):l.license.activated&&!l.license.valid?(n(),o("div",Ut,e[33]||(e[33]=[t("div",{class:"d-flex align-items-center"},[t("i",{class:"bi bi-exclamation-triangle me-2 fs-4"}),t("div",null,[t("h6",{class:"mb-1"},"الترخيص منتهي الصلاحية"),t("p",{class:"mb-0"},"يرجى تجديد الترخيص أو الاتصال بالدعم الفني.")])],-1)]))):(n(),o("div",Tt,e[34]||(e[34]=[t("div",{class:"d-flex align-items-center"},[t("i",{class:"bi bi-x-circle me-2 fs-4"}),t("div",null,[t("h6",{class:"mb-1"},"الترخيص غير مفعل"),t("p",{class:"mb-0"},"يرجى تفعيل الترخيص للاستمرار في استخدام النظام.")])],-1)]))),t("div",jt,[t("div",Bt,[t("table",Dt,[t("tbody",null,[t("tr",null,[e[36]||(e[36]=t("td",{class:"fw-bold",style:{width:"40%"}},"الدومين:",-1)),t("td",null,[t("code",Ot,c(l.server.domain),1),t("button",{type:"button",class:"btn btn-sm btn-outline-secondary ms-2",onClick:e[9]||(e[9]=s=>x(l.server.domain)),title:"نسخ"},e[35]||(e[35]=[t("i",{class:"bi bi-clipboard"},null,-1)]))])]),l.license.activated?(n(),o("tr",$t,[e[37]||(e[37]=t("td",{class:"fw-bold"},"تاريخ التفعيل:",-1)),t("td",null,c(l.license.activated_at||"غير محدد"),1)])):f("",!0),l.license.last_verified_at?(n(),o("tr",Nt,[e[38]||(e[38]=t("td",{class:"fw-bold"},"آخر تحقق:",-1)),t("td",null,c(l.license.last_verified_at),1)])):f("",!0)])])]),t("div",Ft,[t("table",Lt,[t("tbody",null,[t("tr",null,[e[40]||(e[40]=t("td",{class:"fw-bold",style:{width:"40%"}},"Fingerprint:",-1)),t("td",null,[t("code",Rt,c(l.server.fingerprint),1),t("button",{type:"button",class:"btn btn-sm btn-outline-secondary ms-2",onClick:e[10]||(e[10]=s=>x(l.server.fingerprint)),title:"نسخ"},e[39]||(e[39]=[t("i",{class:"bi bi-clipboard"},null,-1)]))])]),t("tr",null,[e[41]||(e[41]=t("td",{class:"fw-bold"},"الحالة:",-1)),t("td",null,[l.license.activated&&l.license.valid?(n(),o("span",St,"مفعل وصالح")):l.license.activated&&!l.license.valid?(n(),o("span",qt,"منتهي الصلاحية")):(n(),o("span",At,"غير مفعل"))])])])])])]),t("div",Gt,[t("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:S,disabled:y.value},[y.value?(n(),o("span",Mt)):(n(),o("i",zt)),r(" "+c(y.value?"جاري التحقق...":"التحقق من الترخيص"),1)],8,It),$(a(N),{href:d.route("license.status"),class:"btn btn-sm btn-outline-info"},{default:h(()=>e[42]||(e[42]=[t("i",{class:"bi bi-info-circle me-1"},null,-1),r(" عرض التفاصيل ")])),_:1},8,["href"])])])])])]),t("div",Et,[t("div",Qt,[t("div",Wt,[t("div",{class:"card-header d-flex justify-content-between align-items-center"},[e[44]||(e[44]=t("h6",{class:"card-title mb-0"},[t("i",{class:"bi bi-palette me-2"}),r(" أنواع الديكورات ")],-1)),t("button",{type:"button",class:"btn btn-sm btn-success",onClick:F},e[43]||(e[43]=[t("i",{class:"bi bi-plus-circle me-1"},null,-1),r(" إضافة نوع جديد ")]))]),t("div",Ht,[t("div",Jt,[t("table",Kt,[e[46]||(e[46]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"القيمة (Value)"),t("th",null,"الاسم بالعربية"),t("th",null,"الاسم بالإنجليزية"),t("th",null,"الإجراءات")])],-1)),t("tbody",null,[(n(!0),o(z,null,M(a(i).decoration_types,(s,p)=>(n(),o("tr",{key:p},[t("td",null,c(p+1),1),t("td",null,[b(t("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":g=>s.value=g,placeholder:"birthday",required:""},null,8,Pt),[[u,s.value]])]),t("td",null,[b(t("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":g=>s.label_ar=g,placeholder:"عيد ميلاد",required:""},null,8,Xt),[[u,s.label_ar]])]),t("td",null,[b(t("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":g=>s.label_en=g,placeholder:"Birthday"},null,8,Yt),[[u,s.label_en]])]),t("td",null,[t("button",{type:"button",class:"btn btn-sm btn-danger",onClick:g=>L(p),disabled:a(i).decoration_types.length===1},e[45]||(e[45]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Zt)])]))),128))])])]),e[47]||(e[47]=t("small",{class:"text-muted"},[t("i",{class:"bi bi-info-circle me-1"}),r(" ملاحظة: القيمة (Value) يجب أن تكون بالإنجليزية بدون مسافات (مثال: birthday, wedding) ")],-1))])])])]),t("div",te,[t("div",ee,[t("button",{type:"submit",class:"btn btn-primary",disabled:a(i).processing},[a(i).processing?(n(),o("span",le)):f("",!0),e[48]||(e[48]=r(" حفظ الإعدادات "))],8,se)])])],32)])])])]),_:1},8,["translations"]))}};export{oe as default};
