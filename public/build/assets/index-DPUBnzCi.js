import{m as x,o as d,c as E,w as S,f as h,b as t,r as W,t as r,i as C,s as P,g as f,D as J,E as K,Q as X,l as Y,q as Z,a as R,d as T,u as O,k as A,e as tt,x as et,F as ot,A as D}from"./app-DQjGYJwu.js";import{_ as st}from"./AuthenticatedLayout-vqE2q9n1.js";import{_ as nt}from"./Pagination-DgOXRgqs.js";/* empty css                                                                       */import{S as w}from"./sweetalert2.esm.all-DwEdJQJv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const at={key:0,class:"modal-mask"},rt={class:"modal-wrapper max-h-[80vh]"},it={class:"modal-container"},lt={class:"modal-header"},ct={class:"modal-body"},dt={class:"row g-3"},ut={class:"row mb-3"},mt={for:"inputPrice",class:"col-sm-2 col-form-label"},bt={class:"col-sm-10"},ht=["placeholder"],pt={class:"row mb-3"},ft={for:"inputPrice",class:"col-sm-2 col-form-label"},yt={class:"col-sm-10"},gt=["placeholder"],vt={class:"row mb-3"},wt={for:"inputQuantity",class:"col-sm-2 col-form-label"},xt={class:"col-sm-10"},_t=["placeholder"],kt={class:"row mb-3"},$t={for:"inputQuantity",class:"col-sm-2 col-form-label"},Ct={class:"col-sm-10"},Pt={class:"modal-footer"},Bt={class:"d-flex w-100"},Ut={class:"px-2 flex-fill"},St={class:"px-2 flex-fill"},Lt=["disabled"],Rt={__name:"ModalPurchasesProduct",props:{show:Boolean,data:Array,accounts:Array,translations:Array},setup(n){const c=x({date:B(),price_cost:0,quantity:0,price:0});function B(){const p=new Date,l=p.getFullYear(),u=String(p.getMonth()+1).padStart(2,"0"),U=String(p.getDate()).padStart(2,"0");return`${l}-${u}-${U}`}const b=()=>{c.value={date:B()}},k=p=>{K.post("/api/drop-from-box",p).then(l=>{}).catch(l=>{$emit("close")})};return(p,l)=>(d(),E(J,{name:"modal"},{default:S(()=>[n.show?(d(),h("div",at,[t("div",rt,[t("div",it,[t("div",lt,[W(p.$slots,"header")]),t("div",ct,[t("div",dt,[t("div",ut,[t("label",mt,r(n.translations.price_cost),1),t("div",bt,[C(t("input",{id:"inputPrice",type:"number",class:"form-control",placeholder:n.translations.price_cost,"onUpdate:modelValue":l[0]||(l[0]=u=>c.value.price_cost=u)},null,8,ht),[[P,c.value.price_cost]])])]),t("div",pt,[t("label",ft,r(n.translations.price),1),t("div",yt,[C(t("input",{id:"inputPrice",type:"number",class:"form-control",placeholder:n.translations.price,"onUpdate:modelValue":l[1]||(l[1]=u=>c.value.price=u)},null,8,gt),[[P,c.value.price]])])]),t("div",vt,[t("label",wt,r(n.translations.quantity),1),t("div",xt,[C(t("input",{id:"inputQuantity",type:"number",class:"form-control",placeholder:n.translations.quantity,"onUpdate:modelValue":l[2]||(l[2]=u=>c.value.quantity=u)},null,8,_t),[[P,c.value.quantity]])])]),t("div",kt,[t("label",$t,r(n.translations.date),1),t("div",Ct,[C(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":l[3]||(l[3]=u=>c.value.date=u)},null,512),[[P,c.value.date]])])])])]),t("div",Pt,[t("div",Bt,[t("div",Ut,[t("button",{class:"btn btn-secondary w-100 text-center",onClick:l[4]||(l[4]=u=>{p.$emit("close")})}," ØªØ±Ø§Ø¬Ø¹ ")]),t("div",St,[t("button",{class:"btn btn-danger w-100 text-center",onClick:l[5]||(l[5]=u=>{k(c.value),p.$emit("a"),b()}),disabled:!c.value.amountDollar&&!c.value.amountDinar}," Ù†Ø¹Ù… ",8,Lt)])])])])])])):f("",!0)]),_:3}))}},Tt={class:"pagetitle dark:text-white"},Dt={class:"dark:text-white"},Et={class:"breadcrumb"},qt={class:"breadcrumb-item"},Ft={class:"breadcrumb-item active dark:text-white"},Ot={class:"section dashboard"},At={class:"card"},jt={class:"card-body"},Nt={class:"row filter_form"},zt={class:"col-md-6"},Mt=["placeholder"],Vt={class:"col-md-3"},It={type:"submit",class:"btn btn-primary"},Gt={class:"col-md-3"},Qt={class:"table-responsive"},Ht={class:"table text-center"},Wt={scope:"col"},Jt={scope:"col"},Kt={scope:"col"},Xt={scope:"col"},Yt={scope:"col"},Zt={scope:"col"},te={scope:"col"},ee={key:0,scope:"col"},oe={key:1,scope:"col"},se={key:2,scope:"col"},ne={scope:"col"},ae={scope:"row"},re={class:"inline-flex items-center me-5 cursor-pointer"},ie=["checked","onChange"],le={key:0},ce=["href"],de={key:1},ue=["onClick"],me={key:2},be=["onClick"],he={class:"btn-group",role:"group"},pe=["onClick","disabled"],fe=["onClick"],ye=["onClick"],ge=["onClick"],Ce={__name:"index",props:{products:Object,translations:Array},setup(n){const c=n,B=X(),b=Y(),k=x(!1),p=x({}),l=x(!1),u=x(!1),U=x(null),j=x(null),L=Z({search:""}),N=async a=>{l.value=!0;try{const m=await(await fetch(route("barcode.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({product_id:a.id,type:"PNG",width:2,height:30})})).json();m.success?(b.success("ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­"),window.location.reload()):b.error(m.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}catch(e){console.error("Generate barcode error:",e),b.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}finally{l.value=!1}},z=async a=>{if(!a.barcode){b.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©");return}l.value=!0;try{const e=new URLSearchParams({code:a.barcode,type:"PNG",width:2,height:30}),m=await fetch(`/barcode/preview?${e}`);if(!m.ok)throw new Error("Failed to generate barcode image");const y=await m.blob(),o=URL.createObjectURL(y),s=document.createElement("div");s.id="barcode-print-overlay",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.backgroundColor="white",s.style.zIndex="9999",s.style.padding="20px",s.style.textAlign="center",s.style.fontFamily="Arial, sans-serif",s.style.overflow="auto",s.innerHTML=`
      <style>
        @media print {
          body { margin: 0; padding: 0; }
          .print-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 20px !important; 
            border: none !important;
            box-shadow: none !important;
          }
          .barcode-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 30px !important; 
            border: 2px solid #000 !important;
            background: white !important;
          }
          .barcode-image { 
            width: 100% !important; 
            height: auto !important; 
            min-height: 300px !important; 
            max-height: 500px !important;
            border: 1px solid #000 !important;
          }
          .product-name { 
            font-size: 24px !important; 
            font-weight: bold !important; 
            margin-bottom: 20px !important; 
            text-align: center !important;
          }
          .barcode-text { 
            font-size: 18px !important; 
            margin-top: 20px !important; 
            font-family: monospace !important; 
            text-align: center !important;
            font-weight: bold !important;
          }
          .no-print { display: none !important; }
        }
      </style>
      <div class="print-container" style="max-width: 400px; margin: 50px auto; border: 2px solid #333; padding: 30px; background: white; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #333;">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</h3>
        
        <div class="barcode-container" style="border: 1px solid #ddd; padding: 20px; margin: 20px 0; background: #f9f9f9;">
          <div class="product-name" style="font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #2c3e50;">${a.name||"Product"}</div>
          <img class="barcode-image" src="${o}" alt="Barcode" style="max-width: 100%;width: 100%; height: auto; border: 1px solid #ccc;" onload="console.log('Barcode image loaded successfully')" onerror="console.error('Failed to load barcode image')">
          <div class="barcode-text" style="font-size: 14px; margin-top: 15px; font-family: monospace; color: #666;">${a.barcode}</div>
        </div>
        
        <div class="no-print" style="margin-top: 30px;">
          <button onclick="printBarcodeContent()" style="padding: 12px 25px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 15px; font-size: 16px;">
            <i class="bi bi-printer"></i> Ø·Ø¨Ø§Ø¹Ø©
          </button>
          <button onclick="closePrintOverlay()" style="padding: 12px 25px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
            <i class="bi bi-x"></i> Ø¥Ù„ØºØ§Ø¡
          </button>
        </div>
        
        <div class="no-print" style="margin-top: 20px; font-size: 12px; color: #666;">
          <p>ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø®ØªØ± "Microsoft Print to PDF" Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¥Ù„Ù‰ Ù…Ù„Ù PDF</p>
        </div>
      </div>
    `,window.printBarcodeContent=function(){const i=s.querySelector("img");if(i&&!i.complete){i.onload=function(){window.print()};return}window.print()},window.closePrintOverlay=function(){document.body.removeChild(s),o&&URL.revokeObjectURL(o)},document.body.appendChild(s),b.success("ØªÙ… ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©. Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰."),o&&setTimeout(()=>{document.getElementById("barcode-print-overlay")&&URL.revokeObjectURL(o)},3e4)}catch(e){console.error("Print error:",e),b.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©")}finally{l.value=!1}},M=async a=>{u.value=!0,j.value=a;try{const e=new URLSearchParams({code:a.barcode,type:"PNG",width:2,height:30}),m=await fetch(`/barcode/preview?${e}`);if(m.ok){const y=await m.blob();U.value=URL.createObjectURL(y),w.fire({title:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯",html:`
          <div style="text-align: center;">
            <h4 class="text-center" style=" ; margin-bottom: 15px;">${a.name}</h4>
            <img src="${U.value}" style="max-width: 100%; border: 1px solid #ddd; padding: 10px;width: 100%;">
            <div style="margin-top: 15px; font-family: monospace; font-size: 16px;">${a.barcode}</div>
          </div>
        `,showConfirmButton:!0,confirmButtonText:"Ø¥ØºÙ„Ø§Ù‚",width:"500px"})}else b.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}catch(e){console.error("Preview error:",e),b.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}finally{u.value=!1}},V=async a=>{try{const e=new URLSearchParams({code:a.barcode,type:"PNG",width:2,height:30}),m=await fetch(`/barcode/preview?${e}`);if(!m.ok)throw new Error("Failed to generate barcode image");const y=await m.blob(),o=URL.createObjectURL(y),s=document.createElement("canvas"),i=s.getContext("2d");s.width=300,s.height=150,i.fillStyle="#ffffff",i.fillRect(0,0,s.width,s.height),i.strokeStyle="#000000",i.lineWidth=1,i.strokeRect(2,2,s.width-4,s.height-4),i.fillStyle="#000000",i.font="bold 16px Arial",i.textAlign="center",i.fillText(a.name||"Product",s.width/2,25);const _=new Image;_.onload=function(){const g=Math.min(_.width,s.width-20),q=Math.min(_.height,s.height-80),H=(s.width-g)/2,F=40;i.drawImage(_,H,F,g,q),i.font="14px monospace",i.fillText(a.barcode,s.width/2,F+q+20);const $=document.createElement("a");$.href=s.toDataURL("image/png"),$.download=`barcode_${a.name||"product"}_${a.barcode}.png`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(o),b.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­")},_.onerror=function(){const g=document.createElement("a");g.href=o,g.download=`barcode_${a.name||"product"}_${a.barcode}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(o),b.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­")},_.src=o}catch(e){console.error("Download error:",e),b.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}},I=()=>{D.get(route("products.index"),L,{preserveState:!0,preserveScroll:!0})},v=a=>B.props.auth_permissions.includes(a),G=a=>{w.fire({title:c.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:c.translations.yes,cancelButtonText:c.translations.cancel}).then(e=>{e.isConfirmed&&D.post(`/products/${a}/activate`,{onSuccess:()=>{w.fire("Updated !","product stuaus item has been updated.","success")},onError:()=>{w.fire("Error!","There was an issue updating product status.","error")}})})},Q=a=>{w.fire({title:c.translations.are_you_sure,text:c.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:c.translations.yes,cancelButtonText:c.translations.cancel}).then(e=>{e.isConfirmed&&D.delete("products/"+a,{onSuccess:()=>{w.fire({title:c.translations.data_deleted_successfully,icon:"success"})},onError:()=>{w.fire("Error!","There was an issue deleting the product.","error")}})})};return(a,e)=>(d(),E(st,{translations:n.translations},{default:S(()=>{var m,y;return[t("div",Tt,[t("h1",Dt,r(n.translations.products),1),t("nav",null,[t("ol",Et,[t("li",qt,[R(O(A),{class:"nav-link dark:text-white",href:a.route("dashboard")},{default:S(()=>[T(r(n.translations.home),1)]),_:1},8,["href"])]),t("li",Ft,r(n.translations.products),1)])])]),t("section",Ot,[t("div",At,[e[13]||(e[13]=t("div",{class:"card-header"},[t("div",{class:"d-flex"})],-1)),t("div",jt,[t("form",{onSubmit:tt(I,["prevent"])},[t("div",Nt,[t("div",zt,[C(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":e[0]||(e[0]=o=>L.search=o),placeholder:n.translations.search_by_name_or_barcode},null,8,Mt),[[P,L.search]])]),t("div",Vt,[t("button",It,[T(r(n.translations.search)+" Â  ",1),e[2]||(e[2]=t("i",{class:"bi bi-search"},null,-1))])]),t("div",Gt,[v("create products")?(d(),E(O(A),{key:0,class:"btn btn-primary",href:a.route("products.create")},{default:S(()=>[T(r(n.translations.create)+" Â  ",1),e[3]||(e[3]=t("i",{class:"bi bi-plus-circle"},null,-1))]),_:1},8,["href"])):f("",!0)])])],32),t("div",Qt,[t("table",Ht,[t("thead",null,[t("tr",null,[e[4]||(e[4]=t("th",{scope:"col"},"#",-1)),t("th",Wt,r(n.translations.name),1),t("th",Jt,r(n.translations.barcode),1),t("th",Kt,r(n.translations.model),1),t("th",Xt,r(n.translations.quantity),1),t("th",Yt,r(n.translations.price),1),t("th",Zt,r(n.translations.created_at),1),t("th",te,r(n.translations.statusProdact),1),v("update products")?(d(),h("th",ee,r(n.translations.edit),1)):f("",!0),v("delete products")?(d(),h("th",oe,r(n.translations.delete),1)):f("",!0),v("update products")?(d(),h("th",se,r(n.translations.add_quantity),1)):f("",!0),t("th",ne,r(n.translations.barcode_actions),1)])]),t("tbody",null,[(d(!0),h(ot,null,et((m=n.products)==null?void 0:m.data,(o,s)=>(d(),h("tr",{key:o.id},[t("th",ae,r(s+1),1),t("td",null,r(o.name),1),t("td",null,r(o.barcode),1),t("td",null,r(o.model),1),t("td",null,r(o.quantity),1),t("td",null,r(o.price),1),t("td",null,r(o.created),1),t("td",null,[t("div",null,[t("label",re,[t("input",{type:"checkbox",class:"sr-only peer",checked:o.is_active==1,onChange:i=>G(o.id)},null,40,ie),e[5]||(e[5]=t("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"},null,-1))])])]),v("update products")?(d(),h("td",le,[t("a",{class:"btn btn-primary",href:a.route("products.edit",{product:o.id})},e[6]||(e[6]=[t("i",{class:"bi bi-pencil-square"},null,-1)]),8,ce)])):f("",!0),v("delete products")?(d(),h("td",de,[t("button",{type:"button",class:"btn btn-danger",onClick:i=>Q(o.id)},e[7]||(e[7]=[t("i",{class:"bi bi-trash"},null,-1)]),8,ue)])):f("",!0),v("update products")?(d(),h("td",me,[t("button",{class:"btn btn-success",onClick:i=>{k.value=!0,p.value=o}},e[8]||(e[8]=[t("i",{class:"bi bi-currency-dollar"},null,-1)]),8,be)])):f("",!0),t("td",null,[t("div",he,[o.barcode?f("",!0):(d(),h("button",{key:0,class:"btn btn-sm btn-primary",onClick:i=>N(o),disabled:l.value,title:"ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ø±ÙƒÙˆØ¯"},e[9]||(e[9]=[t("i",{class:"bi bi-qr-code"},null,-1)]),8,pe)),o.barcode?(d(),h("button",{key:1,class:"btn btn-sm btn-success",onClick:i=>z(o),title:"Ø·Ø¨Ø§Ø¹Ø© Ø¨Ø§Ø±ÙƒÙˆØ¯"},e[10]||(e[10]=[t("i",{class:"bi bi-printer"},null,-1)]),8,fe)):f("",!0),o.barcode?(d(),h("button",{key:2,class:"btn btn-sm btn-info",onClick:i=>M(o),title:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¨Ø§Ø±ÙƒÙˆØ¯"},e[11]||(e[11]=[t("i",{class:"bi bi-eye"},null,-1)]),8,ye)):f("",!0),o.barcode?(d(),h("button",{key:3,class:"btn btn-sm btn-secondary",onClick:i=>V(o),title:"ØªØ­Ù…ÙŠÙ„ Ø¨Ø§Ø±ÙƒÙˆØ¯"},e[12]||(e[12]=[t("i",{class:"bi bi-download"},null,-1)]),8,ge)):f("",!0)])])]))),128))])])])])]),R(nt,{links:(y=n.products)==null?void 0:y.links},null,8,["links"])]),R(Rt,{show:k.value,translations:n.translations,onClose:e[1]||(e[1]=o=>k.value=!1),data:p.value},null,8,["show","translations","data"])]}),_:1},8,["translations"]))}};export{Ce as default};
