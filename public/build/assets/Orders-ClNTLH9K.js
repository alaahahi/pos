import{r as y,x as U,a as i,c as F,w as g,b as t,t as s,i as p,d as c,u as k,p as B,j as E,l as u,y as x,A as w,e as d,g as N,f as r,n as H,F as P,h as S}from"./app-AYyl8aPx.js";import{_ as J}from"./AuthenticatedLayout-CYr2UffW.js";import{_ as K}from"./Pagination-t5IWjNVW.js";import{P as Q}from"./PricingEditModal-BHWVqLqU.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"d-flex justify-content-between align-items-center"},X={class:"font-semibold text-xl text-gray-800 leading-tight"},Y={class:"py-12"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},tt={class:"card mb-4"},st={class:"card-body"},et={class:"row"},nt={class:"col-md-4"},lt=["placeholder"],at={class:"col-md-4"},ot={value:""},it={value:"created"},dt={value:"received"},ct={value:"executing"},ut={value:"partial_payment"},rt={value:"full_payment"},mt={value:"completed"},vt={value:"cancelled"},bt={class:"col-md-4"},_t={type:"submit",class:"btn btn-primary w-100"},ht={class:"card"},ft={class:"card-body"},yt={class:"table-responsive"},gt={class:"table table-striped"},xt={class:"text-muted"},pt={class:"text-muted"},kt={class:"text-muted"},wt={class:"pricing-details"},St={class:"d-flex justify-content-between mb-1"},jt={key:0,class:"d-flex justify-content-between mb-1"},Ct={class:"text-success"},Vt={class:"text-success"},Ot={key:1,class:"d-flex justify-content-between mb-1"},$t={class:"text-danger"},Mt={class:"text-danger"},Dt={class:"d-flex justify-content-between"},Ut={class:"text-primary"},Ft={class:"d-flex justify-content-between mt-1"},Bt={class:"text-success"},Et={key:0},Nt={key:1,class:"text-muted"},Pt={class:"btn-group",role:"group"},Lt=["onClick"],Tt=["onClick"],zt=["href"],At={key:0,class:"d-flex justify-content-center mt-4"},It={key:1,class:"text-center py-5"},qt={class:"text-muted mt-3"},Gt={class:"text-muted"},Ht={key:0,class:"modal-mask"},Jt={class:"modal-wrapper"},Kt={class:"modal-container"},Qt={class:"modal-header"},Rt={class:"modal-body"},Wt={class:"row"},Xt={class:"col-md-6"},Yt={class:"mb-3"},Zt={class:"form-label"},ts={value:"created"},ss={value:"received"},es={value:"executing"},ns={value:"partial_payment"},ls={value:"full_payment"},as={value:"completed"},os={value:"cancelled"},is={class:"col-md-6"},ds={class:"mb-3"},cs={class:"form-label"},us={value:""},rs=["value"],ms={key:0,class:"col-md-6"},vs={class:"mb-3"},bs={class:"form-label"},_s={class:"col-md-6"},hs={class:"mb-3"},fs={class:"form-label"},ys={class:"col-12"},gs={class:"mb-3"},xs={class:"form-label"},ps={class:"d-flex justify-content-center gap-2"},ks=["disabled"],ws={key:0,class:"spinner-border spinner-border-sm me-2"},Ss={__name:"Orders",props:{orders:Object,filters:Object,translations:Object,employees:Array},setup(e){var C,V;const j=e,m=y(!1),f=y(!1),v=y(!1),b=y(null),_=U({search:((C=j.filters)==null?void 0:C.search)||"",status:((V=j.filters)==null?void 0:V.status)||""}),o=U({status:"",assigned_employee_id:"",paid_amount:"",scheduled_date:"",notes:""}),L=()=>{S.get(route("decorations.orders"),_,{preserveState:!0,replace:!0})},T=a=>{b.value=a,o.status=a.status,o.assigned_employee_id=a.assigned_employee_id||"",o.paid_amount=a.paid_amount||"",o.scheduled_date=a.scheduled_date?q(a.scheduled_date):"",o.notes=a.notes||"",m.value=!0},z=a=>{b.value=a,f.value=!0},h=a=>a==="dollar"?"دولار":"دينار",A=()=>{v.value=!0,S.patch(route("decoration.orders.status",b.value.id),o,{onSuccess:()=>{v.value=!1,m.value=!1},onError:()=>{v.value=!1}})},I=a=>new Date(a).toLocaleDateString("ar-EG"),q=a=>new Date(a).toISOString().slice(0,16);return(a,l)=>(i(),F(J,null,{header:g(()=>[t("div",W,[t("h2",X,s(e.translations.decoration_orders),1),p(k(B),{class:"btn btn-secondary",href:a.route("decorations.index")},{default:g(()=>[l[11]||(l[11]=t("i",{class:"bi bi-arrow-left"},null,-1)),c(" "+s(e.translations.cancel),1)]),_:1},8,["href"])])]),default:g(()=>{var O,$;return[t("div",Y,[t("div",Z,[t("div",tt,[t("div",st,[t("form",{onSubmit:E(L,["prevent"])},[t("div",et,[t("div",nt,[u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=n=>_.search=n),placeholder:e.translations.search},null,8,lt),[[x,_.search]])]),t("div",at,[u(t("select",{class:"form-select","onUpdate:modelValue":l[1]||(l[1]=n=>_.status=n)},[t("option",ot,s(e.translations.all_status),1),t("option",it,s(e.translations.created),1),t("option",dt,s(e.translations.received),1),t("option",ct,s(e.translations.executing),1),t("option",ut,s(e.translations.partial_payment),1),t("option",rt,s(e.translations.full_payment),1),t("option",mt,s(e.translations.completed),1),t("option",vt,s(e.translations.cancelled),1)],512),[[w,_.status]])]),t("div",bt,[t("button",_t,[l[12]||(l[12]=t("i",{class:"bi bi-search"},null,-1)),c(" "+s(e.translations.search),1)])])])],32)])]),t("div",ht,[t("div",ft,[t("div",yt,[t("table",gt,[t("thead",null,[t("tr",null,[t("th",null,s(e.translations.decoration),1),t("th",null,s(e.translations.customer_name),1),t("th",null,s(e.translations.event_date),1),t("th",null,s(e.translations.pricing),1),t("th",null,s(e.translations.status),1),t("th",null,s(e.translations.assigned_employee),1),t("th",null,s(e.translations.action),1)])]),t("tbody",null,[(i(!0),d(P,null,N(e.orders.data,n=>{var M,D;return i(),d("tr",{key:n.id},[t("td",null,[t("div",null,[t("strong",null,s((M=n.decoration)==null?void 0:M.name),1),l[13]||(l[13]=t("br",null,null,-1)),t("small",xt,s((D=n.decoration)==null?void 0:D.type_name),1)])]),t("td",null,[t("div",null,[c(s(n.customer_name)+" ",1),l[14]||(l[14]=t("br",null,null,-1)),t("small",pt,s(n.customer_phone),1)])]),t("td",null,[c(s(I(n.event_date))+" ",1),l[15]||(l[15]=t("br",null,null,-1)),t("small",kt,s(n.event_time),1)]),t("td",null,[t("div",wt,[t("div",St,[t("small",null,s(e.translations.base_price)+":",1),t("small",null,s(n.base_price)+" "+s(h(n.currency)),1)]),n.additional_cost>0?(i(),d("div",jt,[t("small",Ct,s(e.translations.additional_cost)+":",1),t("small",Vt,"+"+s(n.additional_cost)+" "+s(h(n.currency)),1)])):r("",!0),n.discount>0?(i(),d("div",Ot,[t("small",$t,s(e.translations.discount)+":",1),t("small",Mt,"-"+s(n.discount)+" "+s(h(n.currency)),1)])):r("",!0),l[16]||(l[16]=t("hr",{class:"my-1"},null,-1)),t("div",Dt,[t("strong",null,s(e.translations.total_price)+":",1),t("strong",Ut,s(n.total_price)+" "+s(h(n.currency)),1)]),t("div",Ft,[t("small",null,s(e.translations.paid_amount)+":",1),t("small",Bt,s(n.paid_amount||0)+" "+s(h(n.currency)),1)])])]),t("td",null,[t("span",{class:H(["badge",`bg-${n.status_color}`])},s(n.status_name),3)]),t("td",null,[n.assigned_employee?(i(),d("span",Et,s(n.assigned_employee.name),1)):(i(),d("span",Nt,s(e.translations.not_assigned),1))]),t("td",null,[t("div",Pt,[p(k(B),{href:a.route("decoration.orders.show",n.id),class:"btn btn-outline-primary btn-sm"},{default:g(()=>[l[17]||(l[17]=t("i",{class:"bi bi-eye"},null,-1)),c(" "+s(e.translations.view),1)]),_:2},1032,["href"]),t("button",{onClick:G=>T(n),class:"btn btn-outline-secondary btn-sm"},[l[18]||(l[18]=t("i",{class:"bi bi-pencil"},null,-1)),c(" "+s(e.translations.update_status),1)],8,Lt),t("button",{onClick:G=>z(n),class:"btn btn-outline-warning btn-sm"},[l[19]||(l[19]=t("i",{class:"bi bi-calculator"},null,-1)),c(" "+s(e.translations.edit_pricing),1)],8,Tt),t("a",{href:a.route("decoration.orders.print",n.id),target:"_blank",class:"btn btn-outline-info btn-sm"},[l[20]||(l[20]=t("i",{class:"bi bi-printer"},null,-1)),c(" "+s(e.translations.print_invoice),1)],8,zt)])])])}),128))])])]),e.orders.data.length>0?(i(),d("div",At,[p(K,{links:e.orders.links},null,8,["links"])])):(i(),d("div",It,[l[21]||(l[21]=t("i",{class:"bi bi-calendar-x text-muted",style:{"font-size":"4rem"}},null,-1)),t("h4",qt,s(e.translations.no_orders),1),t("p",Gt,s(e.translations.no_orders_description),1)]))])])])]),m.value?(i(),d("div",Ht,[t("div",Jt,[t("div",Kt,[t("div",Qt,[t("h3",null,s(e.translations.update_status)+" - "+s(($=(O=b.value)==null?void 0:O.decoration)==null?void 0:$.name),1),t("button",{onClick:l[2]||(l[2]=n=>m.value=!1),class:"btn-close"})]),t("div",Rt,[t("form",{onSubmit:E(A,["prevent"])},[t("div",Wt,[t("div",Xt,[t("div",Yt,[t("label",Zt,s(e.translations.status)+" *",1),u(t("select",{class:"form-select","onUpdate:modelValue":l[3]||(l[3]=n=>o.status=n),required:""},[t("option",ts,s(e.translations.created),1),t("option",ss,s(e.translations.received),1),t("option",es,s(e.translations.executing),1),t("option",ns,s(e.translations.partial_payment),1),t("option",ls,s(e.translations.full_payment),1),t("option",as,s(e.translations.completed),1),t("option",os,s(e.translations.cancelled),1)],512),[[w,o.status]])])]),t("div",is,[t("div",ds,[t("label",cs,s(e.translations.assign_employee),1),u(t("select",{class:"form-select","onUpdate:modelValue":l[4]||(l[4]=n=>o.assigned_employee_id=n)},[t("option",us,s(e.translations.select_employee),1),(i(!0),d(P,null,N(e.employees,n=>(i(),d("option",{key:n.id,value:n.id},s(n.name),9,rs))),128))],512),[[w,o.assigned_employee_id]])])]),o.status==="partial_payment"||o.status==="full_payment"?(i(),d("div",ms,[t("div",vs,[t("label",bs,s(e.translations.paid_amount),1),u(t("input",{type:"number",step:"0.01",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=n=>o.paid_amount=n)},null,512),[[x,o.paid_amount]])])])):r("",!0),t("div",_s,[t("div",hs,[t("label",fs,s(e.translations.scheduled_date),1),u(t("input",{type:"datetime-local",class:"form-control","onUpdate:modelValue":l[6]||(l[6]=n=>o.scheduled_date=n)},null,512),[[x,o.scheduled_date]])])]),t("div",ys,[t("div",gs,[t("label",xs,s(e.translations.notes),1),u(t("input",{class:"form-control",type:"text","onUpdate:modelValue":l[7]||(l[7]=n=>o.notes=n)},null,512),[[x,o.notes]])])])]),t("div",ps,[t("button",{type:"button",class:"btn btn-secondary text-center w-100",onClick:l[8]||(l[8]=n=>m.value=!1)},s(e.translations.cancel),1),t("button",{type:"submit",class:"btn btn-primary w-100 text-center",disabled:v.value},[v.value?(i(),d("span",ws)):r("",!0),c(" "+s(e.translations.update),1)],8,ks)])],32)])])])])):r("",!0),f.value?(i(),F(Q,{key:1,order:b.value,translations:e.translations,onClose:l[9]||(l[9]=n=>f.value=!1),onSuccess:l[10]||(l[10]=n=>{f.value=!1,k(S).reload()})},null,8,["order","translations"])):r("",!0)]}),_:1}))}},Ms=R(Ss,[["__scopeId","data-v-7ffbec89"]]);export{Ms as default};
