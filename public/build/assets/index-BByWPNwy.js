import{s as dt,r as S,a as r,h as F,w as L,c as m,b as t,q as G,l as k,x as C,u as c,e as $,C as J,D as A,n as R,y as Ht,E as fe,t as n,G as it,H as ye,i as Q,F as O,f as E,z as Yt,Q as he,I as B,d as x,j as Pt,A as ut,g as at}from"./app-Gc0s28HQ.js";import{A as _e}from"./AuthenticatedLayout-DcTpRD1p.js";import{_ as ct}from"./Pagination-bp7VsqTv.js";import{S as nt}from"./sweetalert2.esm.all-DwEdJQJv.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const xe={key:0,class:"modal-mask"},we={class:"modal-wrapper max-h-[80vh]"},$e={class:"modal-container"},ke={class:"modal-header"},De={class:"modal-body"},Ce={class:"my-4 mx-5"},Se={key:0,class:"text-danger"},Ue={class:"my-4 mx-5"},Me={class:"my-4 mx-5"},Ie={class:"modal-footer my-2"},qe={class:"d-flex w-100"},Be={class:"px-4 flex-fill"},Qe={class:"px-4 flex-fill"},Ae={__name:"ModalConvertDollarDinar",props:{show:Boolean,boxes:Array,exchangeRate:{type:Number,default:15e4}},setup(l){dt();const i=S({user:{percentage:0},amount:0,exchangeRate:l.exchangeRate}),g=()=>{i.value={user:{percentage:0},amount:0}};function v(){b(),i.value.amountResultDinar=Math.floor(i.value.amountDollar*(i.value.exchangeRate/100))}let h=S(!1);function b(){const p=i.value.exchangeRate;/^\d{6}$/.test(p)?h.value=!1:h.value=!0}return(p,o)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",xe,[t("div",we,[t("div",$e,[t("div",ke,[G(p.$slots,"header")]),t("div",De,[t("div",null,[t("div",Ce,[o[7]||(o[7]=t("label",{for:"amountDinar",class:"form-label float-end"},"سعر الصرف 100",-1)),k(t("input",{id:"amountDinar",type:"number",class:"form-control",onInput:o[0]||(o[0]=_=>v()),"onUpdate:modelValue":o[1]||(o[1]=_=>i.value.exchangeRate=_)},null,544),[[C,i.value.exchangeRate]]),c(h)?(r(),m("div",Se," مطلوب رقم من 6 خانة فقط ")):$("",!0)]),t("div",Ue,[o[8]||(o[8]=t("label",{for:"amountDollar",class:"form-label float-end"}," المبلغ بالدولار (المبلغ المسحوب من الصندوق بالدولار) ",-1)),k(t("input",{id:"amountDollar",type:"number",class:"form-control",onInput:o[2]||(o[2]=_=>v()),"onUpdate:modelValue":o[3]||(o[3]=_=>i.value.amountDollar=_)},null,544),[[C,i.value.amountDollar]])]),t("div",Me,[o[9]||(o[9]=t("label",{for:"amountDinar",class:"form-label float-end"}," المبلغ بالدينار العراقي (المبلغ المضاف للصندوق بالدينار) ",-1)),k(t("input",{id:"amountDinar",type:"number",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=_=>i.value.amountResultDinar=_)},null,512),[[C,i.value.amountResultDinar]])])])]),t("div",Ie,[t("div",qe,[t("div",Be,[t("button",{class:"btn btn-secondary w-100 text-center",onClick:o[5]||(o[5]=_=>{p.$emit("close")})}," تراجع ")]),t("div",Qe,[t("button",{class:"btn btn-danger w-100 text-center",onClick:o[6]||(o[6]=_=>{p.$emit("a",i.value),g()})}," نعم ")])])])])])])):$("",!0)]),_:3}))}},Le={key:0,class:"modal-mask"},Re={class:"modal-wrapper max-h-[80vh]"},ze={class:"modal-container"},Ve={class:"modal-header"},Te={class:"modal-body"},Fe={class:"my-4 mx-5"},Ne={key:0,class:"text-danger"},je={class:"my-4 mx-5"},Oe={class:"my-4 mx-5"},Ee={class:"modal-footer my-2"},He={class:"row w-100"},Ye={class:"col-6 px-4"},Pe={class:"col-6 px-4"},Xe={__name:"ModalConvertDinarDollar",props:{show:Boolean,boxes:Array,exchangeRate:{type:Number,default:15e4}},setup(l){dt();const i=S({user:{percentage:0},amount:0,exchangeRate:l.exchangeRate}),g=()=>{i.value={user:{percentage:0},amount:0}};let v=S(!1);function h(){const p=i.value.exchangeRate;/^\d{6}$/.test(p)?v.value=!1:v.value=!0}function b(){h(),i.value.amountResultDollar=Math.floor(i.value.amountDinar/(i.value.exchangeRate/100))}return(p,o)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",Le,[t("div",Re,[t("div",ze,[t("div",Ve,[G(p.$slots,"header")]),t("div",Te,[t("div",null,[t("div",Fe,[o[7]||(o[7]=t("label",{for:"amountDinar",class:"form-label float-end"},"سعر الصرف 100$",-1)),k(t("input",{id:"amountDinar",type:"number",class:"form-control",onInput:o[0]||(o[0]=_=>b()),"onUpdate:modelValue":o[1]||(o[1]=_=>i.value.exchangeRate=_)},null,544),[[C,i.value.exchangeRate]]),c(v)?(r(),m("div",Ne," مطلوب رقم من 6 خانة فقط ")):$("",!0)]),t("div",je,[o[8]||(o[8]=t("label",{for:"amountDinar",class:"form-label float-end"}," المبلغ بالدينار العراقي (المبلغ المسحوب من الصندوق بالدينار العراقي) ",-1)),k(t("input",{id:"amountDinar",type:"number",class:"form-control",onInput:o[2]||(o[2]=_=>b()),"onUpdate:modelValue":o[3]||(o[3]=_=>i.value.amountDinar=_)},null,544),[[C,i.value.amountDinar]])]),t("div",Oe,[o[9]||(o[9]=t("label",{for:"amountDollar",class:"form-label float-end"}," المبلغ بالدولار (المبلغ المضاف للصندوق بالدولار) ",-1)),k(t("input",{id:"amountDollar",type:"number",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=_=>i.value.amountResultDollar=_)},null,512),[[C,i.value.amountResultDollar]])])])]),t("div",Ee,[t("div",He,[t("div",Ye,[t("button",{class:"btn btn-secondary w-100 py-2 text-center",onClick:o[5]||(o[5]=_=>{p.$emit("close")})}," تراجع ")]),t("div",Pe,[t("button",{class:"btn btn-danger w-100 py-2 text-center",onClick:o[6]||(o[6]=_=>{p.$emit("a",i.value),g()})}," نعم ")])])])])])])):$("",!0)]),_:3}))}},Ze={key:0,class:"modal-mask"},Ge={class:"modal-wrapper max-h-[80vh]"},Je={class:"modal-container"},Ke={class:"modal-header"},We={class:"modal-body"},ts={class:"row g-3"},es={class:"col-lg-6"},ss={class:"col-lg-6"},ls={class:"col-lg-6"},as={class:"col-lg-6"},os={class:"modal-footer"},ns={class:"d-flex w-100"},is={class:"px-2 flex-fill"},ds={class:"px-2 flex-fill"},rs=["disabled"],us={__name:"ModalAddToBox",props:{show:Boolean,data:Array,accounts:Array},emits:["close","a"],setup(l,{emit:d}){const i=d,g=S({date:v(),amountDollar:0,amountDinar:0,amountNote:""});function v(){const p=new Date,o=p.getFullYear(),_=String(p.getMonth()+1).padStart(2,"0"),w=String(p.getDate()).padStart(2,"0");return`${o}-${_}-${w}`}const h=()=>{g.value={date:v(),amountDollar:0,amountDinar:0,amountNote:""}},b=p=>{A.post("/api/add-to-box",p).then(o=>{i("a"),i("close"),h()}).catch(o=>{i("close")})};return(p,o)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",Ze,[t("div",Ge,[t("div",Je,[t("div",Ke,[G(p.$slots,"header")]),t("div",We,[t("div",ts,[t("div",es,[o[6]||(o[6]=t("label",{for:"amountDollar",class:"form-label"},"المبلغ بالدولار",-1)),k(t("input",{id:"amountDollar",type:"number",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=_=>g.value.amountDollar=_)},null,512),[[C,g.value.amountDollar]])]),t("div",ss,[o[7]||(o[7]=t("label",{for:"amountDinar",class:"form-label"},"المبلغ بالدينار",-1)),k(t("input",{id:"amountDinar",type:"number",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=_=>g.value.amountDinar=_)},null,512),[[C,g.value.amountDinar]])]),t("div",ls,[o[8]||(o[8]=t("label",{for:"note",class:"form-label"},"ملاحظة",-1)),k(t("input",{id:"note",type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=_=>g.value.amountNote=_)},null,512),[[C,g.value.amountNote]])]),t("div",as,[o[9]||(o[9]=t("label",{for:"date",class:"form-label"},"التاريخ",-1)),k(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=_=>g.value.date=_)},null,512),[[C,g.value.date]])])])]),t("div",os,[t("div",ns,[t("div",is,[t("button",{class:"btn btn-secondary w-100 text-center",onClick:o[4]||(o[4]=_=>i("close"))}," تراجع ")]),t("div",ds,[t("button",{class:"btn btn-danger w-100 text-center",onClick:o[5]||(o[5]=_=>b(g.value)),disabled:!g.value.amountDollar&&!g.value.amountDinar}," نعم ",8,rs)])])])])])])):$("",!0)]),_:3}))}},cs={key:0,class:"modal-mask"},ms={class:"modal-wrapper max-h-[80vh]"},ps={class:"modal-container"},bs={class:"modal-header"},gs={class:"modal-body"},vs={class:"row g-3"},fs={class:"col-lg-6"},ys={class:"col-lg-6"},hs={class:"col-lg-6"},_s={class:"col-lg-6"},xs={class:"modal-footer"},ws={class:"d-flex w-100"},$s={class:"px-2 flex-fill"},ks={class:"px-2 flex-fill"},Ds=["disabled"],Cs={__name:"ModalDropFromBox",props:{show:Boolean,data:Array,accounts:Array},setup(l){const d=S({date:i(),amountDollar:0,amountDinar:0,amountNote:""});function i(){const h=new Date,b=h.getFullYear(),p=String(h.getMonth()+1).padStart(2,"0"),o=String(h.getDate()).padStart(2,"0");return`${b}-${p}-${o}`}const g=()=>{d.value={date:i()}},v=h=>{A.post("/api/drop-from-box",h).then(b=>{}).catch(b=>{$emit("close")})};return(h,b)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",cs,[t("div",ms,[t("div",ps,[t("div",bs,[G(h.$slots,"header")]),t("div",gs,[t("div",vs,[t("div",fs,[b[6]||(b[6]=t("label",{for:"amountDollar",class:"form-label"},"المبلغ بالدولار",-1)),k(t("input",{id:"amountDollar",type:"number",class:"form-control","onUpdate:modelValue":b[0]||(b[0]=p=>d.value.amountDollar=p)},null,512),[[C,d.value.amountDollar]])]),t("div",ys,[b[7]||(b[7]=t("label",{for:"amountDinar",class:"form-label"},"المبلغ بالدينار",-1)),k(t("input",{id:"amountDinar",type:"number",class:"form-control","onUpdate:modelValue":b[1]||(b[1]=p=>d.value.amountDinar=p)},null,512),[[C,d.value.amountDinar]])]),t("div",hs,[b[8]||(b[8]=t("label",{for:"note",class:"form-label"},"ملاحظة",-1)),k(t("input",{id:"note",type:"text",class:"form-control","onUpdate:modelValue":b[2]||(b[2]=p=>d.value.amountNote=p)},null,512),[[C,d.value.amountNote]])]),t("div",_s,[b[9]||(b[9]=t("label",{for:"date",class:"form-label"},"التاريخ",-1)),k(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":b[3]||(b[3]=p=>d.value.date=p)},null,512),[[C,d.value.date]])])])]),t("div",xs,[t("div",ws,[t("div",$s,[t("button",{class:"btn btn-secondary w-100 text-center",onClick:b[4]||(b[4]=p=>{h.$emit("close")})}," تراجع ")]),t("div",ks,[t("button",{class:"btn btn-danger w-100 text-center",onClick:b[5]||(b[5]=p=>{v(d.value),h.$emit("a"),g()}),disabled:!d.value.amountDollar&&!d.value.amountDinar}," نعم ",8,Ds)])])])])])])):$("",!0)]),_:3}))}},Ss={},Us={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Ms(l,d){return r(),m("svg",Us,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"},null,-1)]))}const Xt=P(Ss,[["render",Ms]]),Is={},qs={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Bs(l,d){return r(),m("svg",qs,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1)]))}const Qs=P(Is,[["render",Bs]]),As={},Ls={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Rs(l,d){return r(),m("svg",Ls,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)]))}const zs=P(As,[["render",Rs]]),Vs={name:"line-scale",props:{color:{type:String,default:"#CCC"},size:{type:String,default:"40px"},duration:{type:String,default:"0.6s"}}},Ts=["width","height"],Fs=["fill"],Ns=["dur"],js=["dur"],Os=["fill"],Es=["dur"],Hs=["dur"],Ys=["fill"],Ps=["dur"],Xs=["dur"];function Zs(l,d,i,g,v,h){return r(),m("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:i.size,height:i.size,viewBox:"0 0 24 30",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[t("rect",{x:"0",y:"13",width:"4",height:"5",fill:i.color},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:i.duration,repeatCount:"indefinite"},null,8,Ns),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:i.duration,repeatCount:"indefinite"},null,8,js)],8,Fs),t("rect",{x:"10",y:"13",width:"4",height:"5",fill:i.color},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:i.duration,repeatCount:"indefinite"},null,8,Es),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:i.duration,repeatCount:"indefinite"},null,8,Hs)],8,Os),t("rect",{x:"20",y:"13",width:"4",height:"5",fill:i.color},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:i.duration,repeatCount:"indefinite"},null,8,Ps),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:i.duration,repeatCount:"indefinite"},null,8,Xs)],8,Ys)],8,Ts)}const Gs=P(Vs,[["render",Zs]]),Js={LineScale:Gs},Ks={name:"vue-element-loading",props:{active:Boolean,spinner:{type:String,default:"spinner"},text:{type:String,default:""},textStyle:{type:Object,default:function(){return{}}},color:{type:String,default:"#000"},isFullScreen:{type:Boolean,default:!1},backgroundColor:{type:String,default:"rgba(255, 255, 255, .9)"},size:{type:String,default:"40"},duration:{type:String,default:"0.6"},delay:{type:[String,Number],default:0}},data(){return{isActive:this.active||!1,isActiveDelay:!1}},mounted(){if(this.$refs.velmld.parentNode.classList.add("velmld-parent"),this.delay){const l=+this.delay*1e3;this.delayActive(l)}},methods:{delayActive(l){this.isActiveDelay=!0,setTimeout(()=>{this.isActiveDelay=!1},l)}},watch:{active(l){this.isActive=l,l&&this.$refs.velmld.parentNode.classList.add("velmld-parent")}},components:Js},Ws={class:"velmld-spinner"};function tl(l,d,i,g,v,h){return r(),F(J,{name:"fade"},{default:L(()=>[k(t("div",{class:R([{"velmld-full-screen":i.isFullScreen},"velmld-overlay"]),style:Ht({backgroundColor:i.backgroundColor}),ref:"velmld"},[t("div",Ws,[G(l.$slots,"default",{},()=>[(r(),F(fe(i.spinner),{color:i.color,size:`${i.size}px`,duration:`${i.duration}s`},null,8,["color","size","duration"]))],!0),i.text.length?(r(),m("div",{key:0,style:Ht({color:i.color,...i.textStyle})},n(i.text),5)):$("",!0)])],6),[[it,v.isActive||v.isActiveDelay]])]),_:3})}const el=P(Ks,[["render",tl],["__scopeId","data-v-82159762"]]),sl={props:{server:{type:String,default:"/api/upload"},isInvalid:{type:Boolean,default:!1},media:{type:Array,default:[]},location:{type:String,default:""},max:{type:Number,default:null},maxFilesize:{type:Number,default:4},warnings:{type:Boolean,default:!0},headers:{type:Object,default:null}},mounted(){this.init()},data(){return{addedMedia:[],savedMedia:[],removedMedia:[],config:{headers:null},isLoading:!0}},methods:{init(){this.savedMedia=this.media,this.config.headers=this.headers,this.savedMedia.forEach((l,d)=>{this.savedMedia[d].url||(this.savedMedia[d].url=this.location+"/"+l.name)}),setTimeout(()=>this.isLoading=!1,1e3),this.$emit("init",this.allMedia)},async fileChange(l){this.isLoading=!0;let d=l.target.files;for(var i=0;i<d.length;i++)if(!this.max||this.allMedia.length<this.max)if(d[i].size<=this.maxFilesize*1e6){let g=new FormData,v=URL.createObjectURL(d[i]);g.set("image",d[i]);const{data:h}=await A.post(this.server,g,this.config);let b={url:v,name:h.name,size:d[i].size,type:d[i].type};this.addedMedia.push(b),this.$emit("change",this.allMedia),this.$emit("add",b,this.addedMedia)}else{this.$emit("maxFilesize",d[i].size),this.warnings&&alert(`The file you are trying to upload is too big. 
Maximum Filesize: `+this.maxFilesize+"MB");break}else{this.$emit("max"),this.warnings&&alert(`You have reached the maximum number of files that you can upload. 
Maximum Files: `+this.max);break}l.target.value=null,this.isLoading=!1},removeAddedMedia(l){let d=this.addedMedia[l];this.addedMedia.splice(l,1),this.$emit("change",this.allMedia),this.$emit("remove",d,this.removedMedia)},removeSavedMedia(l){let d=this.savedMedia[l];this.removedMedia.push(d),this.savedMedia.splice(l,1),this.$emit("change",this.allMedia),this.$emit("remove",d,this.removedMedia)}},computed:{allMedia(){return[...this.savedMedia,...this.addedMedia]}},emits:["init","change","add","remove","max","maxFilesize"],components:{Loader:el}},ll={class:"mu-elements-wraper"},al={class:"mu-plusbox-container"},ol={class:"mu-plusbox"},nl=["src"],il=["onClick"],dl=["src"],rl=["onClick"],ul=["value"],cl=["value"],ml={key:0,class:"mu-mt-1"};function pl(l,d,i,g,v,h){const b=ye("Loader");return r(),m("div",null,[t("div",{class:R(["mu-container",i.isInvalid?"mu-red-border":""])},[Q(b,{color:"#0275d8",active:v.isLoading,spinner:"line-scale","background-color":"rgba(255, 255, 255, .4)"},null,8,["active"]),t("div",ll,[t("div",al,[t("label",ol,[d[1]||(d[1]=t("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("g",{fill:"none"},[t("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])],-1)),t("input",{onChange:d[0]||(d[0]=(...p)=>h.fileChange&&h.fileChange(...p)),type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])]),(r(!0),m(O,null,E(v.savedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-image-container"},[t("img",{src:i.location+"/"+p.name,alt:"",class:"mu-images-preview"},null,8,nl),t("button",{onClick:_=>h.removeSavedMedia(o),class:"mu-close-btn",type:"button"},d[2]||(d[2]=[t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)]),8,il)]))),128)),(r(!0),m(O,null,E(v.addedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-image-container"},[t("img",{src:p.url,alt:"",class:"mu-images-preview"},null,8,dl),t("button",{onClick:_=>h.removeAddedMedia(o),class:"mu-close-btn",type:"button"},d[3]||(d[3]=[t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)]),8,rl)]))),128))])],2),t("div",null,[(r(!0),m(O,null,E(v.addedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-mt-1"},[t("input",{type:"text",name:"added_media[]",value:p.name,hidden:""},null,8,ul)]))),128)),(r(!0),m(O,null,E(v.removedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-mt-1"},[t("input",{type:"text",name:"removed_media[]",value:p.name,hidden:""},null,8,cl)]))),128)),h.allMedia.length?(r(),m("div",ml,d[4]||(d[4]=[t("input",{type:"text",name:"media",value:"1",hidden:""},null,-1)]))):$("",!0)])])}const bl=P(sl,[["render",pl],["__scopeId","data-v-01f6b32e"]]),gl={key:0,class:"modal-mask"},vl={class:"modal-wrapper max-h-[80vh]"},fl={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},yl={class:"modal-header"},hl={class:"dark:text-gray-300 py-4 text-center"},_l={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},xl={class:"mb-4"},wl={class:"mt-3"},$l={key:0,class:"text-danger"},kl={class:"modal-footer my-2"},Dl={class:"flex flex-row w-100"},Cl={class:"basis-1/2 px-4 w-100"},Sl={class:"basis-1/2 px-4"},Ul={__name:"ModalUploader",props:{show:Boolean,formData:Object,client:Array},setup(l){const d=dt();function i(g){A.get("/api/TransactionsImageDel?name="+g.name).then(v=>{d.success("تم  حذف الصورة بنجاح",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(v=>{console.error(v)})}return(g,v)=>(r(),F(J,{name:"modal"},{default:L(()=>{var h,b,p;return[l.show?(r(),m("div",gl,[t("div",vl,[t("div",fl,[t("div",yl,[G(g.$slots,"header")]),t("h2",hl,n(l.formData.description),1),t("div",_l,[t("div",xl,[v[2]||(v[2]=t("label",{class:"form-label w-100 dark:text-gray-300"},"الصور",-1)),t("div",wl,[Q(c(bl),{server:"/api/TransactionsUpload?transactionsId="+l.formData.id,"is-invalid":!!((h=g.errors)!=null&&h.media),onChange:g.changeMedia,onInitMedia:g.media,location:"/public/uploadsResized",media:l.formData.transactions_images,onAdd:g.addMedia,onRemove:i},null,8,["server","is-invalid","onChange","onInitMedia","media","onAdd"])]),(b=g.errors)!=null&&b.media?(r(),m("p",$l,n((p=g.errors)==null?void 0:p.media[0]),1)):$("",!0)])]),t("div",kl,[t("div",Dl,[t("div",Cl,[t("button",{class:"modal-default-button py-3 bg-gray-500 rounded text-center",onClick:v[0]||(v[0]=o=>{g.$emit("close")})},"تراجع")]),t("div",Sl,[t("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6 text-center",onClick:v[1]||(v[1]=o=>{g.$emit("a",l.formData)})},"نعم")])])])])])])):$("",!0)]}),_:3}))}},Ml={dir:"rtl",lang:"ar"},Il={class:"page-header"},ql={class:"header-content"},Bl={class:"header-title"},Ql={class:"statistics-section"},Al={class:"stats-grid"},Ll={class:"stat-card balance-usd"},Rl={class:"stat-details"},zl={class:"stat-value"},Vl={class:"stat-card balance-iqd"},Tl={class:"stat-details"},Fl={class:"stat-value"},Nl={class:"stat-card total-in"},jl={class:"stat-details"},Ol={class:"stat-value-group"},El={class:"stat-value-currency"},Hl={class:"stat-value-currency"},Yl={class:"stat-card total-out"},Pl={class:"stat-details"},Xl={class:"stat-value-group"},Zl={class:"stat-value-currency"},Gl={class:"stat-value-currency"},Jl={class:"section dashboard"},Kl={class:"card main-card"},Wl={class:"tabs-navigation"},ta={class:"tab-content"},ea={class:"card-header-custom"},sa={class:"actions-wrapper"},la={class:"action-group primary-actions"},aa=["disabled"],oa=["disabled"],na={class:"action-group conversion-actions"},ia=["disabled"],da=["disabled"],ra={class:"action-group"},ua=["disabled"],ca={class:"exchange-rate-info"},ma={class:"card-body"},pa={class:"filters-section"},ba={class:"filter-grid"},ga={class:"filter-item"},va={class:"filter-item"},fa={class:"filter-item"},ya={class:"filter-item"},ha={class:"filter-actions"},_a=["disabled"],xa=["disabled"],wa={key:0,class:"loading-overlay"},$a={class:"table-container"},ka={class:"table-responsive"},Da={class:"table transactions-table"},Ca={scope:"col"},Sa={class:"index-cell"},Ua={class:"index-badge"},Ma={class:"account-cell"},Ia={class:"account-info"},qa={class:"amount-cell out"},Ba={key:0,class:"amount-badge out"},Qa={key:1},Aa={class:"amount-cell in"},La={key:0,class:"amount-badge in"},Ra={key:1},za={class:"description-cell"},Va={class:"description-text"},Ta={class:"date-cell"},Fa={class:"date-info"},Na={class:"actions-cell"},ja={class:"action-buttons"},Oa=["onClick"],Ea=["onClick"],Ha=["href"],Ya=["href"],Pa=["onClick"],Xa={class:"badge"},Za={key:1},Ga={class:"tab-content"},Ja={class:"close-section"},Ka={class:"close-grid"},Wa={class:"close-card daily-close"},to={class:"close-card-header"},eo={class:"close-card-body"},so={class:"close-info-row"},lo={class:"close-value"},ao={class:"currency-badge usd"},oo={class:"currency-badge iqd"},no={class:"close-info-row"},io={class:"close-value"},ro={class:"currency-badge usd"},uo={class:"currency-badge iqd"},co={class:"close-info-row"},mo={class:"close-value"},po={class:"currency-badge usd"},bo={class:"currency-badge iqd"},go={class:"close-info-row"},vo={class:"close-value"},fo={class:"currency-badge usd"},yo={class:"currency-badge iqd"},ho={class:"close-info-row"},_o={class:"close-value"},xo={class:"currency-badge usd"},wo={class:"currency-badge iqd"},$o={class:"close-info-row highlight"},ko={class:"close-value"},Do={class:"currency-badge usd"},Co={class:"currency-badge iqd"},So={class:"close-info-row"},Uo={class:"close-value"},Mo={class:"close-card-footer"},Io=["disabled"],qo={key:1,class:"closed-badge"},Bo={class:"close-card monthly-close"},Qo={class:"close-card-header"},Ao={class:"close-card-title"},Lo={class:"close-card-body"},Ro={class:"close-info-row"},zo={class:"close-value"},Vo={class:"currency-badge usd"},To={class:"currency-badge iqd"},Fo={class:"close-info-row"},No={class:"close-value"},jo={class:"currency-badge usd"},Oo={class:"currency-badge iqd"},Eo={class:"close-info-row"},Ho={class:"close-value"},Yo={class:"currency-badge usd"},Po={class:"currency-badge iqd"},Xo={class:"close-info-row"},Zo={class:"close-value"},Go={class:"currency-badge usd"},Jo={class:"currency-badge iqd"},Ko={class:"close-info-row"},Wo={class:"close-value"},tn={class:"currency-badge usd"},en={class:"currency-badge iqd"},sn={class:"close-info-row highlight"},ln={class:"close-value"},an={class:"currency-badge usd"},on={class:"currency-badge iqd"},nn={class:"close-info-row"},dn={class:"close-value"},rn={class:"close-card-footer"},un=["disabled"],cn={key:1,class:"closed-badge"},mn={class:"tab-content"},pn={class:"filters-section",style:{"margin-bottom":"1.5rem"}},bn={class:"row g-3"},gn={class:"col-md-3"},vn={class:"col-md-3"},fn={key:0,class:"col-md-2"},yn={key:1,class:"col-md-2"},hn={key:2,class:"col-md-2"},_n={key:3,class:"col-md-2"},xn={key:0,class:"mb-4"},wn={key:0,class:"text-center py-4"},$n={key:1,class:"table-responsive"},kn={class:"table table-hover"},Dn={class:"currency-badge usd"},Cn={class:"currency-badge iqd"},Sn={class:"currency-badge usd"},Un={class:"currency-badge iqd"},Mn={class:"currency-badge usd"},In={class:"currency-badge iqd"},qn={class:"currency-badge usd"},Bn={class:"currency-badge iqd"},Qn={class:"currency-badge usd"},An={class:"currency-badge iqd"},Ln=["onClick"],Rn={key:2,class:"alert alert-info"},zn={key:1},Vn={key:0,class:"text-center py-4"},Tn={key:1,class:"table-responsive"},Fn={class:"table table-hover"},Nn={class:"currency-badge usd"},jn={class:"currency-badge iqd"},On={class:"currency-badge usd"},En={class:"currency-badge iqd"},Hn={class:"currency-badge usd"},Yn={class:"currency-badge iqd"},Pn={class:"currency-badge usd"},Xn={class:"currency-badge iqd"},Zn={class:"currency-badge usd"},Gn={class:"currency-badge iqd"},Jn=["onClick"],Kn={key:2,class:"alert alert-info"},Wn={class:"images-modal-header"},ti={class:"images-grid"},ei=["href"],si=["src","alt"],li={__name:"index",props:{boxes:Object,transactions:Object,translations:Object,mainBox:Object,exchangeRate:{type:Number,default:1500},dailyClose:Object,monthlyClose:Object},setup(l){const d=dt();let i=S(!1),g=S(!1),v=S(!1),h=S(!1),b=S(!1),p=S(!1),o=S(0),_=S([]),w=S(!1),M=S("transactions"),ot=S(!1),H=S(null),Y=S(null),f=Yt({type:"all",status:"all",start_date:"",end_date:"",year:"",month:""});const U=l,Zt=he(),I=Yt({name:"",note:"",start_date:W(),end_date:W()});function Gt(){g.value=!0}function Jt(){i.value=!0}function Kt(){v.value=!0}function Wt(){h.value=!0}function te(){X()}function X(){w.value=!0,A.get("api/boxes/transactions").then(u=>{at.reload({only:["transactions","mainBox","dailyClose","monthlyClose"]}),d.success("تم تحديث البيانات بنجاح",{timeout:2e3,position:"bottom-right",rtl:!0})}).catch(u=>{console.log(u),d.error("حدث خطأ أثناء التحديث",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1})}function ee(u){w.value=!0,A.post("/api/convertDollarDinar",u).then(e=>{X(),g.value=!1,d.success("تم التحويل بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(e=>{d.error("حدث خطأ أثناء التحويل",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1})}function se(u){w.value=!0,A.post("/api/convertDinarDollar",u).then(e=>{X(),i.value=!1,d.success("تم التحويل بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(e=>{d.error("حدث خطأ أثناء التحويل",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1})}const mt=()=>{w.value=!0,at.get(route("boxes.index"),I,{preserveState:!0,preserveScroll:!0,onFinish:()=>{w.value=!1}})},le=()=>{I.name="",I.note="",I.start_date=W(),I.end_date=W(),mt()},K=u=>Zt.props.auth_permissions.includes(u);function a(u){return typeof u!="number"&&(u=parseFloat(u)||0),Math.round(u).toLocaleString()}const ae=(u,e)=>{nt.fire({title:"تأكيد الحذف",html:`هل أنت متأكد من حذف هذه المعاملة؟<br><strong>المبلغ: ${a(e)}</strong>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"نعم، احذف",cancelButtonText:"إلغاء"}).then(D=>{D.isConfirmed&&(w.value=!0,A.post("api/delTransactions",{id:u}).then(y=>{at.reload({only:["transactions","mainBox"]}),d.success("تم حذف المعاملة بنجاح",{timeout:2e3,position:"bottom-right",rtl:!0})}).catch(y=>{d.error("حدث خطأ أثناء الحذف",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1}))})};function W(){const u=new Date,e=u.getFullYear(),D=String(u.getMonth()+1).padStart(2,"0"),y=String(u.getDate()).padStart(2,"0");return`${e}-${D}-${y}`}const tt=u=>{const e=new Date(u),D=e.getFullYear(),y=String(e.getMonth()+1).padStart(2,"0"),V=String(e.getDate()).padStart(2,"0"),q=String(e.getHours()).padStart(2,"0"),T=String(e.getMinutes()).padStart(2,"0");return`${D}-${y}-${V} ${q}:${T}`};function oe(u){o.value=u,b.value=!0}function ne(u){_.value=u.transactions_images||[],p.value=!0}function ie(u){return`/storage/transactions/${u}`}function de(u){return`/storage/transactions/${u}`}function re(u){return u.type==="outUser"||u.type==="out"?"row-out":u.type==="inUser"||u.type==="in"?"row-in":""}const ue=()=>{if(!U.transactions.data)return 0;const u=U.transactions.data.filter(e=>(e.type==="in"||e.type==="inUser")&&(e.currency==="USD"||e.currency==="$")).reduce((e,D)=>e+(parseFloat(D.amount)||0),0);return a(u)},ce=()=>{if(!U.transactions.data)return 0;const u=U.transactions.data.filter(e=>(e.type==="in"||e.type==="inUser")&&e.currency==="IQD").reduce((e,D)=>e+(parseFloat(D.amount)||0),0);return a(u)},me=()=>{if(!U.transactions.data)return 0;const u=U.transactions.data.filter(e=>(e.type==="out"||e.type==="outUser")&&(e.currency==="USD"||e.currency==="$")).reduce((e,D)=>e+Math.abs(parseFloat(D.amount)||0),0);return a(u)},pe=()=>{if(!U.transactions.data)return 0;const u=U.transactions.data.filter(e=>(e.type==="out"||e.type==="outUser")&&e.currency==="IQD").reduce((e,D)=>e+Math.abs(parseFloat(D.amount)||0),0);return a(u)},be=async()=>{var u;w.value=!0;try{const e=((u=U.dailyClose)==null?void 0:u.close_date)||W(),y=(await A.get(`/boxes/daily-close?date=${e}`)).data;nt.fire({title:"تأكيد إغلاق اليوم",html:`
        <p>هل أنت متأكد من إغلاق اليوم؟</p>
        <div style="text-align: right; margin-top: 1rem; font-family: Arial, sans-serif;">
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">المبيعات:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.total_sales_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.total_sales_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">إضافة مباشرة:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.direct_deposits_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.direct_deposits_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">المصاريف:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.total_expenses_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.total_expenses_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">الرصيد الافتتاحي:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.opening_balance_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.opening_balance_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">الرصيد الختامي:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.closing_balance_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.closing_balance_iqd)??0)} IQD</span>
            </div>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonColor:"#667eea",cancelButtonColor:"#6c757d",confirmButtonText:"نعم، إغلاق",cancelButtonText:"إلغاء",input:"textarea",inputPlaceholder:"ملاحظات (اختياري)",inputAttributes:{"aria-label":"ملاحظات"}}).then(V=>{V.isConfirmed&&(w.value=!0,A.post("/boxes/close-daily",{date:e,notes:V.value||""}).then(q=>{q.data.success?(d.success(q.data.message||"تم إغلاق اليوم بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0}),at.reload({only:["dailyClose","monthlyClose","mainBox"]})):d.error(q.data.message||"حدث خطأ",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(q=>{var T,N;d.error(((N=(T=q.response)==null?void 0:T.data)==null?void 0:N.message)||"حدث خطأ أثناء إغلاق اليوم",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1}))})}catch(e){console.error("Error fetching daily close data:",e),d.error("حدث خطأ أثناء جلب بيانات الإغلاق",{timeout:3e3,position:"bottom-right",rtl:!0}),w.value=!1}},ge=()=>{var u,e,D,y,V,q;nt.fire({title:"تأكيد إغلاق الشهر",html:`
      <p>هل أنت متأكد من إغلاق الشهر الحالي؟</p>
      <div style="text-align: right; margin-top: 1rem;">
        <p><strong>المبيعات:</strong> ${a(((u=U.monthlyClose)==null?void 0:u.total_sales_usd)??0)} USD / ${a(((e=U.monthlyClose)==null?void 0:e.total_sales_iqd)??0)} IQD</p>
        <p><strong>المصاريف:</strong> ${a(((D=U.monthlyClose)==null?void 0:D.total_expenses_usd)??0)} USD / ${a(((y=U.monthlyClose)==null?void 0:y.total_expenses_iqd)??0)} IQD</p>
        <p><strong>الرصيد الختامي:</strong> ${a(((V=U.monthlyClose)==null?void 0:V.closing_balance_usd)??0)} USD / ${a(((q=U.monthlyClose)==null?void 0:q.closing_balance_iqd)??0)} IQD</p>
      </div>
    `,icon:"question",showCancelButton:!0,confirmButtonColor:"#667eea",cancelButtonColor:"#6c757d",confirmButtonText:"نعم، إغلاق",cancelButtonText:"إلغاء",input:"textarea",inputPlaceholder:"ملاحظات (اختياري)",inputAttributes:{"aria-label":"ملاحظات"}}).then(T=>{var N,et;T.isConfirmed&&(w.value=!0,A.post("/boxes/close-monthly",{year:((N=U.monthlyClose)==null?void 0:N.year)||new Date().getFullYear(),month:((et=U.monthlyClose)==null?void 0:et.month)||new Date().getMonth()+1,notes:T.value||""}).then(j=>{j.data.success?(d.success(j.data.message||"تم إغلاق الشهر بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0}),at.reload({only:["dailyClose","monthlyClose","mainBox"]})):d.error(j.data.message||"حدث خطأ",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(j=>{var st,lt;d.error(((lt=(st=j.response)==null?void 0:st.data)==null?void 0:lt.message)||"حدث خطأ أثناء إغلاق الشهر",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1}))})},z=async()=>{ot.value=!0;try{const u=new URLSearchParams;f.type&&u.append("type",f.type),f.status&&u.append("status",f.status),f.start_date&&u.append("start_date",f.start_date),f.end_date&&u.append("end_date",f.end_date),f.year&&u.append("year",f.year),f.month&&u.append("month",f.month);const e=await A.get(`/boxes/closes-list?${u.toString()}`);H.value=e.data.daily_closes,Y.value=e.data.monthly_closes}catch(u){console.error("Error loading closes list:",u),d.error("حدث خطأ أثناء جلب قائمة الإغلاقات",{timeout:3e3,position:"bottom-right",rtl:!0})}finally{ot.value=!1}},ve=()=>{f.type="all",f.status="all",f.start_date="",f.end_date="",f.year="",f.month="",z()},pt=(u,e)=>{const D=u==="daily"?`
      <div style="text-align: right; font-family: Arial, sans-serif;">
        <p><strong>التاريخ:</strong> ${tt(e.close_date)}</p>
        <p><strong>الحالة:</strong> ${e.status==="closed"?"مغلق":"مفتوح"}</p>
        <p><strong>المبيعات:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_sales_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_sales_iqd??0)} IQD</span>
        </p>
        <p><strong>إضافة مباشرة:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.direct_deposits_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.direct_deposits_iqd??0)} IQD</span>
        </p>
        <p><strong>المصاريف:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_expenses_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_expenses_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الافتتاحي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.opening_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.opening_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الختامي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.closing_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.closing_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>عدد الطلبات:</strong> ${e.total_orders??0}</p>
        ${e.notes?`<p><strong>ملاحظات:</strong> ${e.notes}</p>`:""}
      </div>
    `:`
      <div style="text-align: right; font-family: Arial, sans-serif;">
        <p><strong>الشهر:</strong> ${rt(e.month)} ${e.year}</p>
        <p><strong>الحالة:</strong> ${e.status==="closed"?"مغلق":"مفتوح"}</p>
        <p><strong>المبيعات:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_sales_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_sales_iqd??0)} IQD</span>
        </p>
        <p><strong>إضافة مباشرة:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.direct_deposits_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.direct_deposits_iqd??0)} IQD</span>
        </p>
        <p><strong>المصاريف:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_expenses_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_expenses_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الافتتاحي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.opening_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.opening_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الختامي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.closing_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.closing_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>عدد الطلبات:</strong> ${e.total_orders??0}</p>
        ${e.notes?`<p><strong>ملاحظات:</strong> ${e.notes}</p>`:""}
      </div>
    `;nt.fire({title:u==="daily"?"تفاصيل الإغلاق اليومي":"تفاصيل الإغلاق الشهري",html:D,icon:"info",confirmButtonText:"إغلاق"})},rt=u=>({1:"يناير",2:"فبراير",3:"مارس",4:"أبريل",5:"مايو",6:"يونيو",7:"يوليو",8:"أغسطس",9:"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"})[u]||u;return(u,e)=>(r(),F(_e,{translations:l.translations},{default:L(()=>{var D,y,V,q,T,N,et,j,st,lt,bt,gt,vt,ft,yt,ht,_t,xt,wt,$t,kt,Dt,Ct,St,Ut,Mt,It,qt,Bt,Qt,At,Lt,Rt,zt,Vt,Tt,Ft,Nt,jt;return[t("div",Ml,[t("div",Il,[t("div",ql,[t("div",Bl,[e[31]||(e[31]=t("i",{class:"bi bi-safe2"},null,-1)),t("h1",null,n(l.translations.boxes),1)])])]),t("div",Ql,[t("div",Al,[t("div",Ll,[e[34]||(e[34]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",Rl,[e[32]||(e[32]=t("h6",null,"الرصيد بالدولار",-1)),t("span",zl,n(a(((D=l.mainBox)==null?void 0:D.balance_usd)??0)),1),e[33]||(e[33]=t("small",null,"USD",-1))])]),t("div",Vl,[e[37]||(e[37]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-cash-stack"})],-1)),t("div",Tl,[e[35]||(e[35]=t("h6",null,"الرصيد بالدينار",-1)),t("span",Fl,n(a(((y=l.mainBox)==null?void 0:y.balance)??0)),1),e[36]||(e[36]=t("small",null,"IQD",-1))])]),t("div",Nl,[e[40]||(e[40]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-arrow-down-circle"})],-1)),t("div",jl,[e[38]||(e[38]=t("h6",null,"إجمالي الإضافات",-1)),t("div",Ol,[t("span",El,n(ue())+" USD",1),t("span",Hl,n(ce())+" IQD",1)]),e[39]||(e[39]=t("small",null,"عمليات اليوم",-1))])]),t("div",Yl,[e[43]||(e[43]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-arrow-up-circle"})],-1)),t("div",Pl,[e[41]||(e[41]=t("h6",null,"إجمالي السحوبات",-1)),t("div",Xl,[t("span",Zl,n(me())+" USD",1),t("span",Gl,n(pe())+" IQD",1)]),e[42]||(e[42]=t("small",null,"عمليات اليوم",-1))])])])]),t("section",Jl,[t("div",Kl,[t("div",Wl,[t("button",{class:R(["tab-btn",{active:c(M)==="transactions"}]),onClick:e[0]||(e[0]=s=>B(M)?M.value="transactions":M="transactions")},e[44]||(e[44]=[t("i",{class:"bi bi-list-ul"},null,-1),x(" المعاملات ")]),2),t("button",{class:R(["tab-btn",{active:c(M)==="close"}]),onClick:e[1]||(e[1]=s=>B(M)?M.value="close":M="close")},e[45]||(e[45]=[t("i",{class:"bi bi-calendar-check"},null,-1),x(" الإغلاق اليومي والشهري ")]),2),t("button",{class:R(["tab-btn",{active:c(M)==="closes-list"}]),onClick:e[2]||(e[2]=s=>{B(M)?M.value="closes-list":M="closes-list",z()})},e[46]||(e[46]=[t("i",{class:"bi bi-list-check"},null,-1),x(" قائمة الإغلاقات ")]),2)]),k(t("div",ta,[t("div",ea,[t("div",sa,[t("div",la,[K("create order")?(r(),m("button",{key:0,class:"action-btn success",onClick:e[3]||(e[3]=s=>Kt()),disabled:c(w)},[e[47]||(e[47]=t("i",{class:"bi bi-plus-circle"},null,-1)),t("span",null,n(l.translations.add_to_box),1)],8,aa)):$("",!0),K("create order")?(r(),m("button",{key:1,class:"action-btn danger",onClick:e[4]||(e[4]=s=>Wt()),disabled:c(w)},[e[48]||(e[48]=t("i",{class:"bi bi-dash-circle"},null,-1)),t("span",null,n(l.translations.drop_from_box),1)],8,oa)):$("",!0)]),t("div",na,[K("create order")?(r(),m("button",{key:0,class:"action-btn warning",onClick:e[5]||(e[5]=s=>Jt()),disabled:c(w)},e[49]||(e[49]=[t("i",{class:"bi bi-arrow-left-right"},null,-1),t("span",null,"دينار → دولار",-1)]),8,ia)):$("",!0),K("create order")?(r(),m("button",{key:1,class:"action-btn warning",onClick:e[6]||(e[6]=s=>Gt()),disabled:c(w)},e[50]||(e[50]=[t("i",{class:"bi bi-arrow-right-left"},null,-1),t("span",null,"دولار → دينار",-1)]),8,da)):$("",!0)]),t("div",ra,[t("button",{class:"action-btn info",onClick:e[7]||(e[7]=s=>X()),disabled:c(w)},[t("i",{class:R(["bi bi-arrow-clockwise",{spin:c(w)}])},null,2),e[51]||(e[51]=t("span",null,"تحديث",-1))],8,ua)])]),t("div",ca,[e[54]||(e[54]=t("i",{class:"bi bi-graph-up-arrow"},null,-1)),t("span",null,[e[52]||(e[52]=x("سعر الصرف: ")),t("strong",null,n(l.exchangeRate),1),e[53]||(e[53]=x(" IQD/USD"))])])]),t("div",ma,[t("div",pa,[t("form",{onSubmit:Pt(mt,["prevent"]),class:"filter-form"},[t("div",ba,[t("div",ga,[e[55]||(e[55]=t("label",null,[t("i",{class:"bi bi-calendar-event"}),x(" تاريخ البداية ")],-1)),k(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=s=>I.start_date=s)},null,512),[[C,I.start_date]])]),t("div",va,[e[56]||(e[56]=t("label",null,[t("i",{class:"bi bi-calendar-check"}),x(" تاريخ النهاية ")],-1)),k(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=s=>I.end_date=s)},null,512),[[C,I.end_date]])]),t("div",fa,[e[57]||(e[57]=t("label",null,[t("i",{class:"bi bi-person"}),x(" الاسم ")],-1)),k(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=s=>I.name=s),placeholder:"ابحث بالاسم..."},null,512),[[C,I.name]])]),t("div",ya,[e[58]||(e[58]=t("label",null,[t("i",{class:"bi bi-file-text"}),x(" الملاحظة ")],-1)),k(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=s=>I.note=s),placeholder:"ابحث بالملاحظة..."},null,512),[[C,I.note]])]),t("div",ha,[t("button",{type:"submit",class:"btn btn-primary",disabled:c(w)},[e[59]||(e[59]=t("i",{class:"bi bi-search"},null,-1)),x(" "+n(l.translations.search),1)],8,_a),t("button",{type:"button",class:"btn btn-secondary",onClick:le,disabled:c(w)},e[60]||(e[60]=[t("i",{class:"bi bi-x-circle"},null,-1),x(" مسح ")]),8,xa)])])],32)]),c(w)?(r(),m("div",wa,e[61]||(e[61]=[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"جاري التحميل...")],-1)]))):$("",!0),t("div",$a,[t("div",ka,[t("table",Da,[t("thead",null,[t("tr",null,[e[63]||(e[63]=t("th",{scope:"col"},"#",-1)),e[64]||(e[64]=t("th",{scope:"col"},[t("i",{class:"bi bi-person-circle"}),x(" الحساب ")],-1)),e[65]||(e[65]=t("th",{scope:"col"},[t("i",{class:"bi bi-arrow-up text-danger"}),x(" سحب ")],-1)),e[66]||(e[66]=t("th",{scope:"col"},[t("i",{class:"bi bi-arrow-down text-success"}),x(" إضافة ")],-1)),e[67]||(e[67]=t("th",{scope:"col"},[t("i",{class:"bi bi-card-text"}),x(" البيان ")],-1)),t("th",Ca,[e[62]||(e[62]=t("i",{class:"bi bi-calendar3"},null,-1)),x(" "+n(l.translations.created_at),1)]),e[68]||(e[68]=t("th",{scope:"col",class:"actions-col"},[t("i",{class:"bi bi-gear"}),x(" الإجراءات ")],-1))])]),t("tbody",null,[l.transactions.data&&l.transactions.data.length>0?(r(!0),m(O,{key:0},E(l.transactions.data,(s,Z)=>{var Ot;return r(),m("tr",{key:s.id,class:R([re(s),"transaction-row"])},[t("td",Sa,[t("span",Ua,n((l.transactions.current_page-1)*l.transactions.per_page+Z+1),1)]),t("td",Ma,[t("div",Ia,[e[69]||(e[69]=t("i",{class:"bi bi-person-badge"},null,-1)),t("span",null,n(((Ot=s.morphed)==null?void 0:Ot.name)||"غير محدد"),1)])]),t("td",qa,[s.type=="outUser"||s.type=="out"?(r(),m("span",Ba,[e[70]||(e[70]=t("i",{class:"bi bi-dash-circle"},null,-1)),x(" "+n(a(s.amount))+" "+n(s.currency),1)])):(r(),m("span",Qa,"-"))]),t("td",Aa,[s.type=="inUser"||s.type=="in"?(r(),m("span",La,[e[71]||(e[71]=t("i",{class:"bi bi-plus-circle"},null,-1)),x(" "+n(a(s.amount))+" "+n(s.currency),1)])):(r(),m("span",Ra,"-"))]),t("td",za,[t("span",Va,n(s.description||"لا يوجد"),1)]),t("td",Ta,[t("div",Fa,[e[72]||(e[72]=t("i",{class:"bi bi-clock"},null,-1)),t("span",null,n(tt(s.created_at)),1)])]),t("td",Na,[t("div",ja,[K("delete order")?(r(),m("button",{key:0,class:"action-icon delete",onClick:Et=>ae(s.id,s.amount),title:"حذف"},[Q(zs)],8,Oa)):$("",!0),t("button",{class:"action-icon upload",onClick:Et=>oe(s),title:"تحميل مرفق"},[Q(Qs)],8,Ea),s.type==="out"||s.type==="outUser"||s.type==="debt"?(r(),m("a",{key:1,target:"_blank",href:`/api/getIndexAccountsSelas?user_id=${l.mainBox.id}&print=2&transactions_id=${s.id}`,class:"action-icon print",title:"طباعة"},[Q(Xt)],8,Ha)):$("",!0),s.type==="in"||s.type==="inUser"?(r(),m("a",{key:2,target:"_blank",href:`/api/getIndexAccountsSelas?user_id=${l.mainBox.id}&print=3&transactions_id=${s.id}`,class:"action-icon print",title:"طباعة"},[Q(Xt)],8,Ya)):$("",!0),s.transactions_images&&s.transactions_images.length>0?(r(),m("button",{key:3,class:"action-icon view",onClick:Et=>ne(s),title:"عرض المرفقات"},[e[73]||(e[73]=t("i",{class:"bi bi-images"},null,-1)),t("span",Xa,n(s.transactions_images.length),1)],8,Pa)):$("",!0)])])],2)}),128)):(r(),m("tr",Za,e[74]||(e[74]=[t("td",{colspan:"7",class:"empty-state"},[t("div",{class:"empty-content"},[t("i",{class:"bi bi-inbox"}),t("p",null,"لا توجد معاملات")])],-1)])))])])])])]),Q(ct,{links:(V=l.transactions)==null?void 0:V.links},null,8,["links"])],512),[[it,c(M)==="transactions"]]),k(t("div",Ga,[t("div",Ja,[t("div",Ka,[t("div",Wa,[t("div",to,[e[75]||(e[75]=t("div",{class:"close-card-title"},[t("i",{class:"bi bi-calendar-day"}),t("h3",null,"إغلاق يومي")],-1)),t("span",{class:R(["close-status",((q=l.dailyClose)==null?void 0:q.status)==="closed"?"closed":"open"])},n(((T=l.dailyClose)==null?void 0:T.status)==="closed"?"مغلق":"مفتوح"),3)]),t("div",eo,[t("div",so,[e[76]||(e[76]=t("span",{class:"close-label"},"المبيعات:",-1)),t("span",lo,[t("span",ao,n(a(((N=l.dailyClose)==null?void 0:N.total_sales_usd)??0))+" USD",1),t("span",oo,n(a(((et=l.dailyClose)==null?void 0:et.total_sales_iqd)??0))+" IQD",1)])]),t("div",no,[e[77]||(e[77]=t("span",{class:"close-label"},"إضافة مباشرة:",-1)),t("span",io,[t("span",ro,n(a(((j=l.dailyClose)==null?void 0:j.direct_deposits_usd)??0))+" USD",1),t("span",uo,n(a(((st=l.dailyClose)==null?void 0:st.direct_deposits_iqd)??0))+" IQD",1)])]),t("div",co,[e[78]||(e[78]=t("span",{class:"close-label"},"سحب مباشر:",-1)),t("span",mo,[t("span",po,n(a(((lt=l.dailyClose)==null?void 0:lt.direct_withdrawals_usd)??0))+" USD",1),t("span",bo,n(a(((bt=l.dailyClose)==null?void 0:bt.direct_withdrawals_iqd)??0))+" IQD",1)])]),t("div",go,[e[79]||(e[79]=t("span",{class:"close-label"},"المصاريف:",-1)),t("span",vo,[t("span",fo,n(a(((gt=l.dailyClose)==null?void 0:gt.total_expenses_usd)??0))+" USD",1),t("span",yo,n(a(((vt=l.dailyClose)==null?void 0:vt.total_expenses_iqd)??0))+" IQD",1)])]),t("div",ho,[e[80]||(e[80]=t("span",{class:"close-label"},"الرصيد الافتتاحي:",-1)),t("span",_o,[t("span",xo,n(a(((ft=l.dailyClose)==null?void 0:ft.opening_balance_usd)??0))+" USD",1),t("span",wo,n(a(((yt=l.dailyClose)==null?void 0:yt.opening_balance_iqd)??0))+" IQD",1)])]),t("div",$o,[e[81]||(e[81]=t("span",{class:"close-label"},"الرصيد الختامي:",-1)),t("span",ko,[t("span",Do,n(a(((ht=l.dailyClose)==null?void 0:ht.closing_balance_usd)??0))+" USD",1),t("span",Co,n(a(((_t=l.dailyClose)==null?void 0:_t.closing_balance_iqd)??0))+" IQD",1)])]),t("div",So,[e[82]||(e[82]=t("span",{class:"close-label"},"عدد الطلبات:",-1)),t("span",Uo,n(((xt=l.dailyClose)==null?void 0:xt.total_orders)??0),1)])]),t("div",Mo,[((wt=l.dailyClose)==null?void 0:wt.status)==="open"?(r(),m("button",{key:0,class:"btn-close-action",onClick:be,disabled:c(w)},e[83]||(e[83]=[t("i",{class:"bi bi-lock-fill"},null,-1),x(" إغلاق اليوم ")]),8,Io)):(r(),m("span",qo,[e[84]||(e[84]=t("i",{class:"bi bi-check-circle"},null,-1)),x(" تم الإغلاق في "+n(tt(($t=l.dailyClose)==null?void 0:$t.closed_at)),1)]))])]),t("div",Bo,[t("div",Qo,[t("div",Ao,[e[85]||(e[85]=t("i",{class:"bi bi-calendar-month"},null,-1)),t("h3",null,"إغلاق شهري - "+n(((kt=l.monthlyClose)==null?void 0:kt.month_name)||rt((Dt=l.monthlyClose)==null?void 0:Dt.month)),1)]),t("span",{class:R(["close-status",((Ct=l.monthlyClose)==null?void 0:Ct.status)==="closed"?"closed":"open"])},n(((St=l.monthlyClose)==null?void 0:St.status)==="closed"?"مغلق":"مفتوح"),3)]),t("div",Lo,[t("div",Ro,[e[86]||(e[86]=t("span",{class:"close-label"},"المبيعات:",-1)),t("span",zo,[t("span",Vo,n(a(((Ut=l.monthlyClose)==null?void 0:Ut.total_sales_usd)??0))+" USD",1),t("span",To,n(a(((Mt=l.monthlyClose)==null?void 0:Mt.total_sales_iqd)??0))+" IQD",1)])]),t("div",Fo,[e[87]||(e[87]=t("span",{class:"close-label"},"إضافة مباشرة:",-1)),t("span",No,[t("span",jo,n(a(((It=l.monthlyClose)==null?void 0:It.direct_deposits_usd)??0))+" USD",1),t("span",Oo,n(a(((qt=l.monthlyClose)==null?void 0:qt.direct_deposits_iqd)??0))+" IQD",1)])]),t("div",Eo,[e[88]||(e[88]=t("span",{class:"close-label"},"سحب مباشر:",-1)),t("span",Ho,[t("span",Yo,n(a(((Bt=l.monthlyClose)==null?void 0:Bt.direct_withdrawals_usd)??0))+" USD",1),t("span",Po,n(a(((Qt=l.monthlyClose)==null?void 0:Qt.direct_withdrawals_iqd)??0))+" IQD",1)])]),t("div",Xo,[e[89]||(e[89]=t("span",{class:"close-label"},"المصاريف:",-1)),t("span",Zo,[t("span",Go,n(a(((At=l.monthlyClose)==null?void 0:At.total_expenses_usd)??0))+" USD",1),t("span",Jo,n(a(((Lt=l.monthlyClose)==null?void 0:Lt.total_expenses_iqd)??0))+" IQD",1)])]),t("div",Ko,[e[90]||(e[90]=t("span",{class:"close-label"},"الرصيد الافتتاحي:",-1)),t("span",Wo,[t("span",tn,n(a(((Rt=l.monthlyClose)==null?void 0:Rt.opening_balance_usd)??0))+" USD",1),t("span",en,n(a(((zt=l.monthlyClose)==null?void 0:zt.opening_balance_iqd)??0))+" IQD",1)])]),t("div",sn,[e[91]||(e[91]=t("span",{class:"close-label"},"الرصيد الختامي:",-1)),t("span",ln,[t("span",an,n(a(((Vt=l.monthlyClose)==null?void 0:Vt.closing_balance_usd)??0))+" USD",1),t("span",on,n(a(((Tt=l.monthlyClose)==null?void 0:Tt.closing_balance_iqd)??0))+" IQD",1)])]),t("div",nn,[e[92]||(e[92]=t("span",{class:"close-label"},"عدد الطلبات:",-1)),t("span",dn,n(((Ft=l.monthlyClose)==null?void 0:Ft.total_orders)??0),1)])]),t("div",rn,[((Nt=l.monthlyClose)==null?void 0:Nt.status)==="open"?(r(),m("button",{key:0,class:"btn-close-action",onClick:ge,disabled:c(w)},e[93]||(e[93]=[t("i",{class:"bi bi-lock-fill"},null,-1),x(" إغلاق الشهر ")]),8,un)):(r(),m("span",cn,[e[94]||(e[94]=t("i",{class:"bi bi-check-circle"},null,-1)),x(" تم الإغلاق في "+n(tt((jt=l.monthlyClose)==null?void 0:jt.closed_at)),1)]))])])])])],512),[[it,c(M)==="close"]])])]),k(t("div",mn,[e[113]||(e[113]=t("div",{class:"card-header-custom"},[t("div",{class:"actions-wrapper"},[t("h3",{class:"card-title"},"قائمة الإغلاقات")])],-1)),t("div",pn,[t("div",bn,[t("div",gn,[e[96]||(e[96]=t("label",{class:"form-label"},"النوع",-1)),k(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>c(f).type=s),onChange:z,class:"form-select"},e[95]||(e[95]=[t("option",{value:"all"},"الكل",-1),t("option",{value:"daily"},"يومي",-1),t("option",{value:"monthly"},"شهري",-1)]),544),[[ut,c(f).type]])]),t("div",vn,[e[98]||(e[98]=t("label",{class:"form-label"},"الحالة",-1)),k(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>c(f).status=s),onChange:z,class:"form-select"},e[97]||(e[97]=[t("option",{value:"all"},"الكل",-1),t("option",{value:"open"},"مفتوح",-1),t("option",{value:"closed"},"مغلق",-1)]),544),[[ut,c(f).status]])]),c(f).type==="all"||c(f).type==="daily"?(r(),m("div",fn,[e[99]||(e[99]=t("label",{class:"form-label"},"من تاريخ",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[14]||(e[14]=s=>c(f).start_date=s),onChange:z,class:"form-control"},null,544),[[C,c(f).start_date]])])):$("",!0),c(f).type==="all"||c(f).type==="daily"?(r(),m("div",yn,[e[100]||(e[100]=t("label",{class:"form-label"},"إلى تاريخ",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[15]||(e[15]=s=>c(f).end_date=s),onChange:z,class:"form-control"},null,544),[[C,c(f).end_date]])])):$("",!0),c(f).type==="all"||c(f).type==="monthly"?(r(),m("div",hn,[e[101]||(e[101]=t("label",{class:"form-label"},"السنة",-1)),k(t("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=s=>c(f).year=s),onChange:z,class:"form-control",placeholder:"مثال: 2025"},null,544),[[C,c(f).year]])])):$("",!0),c(f).type==="all"||c(f).type==="monthly"?(r(),m("div",_n,[e[103]||(e[103]=t("label",{class:"form-label"},"الشهر",-1)),k(t("select",{"onUpdate:modelValue":e[17]||(e[17]=s=>c(f).month=s),onChange:z,class:"form-select"},e[102]||(e[102]=[t("option",{value:""},"الكل",-1),t("option",{value:"1"},"يناير",-1),t("option",{value:"2"},"فبراير",-1),t("option",{value:"3"},"مارس",-1),t("option",{value:"4"},"أبريل",-1),t("option",{value:"5"},"مايو",-1),t("option",{value:"6"},"يونيو",-1),t("option",{value:"7"},"يوليو",-1),t("option",{value:"8"},"أغسطس",-1),t("option",{value:"9"},"سبتمبر",-1),t("option",{value:"10"},"أكتوبر",-1),t("option",{value:"11"},"نوفمبر",-1),t("option",{value:"12"},"ديسمبر",-1)]),544),[[ut,c(f).month]])])):$("",!0),t("div",{class:"col-md-2 d-flex align-items-end"},[t("button",{onClick:ve,class:"btn btn-secondary w-100"},e[104]||(e[104]=[t("i",{class:"bi bi-x-circle"},null,-1),x(" مسح الفلاتر ")]))])])]),c(f).type==="all"||c(f).type==="daily"?(r(),m("div",xn,[e[108]||(e[108]=t("h5",{class:"mb-3"},"الإغلاقات اليومية",-1)),c(ot)?(r(),m("div",wn,e[105]||(e[105]=[t("div",{class:"spinner-border",role:"status"},null,-1)]))):c(H)&&c(H).data&&c(H).data.length>0?(r(),m("div",$n,[t("table",kn,[e[107]||(e[107]=t("thead",null,[t("tr",null,[t("th",null,"التاريخ"),t("th",null,"الحالة"),t("th",null,"المبيعات"),t("th",null,"إضافة مباشرة"),t("th",null,"المصاريف"),t("th",null,"الرصيد الافتتاحي"),t("th",null,"الرصيد الختامي"),t("th",null,"عدد الطلبات"),t("th",null,"الإجراءات")])],-1)),t("tbody",null,[(r(!0),m(O,null,E(c(H).data,s=>(r(),m("tr",{key:"daily-"+s.id},[t("td",null,n(tt(s.close_date)),1),t("td",null,[t("span",{class:R(s.status==="closed"?"badge bg-success":"badge bg-warning")},n(s.status==="closed"?"مغلق":"مفتوح"),3)]),t("td",null,[t("span",Dn,n(a(s.total_sales_usd??0))+" USD",1),t("span",Cn,n(a(s.total_sales_iqd??0))+" IQD",1)]),t("td",null,[t("span",Sn,n(a(s.direct_deposits_usd??0))+" USD",1),t("span",Un,n(a(s.direct_deposits_iqd??0))+" IQD",1)]),t("td",null,[t("span",Mn,n(a(s.total_expenses_usd??0))+" USD",1),t("span",In,n(a(s.total_expenses_iqd??0))+" IQD",1)]),t("td",null,[t("span",qn,n(a(s.opening_balance_usd??0))+" USD",1),t("span",Bn,n(a(s.opening_balance_iqd??0))+" IQD",1)]),t("td",null,[t("span",Qn,n(a(s.closing_balance_usd??0))+" USD",1),t("span",An,n(a(s.closing_balance_iqd??0))+" IQD",1)]),t("td",null,n(s.total_orders??0),1),t("td",null,[t("button",{onClick:Z=>pt("daily",s),class:"btn btn-sm btn-info"},e[106]||(e[106]=[t("i",{class:"bi bi-eye"},null,-1),x(" التفاصيل ")]),8,Ln)])]))),128))])]),c(H).links?(r(),F(ct,{key:0,links:c(H).links,onPageChanged:z},null,8,["links"])):$("",!0)])):(r(),m("div",Rn,"لا توجد إغلاقات يومية"))])):$("",!0),c(f).type==="all"||c(f).type==="monthly"?(r(),m("div",zn,[e[112]||(e[112]=t("h5",{class:"mb-3"},"الإغلاقات الشهرية",-1)),c(ot)?(r(),m("div",Vn,e[109]||(e[109]=[t("div",{class:"spinner-border",role:"status"},null,-1)]))):c(Y)&&c(Y).data&&c(Y).data.length>0?(r(),m("div",Tn,[t("table",Fn,[e[111]||(e[111]=t("thead",null,[t("tr",null,[t("th",null,"الشهر"),t("th",null,"الحالة"),t("th",null,"المبيعات"),t("th",null,"إضافة مباشرة"),t("th",null,"المصاريف"),t("th",null,"الرصيد الافتتاحي"),t("th",null,"الرصيد الختامي"),t("th",null,"عدد الطلبات"),t("th",null,"الإجراءات")])],-1)),t("tbody",null,[(r(!0),m(O,null,E(c(Y).data,s=>(r(),m("tr",{key:"monthly-"+s.id},[t("td",null,n(rt(s.month))+" "+n(s.year),1),t("td",null,[t("span",{class:R(s.status==="closed"?"badge bg-success":"badge bg-warning")},n(s.status==="closed"?"مغلق":"مفتوح"),3)]),t("td",null,[t("span",Nn,n(a(s.total_sales_usd??0))+" USD",1),t("span",jn,n(a(s.total_sales_iqd??0))+" IQD",1)]),t("td",null,[t("span",On,n(a(s.direct_deposits_usd??0))+" USD",1),t("span",En,n(a(s.direct_deposits_iqd??0))+" IQD",1)]),t("td",null,[t("span",Hn,n(a(s.total_expenses_usd??0))+" USD",1),t("span",Yn,n(a(s.total_expenses_iqd??0))+" IQD",1)]),t("td",null,[t("span",Pn,n(a(s.opening_balance_usd??0))+" USD",1),t("span",Xn,n(a(s.opening_balance_iqd??0))+" IQD",1)]),t("td",null,[t("span",Zn,n(a(s.closing_balance_usd??0))+" USD",1),t("span",Gn,n(a(s.closing_balance_iqd??0))+" IQD",1)]),t("td",null,n(s.total_orders??0),1),t("td",null,[t("button",{onClick:Z=>pt("monthly",s),class:"btn btn-sm btn-info"},e[110]||(e[110]=[t("i",{class:"bi bi-eye"},null,-1),x(" التفاصيل ")]),8,Jn)])]))),128))])]),c(Y).links?(r(),F(ct,{key:0,links:c(Y).links,onPageChanged:z},null,8,["links"])):$("",!0)])):(r(),m("div",Kn,"لا توجد إغلاقات شهرية"))])):$("",!0)],512),[[it,c(M)==="closes-list"]]),Q(Ul,{show:c(b),formData:c(o),onA:e[18]||(e[18]=s=>te(s)),onClose:e[19]||(e[19]=s=>B(b)?b.value=!1:b=!1)},{header:L(()=>e[114]||(e[114]=[t("h2",{class:"modal-title"},[t("i",{class:"bi bi-cloud-upload"}),x(" تحميل ملفات ")],-1)])),_:1},8,["show","formData"]),Q(Ae,{show:c(g),boxes:l.boxes,exchangeRate:l.exchangeRate,onA:e[20]||(e[20]=s=>ee(s)),onClose:e[21]||(e[21]=s=>B(g)?g.value=!1:g=!1)},{header:L(()=>e[115]||(e[115]=[t("h3",{class:"modal-title"},[t("i",{class:"bi bi-arrow-left-right"}),x(" تحويل من الدولار إلى دينار ")],-1)])),_:1},8,["show","boxes","exchangeRate"]),Q(Xe,{show:c(i),boxes:l.boxes,exchangeRate:l.exchangeRate,onA:e[22]||(e[22]=s=>se(s)),onClose:e[23]||(e[23]=s=>B(i)?i.value=!1:i=!1)},{header:L(()=>e[116]||(e[116]=[t("h3",{class:"modal-title"},[t("i",{class:"bi bi-arrow-right-left"}),x(" تحويل من الدينار إلى دولار ")],-1)])),_:1},8,["show","boxes","exchangeRate"]),Q(us,{show:c(v),data:u.users,accounts:u.accounts,onA:e[24]||(e[24]=s=>{X(),B(v)?v.value=!1:v=!1}),onClose:e[25]||(e[25]=s=>B(v)?v.value=!1:v=!1)},{header:L(()=>e[117]||(e[117]=[t("h3",{class:"modal-title"},[t("i",{class:"bi bi-plus-circle"}),x(" وصل قبض - إضافة للصندوق ")],-1)])),_:1},8,["show","data","accounts"]),Q(Cs,{show:c(h),boxes:l.boxes,onA:e[26]||(e[26]=s=>{X(),B(h)?h.value=!1:h=!1}),onClose:e[27]||(e[27]=s=>B(h)?h.value=!1:h=!1)},{header:L(()=>e[118]||(e[118]=[t("h2",{class:"modal-title"},[t("i",{class:"bi bi-dash-circle"}),x(" وصل سحب - سحب من الصندوق ")],-1)])),_:1},8,["show","boxes"]),c(p)?(r(),m("div",{key:0,class:"images-modal-overlay",onClick:e[30]||(e[30]=s=>B(p)?p.value=!1:p=!1)},[t("div",{class:"images-modal-content",onClick:e[29]||(e[29]=Pt(()=>{},["stop"]))},[t("div",Wn,[e[120]||(e[120]=t("h4",null,"المرفقات",-1)),t("button",{onClick:e[28]||(e[28]=s=>B(p)?p.value=!1:p=!1),class:"close-btn"},e[119]||(e[119]=[t("i",{class:"bi bi-x"},null,-1)]))]),t("div",ti,[(r(!0),m(O,null,E(c(_),(s,Z)=>(r(),m("a",{key:Z,href:de(s.name),target:"_blank",class:"image-item"},[t("img",{src:ie(s.name),alt:`صورة ${Z+1}`},null,8,si),e[121]||(e[121]=t("div",{class:"image-overlay"},[t("i",{class:"bi bi-download"}),t("span",null,"تحميل")],-1))],8,ei))),128))])])])):$("",!0)])]}),_:1},8,["translations"]))}},ri=P(li,[["__scopeId","data-v-a75d8e3c"]]);export{ri as default};
