import{r as b,a as i,h,w as v,b as s,d as l,c as a,t as r,n as x,e as g,i as y,u as f,p,D as C}from"./app-waBy9tqW.js";import{A as T}from"./AuthenticatedLayout-Ce3rnGfh.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"section dashboard"},N={class:"card"},V={class:"card-body"},D={key:0,class:"alert alert-success"},O={class:"row"},S={class:"col-md-6"},$={class:"mb-1"},A={class:"badge bg-primary"},L={key:0,class:"mb-1"},q={key:1,class:"mb-1"},z={key:2,class:"mb-1"},E={class:"col-md-6"},F={class:"mb-1"},I={class:"mb-1"},R={key:0,class:"mb-1"},G={key:1,class:"alert alert-warning"},H={key:2,class:"alert alert-danger"},J={class:"card bg-light mt-4"},K={class:"card-body"},M={class:"row"},P={class:"col-md-6 mb-3"},Q={class:"input-group"},U=["value"],W={class:"col-md-6 mb-3"},X={class:"input-group"},Y=["value"],Z={class:"mt-4 d-flex justify-content-between"},_=["disabled"],ss={key:0,class:"spinner-border spinner-border-sm me-2"},es={key:1,class:"bi bi-shield-check me-1"},ts={__name:"Status",props:{license:{type:Object,default:()=>({})},server:{type:Object,required:!0},translations:{type:Object,default:()=>({})}},setup(t){const d=b(!1),u=b(""),c=b(""),k=async()=>{var n,e;d.value=!0,c.value="",u.value="";try{const o=await C.get("/api/license/verify");o.data.success&&o.data.valid?(u.value="الترخيص صالح ومفعل",setTimeout(()=>{window.location.reload()},1500)):c.value="الترخيص غير صالح أو منتهي الصلاحية"}catch(o){c.value=((e=(n=o.response)==null?void 0:n.data)==null?void 0:e.message)||"حدث خطأ أثناء التحقق من الترخيص"}finally{d.value=!1}},m=n=>{navigator.clipboard.writeText(n).then(()=>{u.value="تم النسخ بنجاح",setTimeout(()=>{u.value=""},2e3)}).catch(()=>{c.value="فشل النسخ"})},w=n=>n===null||n>30?"badge bg-success":n>7?"badge bg-warning":"badge bg-danger";return(n,e)=>(i(),h(T,{translations:t.translations},{default:v(()=>[s("section",B,[s("div",N,[e[25]||(e[25]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},[s("i",{class:"bi bi-shield-check me-2"}),l(" حالة الترخيص ")])],-1)),s("div",V,[t.license.activated&&t.license.valid?(i(),a("div",D,[e[11]||(e[11]=s("h6",{class:"alert-heading"},[s("i",{class:"bi bi-check-circle me-2"}),l(" الترخيص مفعل وصالح ")],-1)),e[12]||(e[12]=s("hr",null,null,-1)),s("div",O,[s("div",S,[s("p",$,[e[3]||(e[3]=s("strong",null,"النوع:",-1)),s("span",A,r(t.license.type),1)]),t.license.expires_at?(i(),a("p",L,[e[4]||(e[4]=s("strong",null,"تاريخ الانتهاء:",-1)),l(" "+r(t.license.expires_at),1)])):(i(),a("p",q,e[5]||(e[5]=[s("strong",null,"النوع:",-1),l(),s("span",{class:"badge bg-success"},"ترخيص دائم",-1)]))),t.license.days_remaining!==null?(i(),a("p",z,[e[6]||(e[6]=s("strong",null,"الأيام المتبقية:",-1)),s("span",{class:x(w(t.license.days_remaining))},r(t.license.days_remaining)+" يوم ",3)])):g("",!0)]),s("div",E,[s("p",F,[e[7]||(e[7]=s("strong",null,"الدومين:",-1)),e[8]||(e[8]=l()),s("code",null,r(t.license.domain),1)]),s("p",I,[e[9]||(e[9]=s("strong",null,"تاريخ التفعيل:",-1)),l(" "+r(t.license.activated_at),1)]),t.license.last_verified_at?(i(),a("p",R,[e[10]||(e[10]=s("strong",null,"آخر تحقق:",-1)),l(" "+r(t.license.last_verified_at),1)])):g("",!0)])])])):t.license.activated&&!t.license.valid?(i(),a("div",G,e[13]||(e[13]=[s("h6",{class:"alert-heading"},[s("i",{class:"bi bi-exclamation-triangle me-2"}),l(" الترخيص منتهي الصلاحية ")],-1),s("hr",null,null,-1),s("p",null,"يرجى تجديد الترخيص أو الاتصال بالدعم الفني.",-1)]))):(i(),a("div",H,[e[15]||(e[15]=s("h6",{class:"alert-heading"},[s("i",{class:"bi bi-x-circle me-2"}),l(" الترخيص غير مفعل ")],-1)),e[16]||(e[16]=s("hr",null,null,-1)),e[17]||(e[17]=s("p",null,"يرجى تفعيل الترخيص للاستمرار في استخدام النظام.",-1)),y(f(p),{href:n.route("license.activate"),class:"btn btn-primary"},{default:v(()=>e[14]||(e[14]=[s("i",{class:"bi bi-key me-1"},null,-1),l(" تفعيل الترخيص ")])),_:1},8,["href"])])),s("div",J,[e[22]||(e[22]=s("div",{class:"card-header"},[s("h6",{class:"card-title mb-0"},[s("i",{class:"bi bi-server me-2"}),l(" معلومات السيرفر ")])],-1)),s("div",K,[s("div",M,[s("div",P,[e[19]||(e[19]=s("label",{class:"form-label"},[s("strong",null,"الدومين:")],-1)),s("div",Q,[s("input",{type:"text",class:"form-control",value:t.server.domain,readonly:""},null,8,U),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[0]||(e[0]=o=>m(t.server.domain))},e[18]||(e[18]=[s("i",{class:"bi bi-clipboard"},null,-1)]))])]),s("div",W,[e[21]||(e[21]=s("label",{class:"form-label"},[s("strong",null,"Fingerprint:")],-1)),s("div",X,[s("input",{type:"text",class:"form-control",value:t.server.fingerprint,readonly:""},null,8,Y),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=o=>m(t.server.fingerprint))},e[20]||(e[20]=[s("i",{class:"bi bi-clipboard"},null,-1)]))])])])])]),s("div",Z,[s("button",{type:"button",class:"btn btn-secondary",onClick:e[2]||(e[2]=o=>n.window.history.back())},e[23]||(e[23]=[s("i",{class:"bi bi-arrow-right me-1"},null,-1),l(" رجوع ")])),s("div",null,[s("button",{type:"button",class:"btn btn-primary me-2",onClick:k,disabled:d.value},[d.value?(i(),a("span",ss)):(i(),a("i",es)),l(" "+r(d.value?"جاري التحقق...":"التحقق من الترخيص"),1)],8,_),y(f(p),{href:n.route("license.activate"),class:"btn btn-warning"},{default:v(()=>e[24]||(e[24]=[s("i",{class:"bi bi-key me-1"},null,-1),l(" تفعيل/إعادة تفعيل ")])),_:1},8,["href"])])])])])])]),_:1},8,["translations"]))}},as=j(ts,[["__scopeId","data-v-2ca84a3d"]]);export{as as default};
