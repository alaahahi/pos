import{Q as F,x as I,a as l,c as y,w as h,b as t,t as s,i as v,d as m,u as k,p as x,j as T,l as w,y as g,f as d,e as i,g as N,F as E,h as D}from"./app-rrtI315f.js";import{_ as U}from"./AuthenticatedLayout-CiFcEoWJ.js";import{_ as $}from"./Pagination-CO4ga6T5.js";import{S as _}from"./sweetalert2.esm.all-DwEdJQJv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"pagetitle dark:text-white"},L={class:"dark:text-white"},M={class:"breadcrumb"},O={class:"breadcrumb-item"},A={class:"breadcrumb-item active dark:text-white"},P={class:"section dashboard"},q={class:"card"},z={class:"card-body"},G={class:"row filter_form"},H={class:"col-md-3"},J=["placeholder"],K={class:"col-md-3"},R=["placeholder"],W={class:"col-md-3"},X={type:"submit",class:"btn btn-primary"},Y={class:"col-md-3"},Z={class:"table-responsive"},tt={class:"table text-center"},et={scope:"col"},st={scope:"col"},ot={scope:"col"},nt={scope:"col"},at={scope:"col"},lt={scope:"col"},it={key:0,scope:"col"},rt={key:1,scope:"col"},dt={key:2,scope:"col"},ct={key:3,scope:"col"},ut={scope:"row"},ht={key:0},mt=["onClick"],_t=["href"],bt={key:1},ft=["href"],gt={__name:"index",props:{orders:Object,translations:Array},setup(n){const c=n,B=F(),u=I({name:"",model:""}),S=()=>{D.get(route("orders.index"),u,{preserveState:!0,preserveScroll:!0})},r=a=>B.props.auth_permissions.includes(a),C=a=>{_.fire({title:c.translations.are_you_sure,text:c.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:c.translations.yes,cancelButtonText:c.translations.cancel}).then(e=>{e.isConfirmed&&D.delete("orders/"+a,{onSuccess:()=>{_.fire({title:c.translations.data_deleted_successfully,icon:"success"})},onError:()=>{_.fire("Error!","There was an issue deleting the order.","error")}})})},Q=a=>{const e={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(a).toLocaleDateString("en-US",e)};return(a,e)=>(l(),y(U,{translations:n.translations},{default:h(()=>{var b,f;return[t("div",j,[t("h1",L,s(n.translations.orders),1),t("nav",null,[t("ol",M,[t("li",O,[v(k(x),{class:"nav-link dark:text-white",href:a.route("dashboard")},{default:h(()=>[m(s(n.translations.home),1)]),_:1},8,["href"])]),t("li",A,s(n.translations.orders),1)])])]),t("section",P,[t("div",q,[e[10]||(e[10]=t("div",{class:"card-header"},[t("div",{class:"d-flex"})],-1)),t("div",z,[t("form",{onSubmit:T(S,["prevent"])},[t("div",G,[t("div",H,[w(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":e[0]||(e[0]=o=>u.name=o),placeholder:n.translations.name},null,8,J),[[g,u.name]])]),t("div",K,[w(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":e[1]||(e[1]=o=>u.model=o),placeholder:n.translations.model},null,8,R),[[g,u.model]])]),t("div",W,[t("button",X,[m(s(n.translations.search)+"   ",1),e[2]||(e[2]=t("i",{class:"bi bi-search"},null,-1))])]),t("div",Y,[r("create order")?(l(),y(k(x),{key:0,class:"btn btn-primary",href:a.route("orders.create")},{default:h(()=>[m(s(n.translations.create_invoice)+" "+s(n.translations.dollar)+"   ",1),e[3]||(e[3]=t("i",{class:"bi bi-plus-circle"},null,-1))]),_:1},8,["href"])):d("",!0)])])],32),t("div",Z,[t("table",tt,[t("thead",null,[t("tr",null,[e[4]||(e[4]=t("th",{scope:"col"},"#",-1)),t("th",et,s(n.translations.client),1),t("th",st,s(n.translations.total)+" IQD",1),e[5]||(e[5]=t("th",{scope:"col"},"الخصم IQD",-1)),e[6]||(e[6]=t("th",{scope:"col"},"المبلغ النهائي IQD",-1)),t("th",ot,s(n.translations.paid_order)+" IQD",1),t("th",nt,s(n.translations.due_order)+" IQD",1),t("th",at,s(n.translations.statusOrder),1),t("th",lt,s(n.translations.created_at),1),r("update order")?(l(),i("th",it)):d("",!0),r("delete order")?(l(),i("th",rt)):d("",!0),r("delete order")?(l(),i("th",dt)):d("",!0),r("update order")?(l(),i("th",ct)):d("",!0)])]),t("tbody",null,[(l(!0),i(E,null,N((b=n.orders)==null?void 0:b.data,(o,V)=>{var p;return l(),i("tr",{key:o.id},[t("th",ut,s(V+1),1),t("td",null,s((p=o.customer)==null?void 0:p.name),1),t("td",null,s(o.total_amount),1),t("td",null,s(o.discount_amount||0),1),t("td",null,s(o.final_amount||o.total_amount),1),t("td",null,s(o.total_paid),1),t("td",null,s((o.final_amount||o.total_amount)-o.total_paid),1),t("td",null,s(o.status),1),t("td",null,s(Q(o.created_at)),1),r("delete order")?(l(),i("td",ht,[t("button",{type:"button",class:"btn btn-danger",onClick:pt=>C(o.id)},e[7]||(e[7]=[t("i",{class:"bi bi-trash"},null,-1)]),8,mt)])):d("",!0),t("td",null,[t("a",{class:"btn btn-secondary",href:a.route("order.print",{id:o.id})},e[8]||(e[8]=[t("i",{class:"bi bi-printer text-white"},null,-1)]),8,_t)]),r("update order")&&o.status=="due"?(l(),i("td",bt,[t("a",{class:"btn btn-success",href:a.route("orders.edit",{order:o.id})},e[9]||(e[9]=[t("i",{class:"bi bi-currency-dollar"},null,-1)]),8,ft)])):d("",!0)])}),128))])])])])]),v($,{links:(f=n.orders)==null?void 0:f.links},null,8,["links"])])]}),_:1},8,["translations"]))}};export{gt as default};
