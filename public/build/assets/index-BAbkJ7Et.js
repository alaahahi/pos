import{Q as E,z as N,a as l,h as f,w as b,b as t,j as U,l as m,x,A as $,t as n,d as _,u as k,p as w,e as d,c as u,f as D,n as M,F as j,i as z,g as p}from"./app-CSuMz0Jo.js";import{A as L}from"./AuthenticatedLayout-CfED7tvs.js";import{_ as q}from"./Pagination-D0Sn69s2.js";import{S as h}from"./sweetalert2.esm.all-DwEdJQJv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"section dashboard"},P={class:"card"},Q={class:"card-body"},Y={class:"row filter_form"},G={class:"col-md-2"},H=["placeholder"],I={class:"col-md-2"},J=["placeholder"],K={class:"col-md-2"},R={value:"",selected:"",disabled:""},W={value:1},X={value:0},Z={class:"col-md-2"},tt={type:"submit",class:"btn btn-primary"},et={class:"col-md-2"},st={class:"col-md-2"},nt={class:"table-responsive"},ot={class:"table text-center"},at={scope:"col"},lt={scope:"col"},rt={scope:"col"},it={scope:"col"},ct={scope:"col"},dt={scope:"col"},ut={scope:"col"},ht={key:0,scope:"col"},ft={key:1,scope:"col"},bt={class:"text-center"},mt={scope:"row"},_t={class:"inline-flex items-center me-5 cursor-pointer"},pt=["checked","onChange"],vt={key:0},yt=["href"],gt=["href"],xt={key:1},kt=["onClick"],Ft={__name:"index",props:{customers:Object,translations:Array},setup(s){const r=s,C=E(),i=N({name:"",phone:"",is_active:""}),B=()=>{p.get(route("customers.index"),i,{preserveState:!0,preserveScroll:!0})},c=a=>C.props.auth_permissions.includes(a),S=a=>{h.fire({title:r.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:r.translations.yes,cancelButtonText:r.translations.cancel}).then(e=>{e.isConfirmed&&p.post(`/customers/${a}/activate`,{onSuccess:()=>{h.fire("Updated!","Client status has been updated.","success")},onError:()=>{h.fire("Error!","There was an issue updating customer status.","error")}})})},T=a=>{h.fire({title:r.translations.are_your_sure,text:r.translations.You_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:r.translations.yes,cancelButtonText:r.translations.cancel}).then(e=>{e.isConfirmed&&p.delete("customers/"+a,{onSuccess:()=>{h.fire({title:r.translations.data_deleted_successfully,icon:"success"})},onError:()=>{h.fire("Error!","There was an issue deleting the customer.","error")}})})},F=a=>a?parseFloat(a).toFixed(2)+" د.ع":"0.00";return(a,e)=>(l(),f(L,{translations:s.translations},{default:b(()=>[t("section",O,[t("div",P,[e[12]||(e[12]=t("div",{class:"card-header"},[t("div",{class:"d-flex"})],-1)),t("div",Q,[t("form",{onSubmit:U(B,["prevent"])},[t("div",Y,[t("div",G,[m(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":e[0]||(e[0]=o=>i.name=o),placeholder:s.translations.name},null,8,H),[[x,i.name]])]),t("div",I,[m(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":e[1]||(e[1]=o=>i.phone=o),placeholder:s.translations.phone},null,8,J),[[x,i.phone]])]),t("div",K,[m(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=o=>i.is_active=o)},[t("option",R,n(s.translations.status),1),t("option",W,n(s.translations.active),1),t("option",X,n(s.translations.not_active),1)],512),[[$,i.is_active]])]),t("div",Z,[t("button",tt,[_(n(s.translations.search)+"   ",1),e[3]||(e[3]=t("i",{class:"bi bi-search"},null,-1))])]),t("div",et,[c("read customers")?(l(),f(k(w),{key:0,class:"btn btn-success",href:a.route("export.customers")},{default:b(()=>[_(n(s.translations.export)+"   ",1),e[4]||(e[4]=t("i",{class:"bi bi-filetype-xls"},null,-1))]),_:1},8,["href"])):d("",!0)]),t("div",st,[c("create customer")?(l(),f(k(w),{key:0,class:"btn btn-primary",href:a.route("customers.create")},{default:b(()=>[_(n(s.translations.create)+"   ",1),e[5]||(e[5]=t("i",{class:"bi bi-plus-circle"},null,-1))]),_:1},8,["href"])):d("",!0)])])],32),t("div",nt,[t("table",ot,[t("thead",null,[t("tr",null,[e[6]||(e[6]=t("th",{scope:"col"},"#",-1)),t("th",at,n(s.translations.name),1),t("th",lt,n(s.translations.phone),1),t("th",rt,n(s.translations.balance_dollar),1),t("th",it,n(s.translations.balance_dinar),1),e[7]||(e[7]=t("th",{scope:"col"},"إجمالي الدين",-1)),t("th",ct,n(s.translations.last_purchase_date),1),t("th",dt,n(s.translations.status),1),t("th",ut,n(s.translations.status),1),c("update customer")?(l(),u("th",ht,n(s.translations.edit),1)):d("",!0),c("delete customer")?(l(),u("th",ft,n(s.translations.delete),1)):d("",!0)])]),t("tbody",bt,[(l(!0),u(j,null,D(s.customers.data,(o,V)=>{var v,y,g;return l(),u("tr",{key:o.id},[t("th",mt,n(V+1),1),t("td",null,n(o.name),1),t("td",null,n(o.phone),1),t("td",null,n(((v=o.balance)==null?void 0:v.balance_dollar)||0),1),t("td",null,n(((y=o.balance)==null?void 0:y.balance_dinar)||0),1),t("td",null,[t("span",{class:M(o.total_debt>0?"text-danger fw-bold":"text-success")},n(F(o.total_debt||0)),3)]),t("td",null,n(((g=o.balance)==null?void 0:g.last_transaction_date)||"-"),1),t("td",null,n(o.is_active==1?s.translations.active:s.translations.not_active),1),t("td",null,[t("div",null,[t("label",_t,[t("input",{type:"checkbox",class:"sr-only peer",checked:o.is_active==1,onChange:A=>S(o.id)},null,40,pt),e[8]||(e[8]=t("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"},null,-1))])])]),c("update customer")||c("read customers")?(l(),u("td",vt,[t("a",{class:"btn btn-info btn-sm me-1",href:a.route("customers.show",{customer:o.id}),title:"عرض التفاصيل والفواتير"},e[9]||(e[9]=[t("i",{class:"bi bi-eye"},null,-1)]),8,yt),t("a",{class:"btn btn-primary btn-sm",href:a.route("customers.edit",{customer:o.id}),title:"تعديل"},e[10]||(e[10]=[t("i",{class:"bi bi-pencil-square"},null,-1)]),8,gt)])):d("",!0),c("delete customer")?(l(),u("td",xt,[t("button",{type:"button",class:"btn btn-danger btn-sm",onClick:A=>T(o.id)},e[11]||(e[11]=[t("i",{class:"bi bi-trash"},null,-1)]),8,kt)])):d("",!0)])}),128))])])])])]),z(q,{links:s.customers.links},null,8,["links"])])]),_:1},8,["translations"]))}};export{Ft as default};
