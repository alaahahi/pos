import{r as g,s as N,T as U,C as q,a as m,c as C,w as y,b as s,t as n,i as r,d as k,j as E,l as c,y as d,u as t,n as w,e as b,f as v}from"./app-Dyo3CGUB.js";import{_ as I}from"./AuthenticatedLayout-DQQOHWHW.js";import{_ as u}from"./InputError-BKaRmLoe.js";import{l as M}from"./lodash-BWRDsr-N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"pagetitle dark:text-white"},T={class:"dark:text-white"},j={class:"breadcrumb"},O={class:"breadcrumb-item"},S={class:"breadcrumb-item active dark:text-white"},$={class:"breadcrumb-item active dark:text-white"},D={class:"section dashboard"},L={class:"row"},Q={class:"col-lg-12"},z={class:"card"},A={class:"card-body"},F={class:"card-title"},G={class:"row mb-3"},H={for:"inputName",class:"col-sm-2 col-form-label"},J={class:"col-sm-10"},K=["placeholder"],R={class:"row mb-3"},W={for:"inputBarcode",class:"col-sm-2 col-form-label"},X={class:"col-sm-10"},Y={class:"input-group"},Z=["placeholder"],ss={key:0,class:"input-group-text"},es={key:1,class:"input-group-text text-danger"},ts={key:2,class:"input-group-text text-success"},os={class:"row mb-3"},ls={for:"inputModel",class:"col-sm-2 col-form-label"},as={class:"col-sm-10"},ns=["placeholder"],is={class:"row mb-3"},rs={for:"inputOENumber",class:"col-sm-2 col-form-label"},cs={class:"col-sm-10"},ds=["placeholder"],us={class:"row mb-3"},ms={for:"inputPrice",class:"col-sm-2 col-form-label"},bs={class:"col-sm-10"},hs=["placeholder"],ps={class:"row mb-3"},_s={for:"inputPrice",class:"col-sm-2 col-form-label"},vs={class:"col-sm-10"},fs=["placeholder"],gs={class:"row mb-3"},ys={for:"inputQuantity",class:"col-sm-2 col-form-label"},ks={class:"col-sm-10"},ws=["placeholder"],xs={class:"row mb-3"},Vs={for:"inputNote",class:"col-sm-2 col-form-label"},Bs={class:"col-sm-10"},Ns=["placeholder"],Us={class:"row mb-3"},qs={for:"inputdate",class:"col-sm-2 col-form-label"},Cs={class:"col-sm-10"},Es=["placeholder"],Is={class:"row mb-3"},Ms={for:"inputImage",class:"col-sm-2 col-form-label"},Ps={class:"col-sm-10"},Ts=["value"],js={class:"text-center"},Os=["disabled"],Ss={key:0,class:"bi bi-save"},$s={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Fs={__name:"Create",props:{translations:Object},setup(l){const h=g(!1),f=N(),i=g({checking:!1,isValid:!0,message:""}),e=U({name:"",model:"",oe_number:"",price_cost:null,price:null,quantity:null,notes:"",barcode:"",image:null}),x=async _=>{if(!_||_.length<3){i.value={checking:!1,isValid:!0,message:""};return}i.value.checking=!0;try{const p=await(await fetch(route("products.checkBarcodeUnique",_))).json();i.value={checking:!1,isValid:p.unique,message:p.message},p.unique||f.warning(p.message)}catch(o){console.error("Barcode validation error:",o),i.value={checking:!1,isValid:!1,message:"خطأ في التحقق من الباركود"}}},V=M.debounce(x,500),B=()=>{if(e.barcode&&!i.value.isValid){f.error("يجب إدخال باركود صحيح ومتاح");return}h.value=!0,e.post(route("products.store"),{onSuccess:()=>{h.value=!1},onError:()=>{h.value=!1}})};return(_,o)=>{const p=q("Link");return m(),C(I,{translations:l.translations},{default:y(()=>[s("div",P,[s("h1",T,n(l.translations.products),1),s("nav",null,[s("ol",j,[s("li",O,[r(p,{class:"nav-link dark:text-white",href:_.route("dashboard")},{default:y(()=>[k(n(l.translations.home),1)]),_:1},8,["href"])]),s("li",S,n(l.translations.products),1),s("li",$,n(l.translations.create),1)])])]),s("section",D,[s("div",L,[s("div",Q,[s("div",z,[s("div",A,[s("h5",F,n(l.translations.add_new_product),1),s("form",{onSubmit:E(B,["prevent"]),class:"row g-3"},[s("div",G,[s("label",H,n(l.translations.name),1),s("div",J,[c(s("input",{id:"inputName",type:"text",class:"form-control",placeholder:l.translations.name,"onUpdate:modelValue":o[0]||(o[0]=a=>t(e).name=a)},null,8,K),[[d,t(e).name]]),r(u,{message:t(e).errors.name},null,8,["message"])])]),s("div",R,[s("label",W,n(l.translations.barcode),1),s("div",X,[s("div",Y,[c(s("input",{id:"inputBarcode",type:"text",class:w(["form-control",{"is-invalid":i.value.checking===!1&&!i.value.isValid}]),placeholder:l.translations.barcode,"onUpdate:modelValue":o[1]||(o[1]=a=>t(e).barcode=a),onInput:o[2]||(o[2]=a=>t(V)(t(e).barcode))},null,42,Z),[[d,t(e).barcode]]),i.value.checking?(m(),b("div",ss,o[11]||(o[11]=[s("span",{class:"spinner-border spinner-border-sm",role:"status"},null,-1)]))):i.value.isValid?t(e).barcode&&i.value.isValid?(m(),b("div",ts,o[13]||(o[13]=[s("i",{class:"bi bi-check-circle"},null,-1)]))):v("",!0):(m(),b("div",es,o[12]||(o[12]=[s("i",{class:"bi bi-exclamation-triangle"},null,-1)])))]),i.value.message?(m(),b("div",{key:0,class:w(["form-text",i.value.isValid?"text-success":"text-danger"])},n(i.value.message),3)):v("",!0),r(u,{message:t(e).errors.barcode},null,8,["message"])])]),s("div",os,[s("label",ls,n(l.translations.model),1),s("div",as,[c(s("input",{id:"inputModel",type:"text",class:"form-control",placeholder:l.translations.model,"onUpdate:modelValue":o[3]||(o[3]=a=>t(e).model=a)},null,8,ns),[[d,t(e).model]]),r(u,{message:t(e).errors.model},null,8,["message"])])]),s("div",is,[s("label",rs,n(l.translations.oe_number),1),s("div",cs,[c(s("input",{id:"inputOENumber",type:"text",class:"form-control",placeholder:l.translations.oe_number,"onUpdate:modelValue":o[4]||(o[4]=a=>t(e).oe_number=a)},null,8,ds),[[d,t(e).oe_number]]),r(u,{message:t(e).errors.oe_number},null,8,["message"])])]),s("div",us,[s("label",ms,n(l.translations.price_cost),1),s("div",bs,[c(s("input",{id:"inputPrice",type:"number",class:"form-control",placeholder:l.translations.price_cost,"onUpdate:modelValue":o[5]||(o[5]=a=>t(e).price_cost=a)},null,8,hs),[[d,t(e).price_cost]]),r(u,{message:t(e).errors.price_cost},null,8,["message"])])]),s("div",ps,[s("label",_s,n(l.translations.price),1),s("div",vs,[c(s("input",{id:"inputPrice",type:"number",class:"form-control",placeholder:l.translations.price,"onUpdate:modelValue":o[6]||(o[6]=a=>t(e).price=a)},null,8,fs),[[d,t(e).price]]),r(u,{message:t(e).errors.price},null,8,["message"])])]),s("div",gs,[s("label",ys,n(l.translations.quantity),1),s("div",ks,[c(s("input",{id:"inputQuantity",type:"number",class:"form-control",placeholder:l.translations.quantity,"onUpdate:modelValue":o[7]||(o[7]=a=>t(e).quantity=a)},null,8,ws),[[d,t(e).quantity]]),r(u,{message:t(e).errors.quantity},null,8,["message"])])]),s("div",xs,[s("label",Vs,n(l.translations.note),1),s("div",Bs,[c(s("input",{id:"inputNote",type:"text",class:"form-control",placeholder:l.translations.note,"onUpdate:modelValue":o[8]||(o[8]=a=>t(e).notes=a)},null,8,Ns),[[d,t(e).notes]]),r(u,{message:t(e).errors.notes},null,8,["message"])])]),s("div",Us,[s("label",qs,n(l.translations.date),1),s("div",Cs,[c(s("input",{id:"inputdate",type:"date",class:"form-control",placeholder:l.translations.date,"onUpdate:modelValue":o[9]||(o[9]=a=>t(e).date=a)},null,8,Es),[[d,t(e).date]]),r(u,{message:t(e).errors.date},null,8,["message"])])]),s("div",Is,[s("label",Ms,n(l.translations.image),1),s("div",Ps,[s("input",{id:"inputImage",type:"file",onInput:o[10]||(o[10]=a=>t(e).image=a.target.files[0])},null,32),t(e).progress?(m(),b("progress",{key:0,value:t(e).progress.percentage,max:"100"},n(t(e).progress.percentage)+"% ",9,Ts)):v("",!0)])]),s("div",js,[s("button",{type:"submit",class:"btn btn-primary",disabled:h.value},[k(n(l.translations.save)+" ",1),h.value?v("",!0):(m(),b("i",Ss)),h.value?(m(),b("span",$s)):v("",!0)],8,Os)])],32)])])])])])]),_:1},8,["translations"])}}};export{Fs as default};
