import{Q as lt,r as C,z as M,k as S,a as n,h as G,w as g,b as t,t as o,i as L,d as c,u as _,p as P,l as b,x as ot,A as h,c as a,f as F,F as V,n as R,e as u,j as nt,g as z}from"./app-DG_1hWD1.js";import{A as it}from"./AuthenticatedLayout-5cM0K3Ei.js";import{_ as at}from"./Pagination-BLFuwkff.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const rt={class:"d-flex justify-content-between align-items-center"},ct={class:"font-semibold text-xl text-gray-800 leading-tight"},ut={class:"py-4"},mt={class:"container-fluid"},pt={class:"row mb-4"},vt={class:"col-md-3"},bt={class:"stat-card bg-primary"},yt={class:"stat-content"},ft={class:"col-md-3"},gt={class:"stat-card bg-warning"},_t={class:"stat-content"},ht={class:"col-md-3"},xt={class:"stat-card bg-success"},kt={class:"stat-content"},wt={class:"col-md-3"},Ct={class:"stat-card bg-info"},St={class:"stat-content"},Ft={class:"card mb-4 shadow-sm"},Vt={class:"card-body"},Et={class:"row g-3"},Tt={class:"col-md-5"},Nt={class:"search-box"},jt={class:"col-md-3"},Ot={class:"col-md-2"},$t=["value"],Dt={class:"card shadow-sm"},Ut={class:"card-body p-0"},At={class:"table-responsive"},Bt={class:"table table-hover table-excel mb-0"},It={class:"text-center fw-bold text-muted"},Mt={class:"d-flex align-items-center"},Gt={class:"text-muted"},Lt={class:"text-muted"},Pt={key:0,class:"employee-badge"},Rt={key:1,class:"text-muted"},zt={class:"price-cell"},Qt={class:"text-primary"},qt={class:"d-block text-muted"},Ht={class:"price-cell"},Jt={class:"text-success"},Kt={class:"d-block text-muted"},Wt={class:"price-cell"},Xt={class:"d-block text-muted"},Yt={class:"date-cell"},Zt={class:"text-muted"},ts={class:"text-center"},ss={class:"btn-group-sm",role:"group"},es=["href"],ls=["onClick"],os={key:0,class:"table-footer-excel"},ns={class:"text-primary"},is={class:"text-success"},as={class:"text-danger"},ds={key:0,class:"text-center py-5"},rs={key:0,class:"card-footer bg-light"},cs={class:"d-flex justify-content-between align-items-center"},us={class:"text-muted"},ms={class:"modal-content-custom"},ps={class:"modal-header-custom"},vs={class:"modal-body-custom"},bs={class:"row g-3"},ys={class:"col-md-6"},fs={class:"col-md-6"},gs=["value"],_s={class:"modal-footer-custom"},hs={key:0,class:"spinner-border spinner-border-sm me-2"},xs={__name:"SimpleOrders",props:{orders:Object,filters:Object,translations:Object,employees:Array},setup(i){var O,$,D;const E=lt(),r=i,x=l=>E.props.auth_permissions&&E.props.auth_permissions.includes(l),p=C(!1),k=C(null),y=C(!1),d=M({search:((O=r.filters)==null?void 0:O.search)||"",status:(($=r.filters)==null?void 0:$.status)||"",employee:((D=r.filters)==null?void 0:D.employee)||""}),m=M({status:"",assigned_employee_id:""}),Q=S(()=>r.orders.data.filter(l=>["created","received","executing"].includes(l.status)).length),q=S(()=>r.orders.data.filter(l=>l.status==="completed").length),H=S(()=>r.orders.data.filter(l=>["full_payment","completed"].includes(l.status)).reduce((l,s)=>l+(s.total_price||0),0)),T=(()=>{let l;return()=>{clearTimeout(l),l=setTimeout(()=>f(),500)}})(),f=()=>{z.get(route("decorations.orders.simple"),d,{preserveState:!0,replace:!0})},J=()=>{d.search="",d.status="",d.employee="",f()},K=l=>{k.value=l,m.status=l.status,m.assigned_employee_id=l.assigned_employee_id||"",p.value=!0},W=()=>{y.value=!0,z.patch(route("decoration.orders.status",k.value.id),m,{onSuccess:()=>{y.value=!1,p.value=!1},onError:()=>{y.value=!1}})},v=l=>new Intl.NumberFormat("ar-EG").format(l||0),X=l=>new Intl.NumberFormat("ar-EG").format(l||0)+" Ø¯.Ø¹",Y=l=>new Date(l).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}),w=l=>l==="dollar"?"Ø¯ÙˆÙ„Ø§Ø±":"Ø¯ÙŠÙ†Ø§Ø±",Z=l=>l.total_price-(l.paid_amount||0)>0?"text-danger":"text-success",tt=l=>({created:"ğŸ“ Ø¥Ù†Ø´Ø§Ø¡",received:"ğŸ“¥ Ø§Ø³ØªÙ„Ø§Ù…",executing:"âš™ï¸ ØªÙ†ÙÙŠØ°",partial_payment:"ğŸ’° Ø¯ÙØ¹ Ø¬Ø²Ø¦ÙŠ",full_payment:"ğŸ’µ Ø¯ÙØ¹ ÙƒØ§Ù…Ù„",completed:"âœ… Ù…ÙƒØªÙ…Ù„",cancelled:"âŒ Ù…Ù„ØºÙŠ"})[l]||l,N=()=>r.orders.data.reduce((l,s)=>l+(s.total_price||0),0),j=()=>r.orders.data.reduce((l,s)=>l+(s.paid_amount||0),0),st=()=>N()-j();return(l,s)=>(n(),G(it,null,{header:g(()=>[t("div",rt,[t("h2",ct," ğŸ“‹ "+o(i.translations.decoration_orders||"Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¯ÙŠÙƒÙˆØ±"),1),L(_(P),{class:"btn btn-primary",href:l.route("decorations.index")},{default:g(()=>[s[9]||(s[9]=t("i",{class:"bi bi-arrow-left"},null,-1)),c(" "+o(i.translations.back||"Ø±Ø¬ÙˆØ¹"),1)]),_:1},8,["href"])])]),default:g(()=>{var U,A;return[t("div",ut,[t("div",mt,[t("div",pt,[t("div",vt,[t("div",bt,[s[11]||(s[11]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-list-check"})],-1)),t("div",yt,[t("h3",null,o(i.orders.total||0),1),s[10]||(s[10]=t("p",null,"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",-1))])])]),t("div",ft,[t("div",gt,[s[13]||(s[13]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-clock-history"})],-1)),t("div",_t,[t("h3",null,o(Q.value),1),s[12]||(s[12]=t("p",null,"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",-1))])])]),t("div",ht,[t("div",xt,[s[15]||(s[15]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",kt,[t("h3",null,o(q.value),1),s[14]||(s[14]=t("p",null,"Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©",-1))])])]),t("div",wt,[t("div",Ct,[s[17]||(s[17]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-cash-stack"})],-1)),t("div",St,[t("h3",null,o(X(H.value)),1),s[16]||(s[16]=t("p",null,"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª",-1))])])])]),t("div",Ft,[t("div",Vt,[t("div",Et,[t("div",Tt,[t("div",Nt,[s[18]||(s[18]=t("i",{class:"bi bi-search search-icon"},null,-1)),b(t("input",{type:"text",class:"form-control ps-5","onUpdate:modelValue":s[0]||(s[0]=e=>d.search=e),onInput:s[1]||(s[1]=(...e)=>_(T)&&_(T)(...e)),placeholder:"ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†ØŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙØŒ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¯ÙŠÙƒÙˆØ±..."},null,544),[[ot,d.search]])])]),t("div",jt,[b(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=e=>d.status=e),onChange:f},s[19]||(s[19]=[t("option",{value:""},"ğŸ“Š ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª",-1),t("option",{value:"created"},"ğŸ“ ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡",-1),t("option",{value:"received"},"ğŸ“¥ ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…",-1),t("option",{value:"executing"},"âš™ï¸ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",-1),t("option",{value:"partial_payment"},"ğŸ’° Ø¯ÙØ¹Ø© Ø¬Ø²Ø¦ÙŠØ©",-1),t("option",{value:"full_payment"},"ğŸ’µ Ø¯ÙØ¹Ø© ÙƒØ§Ù…Ù„Ø©",-1),t("option",{value:"completed"},"âœ… Ù…ÙƒØªÙ…Ù„",-1),t("option",{value:"cancelled"},"âŒ Ù…Ù„ØºÙŠ",-1)]),544),[[h,d.status]])]),t("div",Ot,[b(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=e=>d.employee=e),onChange:f},[s[20]||(s[20]=t("option",{value:""},"ğŸ‘¤ ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†",-1)),(n(!0),a(V,null,F(i.employees,e=>(n(),a("option",{key:e.id,value:e.id},o(e.name),9,$t))),128))],544),[[h,d.employee]])]),t("div",{class:"col-md-2"},[t("button",{class:"btn btn-outline-secondary w-100",onClick:J},s[21]||(s[21]=[t("i",{class:"bi bi-arrow-clockwise"},null,-1),c(" Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ")]))])])])]),t("div",Dt,[t("div",Ut,[t("div",At,[t("table",Bt,[s[36]||(s[36]=t("thead",{class:"table-header-excel"},[t("tr",null,[t("th",{style:{width:"60px"}},"#"),t("th",{style:{"min-width":"200px"}},"ğŸ“¦ Ø§Ø³Ù… Ø§Ù„Ø¯ÙŠÙƒÙˆØ±"),t("th",{style:{"min-width":"180px"}},"ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"),t("th",{style:{"min-width":"150px"}},"ğŸ”§ Ø§Ù„Ù…Ù†Ø¬Ø²"),t("th",{style:{"min-width":"120px"}},"ğŸ’µ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙƒÙ„ÙŠ"),t("th",{style:{"min-width":"120px"}},"ğŸ’° Ø§Ù„Ù…Ø¯ÙÙˆØ¹"),t("th",{style:{"min-width":"120px"}},"ğŸ“Š Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"),t("th",{style:{"min-width":"130px"}},"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©"),t("th",{style:{"min-width":"120px"}},"âœ¨ Ø§Ù„Ø­Ø§Ù„Ø©"),t("th",{style:{"min-width":"150px","text-align":"center"}},"âš¡ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª")])],-1)),t("tbody",null,[(n(!0),a(V,null,F(i.orders.data,(e,et)=>{var B,I;return n(),a("tr",{key:e.id,class:"table-row-excel"},[t("td",It,o(et+1+(i.orders.current_page-1)*i.orders.per_page),1),t("td",null,[t("div",Mt,[s[23]||(s[23]=t("div",{class:"decoration-icon"},"ğŸ¨",-1)),t("div",null,[t("strong",null,o(((B=e.decoration)==null?void 0:B.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"),1),s[22]||(s[22]=t("br",null,null,-1)),t("small",Gt,o(((I=e.decoration)==null?void 0:I.type_name)||""),1)])])]),t("td",null,[t("div",null,[t("strong",null,o(e.customer_name),1),s[25]||(s[25]=t("br",null,null,-1)),t("small",Lt,[s[24]||(s[24]=t("i",{class:"bi bi-telephone"},null,-1)),c(" "+o(e.customer_phone),1)])])]),t("td",null,[e.assigned_employee?(n(),a("span",Pt,[s[26]||(s[26]=t("i",{class:"bi bi-person-check"},null,-1)),c(" "+o(e.assigned_employee.name),1)])):(n(),a("span",Rt,s[27]||(s[27]=[t("i",{class:"bi bi-person-x"},null,-1),c(" ØºÙŠØ± Ù…Ø¹ÙŠÙ† ")])))]),t("td",null,[t("div",zt,[t("strong",Qt,o(v(e.total_price)),1),t("small",qt,o(w(e.currency)),1)])]),t("td",null,[t("div",Ht,[t("strong",Jt,o(v(e.paid_amount||0)),1),t("small",Kt,o(w(e.currency)),1)])]),t("td",null,[t("div",Wt,[t("strong",{class:R(Z(e))},o(v(e.total_price-(e.paid_amount||0))),3),t("small",Xt,o(w(e.currency)),1)])]),t("td",null,[t("div",Yt,[s[29]||(s[29]=t("i",{class:"bi bi-calendar-event"},null,-1)),c(" "+o(Y(e.event_date))+" ",1),s[30]||(s[30]=t("br",null,null,-1)),t("small",Zt,[s[28]||(s[28]=t("i",{class:"bi bi-clock"},null,-1)),c(" "+o(e.event_time||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"),1)])])]),t("td",null,[t("span",{class:R(["status-badge",`status-${e.status}`])},o(tt(e.status)),3)]),t("td",ts,[t("div",ss,[x("read decoration")?(n(),G(_(P),{key:0,href:l.route("decoration.orders.show",e.id),class:"btn btn-sm btn-outline-primary",title:"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„"},{default:g(()=>s[31]||(s[31]=[t("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"])):u("",!0),x("read decoration")?(n(),a("a",{key:1,href:l.route("decoration.orders.print",e.id),target:"_blank",class:"btn btn-sm btn-outline-info",title:"Ø·Ø¨Ø§Ø¹Ø©"},s[32]||(s[32]=[t("i",{class:"bi bi-printer"},null,-1)]),8,es)):u("",!0),x("update decoration")?(n(),a("button",{key:2,onClick:ks=>K(e),class:"btn btn-sm btn-outline-warning",title:"ØªØ¹Ø¯ÙŠÙ„ Ø³Ø±ÙŠØ¹"},s[33]||(s[33]=[t("i",{class:"bi bi-pencil"},null,-1)]),8,ls)):u("",!0)])])])}),128))]),i.orders.data.length>0?(n(),a("tfoot",os,[t("tr",null,[s[34]||(s[34]=t("td",{colspan:"4",class:"text-end fw-bold"},"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:",-1)),t("td",null,[t("strong",ns,o(v(N())),1)]),t("td",null,[t("strong",is,o(v(j())),1)]),t("td",null,[t("strong",as,o(v(st())),1)]),s[35]||(s[35]=t("td",{colspan:"3"},null,-1))])])):u("",!0)])]),i.orders.data.length===0?(n(),a("div",ds,s[37]||(s[37]=[t("div",{class:"empty-state"},[t("i",{class:"bi bi-inbox"}),t("h4",null,"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª"),t("p",{class:"text-muted"},"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø·Ù„Ø¨Ø§Øª Ø¯ÙŠÙƒÙˆØ±.")],-1)]))):u("",!0)]),i.orders.data.length>0?(n(),a("div",rs,[t("div",cs,[t("div",us," Ø¹Ø±Ø¶ "+o(i.orders.from)+" - "+o(i.orders.to)+" Ù…Ù† Ø£ØµÙ„ "+o(i.orders.total)+" Ø·Ù„Ø¨ ",1),L(at,{links:i.orders.links},null,8,["links"])])])):u("",!0)])])]),p.value?(n(),a("div",{key:0,class:"modal-overlay",onClick:s[8]||(s[8]=nt(e=>p.value=!1,["self"]))},[t("div",ms,[t("div",ps,[t("h5",null,"âš¡ ØªØ¹Ø¯ÙŠÙ„ Ø³Ø±ÙŠØ¹ - "+o((A=(U=k.value)==null?void 0:U.decoration)==null?void 0:A.name),1),t("button",{onClick:s[4]||(s[4]=e=>p.value=!1),class:"btn-close-custom"},"Ã—")]),t("div",vs,[t("div",bs,[t("div",ys,[s[39]||(s[39]=t("label",{class:"form-label"},"Ø§Ù„Ø­Ø§Ù„Ø©",-1)),b(t("select",{class:"form-select","onUpdate:modelValue":s[5]||(s[5]=e=>m.status=e)},s[38]||(s[38]=[t("option",{value:"created"},"ğŸ“ ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡",-1),t("option",{value:"received"},"ğŸ“¥ ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…",-1),t("option",{value:"executing"},"âš™ï¸ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",-1),t("option",{value:"partial_payment"},"ğŸ’° Ø¯ÙØ¹Ø© Ø¬Ø²Ø¦ÙŠØ©",-1),t("option",{value:"full_payment"},"ğŸ’µ Ø¯ÙØ¹Ø© ÙƒØ§Ù…Ù„Ø©",-1),t("option",{value:"completed"},"âœ… Ù…ÙƒØªÙ…Ù„",-1),t("option",{value:"cancelled"},"âŒ Ù…Ù„ØºÙŠ",-1)]),512),[[h,m.status]])]),t("div",fs,[s[41]||(s[41]=t("label",{class:"form-label"},"Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø¹ÙŠÙ†",-1)),b(t("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=e=>m.assigned_employee_id=e)},[s[40]||(s[40]=t("option",{value:""},"Ø§Ø®ØªØ± Ù…ÙˆØ¸Ù",-1)),(n(!0),a(V,null,F(i.employees,e=>(n(),a("option",{key:e.id,value:e.id},o(e.name),9,gs))),128))],512),[[h,m.assigned_employee_id]])])])]),t("div",_s,[t("button",{onClick:s[7]||(s[7]=e=>p.value=!1),class:"btn btn-secondary"},"Ø¥Ù„ØºØ§Ø¡"),t("button",{onClick:W,class:"btn btn-primary"},[y.value?(n(),a("span",hs)):u("",!0),s[42]||(s[42]=c(" Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª "))])])])])):u("",!0)]}),_:1}))}},Vs=dt(xs,[["__scopeId","data-v-bacc81fa"]]);export{Vs as default};
