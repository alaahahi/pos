import{X as Y,m as h,h as V,p as x,o as i,f as s,b as e,g as c,t as d,d as m,F as v,x as b,n as k,A as w}from"./app-DfrujaWl.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"detail-container"},B={class:"detail-header"},E={class:"header-content"},j={class:"logo-section"},N=["src"],q={class:"company-name"},O={class:"detail-content"},S={class:"detail-grid"},U={class:"media-section"},z={class:"main-media"},M=["src","alt"],X=["src"],G={key:2,class:"youtube-videos-container"},H={style:{background:"red",color:"white",padding:"10px",margin:"10px 0"}},J=["src"],K=["src"],P={class:"media-controls"},Q={key:0,class:"thumbnail-gallery"},R=["onClick"],W=["src","alt"],Z={class:"info-section"},ee={class:"info-header"},oe={class:"decoration-title"},te={key:0,class:"featured-badge"},ie={class:"decoration-type"},se={class:"price-section"},ne={class:"price"},le={class:"price-value"},ae={class:"description"},ce={key:0,class:"features"},de={class:"features-list"},re={key:1,class:"optional-items"},ue={class:"optional-list"},me={class:"contact-section"},ve={class:"contact-buttons"},be=["href"],ge=["href"],ye=["href"],fe={key:0,class:"related-section"},he={class:"related-grid"},ke=["onClick"],_e={class:"related-image"},Ie=["src","alt"],we={class:"related-info"},Ce={class:"related-price"},De={key:0,class:"loading-overlay"},$e={__name:"DecorationDetail",props:{decoration:Object,relatedDecorations:Array,companyInfo:Object},setup(t){Y(n=>({f9cf59a6:t.companyInfo.primary_color,bf516d70:t.companyInfo.primary_color_dark}));const a=t,C=h(!1),u=h(!1),g=h(0),_=V(()=>a.decoration.images_urls&&a.decoration.images_urls.length>0?a.decoration.images_urls[g.value]:a.decoration.image_url),I=n=>{g.value=n,u.value=!1},D=()=>{w.visit(route("public.gallery"))},$=n=>{w.visit(route("public.decoration.show",n.id))},f=n=>n?n.includes("youtube.com")||n.includes("youtu.be"):!1,y=()=>{const n=[];if(console.log("Decoration data:",a.decoration),console.log("youtube_links:",a.decoration.youtube_links),console.log("video_url:",a.decoration.video_url),a.decoration.youtube_links&&Array.isArray(a.decoration.youtube_links)){const l=a.decoration.youtube_links.filter(r=>r&&r.trim()!=="");console.log("Filtered youtube_links:",l),n.push(...l)}a.decoration.video_url&&f(a.decoration.video_url)&&(n.includes(a.decoration.video_url)||n.push(a.decoration.video_url));const o=[...new Set(n)];return console.log("Final YouTube links:",o),o},T=n=>{if(!n)return"";let o="";return n.includes("youtube.com/watch?v=")?o=n.split("v=")[1].split("&")[0]:n.includes("youtu.be/")?o=n.split("youtu.be/")[1].split("?")[0]:n.includes("youtube.com/embed/")&&(o=n.split("embed/")[1].split("?")[0]),`https://www.youtube.com/embed/${o}?rel=0&modestbranding=1&autoplay=0&controls=1&showinfo=0&iv_load_policy=3&fs=1&cc_load_policy=0&start=0&end=0&loop=0&playlist=${o}`},p=()=>{},L=n=>{console.error("YouTube iframe error:",n)};return x(()=>{a.decoration.images_urls&&a.decoration.images_urls.length>0&&(g.value=0)}),(n,o)=>(i(),s("div",A,[e("header",B,[e("div",E,[e("div",j,[t.companyInfo.logo?(i(),s("img",{key:0,src:t.companyInfo.logo,alt:"Logo",class:"logo"},null,8,N)):c("",!0),e("h1",q,d(t.companyInfo.name),1)]),e("button",{onClick:D,class:"back-btn"},o[2]||(o[2]=[e("i",{class:"bi bi-arrow-right"},null,-1),m(" العودة ")]))])]),e("div",O,[e("div",S,[e("div",U,[e("div",z,[!u.value&&_.value?(i(),s("img",{key:0,src:_.value,alt:t.decoration.name,class:"main-image"},null,8,M)):c("",!0),u.value&&t.decoration.video_url_attribute&&!f(t.decoration.video_url_attribute)?(i(),s("video",{key:1,src:t.decoration.video_url_attribute,controls:"",class:"main-video"}," متصفحك لا يدعم تشغيل الفيديو ",8,X)):c("",!0),u.value&&y().length>0?(i(),s("div",G,[(i(!0),s(v,null,b(y(),(l,r)=>(i(),s("div",{key:r,class:"youtube-container"},[e("div",H," Video "+d(r+1)+": "+d(l),1),e("iframe",{src:T(l),frameborder:"0",allowfullscreen:"",class:"youtube-video",onLoad:p,onError:L},null,40,J)]))),128))])):c("",!0),u.value&&t.decoration.video_url&&!f(t.decoration.video_url)&&!t.decoration.video_url_attribute?(i(),s("video",{key:3,src:t.decoration.video_url,controls:"",class:"main-video"}," متصفحك لا يدعم تشغيل الفيديو ",8,K)):c("",!0),e("div",P,[t.decoration.images&&t.decoration.images.length>0?(i(),s("button",{key:0,onClick:o[0]||(o[0]=l=>{u.value=!1,I(0)}),class:k(["media-btn",{active:!u.value}])},o[3]||(o[3]=[e("i",{class:"bi bi-image"},null,-1),m(" الصور ")]),2)):c("",!0),y().length>0||t.decoration.video_url?(i(),s("button",{key:1,onClick:o[1]||(o[1]=l=>u.value=!0),class:k(["media-btn",{active:u.value}])},[o[4]||(o[4]=e("i",{class:"bi bi-play-circle"},null,-1)),m(" الفيديو ("+d(y().length)+") ",1)],2)):c("",!0)])]),t.decoration.images&&t.decoration.images.length>1&&!u.value?(i(),s("div",Q,[(i(!0),s(v,null,b(t.decoration.images_urls,(l,r)=>(i(),s("div",{key:r,onClick:Te=>I(r),class:k(["thumbnail",{active:g.value===r}])},[e("img",{src:l,alt:`صورة ${r+1}`},null,8,W)],10,R))),128))])):c("",!0)]),e("div",Z,[e("div",ee,[e("h1",oe,d(t.decoration.name),1),t.decoration.is_featured?(i(),s("div",te,o[5]||(o[5]=[e("i",{class:"bi bi-star-fill"},null,-1),m(" مميز ")]))):c("",!0)]),e("div",ie,[o[6]||(o[6]=e("i",{class:"bi bi-tag"},null,-1)),e("span",null,d(t.decoration.type_name),1)]),e("div",se,[e("div",ne,[o[7]||(o[7]=e("span",{class:"price-label"},"السعر",-1)),e("span",le,d(t.decoration.formatted_price),1)])]),e("div",ae,[o[8]||(o[8]=e("h3",null,"الوصف",-1)),e("p",null,d(t.decoration.description),1)]),t.decoration.included_items&&t.decoration.included_items.length>0?(i(),s("div",ce,[o[10]||(o[10]=e("h3",null,"المميزات المشمولة",-1)),e("ul",de,[(i(!0),s(v,null,b(t.decoration.included_items,l=>(i(),s("li",{key:l},[o[9]||(o[9]=e("i",{class:"bi bi-check-circle"},null,-1)),m(" "+d(l),1)]))),128))])])):c("",!0),t.decoration.optional_items&&t.decoration.optional_items.length>0?(i(),s("div",re,[o[12]||(o[12]=e("h3",null,"عناصر اختيارية",-1)),e("ul",ue,[(i(!0),s(v,null,b(t.decoration.optional_items,l=>(i(),s("li",{key:l},[o[11]||(o[11]=e("i",{class:"bi bi-plus-circle"},null,-1)),m(" "+d(l),1)]))),128))])])):c("",!0),e("div",me,[o[16]||(o[16]=e("h3",null,"تواصل معنا",-1)),e("div",ve,[t.companyInfo.phone?(i(),s("a",{key:0,href:`tel:${t.companyInfo.phone}`,class:"contact-btn phone"},o[13]||(o[13]=[e("i",{class:"bi bi-telephone"},null,-1),m(" اتصل بنا ")]),8,be)):c("",!0),t.companyInfo.email?(i(),s("a",{key:1,href:`mailto:${t.companyInfo.email}`,class:"contact-btn email"},o[14]||(o[14]=[e("i",{class:"bi bi-envelope"},null,-1),m(" أرسل رسالة ")]),8,ge)):c("",!0),t.companyInfo.address?(i(),s("a",{key:2,href:`https://maps.google.com/?q=${t.companyInfo.address}`,target:"_blank",class:"contact-btn location"},o[15]||(o[15]=[e("i",{class:"bi bi-geo-alt"},null,-1),m(" الموقع ")]),8,ye)):c("",!0)])])])]),t.relatedDecorations.length>0?(i(),s("div",fe,[o[17]||(o[17]=e("h2",null,"ديكورات مشابهة",-1)),e("div",he,[(i(!0),s(v,null,b(t.relatedDecorations,l=>(i(),s("div",{key:l.id,onClick:r=>$(l),class:"related-item"},[e("div",_e,[e("img",{src:l.thumbnail_url||l.image_url||"/dashboard-assets/img/placeholder.jpg",alt:l.name},null,8,Ie)]),e("div",we,[e("h4",null,d(l.name),1),e("p",null,d(l.type_name),1),e("span",Ce,d(l.formatted_price),1)])],8,ke))),128))])])):c("",!0)]),C.value?(i(),s("div",De,o[18]||(o[18]=[e("div",{class:"loading-spinner"},[e("i",{class:"bi bi-arrow-clockwise"})],-1)]))):c("",!0)]))}},Ye=F($e,[["__scopeId","data-v-8ab7b23e"]]);export{Ye as default};
