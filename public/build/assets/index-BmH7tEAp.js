import{s as dt,r as S,a as r,h as F,w as L,c as m,b as t,q as G,l as $,x as C,u,e as k,C as J,D as A,n as R,y as Yt,E as ve,t as n,G as it,H as fe,i as Q,F as O,f as E,z as Pt,Q as ye,I as B,d as x,j as Xt,A as ut,g as at}from"./app-B4ECXZ10.js";import{A as he}from"./AuthenticatedLayout-BdmISpKo.js";import{_ as ct}from"./Pagination-D2YHE46C.js";import{S as nt}from"./sweetalert2.esm.all-DwEdJQJv.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _e={key:0,class:"modal-mask"},xe={class:"modal-wrapper max-h-[80vh]"},we={class:"modal-container"},$e={class:"modal-header"},ke={class:"modal-body"},De={class:"my-4 mx-5"},Ce={key:0,class:"text-danger"},Se={class:"my-4 mx-5"},Ue={class:"my-4 mx-5"},Me={class:"modal-footer my-2"},Ie={class:"d-flex w-100"},qe={class:"px-4 flex-fill"},Be={class:"px-4 flex-fill"},Qe={__name:"ModalConvertDollarDinar",props:{show:Boolean,boxes:Array,exchangeRate:{type:Number,default:15e4}},setup(l){dt();const i=S({user:{percentage:0},amount:0,exchangeRate:l.exchangeRate}),g=()=>{i.value={user:{percentage:0},amount:0}};function v(){b(),i.value.amountResultDinar=Math.floor(i.value.amountDollar*(i.value.exchangeRate/100))}let h=S(!1);function b(){const p=i.value.exchangeRate;/^\d{6}$/.test(p)?h.value=!1:h.value=!0}return(p,o)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",_e,[t("div",xe,[t("div",we,[t("div",$e,[G(p.$slots,"header")]),t("div",ke,[t("div",null,[t("div",De,[o[7]||(o[7]=t("label",{for:"amountDinar",class:"form-label float-end"},"سعر الصرف 100",-1)),$(t("input",{id:"amountDinar",type:"number",class:"form-control",onInput:o[0]||(o[0]=_=>v()),"onUpdate:modelValue":o[1]||(o[1]=_=>i.value.exchangeRate=_)},null,544),[[C,i.value.exchangeRate]]),u(h)?(r(),m("div",Ce," مطلوب رقم من 6 خانة فقط ")):k("",!0)]),t("div",Se,[o[8]||(o[8]=t("label",{for:"amountDollar",class:"form-label float-end"}," المبلغ بالدولار (المبلغ المسحوب من الصندوق بالدولار) ",-1)),$(t("input",{id:"amountDollar",type:"number",class:"form-control",onInput:o[2]||(o[2]=_=>v()),"onUpdate:modelValue":o[3]||(o[3]=_=>i.value.amountDollar=_)},null,544),[[C,i.value.amountDollar]])]),t("div",Ue,[o[9]||(o[9]=t("label",{for:"amountDinar",class:"form-label float-end"}," المبلغ بالدينار العراقي (المبلغ المضاف للصندوق بالدينار) ",-1)),$(t("input",{id:"amountDinar",type:"number",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=_=>i.value.amountResultDinar=_)},null,512),[[C,i.value.amountResultDinar]])])])]),t("div",Me,[t("div",Ie,[t("div",qe,[t("button",{class:"btn btn-secondary w-100 text-center",onClick:o[5]||(o[5]=_=>{p.$emit("close")})}," تراجع ")]),t("div",Be,[t("button",{class:"btn btn-danger w-100 text-center",onClick:o[6]||(o[6]=_=>{p.$emit("a",i.value),g()})}," نعم ")])])])])])])):k("",!0)]),_:3}))}},Ae={key:0,class:"modal-mask"},Le={class:"modal-wrapper max-h-[80vh]"},Re={class:"modal-container"},ze={class:"modal-header"},Ve={class:"modal-body"},Te={class:"my-4 mx-5"},Fe={key:0,class:"text-danger"},Ne={class:"my-4 mx-5"},je={class:"my-4 mx-5"},Oe={class:"modal-footer my-2"},Ee={class:"row w-100"},He={class:"col-6 px-4"},Ye={class:"col-6 px-4"},Pe={__name:"ModalConvertDinarDollar",props:{show:Boolean,boxes:Array,exchangeRate:{type:Number,default:15e4}},setup(l){dt();const i=S({user:{percentage:0},amount:0,exchangeRate:l.exchangeRate}),g=()=>{i.value={user:{percentage:0},amount:0}};let v=S(!1);function h(){const p=i.value.exchangeRate;/^\d{6}$/.test(p)?v.value=!1:v.value=!0}function b(){h(),i.value.amountResultDollar=Math.floor(i.value.amountDinar/(i.value.exchangeRate/100))}return(p,o)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",Ae,[t("div",Le,[t("div",Re,[t("div",ze,[G(p.$slots,"header")]),t("div",Ve,[t("div",null,[t("div",Te,[o[7]||(o[7]=t("label",{for:"amountDinar",class:"form-label float-end"},"سعر الصرف 100$",-1)),$(t("input",{id:"amountDinar",type:"number",class:"form-control",onInput:o[0]||(o[0]=_=>b()),"onUpdate:modelValue":o[1]||(o[1]=_=>i.value.exchangeRate=_)},null,544),[[C,i.value.exchangeRate]]),u(v)?(r(),m("div",Fe," مطلوب رقم من 6 خانة فقط ")):k("",!0)]),t("div",Ne,[o[8]||(o[8]=t("label",{for:"amountDinar",class:"form-label float-end"}," المبلغ بالدينار العراقي (المبلغ المسحوب من الصندوق بالدينار العراقي) ",-1)),$(t("input",{id:"amountDinar",type:"number",class:"form-control",onInput:o[2]||(o[2]=_=>b()),"onUpdate:modelValue":o[3]||(o[3]=_=>i.value.amountDinar=_)},null,544),[[C,i.value.amountDinar]])]),t("div",je,[o[9]||(o[9]=t("label",{for:"amountDollar",class:"form-label float-end"}," المبلغ بالدولار (المبلغ المضاف للصندوق بالدولار) ",-1)),$(t("input",{id:"amountDollar",type:"number",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=_=>i.value.amountResultDollar=_)},null,512),[[C,i.value.amountResultDollar]])])])]),t("div",Oe,[t("div",Ee,[t("div",He,[t("button",{class:"btn btn-secondary w-100 py-2 text-center",onClick:o[5]||(o[5]=_=>{p.$emit("close")})}," تراجع ")]),t("div",Ye,[t("button",{class:"btn btn-danger w-100 py-2 text-center",onClick:o[6]||(o[6]=_=>{p.$emit("a",i.value),g()})}," نعم ")])])])])])])):k("",!0)]),_:3}))}},Xe={key:0,class:"modal-mask"},Ze={class:"modal-wrapper max-h-[80vh]"},Ge={class:"modal-container"},Je={class:"modal-header"},Ke={class:"modal-body"},We={class:"row g-3"},ts={class:"col-lg-6"},es={class:"col-lg-6"},ss={class:"col-lg-6"},ls={class:"col-lg-6"},as={class:"modal-footer"},os={class:"d-flex w-100"},ns={class:"px-2 flex-fill"},is={class:"px-2 flex-fill"},ds=["disabled"],rs={__name:"ModalAddToBox",props:{show:Boolean,data:Array,accounts:Array},emits:["close","a"],setup(l,{emit:d}){const i=d,g=S({date:v(),amountDollar:0,amountDinar:0,amountNote:""});function v(){const p=new Date,o=p.getFullYear(),_=String(p.getMonth()+1).padStart(2,"0"),w=String(p.getDate()).padStart(2,"0");return`${o}-${_}-${w}`}const h=()=>{g.value={date:v(),amountDollar:0,amountDinar:0,amountNote:""}},b=p=>{A.post("/api/add-to-box",p).then(o=>{i("a"),i("close"),h()}).catch(o=>{i("close")})};return(p,o)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",Xe,[t("div",Ze,[t("div",Ge,[t("div",Je,[G(p.$slots,"header")]),t("div",Ke,[t("div",We,[t("div",ts,[o[6]||(o[6]=t("label",{for:"amountDollar",class:"form-label"},"المبلغ بالدولار",-1)),$(t("input",{id:"amountDollar",type:"number",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=_=>g.value.amountDollar=_)},null,512),[[C,g.value.amountDollar]])]),t("div",es,[o[7]||(o[7]=t("label",{for:"amountDinar",class:"form-label"},"المبلغ بالدينار",-1)),$(t("input",{id:"amountDinar",type:"number",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=_=>g.value.amountDinar=_)},null,512),[[C,g.value.amountDinar]])]),t("div",ss,[o[8]||(o[8]=t("label",{for:"note",class:"form-label"},"ملاحظة",-1)),$(t("input",{id:"note",type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=_=>g.value.amountNote=_)},null,512),[[C,g.value.amountNote]])]),t("div",ls,[o[9]||(o[9]=t("label",{for:"date",class:"form-label"},"التاريخ",-1)),$(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=_=>g.value.date=_)},null,512),[[C,g.value.date]])])])]),t("div",as,[t("div",os,[t("div",ns,[t("button",{class:"btn btn-secondary w-100 text-center",onClick:o[4]||(o[4]=_=>i("close"))}," تراجع ")]),t("div",is,[t("button",{class:"btn btn-danger w-100 text-center",onClick:o[5]||(o[5]=_=>b(g.value)),disabled:!g.value.amountDollar&&!g.value.amountDinar}," نعم ",8,ds)])])])])])])):k("",!0)]),_:3}))}},us={key:0,class:"modal-mask"},cs={class:"modal-wrapper max-h-[80vh]"},ms={class:"modal-container"},ps={class:"modal-header"},bs={class:"modal-body"},gs={class:"row g-3"},vs={class:"col-lg-6"},fs={class:"col-lg-6"},ys={class:"col-lg-6"},hs={class:"col-lg-6"},_s={class:"modal-footer"},xs={class:"d-flex w-100"},ws={class:"px-2 flex-fill"},$s={class:"px-2 flex-fill"},ks=["disabled"],Ds={__name:"ModalDropFromBox",props:{show:Boolean,data:Array,accounts:Array},setup(l){const d=S({date:i(),amountDollar:0,amountDinar:0,amountNote:""});function i(){const h=new Date,b=h.getFullYear(),p=String(h.getMonth()+1).padStart(2,"0"),o=String(h.getDate()).padStart(2,"0");return`${b}-${p}-${o}`}const g=()=>{d.value={date:i()}},v=h=>{A.post("/api/drop-from-box",h).then(b=>{}).catch(b=>{$emit("close")})};return(h,b)=>(r(),F(J,{name:"modal"},{default:L(()=>[l.show?(r(),m("div",us,[t("div",cs,[t("div",ms,[t("div",ps,[G(h.$slots,"header")]),t("div",bs,[t("div",gs,[t("div",vs,[b[6]||(b[6]=t("label",{for:"amountDollar",class:"form-label"},"المبلغ بالدولار",-1)),$(t("input",{id:"amountDollar",type:"number",class:"form-control","onUpdate:modelValue":b[0]||(b[0]=p=>d.value.amountDollar=p)},null,512),[[C,d.value.amountDollar]])]),t("div",fs,[b[7]||(b[7]=t("label",{for:"amountDinar",class:"form-label"},"المبلغ بالدينار",-1)),$(t("input",{id:"amountDinar",type:"number",class:"form-control","onUpdate:modelValue":b[1]||(b[1]=p=>d.value.amountDinar=p)},null,512),[[C,d.value.amountDinar]])]),t("div",ys,[b[8]||(b[8]=t("label",{for:"note",class:"form-label"},"ملاحظة",-1)),$(t("input",{id:"note",type:"text",class:"form-control","onUpdate:modelValue":b[2]||(b[2]=p=>d.value.amountNote=p)},null,512),[[C,d.value.amountNote]])]),t("div",hs,[b[9]||(b[9]=t("label",{for:"date",class:"form-label"},"التاريخ",-1)),$(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":b[3]||(b[3]=p=>d.value.date=p)},null,512),[[C,d.value.date]])])])]),t("div",_s,[t("div",xs,[t("div",ws,[t("button",{class:"btn btn-secondary w-100 text-center",onClick:b[4]||(b[4]=p=>{h.$emit("close")})}," تراجع ")]),t("div",$s,[t("button",{class:"btn btn-danger w-100 text-center",onClick:b[5]||(b[5]=p=>{v(d.value),h.$emit("a"),g()}),disabled:!d.value.amountDollar&&!d.value.amountDinar}," نعم ",8,ks)])])])])])])):k("",!0)]),_:3}))}},Cs={},Ss={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Us(l,d){return r(),m("svg",Ss,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"},null,-1)]))}const Zt=P(Cs,[["render",Us]]),Ms={},Is={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function qs(l,d){return r(),m("svg",Is,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1)]))}const Bs=P(Ms,[["render",qs]]),Qs={},As={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Ls(l,d){return r(),m("svg",As,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)]))}const Rs=P(Qs,[["render",Ls]]),zs={name:"line-scale",props:{color:{type:String,default:"#CCC"},size:{type:String,default:"40px"},duration:{type:String,default:"0.6s"}}},Vs=["width","height"],Ts=["fill"],Fs=["dur"],Ns=["dur"],js=["fill"],Os=["dur"],Es=["dur"],Hs=["fill"],Ys=["dur"],Ps=["dur"];function Xs(l,d,i,g,v,h){return r(),m("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:i.size,height:i.size,viewBox:"0 0 24 30",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[t("rect",{x:"0",y:"13",width:"4",height:"5",fill:i.color},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:i.duration,repeatCount:"indefinite"},null,8,Fs),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:i.duration,repeatCount:"indefinite"},null,8,Ns)],8,Ts),t("rect",{x:"10",y:"13",width:"4",height:"5",fill:i.color},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:i.duration,repeatCount:"indefinite"},null,8,Os),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:i.duration,repeatCount:"indefinite"},null,8,Es)],8,js),t("rect",{x:"20",y:"13",width:"4",height:"5",fill:i.color},[t("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:i.duration,repeatCount:"indefinite"},null,8,Ys),t("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:i.duration,repeatCount:"indefinite"},null,8,Ps)],8,Hs)],8,Vs)}const Zs=P(zs,[["render",Xs]]),Gs={LineScale:Zs},Js={name:"vue-element-loading",props:{active:Boolean,spinner:{type:String,default:"spinner"},text:{type:String,default:""},textStyle:{type:Object,default:function(){return{}}},color:{type:String,default:"#000"},isFullScreen:{type:Boolean,default:!1},backgroundColor:{type:String,default:"rgba(255, 255, 255, .9)"},size:{type:String,default:"40"},duration:{type:String,default:"0.6"},delay:{type:[String,Number],default:0}},data(){return{isActive:this.active||!1,isActiveDelay:!1}},mounted(){if(this.$refs.velmld.parentNode.classList.add("velmld-parent"),this.delay){const l=+this.delay*1e3;this.delayActive(l)}},methods:{delayActive(l){this.isActiveDelay=!0,setTimeout(()=>{this.isActiveDelay=!1},l)}},watch:{active(l){this.isActive=l,l&&this.$refs.velmld.parentNode.classList.add("velmld-parent")}},components:Gs},Ks={class:"velmld-spinner"};function Ws(l,d,i,g,v,h){return r(),F(J,{name:"fade"},{default:L(()=>[$(t("div",{class:R([{"velmld-full-screen":i.isFullScreen},"velmld-overlay"]),style:Yt({backgroundColor:i.backgroundColor}),ref:"velmld"},[t("div",Ks,[G(l.$slots,"default",{},()=>[(r(),F(ve(i.spinner),{color:i.color,size:`${i.size}px`,duration:`${i.duration}s`},null,8,["color","size","duration"]))],!0),i.text.length?(r(),m("div",{key:0,style:Yt({color:i.color,...i.textStyle})},n(i.text),5)):k("",!0)])],6),[[it,v.isActive||v.isActiveDelay]])]),_:3})}const tl=P(Js,[["render",Ws],["__scopeId","data-v-82159762"]]),el={props:{server:{type:String,default:"/api/upload"},isInvalid:{type:Boolean,default:!1},media:{type:Array,default:[]},location:{type:String,default:""},max:{type:Number,default:null},maxFilesize:{type:Number,default:4},warnings:{type:Boolean,default:!0},headers:{type:Object,default:null}},mounted(){this.init()},data(){return{addedMedia:[],savedMedia:[],removedMedia:[],config:{headers:null},isLoading:!0}},methods:{init(){this.savedMedia=this.media,this.config.headers=this.headers,this.savedMedia.forEach((l,d)=>{this.savedMedia[d].url||(this.savedMedia[d].url=this.location+"/"+l.name)}),setTimeout(()=>this.isLoading=!1,1e3),this.$emit("init",this.allMedia)},async fileChange(l){this.isLoading=!0;let d=l.target.files;for(var i=0;i<d.length;i++)if(!this.max||this.allMedia.length<this.max)if(d[i].size<=this.maxFilesize*1e6){let g=new FormData,v=URL.createObjectURL(d[i]);g.set("image",d[i]);const{data:h}=await A.post(this.server,g,this.config);let b={url:v,name:h.name,size:d[i].size,type:d[i].type};this.addedMedia.push(b),this.$emit("change",this.allMedia),this.$emit("add",b,this.addedMedia)}else{this.$emit("maxFilesize",d[i].size),this.warnings&&alert(`The file you are trying to upload is too big. 
Maximum Filesize: `+this.maxFilesize+"MB");break}else{this.$emit("max"),this.warnings&&alert(`You have reached the maximum number of files that you can upload. 
Maximum Files: `+this.max);break}l.target.value=null,this.isLoading=!1},removeAddedMedia(l){let d=this.addedMedia[l];this.addedMedia.splice(l,1),this.$emit("change",this.allMedia),this.$emit("remove",d,this.removedMedia)},removeSavedMedia(l){let d=this.savedMedia[l];this.removedMedia.push(d),this.savedMedia.splice(l,1),this.$emit("change",this.allMedia),this.$emit("remove",d,this.removedMedia)}},computed:{allMedia(){return[...this.savedMedia,...this.addedMedia]}},emits:["init","change","add","remove","max","maxFilesize"],components:{Loader:tl}},sl={class:"mu-elements-wraper"},ll={class:"mu-plusbox-container"},al={class:"mu-plusbox"},ol=["src"],nl=["onClick"],il=["src"],dl=["onClick"],rl=["value"],ul=["value"],cl={key:0,class:"mu-mt-1"};function ml(l,d,i,g,v,h){const b=fe("Loader");return r(),m("div",null,[t("div",{class:R(["mu-container",i.isInvalid?"mu-red-border":""])},[Q(b,{color:"#0275d8",active:v.isLoading,spinner:"line-scale","background-color":"rgba(255, 255, 255, .4)"},null,8,["active"]),t("div",sl,[t("div",ll,[t("label",al,[d[1]||(d[1]=t("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("g",{fill:"none"},[t("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])],-1)),t("input",{onChange:d[0]||(d[0]=(...p)=>h.fileChange&&h.fileChange(...p)),type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])]),(r(!0),m(O,null,E(v.savedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-image-container"},[t("img",{src:i.location+"/"+p.name,alt:"",class:"mu-images-preview"},null,8,ol),t("button",{onClick:_=>h.removeSavedMedia(o),class:"mu-close-btn",type:"button"},d[2]||(d[2]=[t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)]),8,nl)]))),128)),(r(!0),m(O,null,E(v.addedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-image-container"},[t("img",{src:p.url,alt:"",class:"mu-images-preview"},null,8,il),t("button",{onClick:_=>h.removeAddedMedia(o),class:"mu-close-btn",type:"button"},d[3]||(d[3]=[t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)]),8,dl)]))),128))])],2),t("div",null,[(r(!0),m(O,null,E(v.addedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-mt-1"},[t("input",{type:"text",name:"added_media[]",value:p.name,hidden:""},null,8,rl)]))),128)),(r(!0),m(O,null,E(v.removedMedia,(p,o)=>(r(),m("div",{key:o,class:"mu-mt-1"},[t("input",{type:"text",name:"removed_media[]",value:p.name,hidden:""},null,8,ul)]))),128)),h.allMedia.length?(r(),m("div",cl,d[4]||(d[4]=[t("input",{type:"text",name:"media",value:"1",hidden:""},null,-1)]))):k("",!0)])])}const pl=P(el,[["render",ml],["__scopeId","data-v-01f6b32e"]]),bl={key:0,class:"modal-mask"},gl={class:"modal-wrapper max-h-[80vh]"},vl={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},fl={class:"modal-header"},yl={class:"dark:text-gray-300 py-4 text-center"},hl={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},_l={class:"mb-4"},xl={class:"mt-3"},wl={key:0,class:"text-danger"},$l={class:"modal-footer my-2"},kl={class:"flex flex-row w-100"},Dl={class:"basis-1/2 px-4 w-100"},Cl={class:"basis-1/2 px-4"},Sl={__name:"ModalUploader",props:{show:Boolean,formData:Object,client:Array},setup(l){const d=dt();function i(g){A.get("/api/TransactionsImageDel?name="+g.name).then(v=>{d.success("تم  حذف الصورة بنجاح",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(v=>{console.error(v)})}return(g,v)=>(r(),F(J,{name:"modal"},{default:L(()=>{var h,b,p;return[l.show?(r(),m("div",bl,[t("div",gl,[t("div",vl,[t("div",fl,[G(g.$slots,"header")]),t("h2",yl,n(l.formData.description),1),t("div",hl,[t("div",_l,[v[2]||(v[2]=t("label",{class:"form-label w-100 dark:text-gray-300"},"الصور",-1)),t("div",xl,[Q(u(pl),{server:"/api/TransactionsUpload?transactionsId="+l.formData.id,"is-invalid":!!((h=g.errors)!=null&&h.media),onChange:g.changeMedia,onInitMedia:g.media,location:"/public/uploadsResized",media:l.formData.transactions_images,onAdd:g.addMedia,onRemove:i},null,8,["server","is-invalid","onChange","onInitMedia","media","onAdd"])]),(b=g.errors)!=null&&b.media?(r(),m("p",wl,n((p=g.errors)==null?void 0:p.media[0]),1)):k("",!0)])]),t("div",$l,[t("div",kl,[t("div",Dl,[t("button",{class:"modal-default-button py-3 bg-gray-500 rounded text-center",onClick:v[0]||(v[0]=o=>{g.$emit("close")})},"تراجع")]),t("div",Cl,[t("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6 text-center",onClick:v[1]||(v[1]=o=>{g.$emit("a",l.formData)})},"نعم")])])])])])])):k("",!0)]}),_:3}))}},Ul={dir:"rtl",lang:"ar"},Ml={class:"page-header"},Il={class:"header-content"},ql={class:"header-title"},Bl={class:"statistics-section"},Ql={class:"stats-grid"},Al={class:"stat-card balance-usd"},Ll={class:"stat-details"},Rl={class:"stat-value"},zl={class:"stat-card balance-iqd"},Vl={class:"stat-details"},Tl={class:"stat-value"},Fl={class:"stat-card total-in"},Nl={class:"stat-details"},jl={class:"stat-value-group"},Ol={class:"stat-value-currency"},El={class:"stat-value-currency"},Hl={class:"stat-card total-out"},Yl={class:"stat-details"},Pl={class:"stat-value-group"},Xl={class:"stat-value-currency"},Zl={class:"stat-value-currency"},Gl={class:"section dashboard"},Jl={class:"card main-card"},Kl={class:"tabs-navigation"},Wl={class:"tab-content"},ta={class:"card-header-custom"},ea={class:"actions-wrapper"},sa={class:"action-group primary-actions"},la=["disabled"],aa=["disabled"],oa={class:"action-group conversion-actions"},na=["disabled"],ia=["disabled"],da={class:"action-group"},ra=["disabled"],ua={class:"exchange-rate-info"},ca={class:"card-body"},ma={class:"filters-section"},pa={class:"filter-grid"},ba={class:"filter-item"},ga={class:"filter-item"},va={class:"filter-item"},fa={class:"filter-item"},ya={class:"filter-actions"},ha=["disabled"],_a=["disabled"],xa={key:0,class:"loading-overlay"},wa={class:"table-container"},$a={class:"table-responsive"},ka={class:"table transactions-table"},Da={scope:"col"},Ca={class:"index-cell"},Sa={class:"index-badge"},Ua={class:"account-cell"},Ma={class:"account-info"},Ia={class:"amount-cell out"},qa={key:0,class:"amount-badge out"},Ba={key:1},Qa={class:"amount-cell in"},Aa={key:0,class:"amount-badge in"},La={key:1},Ra={class:"description-cell"},za={class:"description-text"},Va={class:"date-cell"},Ta={class:"date-info"},Fa={class:"attachments-cell"},Na={class:"attachments-info"},ja=["onClick"],Oa={class:"badge bg-white text-dark ms-1"},Ea={key:1,class:"text-muted"},Ha={class:"actions-cell"},Ya={class:"action-buttons"},Pa=["onClick"],Xa=["onClick"],Za=["href"],Ga=["href"],Ja={key:1},Ka={class:"tab-content"},Wa={class:"close-section"},to={class:"close-grid"},eo={class:"close-card daily-close"},so={class:"close-card-header"},lo={class:"close-card-body"},ao={class:"close-info-row"},oo={class:"close-value"},no={class:"currency-badge usd"},io={class:"currency-badge iqd"},ro={class:"close-info-row"},uo={class:"close-value"},co={class:"currency-badge usd"},mo={class:"currency-badge iqd"},po={class:"close-info-row"},bo={class:"close-value"},go={class:"currency-badge usd"},vo={class:"currency-badge iqd"},fo={class:"close-info-row"},yo={class:"close-value"},ho={class:"currency-badge usd"},_o={class:"currency-badge iqd"},xo={class:"close-info-row"},wo={class:"close-value"},$o={class:"currency-badge usd"},ko={class:"currency-badge iqd"},Do={class:"close-info-row highlight"},Co={class:"close-value"},So={class:"currency-badge usd"},Uo={class:"currency-badge iqd"},Mo={class:"close-info-row"},Io={class:"close-value"},qo={class:"close-card-footer"},Bo=["disabled"],Qo={key:1,class:"closed-badge"},Ao={class:"close-card monthly-close"},Lo={class:"close-card-header"},Ro={class:"close-card-title"},zo={class:"close-card-body"},Vo={class:"close-info-row"},To={class:"close-value"},Fo={class:"currency-badge usd"},No={class:"currency-badge iqd"},jo={class:"close-info-row"},Oo={class:"close-value"},Eo={class:"currency-badge usd"},Ho={class:"currency-badge iqd"},Yo={class:"close-info-row"},Po={class:"close-value"},Xo={class:"currency-badge usd"},Zo={class:"currency-badge iqd"},Go={class:"close-info-row"},Jo={class:"close-value"},Ko={class:"currency-badge usd"},Wo={class:"currency-badge iqd"},tn={class:"close-info-row"},en={class:"close-value"},sn={class:"currency-badge usd"},ln={class:"currency-badge iqd"},an={class:"close-info-row highlight"},on={class:"close-value"},nn={class:"currency-badge usd"},dn={class:"currency-badge iqd"},rn={class:"close-info-row"},un={class:"close-value"},cn={class:"close-card-footer"},mn=["disabled"],pn={key:1,class:"closed-badge"},bn={class:"tab-content"},gn={class:"filters-section",style:{"margin-bottom":"1.5rem"}},vn={class:"row g-3"},fn={class:"col-md-3"},yn={class:"col-md-3"},hn={key:0,class:"col-md-2"},_n={key:1,class:"col-md-2"},xn={key:2,class:"col-md-2"},wn={key:3,class:"col-md-2"},$n={key:0,class:"mb-4"},kn={key:0,class:"text-center py-4"},Dn={key:1,class:"table-responsive"},Cn={class:"table table-hover"},Sn={class:"currency-badge usd"},Un={class:"currency-badge iqd"},Mn={class:"currency-badge usd"},In={class:"currency-badge iqd"},qn={class:"currency-badge usd"},Bn={class:"currency-badge iqd"},Qn={class:"currency-badge usd"},An={class:"currency-badge iqd"},Ln={class:"currency-badge usd"},Rn={class:"currency-badge iqd"},zn=["onClick"],Vn={key:2,class:"alert alert-info"},Tn={key:1},Fn={key:0,class:"text-center py-4"},Nn={key:1,class:"table-responsive"},jn={class:"table table-hover"},On={class:"currency-badge usd"},En={class:"currency-badge iqd"},Hn={class:"currency-badge usd"},Yn={class:"currency-badge iqd"},Pn={class:"currency-badge usd"},Xn={class:"currency-badge iqd"},Zn={class:"currency-badge usd"},Gn={class:"currency-badge iqd"},Jn={class:"currency-badge usd"},Kn={class:"currency-badge iqd"},Wn=["onClick"],ti={key:2,class:"alert alert-info"},ei={class:"images-modal-header"},si={class:"images-grid"},li=["href"],ai=["src","alt"],oi={__name:"index",props:{boxes:Object,transactions:Object,translations:Object,mainBox:Object,exchangeRate:{type:Number,default:1500},dailyClose:Object,monthlyClose:Object},setup(l){const d=dt();let i=S(!1),g=S(!1),v=S(!1),h=S(!1),b=S(!1),p=S(!1),o=S(0),_=S([]),w=S(!1),M=S("transactions"),ot=S(!1),H=S(null),Y=S(null),f=Pt({type:"all",status:"all",start_date:"",end_date:"",year:"",month:""});const U=l,Gt=ye(),I=Pt({name:"",note:"",start_date:W(),end_date:W()});function Jt(){g.value=!0}function Kt(){i.value=!0}function Wt(){v.value=!0}function te(){h.value=!0}function ee(){X()}function X(){w.value=!0,A.get("api/boxes/transactions").then(c=>{at.reload({only:["transactions","mainBox","dailyClose","monthlyClose"]}),d.success("تم تحديث البيانات بنجاح",{timeout:2e3,position:"bottom-right",rtl:!0})}).catch(c=>{console.log(c),d.error("حدث خطأ أثناء التحديث",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1})}function se(c){w.value=!0,A.post("/api/convertDollarDinar",c).then(e=>{X(),g.value=!1,d.success("تم التحويل بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(e=>{d.error("حدث خطأ أثناء التحويل",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1})}function le(c){w.value=!0,A.post("/api/convertDinarDollar",c).then(e=>{X(),i.value=!1,d.success("تم التحويل بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(e=>{d.error("حدث خطأ أثناء التحويل",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1})}const mt=()=>{w.value=!0,at.get(route("boxes.index"),I,{preserveState:!0,preserveScroll:!0,onFinish:()=>{w.value=!1}})},ae=()=>{I.name="",I.note="",I.start_date=W(),I.end_date=W(),mt()},K=c=>Gt.props.auth_permissions.includes(c);function a(c){return typeof c!="number"&&(c=parseFloat(c)||0),Math.round(c).toLocaleString()}const oe=(c,e)=>{nt.fire({title:"تأكيد الحذف",html:`هل أنت متأكد من حذف هذه المعاملة؟<br><strong>المبلغ: ${a(e)}</strong>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"نعم، احذف",cancelButtonText:"إلغاء"}).then(D=>{D.isConfirmed&&(w.value=!0,A.post("api/delTransactions",{id:c}).then(y=>{at.reload({only:["transactions","mainBox"]}),d.success("تم حذف المعاملة بنجاح",{timeout:2e3,position:"bottom-right",rtl:!0})}).catch(y=>{d.error("حدث خطأ أثناء الحذف",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1}))})};function W(){const c=new Date,e=c.getFullYear(),D=String(c.getMonth()+1).padStart(2,"0"),y=String(c.getDate()).padStart(2,"0");return`${e}-${D}-${y}`}const tt=c=>{const e=new Date(c),D=e.getFullYear(),y=String(e.getMonth()+1).padStart(2,"0"),V=String(e.getDate()).padStart(2,"0"),q=String(e.getHours()).padStart(2,"0"),T=String(e.getMinutes()).padStart(2,"0");return`${D}-${y}-${V} ${q}:${T}`};function ne(c){o.value=c,b.value=!0}function ie(c){_.value=c.transactions_images||[],p.value=!0}function pt(c){return`/storage/transactions/${c}`}function de(c){return c.type==="outUser"||c.type==="out"?"row-out":c.type==="inUser"||c.type==="in"?"row-in":""}const re=()=>{if(!U.transactions.data)return 0;const c=U.transactions.data.filter(e=>(e.type==="in"||e.type==="inUser")&&(e.currency==="USD"||e.currency==="$")).reduce((e,D)=>e+(parseFloat(D.amount)||0),0);return a(c)},ue=()=>{if(!U.transactions.data)return 0;const c=U.transactions.data.filter(e=>(e.type==="in"||e.type==="inUser")&&e.currency==="IQD").reduce((e,D)=>e+(parseFloat(D.amount)||0),0);return a(c)},ce=()=>{if(!U.transactions.data)return 0;const c=U.transactions.data.filter(e=>(e.type==="out"||e.type==="outUser")&&(e.currency==="USD"||e.currency==="$")).reduce((e,D)=>e+Math.abs(parseFloat(D.amount)||0),0);return a(c)},me=()=>{if(!U.transactions.data)return 0;const c=U.transactions.data.filter(e=>(e.type==="out"||e.type==="outUser")&&e.currency==="IQD").reduce((e,D)=>e+Math.abs(parseFloat(D.amount)||0),0);return a(c)},pe=async()=>{var c;w.value=!0;try{const e=((c=U.dailyClose)==null?void 0:c.close_date)||W(),y=(await A.get(`/boxes/daily-close?date=${e}`)).data;nt.fire({title:"تأكيد إغلاق اليوم",html:`
        <p>هل أنت متأكد من إغلاق اليوم؟</p>
        <div style="text-align: right; margin-top: 1rem; font-family: Arial, sans-serif;">
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">المبيعات:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.total_sales_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.total_sales_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">إضافة مباشرة:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.direct_deposits_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.direct_deposits_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">المصاريف:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.total_expenses_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.total_expenses_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">الرصيد الافتتاحي:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.opening_balance_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.opening_balance_iqd)??0)} IQD</span>
            </div>
          </div>
          <div style="margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; font-weight: bold; color: #495057;">الرصيد الختامي:</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">${a((y==null?void 0:y.closing_balance_usd)??0)} USD</span>
              <span style="display: inline-block; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 600; font-size: 0.85rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a((y==null?void 0:y.closing_balance_iqd)??0)} IQD</span>
            </div>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonColor:"#667eea",cancelButtonColor:"#6c757d",confirmButtonText:"نعم، إغلاق",cancelButtonText:"إلغاء",input:"textarea",inputPlaceholder:"ملاحظات (اختياري)",inputAttributes:{"aria-label":"ملاحظات"}}).then(V=>{V.isConfirmed&&(w.value=!0,A.post("/boxes/close-daily",{date:e,notes:V.value||""}).then(q=>{q.data.success?(d.success(q.data.message||"تم إغلاق اليوم بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0}),at.reload({only:["dailyClose","monthlyClose","mainBox"]})):d.error(q.data.message||"حدث خطأ",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(q=>{var T,N;d.error(((N=(T=q.response)==null?void 0:T.data)==null?void 0:N.message)||"حدث خطأ أثناء إغلاق اليوم",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1}))})}catch(e){console.error("Error fetching daily close data:",e),d.error("حدث خطأ أثناء جلب بيانات الإغلاق",{timeout:3e3,position:"bottom-right",rtl:!0}),w.value=!1}},be=()=>{var c,e,D,y,V,q;nt.fire({title:"تأكيد إغلاق الشهر",html:`
      <p>هل أنت متأكد من إغلاق الشهر الحالي؟</p>
      <div style="text-align: right; margin-top: 1rem;">
        <p><strong>المبيعات:</strong> ${a(((c=U.monthlyClose)==null?void 0:c.total_sales_usd)??0)} USD / ${a(((e=U.monthlyClose)==null?void 0:e.total_sales_iqd)??0)} IQD</p>
        <p><strong>المصاريف:</strong> ${a(((D=U.monthlyClose)==null?void 0:D.total_expenses_usd)??0)} USD / ${a(((y=U.monthlyClose)==null?void 0:y.total_expenses_iqd)??0)} IQD</p>
        <p><strong>الرصيد الختامي:</strong> ${a(((V=U.monthlyClose)==null?void 0:V.closing_balance_usd)??0)} USD / ${a(((q=U.monthlyClose)==null?void 0:q.closing_balance_iqd)??0)} IQD</p>
      </div>
    `,icon:"question",showCancelButton:!0,confirmButtonColor:"#667eea",cancelButtonColor:"#6c757d",confirmButtonText:"نعم، إغلاق",cancelButtonText:"إلغاء",input:"textarea",inputPlaceholder:"ملاحظات (اختياري)",inputAttributes:{"aria-label":"ملاحظات"}}).then(T=>{var N,et;T.isConfirmed&&(w.value=!0,A.post("/boxes/close-monthly",{year:((N=U.monthlyClose)==null?void 0:N.year)||new Date().getFullYear(),month:((et=U.monthlyClose)==null?void 0:et.month)||new Date().getMonth()+1,notes:T.value||""}).then(j=>{j.data.success?(d.success(j.data.message||"تم إغلاق الشهر بنجاح",{timeout:3e3,position:"bottom-right",rtl:!0}),at.reload({only:["dailyClose","monthlyClose","mainBox"]})):d.error(j.data.message||"حدث خطأ",{timeout:3e3,position:"bottom-right",rtl:!0})}).catch(j=>{var st,lt;d.error(((lt=(st=j.response)==null?void 0:st.data)==null?void 0:lt.message)||"حدث خطأ أثناء إغلاق الشهر",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{w.value=!1}))})},z=async()=>{ot.value=!0;try{const c=new URLSearchParams;f.type&&c.append("type",f.type),f.status&&c.append("status",f.status),f.start_date&&c.append("start_date",f.start_date),f.end_date&&c.append("end_date",f.end_date),f.year&&c.append("year",f.year),f.month&&c.append("month",f.month);const e=await A.get(`/boxes/closes-list?${c.toString()}`);H.value=e.data.daily_closes,Y.value=e.data.monthly_closes}catch(c){console.error("Error loading closes list:",c),d.error("حدث خطأ أثناء جلب قائمة الإغلاقات",{timeout:3e3,position:"bottom-right",rtl:!0})}finally{ot.value=!1}},ge=()=>{f.type="all",f.status="all",f.start_date="",f.end_date="",f.year="",f.month="",z()},bt=(c,e)=>{const D=c==="daily"?`
      <div style="text-align: right; font-family: Arial, sans-serif;">
        <p><strong>التاريخ:</strong> ${tt(e.close_date)}</p>
        <p><strong>الحالة:</strong> ${e.status==="closed"?"مغلق":"مفتوح"}</p>
        <p><strong>المبيعات:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_sales_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_sales_iqd??0)} IQD</span>
        </p>
        <p><strong>إضافة مباشرة:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.direct_deposits_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.direct_deposits_iqd??0)} IQD</span>
        </p>
        <p><strong>المصاريف:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_expenses_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_expenses_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الافتتاحي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.opening_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.opening_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الختامي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.closing_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.closing_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>عدد الطلبات:</strong> ${e.total_orders??0}</p>
        ${e.notes?`<p><strong>ملاحظات:</strong> ${e.notes}</p>`:""}
      </div>
    `:`
      <div style="text-align: right; font-family: Arial, sans-serif;">
        <p><strong>الشهر:</strong> ${rt(e.month)} ${e.year}</p>
        <p><strong>الحالة:</strong> ${e.status==="closed"?"مغلق":"مفتوح"}</p>
        <p><strong>المبيعات:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_sales_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_sales_iqd??0)} IQD</span>
        </p>
        <p><strong>إضافة مباشرة:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.direct_deposits_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.direct_deposits_iqd??0)} IQD</span>
        </p>
        <p><strong>المصاريف:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.total_expenses_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.total_expenses_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الافتتاحي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.opening_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.opening_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>الرصيد الختامي:</strong> 
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin: 0 0.25rem;">${a(e.closing_balance_usd??0)} USD</span>
          <span style="display: inline-block; padding: 0.3rem 0.6rem; border-radius: 6px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">${a(e.closing_balance_iqd??0)} IQD</span>
        </p>
        <p><strong>عدد الطلبات:</strong> ${e.total_orders??0}</p>
        ${e.notes?`<p><strong>ملاحظات:</strong> ${e.notes}</p>`:""}
      </div>
    `;nt.fire({title:c==="daily"?"تفاصيل الإغلاق اليومي":"تفاصيل الإغلاق الشهري",html:D,icon:"info",confirmButtonText:"إغلاق"})},rt=c=>({1:"يناير",2:"فبراير",3:"مارس",4:"أبريل",5:"مايو",6:"يونيو",7:"يوليو",8:"أغسطس",9:"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"})[c]||c;return(c,e)=>(r(),F(he,{translations:l.translations},{default:L(()=>{var D,y,V,q,T,N,et,j,st,lt,gt,vt,ft,yt,ht,_t,xt,wt,$t,kt,Dt,Ct,St,Ut,Mt,It,qt,Bt,Qt,At,Lt,Rt,zt,Vt,Tt,Ft,Nt,jt,Ot;return[t("div",Ul,[t("div",Ml,[t("div",Il,[t("div",ql,[e[31]||(e[31]=t("i",{class:"bi bi-safe2"},null,-1)),t("h1",null,n(l.translations.boxes),1)])])]),t("div",Bl,[t("div",Ql,[t("div",Al,[e[34]||(e[34]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",Ll,[e[32]||(e[32]=t("h6",null,"الرصيد بالدولار",-1)),t("span",Rl,n(a(((D=l.mainBox)==null?void 0:D.balance_usd)??0)),1),e[33]||(e[33]=t("small",null,"USD",-1))])]),t("div",zl,[e[37]||(e[37]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-cash-stack"})],-1)),t("div",Vl,[e[35]||(e[35]=t("h6",null,"الرصيد بالدينار",-1)),t("span",Tl,n(a(((y=l.mainBox)==null?void 0:y.balance)??0)),1),e[36]||(e[36]=t("small",null,"IQD",-1))])]),t("div",Fl,[e[40]||(e[40]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-arrow-down-circle"})],-1)),t("div",Nl,[e[38]||(e[38]=t("h6",null,"إجمالي الإضافات",-1)),t("div",jl,[t("span",Ol,n(re())+" USD",1),t("span",El,n(ue())+" IQD",1)]),e[39]||(e[39]=t("small",null,"عمليات اليوم",-1))])]),t("div",Hl,[e[43]||(e[43]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-arrow-up-circle"})],-1)),t("div",Yl,[e[41]||(e[41]=t("h6",null,"إجمالي السحوبات",-1)),t("div",Pl,[t("span",Xl,n(ce())+" USD",1),t("span",Zl,n(me())+" IQD",1)]),e[42]||(e[42]=t("small",null,"عمليات اليوم",-1))])])])]),t("section",Gl,[t("div",Jl,[t("div",Kl,[t("button",{class:R(["tab-btn",{active:u(M)==="transactions"}]),onClick:e[0]||(e[0]=s=>B(M)?M.value="transactions":M="transactions")},e[44]||(e[44]=[t("i",{class:"bi bi-list-ul"},null,-1),x(" المعاملات ")]),2),t("button",{class:R(["tab-btn",{active:u(M)==="close"}]),onClick:e[1]||(e[1]=s=>B(M)?M.value="close":M="close")},e[45]||(e[45]=[t("i",{class:"bi bi-calendar-check"},null,-1),x(" الإغلاق اليومي والشهري ")]),2),t("button",{class:R(["tab-btn",{active:u(M)==="closes-list"}]),onClick:e[2]||(e[2]=s=>{B(M)?M.value="closes-list":M="closes-list",z()})},e[46]||(e[46]=[t("i",{class:"bi bi-list-check"},null,-1),x(" قائمة الإغلاقات ")]),2)]),$(t("div",Wl,[t("div",ta,[t("div",ea,[t("div",sa,[K("create order")?(r(),m("button",{key:0,class:"action-btn success",onClick:e[3]||(e[3]=s=>Wt()),disabled:u(w)},[e[47]||(e[47]=t("i",{class:"bi bi-plus-circle"},null,-1)),t("span",null,n(l.translations.add_to_box),1)],8,la)):k("",!0),K("create order")?(r(),m("button",{key:1,class:"action-btn danger",onClick:e[4]||(e[4]=s=>te()),disabled:u(w)},[e[48]||(e[48]=t("i",{class:"bi bi-dash-circle"},null,-1)),t("span",null,n(l.translations.drop_from_box),1)],8,aa)):k("",!0)]),t("div",oa,[K("create order")?(r(),m("button",{key:0,class:"action-btn warning",onClick:e[5]||(e[5]=s=>Kt()),disabled:u(w)},e[49]||(e[49]=[t("i",{class:"bi bi-arrow-left-right"},null,-1),t("span",null,"دينار → دولار",-1)]),8,na)):k("",!0),K("create order")?(r(),m("button",{key:1,class:"action-btn warning",onClick:e[6]||(e[6]=s=>Jt()),disabled:u(w)},e[50]||(e[50]=[t("i",{class:"bi bi-arrow-right-left"},null,-1),t("span",null,"دولار → دينار",-1)]),8,ia)):k("",!0)]),t("div",da,[t("button",{class:"action-btn info",onClick:e[7]||(e[7]=s=>X()),disabled:u(w)},[t("i",{class:R(["bi bi-arrow-clockwise",{spin:u(w)}])},null,2),e[51]||(e[51]=t("span",null,"تحديث",-1))],8,ra)])]),t("div",ua,[e[54]||(e[54]=t("i",{class:"bi bi-graph-up-arrow"},null,-1)),t("span",null,[e[52]||(e[52]=x("سعر الصرف: ")),t("strong",null,n(l.exchangeRate),1),e[53]||(e[53]=x(" IQD/USD"))])])]),t("div",ca,[t("div",ma,[t("form",{onSubmit:Xt(mt,["prevent"]),class:"filter-form"},[t("div",pa,[t("div",ba,[e[55]||(e[55]=t("label",null,[t("i",{class:"bi bi-calendar-event"}),x(" تاريخ البداية ")],-1)),$(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=s=>I.start_date=s)},null,512),[[C,I.start_date]])]),t("div",ga,[e[56]||(e[56]=t("label",null,[t("i",{class:"bi bi-calendar-check"}),x(" تاريخ النهاية ")],-1)),$(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=s=>I.end_date=s)},null,512),[[C,I.end_date]])]),t("div",va,[e[57]||(e[57]=t("label",null,[t("i",{class:"bi bi-person"}),x(" الاسم ")],-1)),$(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=s=>I.name=s),placeholder:"ابحث بالاسم..."},null,512),[[C,I.name]])]),t("div",fa,[e[58]||(e[58]=t("label",null,[t("i",{class:"bi bi-file-text"}),x(" الملاحظة ")],-1)),$(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=s=>I.note=s),placeholder:"ابحث بالملاحظة..."},null,512),[[C,I.note]])]),t("div",ya,[t("button",{type:"submit",class:"btn btn-primary",disabled:u(w)},[e[59]||(e[59]=t("i",{class:"bi bi-search"},null,-1)),x(" "+n(l.translations.search),1)],8,ha),t("button",{type:"button",class:"btn btn-secondary",onClick:ae,disabled:u(w)},e[60]||(e[60]=[t("i",{class:"bi bi-x-circle"},null,-1),x(" مسح ")]),8,_a)])])],32)]),u(w)?(r(),m("div",xa,e[61]||(e[61]=[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"جاري التحميل...")],-1)]))):k("",!0),t("div",wa,[t("div",$a,[t("table",ka,[t("thead",null,[t("tr",null,[e[63]||(e[63]=t("th",{scope:"col"},"#",-1)),e[64]||(e[64]=t("th",{scope:"col"},[t("i",{class:"bi bi-person-circle"}),x(" الحساب ")],-1)),e[65]||(e[65]=t("th",{scope:"col"},[t("i",{class:"bi bi-arrow-up text-danger"}),x(" سحب ")],-1)),e[66]||(e[66]=t("th",{scope:"col"},[t("i",{class:"bi bi-arrow-down text-success"}),x(" إضافة ")],-1)),e[67]||(e[67]=t("th",{scope:"col"},[t("i",{class:"bi bi-card-text"}),x(" البيان ")],-1)),t("th",Da,[e[62]||(e[62]=t("i",{class:"bi bi-calendar3"},null,-1)),x(" "+n(l.translations.created_at),1)]),e[68]||(e[68]=t("th",{scope:"col"},[t("i",{class:"bi bi-images"}),x(" المرفقات ")],-1)),e[69]||(e[69]=t("th",{scope:"col",class:"actions-col"},[t("i",{class:"bi bi-gear"}),x(" الإجراءات ")],-1))])]),t("tbody",null,[l.transactions.data&&l.transactions.data.length>0?(r(!0),m(O,{key:0},E(l.transactions.data,(s,Z)=>{var Et;return r(),m("tr",{key:s.id,class:R([de(s),"transaction-row"])},[t("td",Ca,[t("span",Sa,n((l.transactions.current_page-1)*l.transactions.per_page+Z+1),1)]),t("td",Ua,[t("div",Ma,[e[70]||(e[70]=t("i",{class:"bi bi-person-badge"},null,-1)),t("span",null,n(((Et=s.morphed)==null?void 0:Et.name)||"غير محدد"),1)])]),t("td",Ia,[s.type=="outUser"||s.type=="out"?(r(),m("span",qa,[e[71]||(e[71]=t("i",{class:"bi bi-dash-circle"},null,-1)),x(" "+n(a(s.amount))+" "+n(s.currency),1)])):(r(),m("span",Ba,"-"))]),t("td",Qa,[s.type=="inUser"||s.type=="in"?(r(),m("span",Aa,[e[72]||(e[72]=t("i",{class:"bi bi-plus-circle"},null,-1)),x(" "+n(a(s.amount))+" "+n(s.currency),1)])):(r(),m("span",La,"-"))]),t("td",Ra,[t("span",za,n(s.description||"لا يوجد"),1)]),t("td",Va,[t("div",Ta,[e[73]||(e[73]=t("i",{class:"bi bi-clock"},null,-1)),t("span",null,n(tt(s.created_at)),1)])]),t("td",Fa,[t("div",Na,[s.transactions_images&&s.transactions_images.length>0?(r(),m("button",{key:0,class:"btn btn-sm btn-info",onClick:Ht=>ie(s),title:"عرض المرفقات"},[e[74]||(e[74]=t("i",{class:"bi bi-images"},null,-1)),t("span",Oa,n(s.transactions_images.length),1)],8,ja)):(r(),m("span",Ea,"-"))])]),t("td",Ha,[t("div",Ya,[K("delete order")?(r(),m("button",{key:0,class:"action-icon delete",onClick:Ht=>oe(s.id,s.amount),title:"حذف"},[Q(Rs)],8,Pa)):k("",!0),t("button",{class:"action-icon upload",onClick:Ht=>ne(s),title:"تحميل مرفق"},[Q(Bs)],8,Xa),s.type==="out"||s.type==="outUser"||s.type==="debt"?(r(),m("a",{key:1,target:"_blank",href:`/api/getIndexAccountsSelas?user_id=${l.mainBox.id}&print=2&transactions_id=${s.id}`,class:"action-icon print",title:"طباعة"},[Q(Zt)],8,Za)):k("",!0),s.type==="in"||s.type==="inUser"?(r(),m("a",{key:2,target:"_blank",href:`/api/getIndexAccountsSelas?user_id=${l.mainBox.id}&print=3&transactions_id=${s.id}`,class:"action-icon print",title:"طباعة"},[Q(Zt)],8,Ga)):k("",!0)])])],2)}),128)):(r(),m("tr",Ja,e[75]||(e[75]=[t("td",{colspan:"7",class:"empty-state"},[t("div",{class:"empty-content"},[t("i",{class:"bi bi-inbox"}),t("p",null,"لا توجد معاملات")])],-1)])))])])])])]),Q(ct,{links:(V=l.transactions)==null?void 0:V.links},null,8,["links"])],512),[[it,u(M)==="transactions"]]),$(t("div",Ka,[t("div",Wa,[t("div",to,[t("div",eo,[t("div",so,[e[76]||(e[76]=t("div",{class:"close-card-title"},[t("i",{class:"bi bi-calendar-day"}),t("h3",null,"إغلاق يومي")],-1)),t("span",{class:R(["close-status",((q=l.dailyClose)==null?void 0:q.status)==="closed"?"closed":"open"])},n(((T=l.dailyClose)==null?void 0:T.status)==="closed"?"مغلق":"مفتوح"),3)]),t("div",lo,[t("div",ao,[e[77]||(e[77]=t("span",{class:"close-label"},"المبيعات:",-1)),t("span",oo,[t("span",no,n(a(((N=l.dailyClose)==null?void 0:N.total_sales_usd)??0))+" USD",1),t("span",io,n(a(((et=l.dailyClose)==null?void 0:et.total_sales_iqd)??0))+" IQD",1)])]),t("div",ro,[e[78]||(e[78]=t("span",{class:"close-label"},"إضافة مباشرة:",-1)),t("span",uo,[t("span",co,n(a(((j=l.dailyClose)==null?void 0:j.direct_deposits_usd)??0))+" USD",1),t("span",mo,n(a(((st=l.dailyClose)==null?void 0:st.direct_deposits_iqd)??0))+" IQD",1)])]),t("div",po,[e[79]||(e[79]=t("span",{class:"close-label"},"سحب مباشر:",-1)),t("span",bo,[t("span",go,n(a(((lt=l.dailyClose)==null?void 0:lt.direct_withdrawals_usd)??0))+" USD",1),t("span",vo,n(a(((gt=l.dailyClose)==null?void 0:gt.direct_withdrawals_iqd)??0))+" IQD",1)])]),t("div",fo,[e[80]||(e[80]=t("span",{class:"close-label"},"المصاريف:",-1)),t("span",yo,[t("span",ho,n(a(((vt=l.dailyClose)==null?void 0:vt.total_expenses_usd)??0))+" USD",1),t("span",_o,n(a(((ft=l.dailyClose)==null?void 0:ft.total_expenses_iqd)??0))+" IQD",1)])]),t("div",xo,[e[81]||(e[81]=t("span",{class:"close-label"},"الرصيد الافتتاحي:",-1)),t("span",wo,[t("span",$o,n(a(((yt=l.dailyClose)==null?void 0:yt.opening_balance_usd)??0))+" USD",1),t("span",ko,n(a(((ht=l.dailyClose)==null?void 0:ht.opening_balance_iqd)??0))+" IQD",1)])]),t("div",Do,[e[82]||(e[82]=t("span",{class:"close-label"},"الرصيد الختامي:",-1)),t("span",Co,[t("span",So,n(a(((_t=l.dailyClose)==null?void 0:_t.closing_balance_usd)??0))+" USD",1),t("span",Uo,n(a(((xt=l.dailyClose)==null?void 0:xt.closing_balance_iqd)??0))+" IQD",1)])]),t("div",Mo,[e[83]||(e[83]=t("span",{class:"close-label"},"عدد الطلبات:",-1)),t("span",Io,n(((wt=l.dailyClose)==null?void 0:wt.total_orders)??0),1)])]),t("div",qo,[(($t=l.dailyClose)==null?void 0:$t.status)==="open"?(r(),m("button",{key:0,class:"btn-close-action",onClick:pe,disabled:u(w)},e[84]||(e[84]=[t("i",{class:"bi bi-lock-fill"},null,-1),x(" إغلاق اليوم ")]),8,Bo)):(r(),m("span",Qo,[e[85]||(e[85]=t("i",{class:"bi bi-check-circle"},null,-1)),x(" تم الإغلاق في "+n(tt((kt=l.dailyClose)==null?void 0:kt.closed_at)),1)]))])]),t("div",Ao,[t("div",Lo,[t("div",Ro,[e[86]||(e[86]=t("i",{class:"bi bi-calendar-month"},null,-1)),t("h3",null,"إغلاق شهري - "+n(((Dt=l.monthlyClose)==null?void 0:Dt.month_name)||rt((Ct=l.monthlyClose)==null?void 0:Ct.month)),1)]),t("span",{class:R(["close-status",((St=l.monthlyClose)==null?void 0:St.status)==="closed"?"closed":"open"])},n(((Ut=l.monthlyClose)==null?void 0:Ut.status)==="closed"?"مغلق":"مفتوح"),3)]),t("div",zo,[t("div",Vo,[e[87]||(e[87]=t("span",{class:"close-label"},"المبيعات:",-1)),t("span",To,[t("span",Fo,n(a(((Mt=l.monthlyClose)==null?void 0:Mt.total_sales_usd)??0))+" USD",1),t("span",No,n(a(((It=l.monthlyClose)==null?void 0:It.total_sales_iqd)??0))+" IQD",1)])]),t("div",jo,[e[88]||(e[88]=t("span",{class:"close-label"},"إضافة مباشرة:",-1)),t("span",Oo,[t("span",Eo,n(a(((qt=l.monthlyClose)==null?void 0:qt.direct_deposits_usd)??0))+" USD",1),t("span",Ho,n(a(((Bt=l.monthlyClose)==null?void 0:Bt.direct_deposits_iqd)??0))+" IQD",1)])]),t("div",Yo,[e[89]||(e[89]=t("span",{class:"close-label"},"سحب مباشر:",-1)),t("span",Po,[t("span",Xo,n(a(((Qt=l.monthlyClose)==null?void 0:Qt.direct_withdrawals_usd)??0))+" USD",1),t("span",Zo,n(a(((At=l.monthlyClose)==null?void 0:At.direct_withdrawals_iqd)??0))+" IQD",1)])]),t("div",Go,[e[90]||(e[90]=t("span",{class:"close-label"},"المصاريف:",-1)),t("span",Jo,[t("span",Ko,n(a(((Lt=l.monthlyClose)==null?void 0:Lt.total_expenses_usd)??0))+" USD",1),t("span",Wo,n(a(((Rt=l.monthlyClose)==null?void 0:Rt.total_expenses_iqd)??0))+" IQD",1)])]),t("div",tn,[e[91]||(e[91]=t("span",{class:"close-label"},"الرصيد الافتتاحي:",-1)),t("span",en,[t("span",sn,n(a(((zt=l.monthlyClose)==null?void 0:zt.opening_balance_usd)??0))+" USD",1),t("span",ln,n(a(((Vt=l.monthlyClose)==null?void 0:Vt.opening_balance_iqd)??0))+" IQD",1)])]),t("div",an,[e[92]||(e[92]=t("span",{class:"close-label"},"الرصيد الختامي:",-1)),t("span",on,[t("span",nn,n(a(((Tt=l.monthlyClose)==null?void 0:Tt.closing_balance_usd)??0))+" USD",1),t("span",dn,n(a(((Ft=l.monthlyClose)==null?void 0:Ft.closing_balance_iqd)??0))+" IQD",1)])]),t("div",rn,[e[93]||(e[93]=t("span",{class:"close-label"},"عدد الطلبات:",-1)),t("span",un,n(((Nt=l.monthlyClose)==null?void 0:Nt.total_orders)??0),1)])]),t("div",cn,[((jt=l.monthlyClose)==null?void 0:jt.status)==="open"?(r(),m("button",{key:0,class:"btn-close-action",onClick:be,disabled:u(w)},e[94]||(e[94]=[t("i",{class:"bi bi-lock-fill"},null,-1),x(" إغلاق الشهر ")]),8,mn)):(r(),m("span",pn,[e[95]||(e[95]=t("i",{class:"bi bi-check-circle"},null,-1)),x(" تم الإغلاق في "+n(tt((Ot=l.monthlyClose)==null?void 0:Ot.closed_at)),1)]))])])])])],512),[[it,u(M)==="close"]])])]),$(t("div",bn,[e[114]||(e[114]=t("div",{class:"card-header-custom"},[t("div",{class:"actions-wrapper"},[t("h3",{class:"card-title"},"قائمة الإغلاقات")])],-1)),t("div",gn,[t("div",vn,[t("div",fn,[e[97]||(e[97]=t("label",{class:"form-label"},"النوع",-1)),$(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>u(f).type=s),onChange:z,class:"form-select"},e[96]||(e[96]=[t("option",{value:"all"},"الكل",-1),t("option",{value:"daily"},"يومي",-1),t("option",{value:"monthly"},"شهري",-1)]),544),[[ut,u(f).type]])]),t("div",yn,[e[99]||(e[99]=t("label",{class:"form-label"},"الحالة",-1)),$(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>u(f).status=s),onChange:z,class:"form-select"},e[98]||(e[98]=[t("option",{value:"all"},"الكل",-1),t("option",{value:"open"},"مفتوح",-1),t("option",{value:"closed"},"مغلق",-1)]),544),[[ut,u(f).status]])]),u(f).type==="all"||u(f).type==="daily"?(r(),m("div",hn,[e[100]||(e[100]=t("label",{class:"form-label"},"من تاريخ",-1)),$(t("input",{type:"date","onUpdate:modelValue":e[14]||(e[14]=s=>u(f).start_date=s),onChange:z,class:"form-control"},null,544),[[C,u(f).start_date]])])):k("",!0),u(f).type==="all"||u(f).type==="daily"?(r(),m("div",_n,[e[101]||(e[101]=t("label",{class:"form-label"},"إلى تاريخ",-1)),$(t("input",{type:"date","onUpdate:modelValue":e[15]||(e[15]=s=>u(f).end_date=s),onChange:z,class:"form-control"},null,544),[[C,u(f).end_date]])])):k("",!0),u(f).type==="all"||u(f).type==="monthly"?(r(),m("div",xn,[e[102]||(e[102]=t("label",{class:"form-label"},"السنة",-1)),$(t("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=s=>u(f).year=s),onChange:z,class:"form-control",placeholder:"مثال: 2025"},null,544),[[C,u(f).year]])])):k("",!0),u(f).type==="all"||u(f).type==="monthly"?(r(),m("div",wn,[e[104]||(e[104]=t("label",{class:"form-label"},"الشهر",-1)),$(t("select",{"onUpdate:modelValue":e[17]||(e[17]=s=>u(f).month=s),onChange:z,class:"form-select"},e[103]||(e[103]=[t("option",{value:""},"الكل",-1),t("option",{value:"1"},"يناير",-1),t("option",{value:"2"},"فبراير",-1),t("option",{value:"3"},"مارس",-1),t("option",{value:"4"},"أبريل",-1),t("option",{value:"5"},"مايو",-1),t("option",{value:"6"},"يونيو",-1),t("option",{value:"7"},"يوليو",-1),t("option",{value:"8"},"أغسطس",-1),t("option",{value:"9"},"سبتمبر",-1),t("option",{value:"10"},"أكتوبر",-1),t("option",{value:"11"},"نوفمبر",-1),t("option",{value:"12"},"ديسمبر",-1)]),544),[[ut,u(f).month]])])):k("",!0),t("div",{class:"col-md-2 d-flex align-items-end"},[t("button",{onClick:ge,class:"btn btn-secondary w-100"},e[105]||(e[105]=[t("i",{class:"bi bi-x-circle"},null,-1),x(" مسح الفلاتر ")]))])])]),u(f).type==="all"||u(f).type==="daily"?(r(),m("div",$n,[e[109]||(e[109]=t("h5",{class:"mb-3"},"الإغلاقات اليومية",-1)),u(ot)?(r(),m("div",kn,e[106]||(e[106]=[t("div",{class:"spinner-border",role:"status"},null,-1)]))):u(H)&&u(H).data&&u(H).data.length>0?(r(),m("div",Dn,[t("table",Cn,[e[108]||(e[108]=t("thead",null,[t("tr",null,[t("th",null,"التاريخ"),t("th",null,"الحالة"),t("th",null,"المبيعات"),t("th",null,"إضافة مباشرة"),t("th",null,"المصاريف"),t("th",null,"الرصيد الافتتاحي"),t("th",null,"الرصيد الختامي"),t("th",null,"عدد الطلبات"),t("th",null,"الإجراءات")])],-1)),t("tbody",null,[(r(!0),m(O,null,E(u(H).data,s=>(r(),m("tr",{key:"daily-"+s.id},[t("td",null,n(tt(s.close_date)),1),t("td",null,[t("span",{class:R(s.status==="closed"?"badge bg-success":"badge bg-warning")},n(s.status==="closed"?"مغلق":"مفتوح"),3)]),t("td",null,[t("span",Sn,n(a(s.total_sales_usd??0))+" USD",1),t("span",Un,n(a(s.total_sales_iqd??0))+" IQD",1)]),t("td",null,[t("span",Mn,n(a(s.direct_deposits_usd??0))+" USD",1),t("span",In,n(a(s.direct_deposits_iqd??0))+" IQD",1)]),t("td",null,[t("span",qn,n(a(s.total_expenses_usd??0))+" USD",1),t("span",Bn,n(a(s.total_expenses_iqd??0))+" IQD",1)]),t("td",null,[t("span",Qn,n(a(s.opening_balance_usd??0))+" USD",1),t("span",An,n(a(s.opening_balance_iqd??0))+" IQD",1)]),t("td",null,[t("span",Ln,n(a(s.closing_balance_usd??0))+" USD",1),t("span",Rn,n(a(s.closing_balance_iqd??0))+" IQD",1)]),t("td",null,n(s.total_orders??0),1),t("td",null,[t("button",{onClick:Z=>bt("daily",s),class:"btn btn-sm btn-info"},e[107]||(e[107]=[t("i",{class:"bi bi-eye"},null,-1),x(" التفاصيل ")]),8,zn)])]))),128))])]),u(H).links?(r(),F(ct,{key:0,links:u(H).links,onPageChanged:z},null,8,["links"])):k("",!0)])):(r(),m("div",Vn,"لا توجد إغلاقات يومية"))])):k("",!0),u(f).type==="all"||u(f).type==="monthly"?(r(),m("div",Tn,[e[113]||(e[113]=t("h5",{class:"mb-3"},"الإغلاقات الشهرية",-1)),u(ot)?(r(),m("div",Fn,e[110]||(e[110]=[t("div",{class:"spinner-border",role:"status"},null,-1)]))):u(Y)&&u(Y).data&&u(Y).data.length>0?(r(),m("div",Nn,[t("table",jn,[e[112]||(e[112]=t("thead",null,[t("tr",null,[t("th",null,"الشهر"),t("th",null,"الحالة"),t("th",null,"المبيعات"),t("th",null,"إضافة مباشرة"),t("th",null,"المصاريف"),t("th",null,"الرصيد الافتتاحي"),t("th",null,"الرصيد الختامي"),t("th",null,"عدد الطلبات"),t("th",null,"الإجراءات")])],-1)),t("tbody",null,[(r(!0),m(O,null,E(u(Y).data,s=>(r(),m("tr",{key:"monthly-"+s.id},[t("td",null,n(rt(s.month))+" "+n(s.year),1),t("td",null,[t("span",{class:R(s.status==="closed"?"badge bg-success":"badge bg-warning")},n(s.status==="closed"?"مغلق":"مفتوح"),3)]),t("td",null,[t("span",On,n(a(s.total_sales_usd??0))+" USD",1),t("span",En,n(a(s.total_sales_iqd??0))+" IQD",1)]),t("td",null,[t("span",Hn,n(a(s.direct_deposits_usd??0))+" USD",1),t("span",Yn,n(a(s.direct_deposits_iqd??0))+" IQD",1)]),t("td",null,[t("span",Pn,n(a(s.total_expenses_usd??0))+" USD",1),t("span",Xn,n(a(s.total_expenses_iqd??0))+" IQD",1)]),t("td",null,[t("span",Zn,n(a(s.opening_balance_usd??0))+" USD",1),t("span",Gn,n(a(s.opening_balance_iqd??0))+" IQD",1)]),t("td",null,[t("span",Jn,n(a(s.closing_balance_usd??0))+" USD",1),t("span",Kn,n(a(s.closing_balance_iqd??0))+" IQD",1)]),t("td",null,n(s.total_orders??0),1),t("td",null,[t("button",{onClick:Z=>bt("monthly",s),class:"btn btn-sm btn-info"},e[111]||(e[111]=[t("i",{class:"bi bi-eye"},null,-1),x(" التفاصيل ")]),8,Wn)])]))),128))])]),u(Y).links?(r(),F(ct,{key:0,links:u(Y).links,onPageChanged:z},null,8,["links"])):k("",!0)])):(r(),m("div",ti,"لا توجد إغلاقات شهرية"))])):k("",!0)],512),[[it,u(M)==="closes-list"]]),Q(Sl,{show:u(b),formData:u(o),onA:e[18]||(e[18]=s=>ee(s)),onClose:e[19]||(e[19]=s=>B(b)?b.value=!1:b=!1)},{header:L(()=>e[115]||(e[115]=[t("h2",{class:"modal-title"},[t("i",{class:"bi bi-cloud-upload"}),x(" تحميل ملفات ")],-1)])),_:1},8,["show","formData"]),Q(Qe,{show:u(g),boxes:l.boxes,exchangeRate:l.exchangeRate,onA:e[20]||(e[20]=s=>se(s)),onClose:e[21]||(e[21]=s=>B(g)?g.value=!1:g=!1)},{header:L(()=>e[116]||(e[116]=[t("h3",{class:"modal-title"},[t("i",{class:"bi bi-arrow-left-right"}),x(" تحويل من الدولار إلى دينار ")],-1)])),_:1},8,["show","boxes","exchangeRate"]),Q(Pe,{show:u(i),boxes:l.boxes,exchangeRate:l.exchangeRate,onA:e[22]||(e[22]=s=>le(s)),onClose:e[23]||(e[23]=s=>B(i)?i.value=!1:i=!1)},{header:L(()=>e[117]||(e[117]=[t("h3",{class:"modal-title"},[t("i",{class:"bi bi-arrow-right-left"}),x(" تحويل من الدينار إلى دولار ")],-1)])),_:1},8,["show","boxes","exchangeRate"]),Q(rs,{show:u(v),data:c.users,accounts:c.accounts,onA:e[24]||(e[24]=s=>{X(),B(v)?v.value=!1:v=!1}),onClose:e[25]||(e[25]=s=>B(v)?v.value=!1:v=!1)},{header:L(()=>e[118]||(e[118]=[t("h3",{class:"modal-title"},[t("i",{class:"bi bi-plus-circle"}),x(" وصل قبض - إضافة للصندوق ")],-1)])),_:1},8,["show","data","accounts"]),Q(Ds,{show:u(h),boxes:l.boxes,onA:e[26]||(e[26]=s=>{X(),B(h)?h.value=!1:h=!1}),onClose:e[27]||(e[27]=s=>B(h)?h.value=!1:h=!1)},{header:L(()=>e[119]||(e[119]=[t("h2",{class:"modal-title"},[t("i",{class:"bi bi-dash-circle"}),x(" وصل سحب - سحب من الصندوق ")],-1)])),_:1},8,["show","boxes"]),u(p)?(r(),m("div",{key:0,class:"images-modal-overlay",onClick:e[30]||(e[30]=s=>B(p)?p.value=!1:p=!1)},[t("div",{class:"images-modal-content",onClick:e[29]||(e[29]=Xt(()=>{},["stop"]))},[t("div",ei,[e[121]||(e[121]=t("h4",null,"المرفقات",-1)),t("button",{onClick:e[28]||(e[28]=s=>B(p)?p.value=!1:p=!1),class:"close-btn"},e[120]||(e[120]=[t("i",{class:"bi bi-x"},null,-1)]))]),t("div",si,[(r(!0),m(O,null,E(u(_),(s,Z)=>(r(),m("a",{key:Z,href:pt(s.name),target:"_blank",class:"image-item"},[t("img",{src:pt(s.name),alt:`صورة ${Z+1}`},null,8,ai),e[122]||(e[122]=t("div",{class:"image-overlay"},[t("i",{class:"bi bi-box-arrow-up-right"}),t("span",null,"فتح في تاب جديد")],-1))],8,li))),128))])])])):k("",!0)])]}),_:1},8,["translations"]))}},ci=P(oi,[["__scopeId","data-v-81d0684d"]]);export{ci as default};
