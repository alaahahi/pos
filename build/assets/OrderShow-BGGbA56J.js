import{r as f,z as V,a,h as x,w as k,b as t,t as s,d as u,i as q,u as w,p as U,c as l,e as d,F as M,f as N,n as r,g as O}from"./app-bFscq0PD.js";import{_ as A}from"./AuthenticatedLayout-D_72-LIi.js";import{S as G}from"./StatusUpdateModal-DC7nhyKA.js";import{P as I}from"./PricingEditModal-CMQiDcWy.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"d-flex justify-content-between align-items-center"},K={class:"font-semibold text-xl text-gray-800 leading-tight"},Q={class:"d-flex gap-2"},R=["href"],W={class:"py-12"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"row"},Z={class:"col-md-8"},_={class:"card mb-4"},p={class:"card-header"},tt={class:"card-body"},et={class:"row"},st={class:"col-md-6"},nt={class:"text-muted"},at={key:0,class:"text-muted"},lt={class:"mt-2"},dt={class:"badge bg-info me-2"},it={class:"badge bg-warning"},ot={class:"mt-3"},rt={key:1},ct={key:2},ut={key:3,class:"mt-2"},mt={key:0,class:"badge bg-success"},ht={key:1,class:"badge bg-secondary"},bt={class:"col-md-6"},vt={class:"text-muted"},yt={key:0,class:"mt-3"},gt={class:"text-muted"},ft={key:1,class:"mt-3"},xt={class:"list-unstyled"},kt={class:"card"},wt={class:"card-header"},St={class:"card-body"},jt={class:"timeline"},Dt={class:"timeline-content"},Ct={key:0,class:"text-muted"},Ft={class:"timeline-content"},Mt={key:0,class:"text-muted"},Nt={class:"timeline-content"},Ot={key:0,class:"text-muted"},Pt={class:"timeline-content"},$t={key:0,class:"text-muted"},zt={class:"timeline-content"},Bt={key:0,class:"text-muted"},Et={class:"timeline-content"},Lt={key:0,class:"text-muted"},Tt={class:"col-md-4"},Vt={class:"card mb-4"},qt={class:"card-header"},Ut={class:"card-body"},At={class:"d-flex justify-content-between mb-2"},Gt={key:0,class:"d-flex justify-content-between mb-2"},It={class:"badge bg-primary"},Jt={key:1,class:"d-flex justify-content-between mb-2"},Ht={class:"badge bg-info"},Kt={key:2,class:"d-flex justify-content-between mb-2"},Qt={class:"d-flex justify-content-between mb-2"},Rt={class:"badge bg-secondary"},Wt={class:"d-flex justify-content-between mb-2"},Xt={class:"d-flex justify-content-between mb-2"},Yt={key:3,class:"d-flex justify-content-between mb-2"},Zt={key:4,class:"d-flex justify-content-between mb-2"},_t={class:"text-danger"},pt={class:"d-flex justify-content-between mb-2"},te={class:"d-flex justify-content-between mb-2"},ee={class:"text-success"},se={class:"d-flex justify-content-between"},ne={class:"text-warning"},ae={key:5,class:"mt-3"},le={class:"d-flex justify-content-between mb-2"},de={key:6,class:"mt-3"},ie={class:"d-flex justify-content-between mb-2"},oe={key:0,class:"card"},re={class:"card-header"},ce={class:"card-body"},ue={class:"text-muted"},me={key:0,class:"col-12 mt-4"},he={class:"card"},be={class:"card-header bg-success text-white"},ve={class:"mb-0"},ye={class:"card-body"},ge={class:"table-responsive"},fe={class:"table table-hover"},xe={class:"badge bg-success fs-6"},ke={class:"badge bg-secondary"},we={class:"text-muted"},Se=["href"],je={class:"table-light"},De={colspan:"2",class:"text-end"},Ce={colspan:"5"},Fe={class:"text-success"},Me={__name:"OrderShow",props:{order:Object,translations:Object,employees:Array,payments:Array},setup(e){const m=e,v=f(!1),y=f(!1);f(!1),V({status:m.order.status,assigned_employee_id:m.order.assigned_employee_id||"",paid_amount:m.order.paid_amount||"",scheduled_date:m.order.scheduled_date?z(m.order.scheduled_date):"",notes:m.order.notes||""});const P=()=>{v.value=!0},$=()=>{y.value=!0},S=i=>new Date(i).toLocaleDateString("ar-EG"),c=i=>new Date(i).toLocaleString("ar-EG"),z=i=>new Date(i).toISOString().slice(0,16),h=i=>i==="dollar"?"دولار":"دينار",B=i=>{const n=typeof i.details=="string"?JSON.parse(i.details):i.details,b=(n==null?void 0:n.payment_method)||"cash";return{cash:"نقدي",balance:"رصيد",transfer:"تحويل"}[b]||b},E=i=>{const n=typeof i.details=="string"?JSON.parse(i.details):i.details;return(n==null?void 0:n.notes)||""},L=()=>!m.payments||m.payments.length===0?"0.00":m.payments.reduce((n,b)=>n+parseFloat(b.amount),0).toFixed(2);return(i,n)=>(a(),x(A,null,{header:k(()=>[t("div",H,[t("h2",K,s(e.translations.order_details)+" #"+s(e.order.id),1),t("div",Q,[t("button",{onClick:P,class:"btn btn-primary"},[n[4]||(n[4]=t("i",{class:"bi bi-pencil"},null,-1)),u(" "+s(e.translations.update_status),1)]),t("button",{onClick:$,class:"btn btn-warning"},[n[5]||(n[5]=t("i",{class:"bi bi-calculator"},null,-1)),u(" "+s(e.translations.edit_pricing),1)]),t("a",{href:i.route("decoration.orders.print",e.order.id),target:"_blank",class:"btn btn-info"},[n[6]||(n[6]=t("i",{class:"bi bi-printer"},null,-1)),u(" "+s(e.translations.print_invoice),1)],8,R),q(w(U),{class:"btn btn-secondary",href:i.route("decorations.orders")},{default:k(()=>[n[7]||(n[7]=t("i",{class:"bi bi-arrow-left"},null,-1)),u(" "+s(e.translations.cancel),1)]),_:1},8,["href"])])])]),default:k(()=>{var b,g,j,D,C,F;return[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",_,[t("div",p,[t("h5",null,s(e.translations.order_details),1)]),t("div",tt,[t("div",et,[t("div",st,[t("h6",null,s(e.translations.decoration),1),t("p",null,[t("strong",null,s((b=e.order.decoration)==null?void 0:b.name),1)]),t("p",nt,s((g=e.order.decoration)==null?void 0:g.type_name),1),(j=e.order.decoration)!=null&&j.description?(a(),l("p",at,s(e.order.decoration.description),1)):d("",!0),t("div",lt,[t("span",dt,s(e.translations.duration)+": "+s((D=e.order.decoration)==null?void 0:D.duration_hours)+" "+s(e.translations.hours),1),t("span",it,s(e.translations.team_size)+": "+s((C=e.order.decoration)==null?void 0:C.team_size),1)]),t("h6",ot,s(e.translations.customer_details),1),t("p",null,[t("strong",null,s(e.order.customer_name),1)]),t("p",null,s(e.translations.phone)+": "+s(e.order.customer_phone),1),e.order.customer_email?(a(),l("p",rt,s(e.translations.email)+": "+s(e.order.customer_email),1)):d("",!0),(F=e.order.customer)!=null&&F.address?(a(),l("p",ct,s(e.translations.address)+": "+s(e.order.customer.address),1)):d("",!0),e.order.customer?(a(),l("div",ut,[e.order.customer.is_active?(a(),l("span",mt,s(e.translations.active_customer),1)):(a(),l("span",ht,s(e.translations.inactive_customer),1))])):d("",!0)]),t("div",bt,[t("h6",null,s(e.translations.event_details),1),t("p",null,[t("strong",null,s(e.translations.event_date)+":",1),u(" "+s(S(e.order.event_date)),1)]),t("p",null,[t("strong",null,s(e.translations.event_time)+":",1),u(" "+s(e.order.event_time),1)]),t("p",null,[t("strong",null,s(e.translations.guest_count)+":",1),u(" "+s(e.order.guest_count),1)]),t("p",null,[t("strong",null,s(e.translations.event_address)+":",1)]),t("p",vt,s(e.order.event_address),1),e.order.special_requests?(a(),l("div",yt,[t("h6",null,s(e.translations.special_requests),1),t("p",gt,s(e.order.special_requests),1)])):d("",!0),e.order.selected_items&&e.order.selected_items.length>0?(a(),l("div",ft,[t("h6",null,s(e.translations.selected_items),1),t("ul",xt,[(a(!0),l(M,null,N(e.order.selected_items,o=>(a(),l("li",{key:o,class:"text-muted"},[n[8]||(n[8]=t("i",{class:"bi bi-check-circle text-success me-2"},null,-1)),u(s(o),1)]))),128))])])):d("",!0)])])])]),t("div",kt,[t("div",wt,[t("h5",null,s(e.translations.order_timeline),1)]),t("div",St,[t("div",jt,[t("div",{class:r(["timeline-item",{active:e.order.created_at}])},[n[9]||(n[9]=t("div",{class:"timeline-marker bg-secondary"},null,-1)),t("div",Dt,[t("h6",null,s(e.translations.created),1),e.order.created_at?(a(),l("p",Ct,s(c(e.order.created_at)),1)):d("",!0)])],2),t("div",{class:r(["timeline-item",{active:e.order.received_at}])},[t("div",{class:r(["timeline-marker",e.order.received_at?"bg-info":"bg-light"])},null,2),t("div",Ft,[t("h6",null,s(e.translations.received),1),e.order.received_at?(a(),l("p",Mt,s(c(e.order.received_at)),1)):d("",!0)])],2),t("div",{class:r(["timeline-item",{active:e.order.executing_at}])},[t("div",{class:r(["timeline-marker",e.order.executing_at?"bg-primary":"bg-light"])},null,2),t("div",Nt,[t("h6",null,s(e.translations.executing),1),e.order.executing_at?(a(),l("p",Ot,s(c(e.order.executing_at)),1)):d("",!0)])],2),t("div",{class:r(["timeline-item",{active:e.order.partial_payment_at}])},[t("div",{class:r(["timeline-marker",e.order.partial_payment_at?"bg-warning":"bg-light"])},null,2),t("div",Pt,[t("h6",null,s(e.translations.partial_payment),1),e.order.partial_payment_at?(a(),l("p",$t,s(c(e.order.partial_payment_at)),1)):d("",!0)])],2),t("div",{class:r(["timeline-item",{active:e.order.full_payment_at}])},[t("div",{class:r(["timeline-marker",e.order.full_payment_at?"bg-success":"bg-light"])},null,2),t("div",zt,[t("h6",null,s(e.translations.full_payment),1),e.order.full_payment_at?(a(),l("p",Bt,s(c(e.order.full_payment_at)),1)):d("",!0)])],2),t("div",{class:r(["timeline-item",{active:e.order.completed_at}])},[t("div",{class:r(["timeline-marker",e.order.completed_at?"bg-success":"bg-light"])},null,2),t("div",Et,[t("h6",null,s(e.translations.completed),1),e.order.completed_at?(a(),l("p",Lt,s(c(e.order.completed_at)),1)):d("",!0)])],2)])])])]),t("div",Tt,[t("div",Vt,[t("div",qt,[t("h5",null,s(e.translations.order_summary),1)]),t("div",Ut,[t("div",At,[t("span",null,s(e.translations.status)+":",1),t("span",{class:r(["badge",`bg-${e.order.status_color}`])},s(e.order.status_name),3)]),e.order.assigned_employee?(a(),l("div",Gt,[t("span",null,s(e.translations.assigned_employee)+":",1),t("span",It,s(e.order.assigned_employee.name),1)])):d("",!0),e.order.assigned_team?(a(),l("div",Jt,[t("span",null,s(e.translations.assigned_team)+":",1),t("span",Ht,s(e.order.assigned_team.name),1)])):d("",!0),e.order.scheduled_date?(a(),l("div",Kt,[t("span",null,s(e.translations.scheduled_date)+":",1),t("span",null,s(S(e.order.scheduled_date)),1)])):d("",!0),t("div",Qt,[t("span",null,s(e.translations.order_id)+":",1),t("span",Rt,"#"+s(e.order.id),1)]),t("div",Wt,[t("span",null,s(e.translations.created_at)+":",1),t("span",null,s(c(e.order.created_at)),1)]),n[10]||(n[10]=t("hr",null,null,-1)),t("div",Xt,[t("span",null,s(e.translations.base_price)+":",1),t("span",null,s(e.order.base_price)+" "+s(h(e.order.currency)),1)]),e.order.additional_cost>0?(a(),l("div",Yt,[t("span",null,s(e.translations.additional_cost)+":",1),t("span",null,s(e.order.additional_cost)+" "+s(h(e.order.currency)),1)])):d("",!0),e.order.discount>0?(a(),l("div",Zt,[t("span",null,s(e.translations.discount)+":",1),t("span",_t,"-"+s(e.order.discount)+" "+s(h(e.order.currency)),1)])):d("",!0),n[11]||(n[11]=t("hr",null,null,-1)),t("div",pt,[t("strong",null,s(e.translations.total_price)+":",1),t("strong",null,s(e.order.total_price)+" "+s(h(e.order.currency)),1)]),t("div",te,[t("span",null,s(e.translations.paid_amount)+":",1),t("span",ee,s(e.order.paid_amount||0)+" "+s(h(e.order.currency)),1)]),t("div",se,[t("span",null,s(e.translations.remaining_amount)+":",1),t("span",ne,s(e.order.total_price-(e.order.paid_amount||0))+" "+s(h(e.order.currency)),1)]),e.order.paid_at?(a(),l("div",ae,[t("div",le,[t("span",null,s(e.translations.paid_at)+":",1),t("span",null,s(c(e.order.paid_at)),1)])])):d("",!0),e.order.completed_at?(a(),l("div",de,[t("div",ie,[t("span",null,s(e.translations.completed_at)+":",1),t("span",null,s(c(e.order.completed_at)),1)])])):d("",!0)])]),e.order.notes?(a(),l("div",oe,[t("div",re,[t("h5",null,s(e.translations.notes),1)]),t("div",ce,[t("p",ue,s(e.order.notes),1)])])):d("",!0)]),e.payments&&e.payments.length>0?(a(),l("div",me,[t("div",he,[t("div",be,[t("h5",ve,[n[12]||(n[12]=t("i",{class:"bi bi-cash-stack"},null,-1)),u(" "+s(e.translations.payments||"الدفعات"),1)])]),t("div",ye,[t("div",ge,[t("table",fe,[t("thead",null,[t("tr",null,[n[13]||(n[13]=t("th",null,"#",-1)),t("th",null,s(e.translations.date||"التاريخ"),1),t("th",null,s(e.translations.amount||"المبلغ"),1),t("th",null,s(e.translations.currency||"العملة"),1),t("th",null,s(e.translations.payment_method||"طريقة الدفع"),1),t("th",null,s(e.translations.notes||"ملاحظات"),1),t("th",null,s(e.translations.actions||"إجراءات"),1)])]),t("tbody",null,[(a(!0),l(M,null,N(e.payments,(o,T)=>(a(),l("tr",{key:o.id},[t("td",null,s(T+1),1),t("td",null,s(c(o.created_at)),1),t("td",null,[t("span",xe,s(parseFloat(o.amount).toFixed(2)),1)]),t("td",null,[t("span",{class:r(["badge",o.currency==="USD"?"bg-primary":"bg-info"])},s(o.currency==="USD"?"دولار":"دينار"),3)]),t("td",null,[t("span",ke,s(B(o)),1)]),t("td",null,[t("small",we,s(E(o)||"-"),1)]),t("td",null,[t("a",{href:i.route("decoration.payments.receipt",o.id),target:"_blank",class:"btn btn-sm btn-outline-primary"},[n[14]||(n[14]=t("i",{class:"bi bi-printer"},null,-1)),u(" "+s(e.translations.print||"طباعة"),1)],8,Se)])]))),128))]),t("tfoot",null,[t("tr",je,[t("td",De,[t("strong",null,s(e.translations.total||"المجموع")+":",1)]),t("td",Ce,[t("strong",Fe,s(L())+" "+s(h(e.order.currency)),1)])])])])])])])])):d("",!0)])])]),v.value?(a(),x(G,{key:0,order:e.order,employees:e.employees,translations:e.translations,onClose:n[0]||(n[0]=o=>v.value=!1),onSuccess:n[1]||(n[1]=o=>{v.value=!1,w(O).reload()})},null,8,["order","employees","translations"])):d("",!0),y.value?(a(),x(I,{key:1,order:e.order,translations:e.translations,onClose:n[2]||(n[2]=o=>y.value=!1),onSuccess:n[3]||(n[3]=o=>{y.value=!1,w(O).reload()})},null,8,["order","translations"])):d("",!0)]}),_:1}))}},Be=J(Me,[["__scopeId","data-v-78c3469b"]]);export{Be as default};
