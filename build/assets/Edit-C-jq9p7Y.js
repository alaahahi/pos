import{r as f,T as h,a as i,h as w,w as g,b as s,t as r,j as y,l as d,x as u,u as t,i as p,A as x,c as m,f as k,F as V,v as E,e as _,d as U}from"./app-3XmFid0x.js";import{_ as N}from"./AuthenticatedLayout-CB5i1jAM.js";import{_ as b}from"./InputError-BlSIuM29.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"section dashboard"},S={class:"row"},T={class:"col-lg-12"},A={class:"card"},B={class:"card-body"},C={class:"card-title"},D={class:"row mb-3"},M={for:"inputText",class:"col-sm-2 col-form-label"},j={class:"col-sm-10"},O={class:"row mb-3"},P={for:"inputEmail",class:"col-sm-2 col-form-label"},F={class:"col-sm-10"},$={class:"row mb-3"},I={for:"inputPassword",class:"col-sm-2 col-form-label"},L={class:"col-sm-10"},q={class:"row mb-3"},z={for:"inputDate",class:"col-sm-2 col-form-label"},G={class:"col-sm-10"},H={value:"",disabled:""},J=["value"],K={class:"row mb-3"},Q={class:"col-sm-10"},W={class:"form-check form-switch mb-2"},X={class:"input-group"},Y=["disabled"],Z={class:"row mb-3"},ss={for:"inputDate",class:"col-sm-2 col-form-label"},es={class:"col-sm-10"},os={class:"row mb-3"},ts={for:"inputNumber",class:"col-sm-2 col-form-label"},as={class:"col-sm-10"},ls=["src"],rs=["value"],ns={class:"text-center"},is=["disabled"],ds={key:0,class:"bi bi-save"},cs={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},vs={__name:"Edit",props:{user:Object,userRoles:Array,roles:Object,translations:Array},setup(l){const n=l,c=f(!1),o=h({avatar:null,name:n.user.name,email:n.user.email,password:n.user.password,created_at:n.user.created_at,selectedRoles:n.userRoles,commission_enabled:!!n.user.commission_enabled,commission_rate_percent:n.user.commission_rate_percent||0}),v=()=>{c.value=!0,o.post(route("users.update",{user:n.user.id}),{onSuccess:()=>{c.value=!1},onError:()=>{c.value=!1}})};return(ms,e)=>(i(),w(N,{translations:l.translations},{default:g(()=>[s("section",R,[s("div",S,[s("div",T,[s("div",A,[s("div",B,[s("h5",C,r(l.translations.edit_user_info),1),s("form",{onSubmit:y(v,["prevent"]),class:"row g-3",method:"POST"},[s("div",D,[s("label",M,r(l.translations.name),1),s("div",j,[d(s("input",{type:"text",class:"form-control",placeholder:"user name","onUpdate:modelValue":e[0]||(e[0]=a=>t(o).name=a)},null,512),[[u,t(o).name]]),p(b,{message:t(o).errors.name},null,8,["message"])])]),s("div",O,[s("label",P,r(l.translations.email),1),s("div",F,[d(s("input",{type:"email",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>t(o).email=a),placeholder:"user Email"},null,512),[[u,t(o).email]]),p(b,{message:t(o).errors.email},null,8,["message"])])]),s("div",$,[s("label",I,r(l.translations.password),1),s("div",L,[d(s("input",{type:"password",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>t(o).password=a),placeholder:"Password"},null,512),[[u,t(o).password]]),p(b,{message:t(o).errors.password},null,8,["message"])])]),s("div",q,[s("label",z,r(l.translations.role),1),s("div",G,[d(s("select",{class:"form-control",multiple:"","onUpdate:modelValue":e[3]||(e[3]=a=>t(o).selectedRoles=a)},[s("option",H,r(l.translations.role),1),(i(!0),m(V,null,k(l.roles,a=>(i(),m("option",{key:a,value:a},r(a),9,J))),128))],512),[[x,t(o).selectedRoles]])])]),s("div",K,[e[11]||(e[11]=s("label",{class:"col-sm-2 col-form-label"},"عمولة الديكورات",-1)),s("div",Q,[s("div",W,[d(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>t(o).commission_enabled=a),id:"commissionEnabled"},null,512),[[E,t(o).commission_enabled]]),e[8]||(e[8]=s("label",{class:"form-check-label",for:"commissionEnabled"},"تفعيل نسبة العمولة",-1))]),s("div",X,[d(s("input",{type:"number",step:"0.01",min:"0",max:"100",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>t(o).commission_rate_percent=a),disabled:!t(o).commission_enabled,placeholder:"% نسبة العمولة (مثال: 5)"},null,8,Y),[[u,t(o).commission_rate_percent]]),e[9]||(e[9]=s("span",{class:"input-group-text"},"%",-1))]),e[10]||(e[10]=s("small",{class:"text-muted"},"تحسب العمولة من سعر المبيع النهائي للديكور.",-1))])]),s("div",Z,[s("label",ss,r(l.translations.created_at),1),s("div",es,[d(s("input",{type:"date",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>t(o).created_at=a),disabled:""},null,512),[[u,t(o).created_at]])])]),s("div",os,[s("label",ts,r(l.translations.avatar),1),s("div",as,[s("input",{type:"file",onInput:e[7]||(e[7]=a=>t(o).avatar=a.target.files[0])},null,32),n.user.avatar?(i(),m("img",{key:0,src:n.user.avatar,alt:"Current Avatar",class:"img-thumbnail",width:"80"},null,8,ls)):_("",!0),t(o).progress?(i(),m("progress",{key:1,value:t(o).progress.percentage,max:"100"},r(t(o).progress.percentage)+"% ",9,rs)):_("",!0)])]),s("div",ns,[s("button",{type:"submit",class:"btn btn-primary",disabled:c.value},[U(r(l.translations.update)+"   ",1),c.value?_("",!0):(i(),m("i",ds)),c.value?(i(),m("span",cs)):_("",!0)],8,is)])],32)])])])])])]),_:1},8,["translations"]))}};export{vs as default};
