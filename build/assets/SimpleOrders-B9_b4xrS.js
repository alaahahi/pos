import{Q as lt,r as C,z as P,k as S,a as n,h as Q,w as v,b as t,t as o,i as F,d as r,u as y,p as V,l as f,x as ot,A as h,c as a,f as T,F as $,n as R,e as u,j as nt,g as z}from"./app-B3NhGAw2.js";import{A as it}from"./AuthenticatedLayout-Cw9dI_VR.js";import{_ as at}from"./Pagination-sTSjpq9U.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const rt={class:"d-flex justify-content-between align-items-center"},ct={class:"font-semibold text-xl text-gray-800 leading-tight"},ut={class:"d-flex gap-2"},mt={class:"py-4"},pt={class:"container-fluid"},bt={class:"row mb-4"},vt={class:"col-md-3"},yt={class:"stat-card bg-primary"},ft={class:"stat-content"},gt={class:"col-md-3"},_t={class:"stat-card bg-warning"},ht={class:"stat-content"},xt={class:"col-md-3"},kt={class:"stat-card bg-success"},wt={class:"stat-content"},Ct={class:"col-md-3"},St={class:"stat-card bg-info"},Ft={class:"stat-content"},Vt={class:"card mb-4 shadow-sm"},Tt={class:"card-body"},$t={class:"row g-3"},Et={class:"col-md-5"},Nt={class:"search-box"},jt={class:"col-md-3"},Dt={class:"col-md-2"},Ot=["value"],Ut={class:"card shadow-sm"},It={class:"card-body p-0"},At={class:"table-responsive"},Bt={class:"table table-hover table-excel mb-0"},Mt={class:"text-center fw-bold text-muted"},Lt={class:"d-flex align-items-center"},Pt={class:"text-muted"},Qt={class:"text-muted"},Rt={key:0,class:"employee-badge"},zt={key:1,class:"text-muted"},Gt={class:"price-cell"},qt={class:"text-primary"},Ht={class:"d-block text-muted"},Jt={class:"price-cell"},Kt={class:"text-success"},Wt={class:"d-block text-muted"},Xt={class:"price-cell"},Yt={class:"d-block text-muted"},Zt={class:"date-cell"},ts={class:"text-muted"},ss={class:"text-center"},es={class:"btn-group-sm",role:"group"},ls=["href"],os=["onClick"],ns={key:0,class:"table-footer-excel"},is={class:"text-primary"},as={class:"text-success"},ds={class:"text-danger"},rs={key:0,class:"text-center py-5"},cs={key:0,class:"card-footer bg-light"},us={class:"d-flex justify-content-between align-items-center"},ms={class:"text-muted"},ps={class:"modal-content-custom"},bs={class:"modal-header-custom"},vs={class:"modal-body-custom"},ys={class:"row g-3"},fs={class:"col-md-6"},gs={class:"col-md-6"},_s=["value"],hs={class:"modal-footer-custom"},xs={key:0,class:"spinner-border spinner-border-sm me-2"},ks={__name:"SimpleOrders",props:{orders:Object,filters:Object,translations:Object,employees:Array},setup(i){var O,U,I;const E=lt(),c=i,x=l=>E.props.auth_permissions&&E.props.auth_permissions.includes(l),p=C(!1),k=C(null),g=C(!1),d=P({search:((O=c.filters)==null?void 0:O.search)||"",status:((U=c.filters)==null?void 0:U.status)||"",employee:((I=c.filters)==null?void 0:I.employee)||""}),m=P({status:"",assigned_employee_id:""}),G=S(()=>c.orders.data.filter(l=>["created","received","executing"].includes(l.status)).length),q=S(()=>c.orders.data.filter(l=>l.status==="completed").length),H=S(()=>c.orders.data.filter(l=>["full_payment","completed"].includes(l.status)).reduce((l,s)=>l+(s.total_price||0),0)),N=(()=>{let l;return()=>{clearTimeout(l),l=setTimeout(()=>_(),500)}})(),_=()=>{z.get(route("decorations.orders.simple"),d,{preserveState:!0,replace:!0})},J=()=>{d.search="",d.status="",d.employee="",_()},K=l=>{k.value=l,m.status=l.status,m.assigned_employee_id=l.assigned_employee_id||"",p.value=!0},W=()=>{g.value=!0,z.patch(route("decoration.orders.status",k.value.id),m,{onSuccess:()=>{g.value=!1,p.value=!1},onError:()=>{g.value=!1}})},b=l=>new Intl.NumberFormat("ar-EG").format(l||0),X=l=>"$"+new Intl.NumberFormat("en-US").format(l||0),Y=l=>new Date(l).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}),w=l=>l==="dollar"?"$":"IQD",Z=l=>l.total_price-(l.paid_amount||0)>0?"text-danger":"text-success",tt=l=>({created:"ğŸ“ Ø¥Ù†Ø´Ø§Ø¡",received:"ğŸ“¥ Ø§Ø³ØªÙ„Ø§Ù…",executing:"âš™ï¸ ØªÙ†ÙÙŠØ°",partial_payment:"ğŸ’° Ø¯ÙØ¹ Ø¬Ø²Ø¦ÙŠ",full_payment:"ğŸ’µ Ø¯ÙØ¹ ÙƒØ§Ù…Ù„",completed:"âœ… Ù…ÙƒØªÙ…Ù„",cancelled:"âŒ Ù…Ù„ØºÙŠ"})[l]||l,j=()=>c.orders.data.reduce((l,s)=>l+(s.total_price||0),0),D=()=>c.orders.data.reduce((l,s)=>l+(s.paid_amount||0),0),st=()=>j()-D();return(l,s)=>(n(),Q(it,null,{header:v(()=>[t("div",rt,[t("h2",ct," ğŸ“‹ "+o(i.translations.decoration_orders||"Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¯ÙŠÙƒÙˆØ±"),1),t("div",ut,[F(y(V),{class:"btn btn-success",href:l.route("decoration.orders.create")},{default:v(()=>s[9]||(s[9]=[t("i",{class:"bi bi-plus-circle"},null,-1),r(" Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ")])),_:1},8,["href"]),F(y(V),{class:"btn btn-primary",href:l.route("decorations.index")},{default:v(()=>[s[10]||(s[10]=t("i",{class:"bi bi-arrow-left"},null,-1)),r(" "+o(i.translations.back||"Ø±Ø¬ÙˆØ¹"),1)]),_:1},8,["href"])])])]),default:v(()=>{var A,B;return[t("div",mt,[t("div",pt,[t("div",bt,[t("div",vt,[t("div",yt,[s[12]||(s[12]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-list-check"})],-1)),t("div",ft,[t("h3",null,o(i.orders.total||0),1),s[11]||(s[11]=t("p",null,"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",-1))])])]),t("div",gt,[t("div",_t,[s[14]||(s[14]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-clock-history"})],-1)),t("div",ht,[t("h3",null,o(G.value),1),s[13]||(s[13]=t("p",null,"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",-1))])])]),t("div",xt,[t("div",kt,[s[16]||(s[16]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",wt,[t("h3",null,o(q.value),1),s[15]||(s[15]=t("p",null,"Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©",-1))])])]),t("div",Ct,[t("div",St,[s[18]||(s[18]=t("div",{class:"stat-icon"},[t("i",{class:"bi bi-cash-stack"})],-1)),t("div",Ft,[t("h3",null,o(X(H.value)),1),s[17]||(s[17]=t("p",null,"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª",-1))])])])]),t("div",Vt,[t("div",Tt,[t("div",$t,[t("div",Et,[t("div",Nt,[s[19]||(s[19]=t("i",{class:"bi bi-search search-icon"},null,-1)),f(t("input",{type:"text",class:"form-control ps-5","onUpdate:modelValue":s[0]||(s[0]=e=>d.search=e),onInput:s[1]||(s[1]=(...e)=>y(N)&&y(N)(...e)),placeholder:"ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†ØŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙØŒ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¯ÙŠÙƒÙˆØ±..."},null,544),[[ot,d.search]])])]),t("div",jt,[f(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=e=>d.status=e),onChange:_},s[20]||(s[20]=[t("option",{value:""},"ğŸ“Š ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª",-1),t("option",{value:"created"},"ğŸ“ ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡",-1),t("option",{value:"received"},"ğŸ“¥ ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…",-1),t("option",{value:"executing"},"âš™ï¸ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",-1),t("option",{value:"partial_payment"},"ğŸ’° Ø¯ÙØ¹Ø© Ø¬Ø²Ø¦ÙŠØ©",-1),t("option",{value:"full_payment"},"ğŸ’µ Ø¯ÙØ¹Ø© ÙƒØ§Ù…Ù„Ø©",-1),t("option",{value:"completed"},"âœ… Ù…ÙƒØªÙ…Ù„",-1),t("option",{value:"cancelled"},"âŒ Ù…Ù„ØºÙŠ",-1)]),544),[[h,d.status]])]),t("div",Dt,[f(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=e=>d.employee=e),onChange:_},[s[21]||(s[21]=t("option",{value:""},"ğŸ‘¤ ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†",-1)),(n(!0),a($,null,T(i.employees,e=>(n(),a("option",{key:e.id,value:e.id},o(e.name),9,Ot))),128))],544),[[h,d.employee]])]),t("div",{class:"col-md-2"},[t("button",{class:"btn btn-outline-secondary w-100",onClick:J},s[22]||(s[22]=[t("i",{class:"bi bi-arrow-clockwise"},null,-1),r(" Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ")]))])])])]),t("div",Ut,[t("div",It,[t("div",At,[t("table",Bt,[s[37]||(s[37]=t("thead",{class:"table-header-excel"},[t("tr",null,[t("th",{style:{width:"60px"}},"#"),t("th",{style:{"min-width":"200px"}},"ğŸ“¦ Ø§Ø³Ù… Ø§Ù„Ø¯ÙŠÙƒÙˆØ±"),t("th",{style:{"min-width":"180px"}},"ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"),t("th",{style:{"min-width":"150px"}},"ğŸ”§ Ø§Ù„Ù…Ù†Ø¬Ø²"),t("th",{style:{"min-width":"120px"}},"ğŸ’µ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙƒÙ„ÙŠ"),t("th",{style:{"min-width":"120px"}},"ğŸ’° Ø§Ù„Ù…Ø¯ÙÙˆØ¹"),t("th",{style:{"min-width":"120px"}},"ğŸ“Š Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"),t("th",{style:{"min-width":"130px"}},"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©"),t("th",{style:{"min-width":"120px"}},"âœ¨ Ø§Ù„Ø­Ø§Ù„Ø©"),t("th",{style:{"min-width":"150px","text-align":"center"}},"âš¡ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª")])],-1)),t("tbody",null,[(n(!0),a($,null,T(i.orders.data,(e,et)=>{var M,L;return n(),a("tr",{key:e.id,class:"table-row-excel"},[t("td",Mt,o(et+1+(i.orders.current_page-1)*i.orders.per_page),1),t("td",null,[t("div",Lt,[s[24]||(s[24]=t("div",{class:"decoration-icon"},"ğŸ¨",-1)),t("div",null,[t("strong",null,o(((M=e.decoration)==null?void 0:M.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"),1),s[23]||(s[23]=t("br",null,null,-1)),t("small",Pt,o(((L=e.decoration)==null?void 0:L.type_name)||""),1)])])]),t("td",null,[t("div",null,[t("strong",null,o(e.customer_name),1),s[26]||(s[26]=t("br",null,null,-1)),t("small",Qt,[s[25]||(s[25]=t("i",{class:"bi bi-telephone"},null,-1)),r(" "+o(e.customer_phone),1)])])]),t("td",null,[e.assigned_employee?(n(),a("span",Rt,[s[27]||(s[27]=t("i",{class:"bi bi-person-check"},null,-1)),r(" "+o(e.assigned_employee.name),1)])):(n(),a("span",zt,s[28]||(s[28]=[t("i",{class:"bi bi-person-x"},null,-1),r(" ØºÙŠØ± Ù…Ø¹ÙŠÙ† ")])))]),t("td",null,[t("div",Gt,[t("strong",qt,o(b(e.total_price)),1),t("small",Ht,o(w(e.currency)),1)])]),t("td",null,[t("div",Jt,[t("strong",Kt,o(b(e.paid_amount||0)),1),t("small",Wt,o(w(e.currency)),1)])]),t("td",null,[t("div",Xt,[t("strong",{class:R(Z(e))},o(b(e.total_price-(e.paid_amount||0))),3),t("small",Yt,o(w(e.currency)),1)])]),t("td",null,[t("div",Zt,[s[30]||(s[30]=t("i",{class:"bi bi-calendar-event"},null,-1)),r(" "+o(Y(e.event_date))+" ",1),s[31]||(s[31]=t("br",null,null,-1)),t("small",ts,[s[29]||(s[29]=t("i",{class:"bi bi-clock"},null,-1)),r(" "+o(e.event_time||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"),1)])])]),t("td",null,[t("span",{class:R(["status-badge",`status-${e.status}`])},o(tt(e.status)),3)]),t("td",ss,[t("div",es,[x("read decoration")?(n(),Q(y(V),{key:0,href:l.route("decoration.orders.show",e.id),class:"btn btn-sm btn-outline-primary",title:"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„"},{default:v(()=>s[32]||(s[32]=[t("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"])):u("",!0),x("read decoration")?(n(),a("a",{key:1,href:l.route("decoration.orders.print",e.id),target:"_blank",class:"btn btn-sm btn-outline-info",title:"Ø·Ø¨Ø§Ø¹Ø©"},s[33]||(s[33]=[t("i",{class:"bi bi-printer"},null,-1)]),8,ls)):u("",!0),x("update decoration")?(n(),a("button",{key:2,onClick:ws=>K(e),class:"btn btn-sm btn-outline-warning",title:"ØªØ¹Ø¯ÙŠÙ„ Ø³Ø±ÙŠØ¹"},s[34]||(s[34]=[t("i",{class:"bi bi-pencil"},null,-1)]),8,os)):u("",!0)])])])}),128))]),i.orders.data.length>0?(n(),a("tfoot",ns,[t("tr",null,[s[35]||(s[35]=t("td",{colspan:"4",class:"text-end fw-bold"},"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:",-1)),t("td",null,[t("strong",is,o(b(j())),1)]),t("td",null,[t("strong",as,o(b(D())),1)]),t("td",null,[t("strong",ds,o(b(st())),1)]),s[36]||(s[36]=t("td",{colspan:"3"},null,-1))])])):u("",!0)])]),i.orders.data.length===0?(n(),a("div",rs,s[38]||(s[38]=[t("div",{class:"empty-state"},[t("i",{class:"bi bi-inbox"}),t("h4",null,"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª"),t("p",{class:"text-muted"},"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø·Ù„Ø¨Ø§Øª Ø¯ÙŠÙƒÙˆØ±.")],-1)]))):u("",!0)]),i.orders.data.length>0?(n(),a("div",cs,[t("div",us,[t("div",ms," Ø¹Ø±Ø¶ "+o(i.orders.from)+" - "+o(i.orders.to)+" Ù…Ù† Ø£ØµÙ„ "+o(i.orders.total)+" Ø·Ù„Ø¨ ",1),F(at,{links:i.orders.links},null,8,["links"])])])):u("",!0)])])]),p.value?(n(),a("div",{key:0,class:"modal-overlay",onClick:s[8]||(s[8]=nt(e=>p.value=!1,["self"]))},[t("div",ps,[t("div",bs,[t("h5",null,"âš¡ ØªØ¹Ø¯ÙŠÙ„ Ø³Ø±ÙŠØ¹ - "+o((B=(A=k.value)==null?void 0:A.decoration)==null?void 0:B.name),1),t("button",{onClick:s[4]||(s[4]=e=>p.value=!1),class:"btn-close-custom"},"Ã—")]),t("div",vs,[t("div",ys,[t("div",fs,[s[40]||(s[40]=t("label",{class:"form-label"},"Ø§Ù„Ø­Ø§Ù„Ø©",-1)),f(t("select",{class:"form-select","onUpdate:modelValue":s[5]||(s[5]=e=>m.status=e)},s[39]||(s[39]=[t("option",{value:"created"},"ğŸ“ ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡",-1),t("option",{value:"received"},"ğŸ“¥ ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…",-1),t("option",{value:"executing"},"âš™ï¸ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",-1),t("option",{value:"partial_payment"},"ğŸ’° Ø¯ÙØ¹Ø© Ø¬Ø²Ø¦ÙŠØ©",-1),t("option",{value:"full_payment"},"ğŸ’µ Ø¯ÙØ¹Ø© ÙƒØ§Ù…Ù„Ø©",-1),t("option",{value:"completed"},"âœ… Ù…ÙƒØªÙ…Ù„",-1),t("option",{value:"cancelled"},"âŒ Ù…Ù„ØºÙŠ",-1)]),512),[[h,m.status]])]),t("div",gs,[s[42]||(s[42]=t("label",{class:"form-label"},"Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø¹ÙŠÙ†",-1)),f(t("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=e=>m.assigned_employee_id=e)},[s[41]||(s[41]=t("option",{value:""},"Ø§Ø®ØªØ± Ù…ÙˆØ¸Ù",-1)),(n(!0),a($,null,T(i.employees,e=>(n(),a("option",{key:e.id,value:e.id},o(e.name),9,_s))),128))],512),[[h,m.assigned_employee_id]])])])]),t("div",hs,[t("button",{onClick:s[7]||(s[7]=e=>p.value=!1),class:"btn btn-secondary"},"Ø¥Ù„ØºØ§Ø¡"),t("button",{onClick:W,class:"btn btn-primary"},[g.value?(n(),a("span",xs)):u("",!0),s[43]||(s[43]=r(" Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª "))])])])])):u("",!0)]}),_:1}))}},Ts=dt(ks,[["__scopeId","data-v-28b0d2ce"]]);export{Ts as default};
