import{s as Z,r as k,B as rt,a as r,c as O,w as E,e as u,b as t,d as c,t as e,l as w,y as z,A as Q,v as ct,f as v,D as dt,E as ut,Q as bt,x as mt,h as M,i as H,u as D,p as R,n as T,F as X,g as Y}from"./app-DRzDNF4B.js";import{_ as ht}from"./AuthenticatedLayout-BqMLf6Qf.js";import{_ as vt}from"./Pagination-BSkNGIzS.js";/* empty css                                                                       */import{_ as pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as C}from"./sweetalert2.esm.all-DwEdJQJv.js";import{l as W}from"./lodash-CbtpeFvS.js";const ft={key:0,class:"modal-mask"},gt={class:"modal-wrapper max-h-[80vh]"},_t={class:"modal-container"},yt={class:"modal-header"},xt={class:"text-primary"},kt={class:"modal-body"},wt={class:"row g-3"},$t={class:"col-12"},Ct={class:"alert alert-info"},qt={class:"col-md-6"},St={for:"price_cost",class:"form-label"},Bt=["placeholder"],Ft={class:"col-md-6"},Vt={for:"price",class:"form-label"},Ut=["placeholder"],Pt={class:"col-md-6"},Dt={for:"quantity",class:"form-label"},Tt=["placeholder"],Et={class:"col-md-6"},It={class:"col-md-6"},jt={for:"date",class:"form-label"},At={class:"col-md-6"},Lt={class:"form-control-plaintext bg-light p-2 rounded"},Mt={class:"col-12"},Ot={class:"form-check"},zt={class:"text-muted"},Nt={class:"modal-footer"},Rt={class:"d-flex w-100 gap-2"},Qt=["disabled"],Gt=["disabled"],Ht={key:0,class:"spinner-border spinner-border-sm me-2"},Jt={key:1,class:"bi bi-check-circle"},Kt={__name:"ModalPurchasesProduct",props:{show:Boolean,data:Object,accounts:Array,translations:Array},emits:["close","success"],setup(a,{emit:m}){const q=a,y=m,g=Z(),l=k({date:S(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}),_=k(!1);function S(){const d=new Date,n=d.getFullYear(),V=String(d.getMonth()+1).padStart(2,"0"),U=String(d.getDate()).padStart(2,"0");return`${n}-${V}-${U}`}const p=()=>{l.value={date:S(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}};rt(()=>q.data,d=>{d&&d.id&&(l.value.price_cost=d.price_cost||0,l.value.price=d.price||0,l.value.quantity=0)},{immediate:!0});const B=async()=>{if(!q.data||!q.data.id){g.error("Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†ØªØ¬");return}if(l.value.quantity<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ…ÙŠØ© Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±");return}if(l.value.price_cost<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ©");return}if(l.value.price<=0){g.error("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹");return}_.value=!0;try{console.log("Sending data:",{product_id:q.data.id,quantity:l.value.quantity,price_cost:l.value.price_cost,price:l.value.price,date:l.value.date,withdraw_from_box:l.value.withdraw_from_box,currency:l.value.currency});const d=await ut.post("api/products/process-purchase",{product_id:q.data.id,quantity:l.value.quantity,price_cost:l.value.price_cost,price:l.value.price,date:l.value.date,withdraw_from_box:l.value.withdraw_from_box,currency:l.value.currency});d.data.success?(g.success(d.data.message),y("success",d.data),y("close"),p()):g.error(d.data.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©")}catch(d){console.error("Purchase error:",d),d.response&&d.response.data&&d.response.data.message?g.error(d.response.data.message):g.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª")}finally{_.value=!1}},N=()=>(l.value.quantity*l.value.price_cost).toFixed(2);return(d,n)=>(r(),O(dt,{name:"modal"},{default:E(()=>{var V,U,I,j,A;return[a.show?(r(),u("div",ft,[t("div",gt,[t("div",_t,[t("div",yt,[t("h3",xt,[n[7]||(n[7]=t("i",{class:"bi bi-cart-plus"},null,-1)),c(" Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±ÙŠØ§Øª - "+e(((V=a.data)==null?void 0:V.name)||"Ù…Ù†ØªØ¬"),1)])]),t("div",kt,[t("div",wt,[t("div",$t,[t("div",Ct,[n[8]||(n[8]=t("strong",null,"Ø§Ù„Ù…Ù†ØªØ¬:",-1)),c(" "+e(((U=a.data)==null?void 0:U.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"),1),n[9]||(n[9]=t("br",null,null,-1)),n[10]||(n[10]=t("strong",null,"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:",-1)),c(" "+e(((I=a.data)==null?void 0:I.quantity)||0),1),n[11]||(n[11]=t("br",null,null,-1)),n[12]||(n[12]=t("strong",null,"Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠ:",-1)),c(" "+e(((j=a.data)==null?void 0:j.price_cost)||0),1),n[13]||(n[13]=t("br",null,null,-1)),n[14]||(n[14]=t("strong",null,"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:",-1)),c(" "+e(((A=a.data)==null?void 0:A.price)||0),1)])]),t("div",qt,[t("label",St,[n[15]||(n[15]=t("i",{class:"bi bi-currency-dollar"},null,-1)),c(" "+e(a.translations.price_cost),1)]),w(t("input",{id:"price_cost",type:"number",step:"0.01",class:"form-control",placeholder:a.translations.price_cost,"onUpdate:modelValue":n[0]||(n[0]=f=>l.value.price_cost=f),required:""},null,8,Bt),[[z,l.value.price_cost]])]),t("div",Ft,[t("label",Vt,[n[16]||(n[16]=t("i",{class:"bi bi-tag"},null,-1)),c(" "+e(a.translations.price),1)]),w(t("input",{id:"price",type:"number",step:"0.01",class:"form-control",placeholder:a.translations.price,"onUpdate:modelValue":n[1]||(n[1]=f=>l.value.price=f),required:""},null,8,Ut),[[z,l.value.price]])]),t("div",Pt,[t("label",Dt,[n[17]||(n[17]=t("i",{class:"bi bi-box"},null,-1)),c(" "+e(a.translations.quantity),1)]),w(t("input",{id:"quantity",type:"number",min:"1",class:"form-control",placeholder:a.translations.quantity,"onUpdate:modelValue":n[2]||(n[2]=f=>l.value.quantity=f),required:""},null,8,Tt),[[z,l.value.quantity]])]),t("div",Et,[n[19]||(n[19]=t("label",{for:"currency",class:"form-label"},[t("i",{class:"bi bi-currency-exchange"}),c(" Ø§Ù„Ø¹Ù…Ù„Ø© ")],-1)),w(t("select",{id:"currency",class:"form-control","onUpdate:modelValue":n[3]||(n[3]=f=>l.value.currency=f)},n[18]||(n[18]=[t("option",{value:"IQD"},"Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ",-1),t("option",{value:"$"},"Ø¯ÙˆÙ„Ø§Ø±",-1)]),512),[[Q,l.value.currency]])]),t("div",It,[t("label",jt,[n[20]||(n[20]=t("i",{class:"bi bi-calendar"},null,-1)),c(" "+e(a.translations.date),1)]),w(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":n[4]||(n[4]=f=>l.value.date=f),required:""},null,512),[[z,l.value.date]])]),t("div",At,[n[21]||(n[21]=t("label",{class:"form-label"},[t("i",{class:"bi bi-calculator"}),c(" Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ© ")],-1)),t("div",Lt,[t("strong",null,e(N())+" "+e(l.value.currency),1)])]),t("div",Mt,[t("div",Ot,[w(t("input",{class:"form-check-input",type:"checkbox",id:"withdraw_from_box","onUpdate:modelValue":n[5]||(n[5]=f=>l.value.withdraw_from_box=f)},null,512),[[ct,l.value.withdraw_from_box]]),n[22]||(n[22]=t("label",{class:"form-check-label",for:"withdraw_from_box"},[t("i",{class:"bi bi-wallet2"}),c(" Ø³Ø­Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ")],-1))]),t("small",zt," Ø¹Ù†Ø¯ ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø±ØŒ Ø³ÙŠØªÙ… Ø³Ø­Ø¨ "+e(N())+" "+e(l.value.currency)+" Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ",1)])])]),t("div",Nt,[t("div",Rt,[t("button",{class:"btn btn-secondary flex-fill",onClick:n[6]||(n[6]=f=>d.$emit("close")),disabled:_.value},n[23]||(n[23]=[t("i",{class:"bi bi-x-circle"},null,-1),c(" Ø¥Ù„ØºØ§Ø¡ ")]),8,Qt),t("button",{class:"btn btn-primary flex-fill",onClick:B,disabled:_.value||l.value.quantity<=0||l.value.price_cost<=0||l.value.price<=0},[_.value?(r(),u("span",Ht)):(r(),u("i",Jt)),c(" "+e(_.value?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª"),1)],8,Gt)])])])])])):v("",!0)]}),_:1}))}},Xt={class:"pagetitle dark:text-white"},Yt={class:"dark:text-white"},Wt={class:"breadcrumb"},Zt={class:"breadcrumb-item"},ts={class:"breadcrumb-item active dark:text-white"},ss={class:"section dashboard"},es={class:"row mb-4"},os={class:"col-xl-3 col-md-6"},as={class:"card info-card sales-card"},ns={class:"card-body"},is={class:"card-title"},ls={class:"d-flex align-items-center"},rs={class:"ps-3"},cs={class:"text-success small pt-1 fw-bold"},ds={class:"col-xl-3 col-md-6"},us={class:"card info-card customers-card"},bs={class:"card-body"},ms={class:"card-title"},hs={class:"d-flex align-items-center"},vs={class:"ps-3"},ps={class:"text-success small pt-1 fw-bold"},fs={class:"col-xl-3 col-md-6"},gs={class:"card info-card revenue-card"},_s={class:"card-body"},ys={class:"card-title"},xs={class:"d-flex align-items-center"},ks={class:"ps-3"},ws={class:"text-primary small pt-1 fw-bold"},$s={class:"col-xl-3 col-md-6"},Cs={class:"card info-card revenue-card"},qs={class:"card-body"},Ss={class:"card-title"},Bs={class:"d-flex align-items-center"},Fs={class:"ps-3"},Vs={class:"text-primary small pt-1 fw-bold"},Us={class:"card"},Ps={class:"card-header d-flex justify-content-between align-items-center"},Ds={class:"card-title mb-0"},Ts={class:"d-flex gap-2"},Es={class:"card-body"},Is={class:"row mb-4"},js={class:"col-md-4"},As={class:"search-box"},Ls=["placeholder"],Ms={class:"col-md-2"},Os={value:""},zs={value:"active"},Ns={value:"inactive"},Rs={class:"col-md-2"},Qs={value:""},Gs={value:"low"},Hs={value:"out"},Js={value:"available"},Ks={class:"col-md-2"},Xs={value:"name"},Ys={value:"price"},Ws={value:"quantity"},Zs={value:"created"},te={class:"col-md-2"},se={key:0},ee={class:"table-responsive"},oe={class:"table table-hover"},ae={class:"table-dark"},ne={scope:"col"},ie={scope:"col"},le={scope:"col"},re={scope:"col"},ce={scope:"col"},de={scope:"col",class:"text-center"},ue={class:"text-center"},be={class:"product-image-container"},me=["src","alt"],he={key:0,class:"stock-badge low-stock"},ve={key:1,class:"stock-badge out-of-stock"},pe={class:"product-info"},fe={class:"product-name mb-1"},ge={class:"text-muted"},_e={class:"text-muted"},ye={class:"barcode-info"},xe={key:0,class:"barcode-text"},ke={key:1,class:"text-muted"},we={class:"stock-info"},$e={class:"d-block text-muted"},Ce={class:"price-info"},qe={class:"price-amount"},Se={class:"d-block text-muted"},Be={class:"status-toggle"},Fe={class:"switch"},Ve=["checked","onChange"],Ue={class:"featured-toggle mt-2"},Pe={class:"switch"},De=["checked","onChange"],Te={key:0,class:"bi bi-star-fill"},Ee={class:"best-selling-toggle mt-2"},Ie={class:"switch"},je=["checked","onChange"],Ae={key:0,class:"bi bi-trophy-fill"},Le={class:"action-buttons"},Me={class:"btn-group-vertical",role:"group"},Oe=["onClick"],ze={class:"btn-group",role:"group"},Ne=["onClick","disabled"],Re=["onClick"],Qe=["onClick"],Ge={key:1,class:"row"},He={class:"card product-card h-100"},Je={class:"card-body"},Ke={class:"product-image-container mb-3"},Xe=["src","alt"],Ye={key:0,class:"stock-badge low-stock"},We={key:1,class:"stock-badge out-of-stock"},Ze={class:"card-title"},to={class:"card-text text-muted small"},so={class:"row mb-3"},eo={class:"col-6"},oo={class:"text-muted d-block"},ao={class:"col-6"},no={class:"text-muted d-block"},io={class:"fw-bold text-primary"},lo={class:"d-flex justify-content-between align-items-center"},ro={class:"status-toggle"},co={class:"switch"},uo=["checked","onChange"],bo={class:"btn-group",role:"group"},mo=["onClick"],ho=["onClick"],vo={__name:"index",props:{products:Object,translations:Array},setup(a){const m=a,q=bt(),y=Z(),g=k(!1),l=k({}),_=k(!1);k(!1),k(null),k(null);const S=k({checking:!1,isValid:!0,message:""}),p=mt({search:"",status:"",stock:"",sort:"created"}),B=k("table"),N=async i=>{if(!i||i.length<3){S.value={checking:!1,isValid:!0,message:""};return}S.value.checking=!0;try{const b=await(await fetch(route("products.checkBarcodeUnique",i))).json();S.value={checking:!1,isValid:b.unique,message:b.message},b.unique||y.warning(b.message)}catch(s){console.error("Barcode validation error:",s),S.value={checking:!1,isValid:!1,message:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯"}}};W.debounce(N,500);const d=W.debounce(()=>{L()},500),n=i=>{y.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),window.location.reload()},V=()=>{B.value=B.value==="table"?"grid":"table"},U=()=>{p.search="",p.status="",p.stock="",p.sort="created",L()},I=i=>i.image&&i.image.trim()!==""?`/public/storage/${i.image}`:"/public/dashboard-assets/img/product-placeholder.svg",j=i=>{i.target.src="/dashboard-assets/img/product-placeholder.svg"},A=i=>i===0?"text-danger":i<=5?"text-warning":"text-success",f=(i,s="IQD")=>parseFloat(i||0).toFixed(2)+" "+s,tt=i=>i?new Date(i).toLocaleDateString("ar-SA"):"-",st=()=>{var i;return(i=m.products)!=null&&i.data?m.products.data.filter(s=>s.is_active).length:0},et=()=>{var s;return(s=m.products)!=null&&s.data?m.products.data.filter(b=>b.currency==="USD").reduce((b,x)=>b+parseFloat(x.price||0)*parseInt(x.quantity||0),0).toFixed(2):"0.00"},ot=()=>{var s;return(s=m.products)!=null&&s.data?m.products.data.filter(b=>b.currency==="IQD").reduce((b,x)=>b+parseFloat(x.price||0)*parseInt(x.quantity||0),0).toFixed(2):"0.00"},at=async i=>{_.value=!0;try{const b=await(await fetch(route("barcode.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({product_id:i.id,type:"PNG",width:2,height:30})})).json();b.success?(y.success("ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­"),window.location.reload()):y.error(b.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}catch(s){console.error("Generate barcode error:",s),y.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯")}finally{_.value=!1}},nt=async i=>{if(!i.barcode){y.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©");return}_.value=!0;try{const s=new URLSearchParams({code:i.barcode,type:"PNG",width:2,height:30}),b=await fetch(`/barcode/preview?${s}`);if(!b.ok)throw new Error("Failed to generate barcode image");const x=await b.blob(),$=URL.createObjectURL(x),h=document.createElement("div");h.id="barcode-print-overlay",h.style.position="fixed",h.style.top="0",h.style.left="0",h.style.width="100%",h.style.height="100%",h.style.backgroundColor="white",h.style.zIndex="9999",h.style.padding="20px",h.style.textAlign="center",h.style.fontFamily="Arial, sans-serif",h.style.overflow="auto",h.innerHTML=`
      <style>
        @media print {
          body { margin: 0; padding: 0; }
          .print-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 20px !important; 
            border: none !important;
            box-shadow: none !important;
          }
          .barcode-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 30px !important; 
            border: 2px solid #000 !important;
            background: white !important;
          }
          .barcode-image { 
            width: 100% !important; 
            height: auto !important; 
            min-height: 300px !important; 
            max-height: 500px !important;
            border: 1px solid #000 !important;
          }
          .product-name { 
            font-size: 24px !important; 
            font-weight: bold !important; 
            margin-bottom: 20px !important; 
            text-align: center !important;
          }
          .barcode-text { 
            font-size: 18px !important; 
            margin-top: 20px !important; 
            font-family: monospace !important; 
            text-align: center !important;
            font-weight: bold !important;
          }
          .no-print { display: none !important; }
        }
      </style>
      <div class="print-container" style="max-width: 400px; margin: 50px auto; border: 2px solid #333; padding: 30px; background: white; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #333;">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</h3>
        
        <div class="barcode-container" style="border: 1px solid #ddd; padding: 20px; margin: 20px 0; background: #f9f9f9;">
          <div class="product-name" style="font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #2c3e50;">${i.name||"Product"}</div>
          <img class="barcode-image" src="${$}" alt="Barcode" style="max-width: 100%;width: 100%; height: auto; border: 1px solid #ccc;" onload="console.log('Barcode image loaded successfully')" onerror="console.error('Failed to load barcode image')">
          <div class="barcode-text" style="font-size: 14px; margin-top: 15px; font-family: monospace; color: #666;">${i.barcode}</div>
        </div>
        
        <div class="no-print" style="margin-top: 30px;">
          <button onclick="printBarcodeContent()" style="padding: 12px 25px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 15px; font-size: 16px;">
            <i class="bi bi-printer"></i> Ø·Ø¨Ø§Ø¹Ø©
          </button>
          <button onclick="closePrintOverlay()" style="padding: 12px 25px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
            <i class="bi bi-x"></i> Ø¥Ù„ØºØ§Ø¡
          </button>
        </div>
        
        <div class="no-print" style="margin-top: 20px; font-size: 12px; color: #666;">
          <p>ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø®ØªØ± "Microsoft Print to PDF" Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¥Ù„Ù‰ Ù…Ù„Ù PDF</p>
        </div>
      </div>
    `,window.printBarcodeContent=function(){const o=h.querySelector("img");if(o&&!o.complete){o.onload=function(){window.print()};return}window.print()},window.closePrintOverlay=function(){document.body.removeChild(h),$&&URL.revokeObjectURL($)},document.body.appendChild(h),y.success("ØªÙ… ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©. Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰."),$&&setTimeout(()=>{document.getElementById("barcode-print-overlay")&&URL.revokeObjectURL($)},3e4)}catch(s){console.error("Print error:",s),y.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©")}finally{_.value=!1}},L=()=>{M.get(route("products.index"),p,{preserveState:!0,preserveScroll:!0})},F=i=>q.props.auth_permissions.includes(i),J=i=>{C.fire({title:m.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:m.translations.yes,cancelButtonText:m.translations.cancel}).then(s=>{s.isConfirmed&&M.post(`/products/${i}/activate`,{onSuccess:()=>{C.fire("Updated !","product stuaus item has been updated.","success")},onError:()=>{C.fire("Error!","There was an issue updating product status.","error")}})})},it=i=>{M.post(`/products/${i}/toggle-featured`,{onSuccess:()=>{},onError:()=>{C.fire("Ø®Ø·Ø£!","Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ù…ÙŠØ².","error")}})},lt=i=>{M.post(`/products/${i}/toggle-best-selling`,{onSuccess:()=>{},onError:()=>{C.fire("Ø®Ø·Ø£!","Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹.","error")}})},K=i=>{C.fire({title:m.translations.are_you_sure,text:m.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:m.translations.yes,cancelButtonText:m.translations.cancel}).then(s=>{s.isConfirmed&&M.delete("products/"+i,{onSuccess:()=>{C.fire({title:m.translations.data_deleted_successfully,icon:"success"})},onError:()=>{C.fire("Error!","There was an issue deleting the product.","error")}})})};return(i,s)=>(r(),O(ht,{translations:a.translations},{default:E(()=>{var b,x,$,h;return[t("div",Xt,[t("h1",Yt,e(a.translations.products),1),t("nav",null,[t("ol",Wt,[t("li",Zt,[H(D(R),{class:"nav-link dark:text-white",href:i.route("dashboard")},{default:E(()=>[c(e(a.translations.home),1)]),_:1},8,["href"])]),t("li",ts,e(a.translations.products),1)])])]),t("section",ss,[t("div",es,[t("div",os,[t("div",as,[t("div",ns,[t("h5",is,[c(e(a.translations.total_products)+" ",1),t("span",null,"| "+e(a.translations.all),1)]),t("div",ls,[s[6]||(s[6]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-box-seam"})],-1)),t("div",rs,[t("h6",null,e(((b=m.products)==null?void 0:b.total)||0),1),t("span",cs,e(a.translations.products),1)])])])])]),t("div",ds,[t("div",us,[t("div",bs,[t("h5",ms,[c(e(a.translations.active_products)+" ",1),t("span",null,"| "+e(a.translations.enabled),1)]),t("div",hs,[s[7]||(s[7]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",vs,[t("h6",null,e(st()),1),t("span",ps,e(a.translations.active),1)])])])])]),t("div",fs,[t("div",gs,[t("div",_s,[t("h5",ys,[c(e(a.translations.total_value)+" ",1),t("span",null,"| "+e(a.translations.dollar),1)]),t("div",xs,[s[8]||(s[8]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",ks,[t("h6",null,e(et())+" $",1),t("span",ws,e(a.translations.value),1)])])])])]),t("div",$s,[t("div",Cs,[t("div",qs,[t("h5",Ss,[c(e(a.translations.total_value)+" ",1),t("span",null,"| "+e(a.translations.dinar),1)]),t("div",Bs,[s[9]||(s[9]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-exchange"})],-1)),t("div",Fs,[t("h6",null,e(ot())+" IQD",1),t("span",Vs,e(a.translations.value),1)])])])])])]),t("div",Us,[t("div",Ps,[t("h5",Ds,[s[10]||(s[10]=t("i",{class:"bi bi-box-seam me-2"},null,-1)),c(" "+e(a.translations.products_management),1)]),t("div",Ts,[t("button",{class:"btn btn-outline-primary",onClick:V},[t("i",{class:T(B.value==="grid"?"bi bi-list":"bi bi-grid")},null,2),c(" "+e(B.value==="grid"?a.translations.list_view:a.translations.grid_view),1)]),F("create product")?(r(),O(D(R),{key:0,class:"btn btn-primary",href:i.route("products.create")},{default:E(()=>[s[11]||(s[11]=t("i",{class:"bi bi-plus-circle"},null,-1)),c(" "+e(a.translations.add_product),1)]),_:1},8,["href"])):v("",!0)])]),t("div",Es,[t("div",Is,[t("div",js,[t("div",As,[w(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>p.search=o),placeholder:a.translations.search_by_name_or_barcode,onInput:s[1]||(s[1]=(...o)=>D(d)&&D(d)(...o))},null,40,Ls),[[z,p.search]]),s[12]||(s[12]=t("i",{class:"bi bi-search search-icon"},null,-1))])]),t("div",Ms,[w(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=o=>p.status=o),onChange:L},[t("option",Os,e(a.translations.all_status),1),t("option",zs,e(a.translations.active),1),t("option",Ns,e(a.translations.inactive),1)],544),[[Q,p.status]])]),t("div",Rs,[w(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=o=>p.stock=o),onChange:L},[t("option",Qs,e(a.translations.all_stock),1),t("option",Gs,e(a.translations.low_stock),1),t("option",Hs,e(a.translations.out_of_stock),1),t("option",Js,e(a.translations.in_stock),1)],544),[[Q,p.stock]])]),t("div",Ks,[w(t("select",{class:"form-select","onUpdate:modelValue":s[4]||(s[4]=o=>p.sort=o),onChange:L},[t("option",Xs,e(a.translations.sort_by_name),1),t("option",Ys,e(a.translations.sort_by_price),1),t("option",Ws,e(a.translations.sort_by_quantity),1),t("option",Zs,e(a.translations.sort_by_date),1)],544),[[Q,p.sort]])]),t("div",te,[t("button",{class:"btn btn-outline-secondary w-100",onClick:U},[s[13]||(s[13]=t("i",{class:"bi bi-arrow-clockwise"},null,-1)),c(" "+e(a.translations.clear),1)])])]),B.value==="table"?(r(),u("div",se,[t("div",ee,[t("table",oe,[t("thead",ae,[t("tr",null,[s[14]||(s[14]=t("th",{scope:"col",class:"text-center"},[t("i",{class:"bi bi-image"})],-1)),t("th",ne,e(a.translations.product_info),1),t("th",ie,e(a.translations.barcode),1),t("th",le,e(a.translations.stock),1),t("th",re,e(a.translations.price),1),t("th",ce,e(a.translations.status),1),t("th",de,e(a.translations.actions),1)])]),t("tbody",null,[(r(!0),u(X,null,Y((x=m.products)==null?void 0:x.data,(o,G)=>(r(),u("tr",{key:o.id,class:"product-row"},[t("td",ue,[t("div",be,[t("img",{src:I(o),alt:o.name,class:"product-image",onError:j},null,40,me),o.quantity<=5?(r(),u("div",he,s[15]||(s[15]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):v("",!0),o.quantity===0?(r(),u("div",ve,s[16]||(s[16]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):v("",!0)])]),t("td",null,[t("div",pe,[t("h6",fe,e(o.name),1),t("small",ge,e(o.model),1),s[17]||(s[17]=t("br",null,null,-1)),t("small",_e,e(a.translations.created)+": "+e(tt(o.created)),1)])]),t("td",null,[t("div",ye,[o.barcode?(r(),u("span",xe,e(o.barcode),1)):(r(),u("span",ke,e(a.translations.no_barcode),1))])]),t("td",null,[t("div",we,[t("span",{class:T(["stock-quantity",A(o.quantity)])},e(o.quantity),3),t("small",$e,e(a.translations.units),1)])]),t("td",null,[t("div",Ce,[t("span",qe,e(f(o.price,o.currency)),1),t("small",Se,e(a.translations.selling_price),1)])]),t("td",null,[t("div",Be,[t("label",Fe,[t("input",{type:"checkbox",checked:o.is_active==1,onChange:P=>J(o.id)},null,40,Ve),s[18]||(s[18]=t("span",{class:"slider round"},null,-1))]),t("small",{class:T(["d-block mt-1",o.is_active?"text-success":"text-danger"])},e(o.is_active?a.translations.active:a.translations.inactive),3)]),t("div",Ue,[t("label",Pe,[t("input",{type:"checkbox",checked:o.is_featured==1,onChange:P=>it(o.id)},null,40,De),s[19]||(s[19]=t("span",{class:"slider round featured-slider"},null,-1))]),t("small",{class:T(["d-block mt-1",o.is_featured?"text-warning":"text-muted"])},[o.is_featured?(r(),u("i",Te)):v("",!0),c(" "+e(o.is_featured?"Ù…Ù…ÙŠØ²":"Ø¹Ø§Ø¯ÙŠ"),1)],2)]),t("div",Ee,[t("label",Ie,[t("input",{type:"checkbox",checked:o.is_best_selling==1,onChange:P=>lt(o.id)},null,40,je),s[20]||(s[20]=t("span",{class:"slider round best-selling-slider"},null,-1))]),t("small",{class:T(["d-block mt-1",o.is_best_selling?"text-info":"text-muted"])},[o.is_best_selling?(r(),u("i",Ae)):v("",!0),c(" "+e(o.is_best_selling?"Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹":"Ø¹Ø§Ø¯ÙŠ"),1)],2)])]),t("td",null,[t("div",Le,[t("div",Me,[F("update product")?(r(),O(D(R),{key:0,class:"btn btn-sm btn-outline-primary mb-1",href:i.route("products.edit",{product:o.id}),title:a.translations.edit},{default:E(()=>s[21]||(s[21]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):v("",!0),F("update product")?(r(),u("button",{key:1,class:"btn btn-sm btn-outline-success mb-1",onClick:P=>{g.value=!0,l.value=o},title:"{{ translations.add_stock }}"},s[22]||(s[22]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,Oe)):v("",!0),t("div",ze,[o.barcode?v("",!0):(r(),u("button",{key:0,class:"btn btn-sm btn-outline-info",onClick:P=>at(o),disabled:_.value,title:"{{ translations.generate_barcode }}"},s[23]||(s[23]=[t("i",{class:"bi bi-qr-code"},null,-1)]),8,Ne)),o.barcode?(r(),u("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:P=>nt(o),title:"{{ translations.print_barcode }}"},s[24]||(s[24]=[t("i",{class:"bi bi-printer"},null,-1)]),8,Re)):v("",!0)]),F("delete product")?(r(),u("button",{key:2,class:"btn btn-sm btn-outline-danger mt-1",onClick:P=>K(o.id),title:"{{ translations.delete }}"},s[25]||(s[25]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Qe)):v("",!0)])])])]))),128))])])])])):(r(),u("div",Ge,[(r(!0),u(X,null,Y(($=m.products)==null?void 0:$.data,o=>(r(),u("div",{key:o.id,class:"col-xl-3 col-lg-4 col-md-6 mb-4"},[t("div",He,[t("div",Je,[t("div",Ke,[t("img",{src:I(o),alt:o.name,class:"product-image-large",onError:j},null,40,Xe),o.quantity<=5?(r(),u("div",Ye,s[26]||(s[26]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):v("",!0),o.quantity===0?(r(),u("div",We,s[27]||(s[27]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):v("",!0)]),t("h6",Ze,e(o.name),1),t("p",to,e(o.model),1),t("div",so,[t("div",eo,[t("small",oo,e(a.translations.stock),1),t("span",{class:T(["fw-bold",A(o.quantity)])},e(o.quantity),3)]),t("div",ao,[t("small",no,e(a.translations.price),1),t("span",io,e(f(o.price,o.currency)),1)])]),t("div",lo,[t("div",ro,[t("label",co,[t("input",{type:"checkbox",checked:o.is_active==1,onChange:G=>J(o.id)},null,40,uo),s[28]||(s[28]=t("span",{class:"slider round"},null,-1))])]),t("div",bo,[F("update product")?(r(),O(D(R),{key:0,class:"btn btn-sm btn-outline-primary",href:i.route("products.edit",{product:o.id}),title:a.translations.edit},{default:E(()=>s[29]||(s[29]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):v("",!0),F("update product")?(r(),u("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:G=>{g.value=!0,l.value=o},title:"{{ translations.add_stock }}"},s[30]||(s[30]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,mo)):v("",!0),F("delete product")?(r(),u("button",{key:2,class:"btn btn-sm btn-outline-danger",onClick:G=>K(o.id),title:"{{ translations.delete }}"},s[31]||(s[31]=[t("i",{class:"bi bi-trash"},null,-1)]),8,ho)):v("",!0)])])])])]))),128))]))])]),H(vt,{links:(h=m.products)==null?void 0:h.links},null,8,["links"])]),H(Kt,{show:g.value,translations:a.translations,data:l.value,onClose:s[5]||(s[5]=o=>g.value=!1),onSuccess:n},null,8,["show","translations","data"])]}),_:1},8,["translations"]))}},wo=pt(vo,[["__scopeId","data-v-1964db36"]]);export{wo as default};
