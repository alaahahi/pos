import{Q as vt,z as gt,a,h as at,w as b,b as t,t as o,i as nt,d as c,u as lt,p as ct,c as l,n as m,e as d,j as yt,l as dt,x as rt,f as xt,F as wt,g as ut}from"./app-D346Pjzq.js";import{_ as kt}from"./AuthenticatedLayout-BheGbMS3.js";import{_ as St}from"./Pagination-CVsS5qZ9.js";import{S as f}from"./sweetalert2.esm.all-DwEdJQJv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Dt={class:"pagetitle dark:text-white"},pt={class:"dark:text-white"},Qt={class:"breadcrumb"},Bt={class:"breadcrumb-item"},Ct={class:"breadcrumb-item active dark:text-white"},It={class:"section dashboard"},Lt={class:"row mb-4"},jt={class:"col-xl-3 col-md-6"},Vt={class:"card info-card sales-card"},Ft={class:"card-body"},Tt={class:"card-title"},Mt={class:"d-flex align-items-center"},Nt={class:"ps-3"},Et={class:"text-success small pt-1 fw-bold"},Ot={class:"d-block text-muted"},Ut={class:"col-xl-3 col-md-6"},$t={class:"card info-card customers-card"},zt={class:"card-body"},At={class:"d-flex align-items-center"},Pt={class:"ps-3"},qt={class:"text-primary small pt-1 fw-bold"},Gt={class:"d-block text-muted"},Ht={class:"col-xl-3 col-md-6"},Jt={class:"card info-card revenue-card"},Kt={class:"card-body"},Rt={class:"d-flex align-items-center"},Wt={class:"ps-3"},Xt={class:"text-info small pt-1 fw-bold"},Yt={class:"d-block text-muted"},Zt={class:"col-xl-3 col-md-6"},ts={class:"card info-card"},ss={class:"card-body"},es={class:"card-title"},os={class:"d-flex align-items-center"},is={class:"ps-3"},as={class:"text-muted small"},ns={class:"card"},ls={class:"card-body"},cs={class:"row filter_form"},ds={class:"col-md-3"},rs=["placeholder"],us={class:"col-md-3"},hs=["placeholder"],ms={class:"col-md-3"},bs={type:"submit",class:"btn btn-primary"},fs={class:"col-md-3"},_s={class:"table-responsive"},vs={class:"table text-center"},gs={scope:"col"},ys={scope:"col"},xs={scope:"col"},ws={scope:"col"},ks={scope:"col"},Ss={scope:"col"},Ds={key:0,scope:"col"},ps={key:1,scope:"col"},Qs={key:2,scope:"col"},Bs={key:3,scope:"col"},Cs={scope:"row"},Is={key:0},Ls=["onClick"],js=["href"],Vs={key:1},Fs=["href"],$s={__name:"index",props:{orders:Object,translations:Array,statistics:Object},setup(e){const u=e,ht=vt(),h=gt({name:"",model:""}),mt=()=>{ut.get(route("orders.index"),h,{preserveState:!0,preserveScroll:!0})},r=n=>ht.props.auth_permissions.includes(n),bt=n=>{f.fire({title:u.translations.are_you_sure,text:u.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:u.translations.yes,cancelButtonText:u.translations.cancel}).then(s=>{s.isConfirmed&&ut.delete("orders/"+n,{onSuccess:()=>{f.fire({title:u.translations.data_deleted_successfully,icon:"success"})},onError:()=>{f.fire("Error!","There was an issue deleting the order.","error")}})})},ft=n=>{const s={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(n).toLocaleDateString("en-US",s)};return(n,s)=>(a(),at(kt,{translations:e.translations},{default:b(()=>{var _,v,g,y,x,w,k,S,D,p,Q,B,C,I,L,j,V,F,T,M,N,E,O,U,$,z,A,P,q,G,H,J,K,R,W,X,Y,Z,tt,st,et,ot;return[t("div",Dt,[t("h1",pt,o(e.translations.orders),1),t("nav",null,[t("ol",Qt,[t("li",Bt,[nt(lt(ct),{class:"nav-link dark:text-white",href:n.route("dashboard")},{default:b(()=>[c(o(e.translations.home),1)]),_:1},8,["href"])]),t("li",Ct,o(e.translations.orders),1)])])]),t("section",It,[t("div",Lt,[t("div",jt,[t("div",Vt,[t("div",Ft,[t("h5",Tt,[s[3]||(s[3]=c(" فواتير اليوم ")),((v=(_=e.statistics)==null?void 0:_.changes)==null?void 0:v.count)!==0?(a(),l("span",{key:0,class:m(((y=(g=e.statistics)==null?void 0:g.changes)==null?void 0:y.count)>0?"text-success":"text-danger")},[s[2]||(s[2]=c(" | ")),t("i",{class:m(((w=(x=e.statistics)==null?void 0:x.changes)==null?void 0:w.count)>0?"bi bi-arrow-up":"bi bi-arrow-down")},null,2),c(" "+o(Math.abs(((S=(k=e.statistics)==null?void 0:k.changes)==null?void 0:S.count)||0))+"% ",1)],2)):d("",!0)]),t("div",Mt,[s[4]||(s[4]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-receipt"})],-1)),t("div",Nt,[t("h6",null,o(((p=(D=e.statistics)==null?void 0:D.today)==null?void 0:p.count)||0)+" فاتورة",1),t("span",Et,o((((B=(Q=e.statistics)==null?void 0:Q.today)==null?void 0:B.total)||0).toLocaleString())+" IQD ",1),t("small",Ot," مدفوع: "+o((((I=(C=e.statistics)==null?void 0:C.today)==null?void 0:I.paid)||0).toLocaleString()),1)])])])])]),t("div",Ut,[t("div",$t,[t("div",zt,[s[6]||(s[6]=t("h5",{class:"card-title"},"فواتير الأسبوع",-1)),t("div",At,[s[5]||(s[5]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-calendar-week"})],-1)),t("div",Pt,[t("h6",null,o(((j=(L=e.statistics)==null?void 0:L.week)==null?void 0:j.count)||0)+" فاتورة",1),t("span",qt,o((((F=(V=e.statistics)==null?void 0:V.week)==null?void 0:F.total)||0).toLocaleString())+" IQD ",1),t("small",Gt," مدفوع: "+o((((M=(T=e.statistics)==null?void 0:T.week)==null?void 0:M.paid)||0).toLocaleString()),1)])])])])]),t("div",Ht,[t("div",Jt,[t("div",Kt,[s[8]||(s[8]=t("h5",{class:"card-title"},"فواتير الشهر",-1)),t("div",Rt,[s[7]||(s[7]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-calendar-month"})],-1)),t("div",Wt,[t("h6",null,o(((E=(N=e.statistics)==null?void 0:N.month)==null?void 0:E.count)||0)+" فاتورة",1),t("span",Xt,o((((U=(O=e.statistics)==null?void 0:O.month)==null?void 0:U.total)||0).toLocaleString())+" IQD ",1),t("small",Yt," مدفوع: "+o((((z=($=e.statistics)==null?void 0:$.month)==null?void 0:z.paid)||0).toLocaleString()),1)])])])])]),t("div",Zt,[t("div",ts,[t("div",ss,[t("h5",es,[s[10]||(s[10]=c(" المقارنة مع الأمس ")),((P=(A=e.statistics)==null?void 0:A.changes)==null?void 0:P.total)!==0?(a(),l("span",{key:0,class:m(((G=(q=e.statistics)==null?void 0:q.changes)==null?void 0:G.total)>0?"text-success":"text-danger")},[s[9]||(s[9]=c(" | ")),t("i",{class:m(((J=(H=e.statistics)==null?void 0:H.changes)==null?void 0:J.total)>0?"bi bi-arrow-up":"bi bi-arrow-down")},null,2),c(" "+o(Math.abs(((R=(K=e.statistics)==null?void 0:K.changes)==null?void 0:R.total)||0))+"% ",1)],2)):d("",!0)]),t("div",os,[t("div",{class:m(["card-icon rounded-circle d-flex align-items-center justify-content-center",(((X=(W=e.statistics)==null?void 0:W.changes)==null?void 0:X.total)||0)>=0?"bg-success":"bg-danger"])},s[11]||(s[11]=[t("i",{class:"bi bi-graph-up-arrow text-white"},null,-1)]),2),t("div",is,[t("h6",null,"الأمس: "+o(((Z=(Y=e.statistics)==null?void 0:Y.yesterday)==null?void 0:Z.count)||0),1),t("span",as,o((((st=(tt=e.statistics)==null?void 0:tt.yesterday)==null?void 0:st.total)||0).toLocaleString())+" IQD ",1)])])])])])]),t("div",ns,[s[20]||(s[20]=t("div",{class:"card-header"},[t("div",{class:"d-flex"})],-1)),t("div",ls,[t("form",{onSubmit:yt(mt,["prevent"])},[t("div",cs,[t("div",ds,[dt(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":s[0]||(s[0]=i=>h.name=i),placeholder:e.translations.name},null,8,rs),[[rt,h.name]])]),t("div",us,[dt(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":s[1]||(s[1]=i=>h.model=i),placeholder:e.translations.model},null,8,hs),[[rt,h.model]])]),t("div",ms,[t("button",bs,[c(o(e.translations.search)+"   ",1),s[12]||(s[12]=t("i",{class:"bi bi-search"},null,-1))])]),t("div",fs,[r("create order")?(a(),at(lt(ct),{key:0,class:"btn btn-primary",href:n.route("orders.create")},{default:b(()=>[c(o(e.translations.create_invoice)+" ",1),s[13]||(s[13]=t("i",{class:"bi bi-plus-circle"},null,-1))]),_:1},8,["href"])):d("",!0)])])],32),t("div",_s,[t("table",vs,[t("thead",null,[t("tr",null,[s[14]||(s[14]=t("th",{scope:"col"},"#",-1)),t("th",gs,o(e.translations.client),1),t("th",ys,o(e.translations.total)+" IQD",1),s[15]||(s[15]=t("th",{scope:"col"},"الخصم IQD",-1)),s[16]||(s[16]=t("th",{scope:"col"},"المبلغ النهائي IQD",-1)),t("th",xs,o(e.translations.paid_order)+" IQD",1),t("th",ws,o(e.translations.due_order)+" IQD",1),t("th",ks,o(e.translations.statusOrder),1),t("th",Ss,o(e.translations.created_at),1),r("update order")?(a(),l("th",Ds)):d("",!0),r("delete order")?(a(),l("th",ps)):d("",!0),r("delete order")?(a(),l("th",Qs)):d("",!0),r("update order")?(a(),l("th",Bs)):d("",!0)])]),t("tbody",null,[(a(!0),l(wt,null,xt((et=e.orders)==null?void 0:et.data,(i,_t)=>{var it;return a(),l("tr",{key:i.id},[t("th",Cs,o(_t+1),1),t("td",null,o((it=i.customer)==null?void 0:it.name),1),t("td",null,o(i.total_amount),1),t("td",null,o(i.discount_amount||0),1),t("td",null,o(i.final_amount||i.total_amount),1),t("td",null,o(i.total_paid),1),t("td",null,o((i.final_amount||i.total_amount)-i.total_paid),1),t("td",null,o(i.status),1),t("td",null,o(ft(i.created_at)),1),r("delete order")?(a(),l("td",Is,[t("button",{type:"button",class:"btn btn-danger",onClick:Ts=>bt(i.id)},s[17]||(s[17]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Ls)])):d("",!0),t("td",null,[t("a",{class:"btn btn-secondary",href:n.route("order.print",{id:i.id})},s[18]||(s[18]=[t("i",{class:"bi bi-printer text-white"},null,-1)]),8,js)]),r("update order")&&i.status=="due"?(a(),l("td",Vs,[t("a",{class:"btn btn-success",href:n.route("orders.edit",{order:i.id})},s[19]||(s[19]=[t("i",{class:"bi bi-currency-dollar"},null,-1)]),8,Fs)])):d("",!0)])}),128))])])])])]),nt(St,{links:(ot=e.orders)==null?void 0:ot.links},null,8,["links"])])]}),_:1},8,["translations"]))}};export{$s as default};
