const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BarcodePrinter.vue_vue_type_style_index_0_scoped_3a0f17fc_lang-BQZ7pUh4.js","assets/app-DLChBEag.js","assets/app-DPSgePyu.css","assets/BarcodePrinter-BeVYShBq.css"])))=>i.map(i=>d[i]);
import{s as ct,r as w,B as yt,a as d,h as O,w as j,c as u,b as t,d as c,t as o,l as v,x as $,A as K,v as H,e as h,D as _t,E as xt,Q as wt,z as nt,g as X,i as Z,u as I,p as Y,n as E,F as it,f as rt,y as F,_ as kt}from"./app-DLChBEag.js";import{_ as $t}from"./AuthenticatedLayout-BaBYr0b8.js";import{_ as Ct}from"./Pagination-CFIkyltx.js";import{a as St}from"./BarcodePrinter.vue_vue_type_style_index_0_scoped_3a0f17fc_lang-BQZ7pUh4.js";import{_ as qt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as z}from"./sweetalert2.esm.all-DwEdJQJv.js";import{l as dt}from"./lodash-BvrqNJEK.js";const Vt={key:0,class:"modal-mask"},Bt={class:"modal-wrapper max-h-[80vh]"},Pt={class:"modal-container"},Ut={class:"modal-header"},zt={class:"text-primary"},Tt={class:"modal-body"},Dt={class:"row g-3"},It={class:"col-12"},Et={class:"alert alert-info"},Ft={class:"col-md-6"},jt={for:"price_cost",class:"form-label"},Ht=["placeholder"],Mt={class:"col-md-6"},Wt={for:"price",class:"form-label"},Nt=["placeholder"],At={class:"col-md-6"},Qt={for:"quantity",class:"form-label"},Ot=["placeholder"],Lt={class:"col-md-6"},Jt={class:"col-md-6"},Rt={for:"date",class:"form-label"},Gt={class:"col-md-6"},Xt={class:"form-control-plaintext bg-light p-2 rounded"},Yt={class:"col-12"},Kt={class:"form-check"},Zt={class:"text-muted"},ts={class:"modal-footer"},ss={class:"d-flex w-100 gap-2"},es=["disabled"],os=["disabled"],ls={key:0,class:"spinner-border spinner-border-sm me-2"},as={key:1,class:"bi bi-check-circle"},ns={__name:"ModalPurchasesProduct",props:{show:Boolean,data:Object,accounts:Array,translations:Array},emits:["close","success"],setup(a,{emit:p}){const V=a,k=p,_=ct(),r=w({date:S(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}),f=w(!1);function S(){const m=new Date,n=m.getFullYear(),C=String(m.getMonth()+1).padStart(2,"0"),T=String(m.getDate()).padStart(2,"0");return`${n}-${C}-${T}`}const x=()=>{r.value={date:S(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}};yt(()=>V.data,m=>{m&&m.id&&(r.value.price_cost=m.price_cost||0,r.value.price=m.price||0,r.value.quantity=0)},{immediate:!0});const M=async()=>{if(!V.data||!V.data.id){_.error("لم يتم تحديد المنتج");return}if(r.value.quantity<=0){_.error("يجب إدخال كمية أكبر من صفر");return}if(r.value.price_cost<=0){_.error("يجب إدخال سعر التكلفة");return}if(r.value.price<=0){_.error("يجب إدخال سعر البيع");return}f.value=!0;try{console.log("Sending data:",{product_id:V.data.id,quantity:r.value.quantity,price_cost:r.value.price_cost,price:r.value.price,date:r.value.date,withdraw_from_box:r.value.withdraw_from_box,currency:r.value.currency});const m=await xt.post("api/products/process-purchase",{product_id:V.data.id,quantity:r.value.quantity,price_cost:r.value.price_cost,price:r.value.price,date:r.value.date,withdraw_from_box:r.value.withdraw_from_box,currency:r.value.currency});m.data.success?(_.success(m.data.message),k("success",m.data),k("close"),x()):_.error(m.data.message||"حدث خطأ أثناء المعالجة")}catch(m){console.error("Purchase error:",m),m.response&&m.response.data&&m.response.data.message?_.error(m.response.data.message):_.error("حدث خطأ أثناء معالجة المشتريات")}finally{f.value=!1}},l=()=>(r.value.quantity*r.value.price_cost).toFixed(2);return(m,n)=>(d(),O(_t,{name:"modal"},{default:j(()=>{var C,T,W,L,J;return[a.show?(d(),u("div",Vt,[t("div",Bt,[t("div",Pt,[t("div",Ut,[t("h3",zt,[n[7]||(n[7]=t("i",{class:"bi bi-cart-plus"},null,-1)),c(" إضافة مشتريات - "+o(((C=a.data)==null?void 0:C.name)||"منتج"),1)])]),t("div",Tt,[t("div",Dt,[t("div",It,[t("div",Et,[n[8]||(n[8]=t("strong",null,"المنتج:",-1)),c(" "+o(((T=a.data)==null?void 0:T.name)||"غير محدد"),1),n[9]||(n[9]=t("br",null,null,-1)),n[10]||(n[10]=t("strong",null,"الكمية الحالية:",-1)),c(" "+o(((W=a.data)==null?void 0:W.quantity)||0),1),n[11]||(n[11]=t("br",null,null,-1)),n[12]||(n[12]=t("strong",null,"سعر التكلفة الحالي:",-1)),c(" "+o(((L=a.data)==null?void 0:L.price_cost)||0),1),n[13]||(n[13]=t("br",null,null,-1)),n[14]||(n[14]=t("strong",null,"سعر البيع الحالي:",-1)),c(" "+o(((J=a.data)==null?void 0:J.price)||0),1)])]),t("div",Ft,[t("label",jt,[n[15]||(n[15]=t("i",{class:"bi bi-currency-dollar"},null,-1)),c(" "+o(a.translations.price_cost),1)]),v(t("input",{id:"price_cost",type:"number",step:"0.01",class:"form-control",placeholder:a.translations.price_cost,"onUpdate:modelValue":n[0]||(n[0]=g=>r.value.price_cost=g),required:""},null,8,Ht),[[$,r.value.price_cost]])]),t("div",Mt,[t("label",Wt,[n[16]||(n[16]=t("i",{class:"bi bi-tag"},null,-1)),c(" "+o(a.translations.price),1)]),v(t("input",{id:"price",type:"number",step:"0.01",class:"form-control",placeholder:a.translations.price,"onUpdate:modelValue":n[1]||(n[1]=g=>r.value.price=g),required:""},null,8,Nt),[[$,r.value.price]])]),t("div",At,[t("label",Qt,[n[17]||(n[17]=t("i",{class:"bi bi-box"},null,-1)),c(" "+o(a.translations.quantity),1)]),v(t("input",{id:"quantity",type:"number",min:"1",class:"form-control",placeholder:a.translations.quantity,"onUpdate:modelValue":n[2]||(n[2]=g=>r.value.quantity=g),required:""},null,8,Ot),[[$,r.value.quantity]])]),t("div",Lt,[n[19]||(n[19]=t("label",{for:"currency",class:"form-label"},[t("i",{class:"bi bi-currency-exchange"}),c(" العملة ")],-1)),v(t("select",{id:"currency",class:"form-control","onUpdate:modelValue":n[3]||(n[3]=g=>r.value.currency=g)},n[18]||(n[18]=[t("option",{value:"IQD"},"دينار عراقي",-1),t("option",{value:"$"},"دولار",-1)]),512),[[K,r.value.currency]])]),t("div",Jt,[t("label",Rt,[n[20]||(n[20]=t("i",{class:"bi bi-calendar"},null,-1)),c(" "+o(a.translations.date),1)]),v(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":n[4]||(n[4]=g=>r.value.date=g),required:""},null,512),[[$,r.value.date]])]),t("div",Gt,[n[21]||(n[21]=t("label",{class:"form-label"},[t("i",{class:"bi bi-calculator"}),c(" إجمالي التكلفة ")],-1)),t("div",Xt,[t("strong",null,o(l())+" "+o(r.value.currency),1)])]),t("div",Yt,[t("div",Kt,[v(t("input",{class:"form-check-input",type:"checkbox",id:"withdraw_from_box","onUpdate:modelValue":n[5]||(n[5]=g=>r.value.withdraw_from_box=g)},null,512),[[H,r.value.withdraw_from_box]]),n[22]||(n[22]=t("label",{class:"form-check-label",for:"withdraw_from_box"},[t("i",{class:"bi bi-wallet2"}),c(" سحب المبلغ من الصندوق تلقائياً ")],-1))]),t("small",Zt," عند تفعيل هذا الخيار، سيتم سحب "+o(l())+" "+o(r.value.currency)+" من الصندوق الرئيسي تلقائياً ",1)])])]),t("div",ts,[t("div",ss,[t("button",{class:"btn btn-secondary flex-fill",onClick:n[6]||(n[6]=g=>m.$emit("close")),disabled:f.value},n[23]||(n[23]=[t("i",{class:"bi bi-x-circle"},null,-1),c(" إلغاء ")]),8,es),t("button",{class:"btn btn-primary flex-fill",onClick:M,disabled:f.value||r.value.quantity<=0||r.value.price_cost<=0||r.value.price<=0},[f.value?(d(),u("span",ls)):(d(),u("i",as)),c(" "+o(f.value?"جاري المعالجة...":"تأكيد المشتريات"),1)],8,os)])])])])])):h("",!0)]}),_:1}))}},is={class:"pagetitle dark:text-white"},rs={class:"dark:text-white"},ds={class:"breadcrumb"},cs={class:"breadcrumb-item"},us={class:"breadcrumb-item active dark:text-white"},ms={class:"section dashboard"},bs={class:"row mb-4"},hs={class:"col-xl-3 col-md-6"},vs={class:"card info-card sales-card"},ps={class:"card-body"},fs={class:"card-title"},gs={class:"d-flex align-items-center"},ys={class:"ps-3"},_s={class:"text-success small pt-1 fw-bold"},xs={class:"col-xl-3 col-md-6"},ws={class:"card info-card customers-card"},ks={class:"card-body"},$s={class:"card-title"},Cs={class:"d-flex align-items-center"},Ss={class:"ps-3"},qs={class:"text-success small pt-1 fw-bold"},Vs={class:"col-xl-3 col-md-6"},Bs={class:"card info-card revenue-card"},Ps={class:"card-body"},Us={class:"card-title"},zs={class:"d-flex align-items-center"},Ts={class:"ps-3"},Ds={class:"text-primary small pt-1 fw-bold"},Is={class:"col-xl-3 col-md-6"},Es={class:"card info-card revenue-card"},Fs={class:"card-body"},js={class:"card-title"},Hs={class:"d-flex align-items-center"},Ms={class:"ps-3"},Ws={class:"text-primary small pt-1 fw-bold"},Ns={class:"card"},As={class:"card-header d-flex justify-content-between align-items-center"},Qs={class:"card-title mb-0"},Os={class:"d-flex gap-2"},Ls={class:"card-body"},Js={class:"row mb-4"},Rs={class:"col-md-4"},Gs={class:"search-box"},Xs=["placeholder"],Ys={class:"col-md-2"},Ks={value:""},Zs={value:"active"},te={value:"inactive"},se={class:"col-md-2"},ee={value:""},oe={value:"low"},le={value:"out"},ae={value:"available"},ne={class:"col-md-2"},ie={value:"name"},re={value:"price"},de={value:"quantity"},ce={value:"created"},ue={class:"col-md-2"},me={key:0},be={class:"table-responsive"},he={class:"table table-hover"},ve={class:"table-dark"},pe={scope:"col"},fe={scope:"col"},ge={scope:"col"},ye={scope:"col"},_e={scope:"col"},xe={scope:"col",class:"text-center"},we={class:"text-center"},ke={class:"product-image-container"},$e=["src","alt"],Ce={key:0,class:"stock-badge low-stock"},Se={key:1,class:"stock-badge out-of-stock"},qe={class:"product-info"},Ve={class:"product-name mb-1"},Be={class:"text-muted"},Pe={class:"text-muted"},Ue={class:"barcode-info"},ze={key:0,class:"barcode-text"},Te={key:1,class:"text-muted"},De={class:"stock-info"},Ie={class:"d-block text-muted"},Ee={class:"price-info"},Fe={class:"price-amount"},je={class:"d-block text-muted"},He={class:"status-toggle"},Me={class:"switch"},We=["checked","onChange"],Ne={class:"featured-toggle mt-2"},Ae={class:"switch"},Qe=["checked","onChange"],Oe={key:0,class:"bi bi-star-fill"},Le={key:0,class:"best-selling-badge mt-2"},Je={class:"d-block mt-1 text-muted"},Re={class:"action-buttons"},Ge={class:"btn-group-vertical",role:"group"},Xe=["onClick"],Ye={class:"btn-group",role:"group"},Ke=["onClick","disabled"],Ze=["onClick"],to=["onClick"],so={key:1,class:"row"},eo={class:"card product-card h-100"},oo={class:"card-body"},lo={class:"product-image-container mb-3"},ao=["src","alt"],no={key:0,class:"stock-badge low-stock"},io={key:1,class:"stock-badge out-of-stock"},ro={class:"card-title"},co={class:"card-text text-muted small"},uo={class:"row mb-3"},mo={class:"col-6"},bo={class:"text-muted d-block"},ho={class:"col-6"},vo={class:"text-muted d-block"},po={class:"fw-bold text-primary"},fo={class:"d-flex justify-content-between align-items-center"},go={class:"status-toggle"},yo={class:"switch"},_o=["checked","onChange"],xo={class:"btn-group",role:"group"},wo=["onClick"],ko=["onClick"],$o={class:"modal-dialog modal-lg"},Co={class:"modal-content"},So={class:"modal-header"},qo={class:"modal-body"},Vo={class:"alert alert-info mb-3"},Bo={class:"barcode-preview mb-3 p-3 text-center",style:{background:"white",border:"2px dashed #dee2e6","border-radius":"8px"}},Po=["src"],Uo={class:"text-muted mt-2 d-block"},zo={class:"mb-3"},To={class:"text-muted"},Do={class:"barcode-settings p-3",style:{background:"#f8f9fa","border-radius":"8px",border:"1px solid #dee2e6"}},Io={class:"row mb-2"},Eo={class:"col-md-6"},Fo={class:"col-md-6"},jo={class:"mb-3"},Ho={class:"btn-group btn-group-sm mt-1",role:"group"},Mo={class:"row"},Wo={class:"col-md-4"},No={class:"text-muted"},Ao={class:"col-md-4"},Qo={class:"text-muted"},Oo={class:"col-md-4"},Lo={class:"text-muted"},Jo={class:"row mt-3"},Ro={class:"col-md-4"},Go={class:"form-check"},Xo={class:"col-md-4"},Yo={class:"form-check"},Ko={class:"col-md-4"},Zo={class:"form-check"},tl={key:0,class:"row mt-3"},sl={class:"col-md-6"},el={class:"col-md-6"},ol={class:"form-check mt-4"},ll={key:1,class:"row mt-2"},al={class:"col-md-6"},nl={class:"form-check"},il={class:"modal-footer"},rl=["disabled"],dl={key:0,class:"spinner-border spinner-border-sm me-2"},cl={__name:"index",props:{products:Object,translations:Array},setup(a){const p=a,V=wt(),k=ct(),_=w(!1),r=w({}),f=w(!1);w(!1),w(null),w(null);const S=w(!1),x=w(null),M=w(""),l=nt({width:2,height:70,fontSize:10,margin:2,landscape:!0,highQuality:!0,pageWidth:38,pageHeight:26,copies:1,showBarcodeNumber:!0,showPrice:!1,price:0}),m=w({checking:!1,isValid:!0,message:""}),n=nt({search:"",status:"",stock:"",sort:"created"}),C=w("table"),T=async i=>{if(!i||i.length<3){m.value={checking:!1,isValid:!0,message:""};return}m.value.checking=!0;try{const b=await(await fetch(route("products.checkBarcodeUnique",i))).json();m.value={checking:!1,isValid:b.unique,message:b.message},b.unique||k.warning(b.message)}catch(s){console.error("Barcode validation error:",s),m.value={checking:!1,isValid:!1,message:"خطأ في التحقق من الباركود"}}};dt.debounce(T,500);const W=dt.debounce(()=>{A()},500),L=i=>{k.success("تم تحديث المنتج بنجاح"),window.location.reload()},J=()=>{C.value=C.value==="table"?"grid":"table"},g=()=>{n.search="",n.status="",n.stock="",n.sort="created",A()},tt=i=>i.image&&i.image.trim()!==""?`/public/storage/${i.image}`:"/public/dashboard-assets/img/product-placeholder.svg",st=i=>{i.target.src="/dashboard-assets/img/product-placeholder.svg"},et=i=>i===0?"text-danger":i<=5?"text-warning":"text-success",ot=(i,s="IQD")=>parseFloat(i||0).toFixed(2)+" "+s,ut=i=>i?new Date(i).toLocaleDateString("ar-SA"):"-",mt=()=>{var i;return(i=p.products)!=null&&i.data?p.products.data.filter(s=>s.is_active).length:0},bt=()=>{var s;return(s=p.products)!=null&&s.data?p.products.data.filter(b=>b.currency==="USD").reduce((b,y)=>b+parseFloat(y.price||0)*parseInt(y.quantity||0),0).toFixed(2):"0.00"},ht=()=>{var s;return(s=p.products)!=null&&s.data?p.products.data.filter(b=>b.currency==="IQD").reduce((b,y)=>b+parseFloat(y.price||0)*parseInt(y.quantity||0),0).toFixed(2):"0.00"},vt=async i=>{f.value=!0;try{const b=await(await fetch(route("barcode.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({product_id:i.id,type:"PNG",width:2,height:30})})).json();b.success?(k.success("تم توليد الباركود بنجاح"),window.location.reload()):k.error(b.message||"حدث خطأ أثناء توليد الباركود")}catch(s){console.error("Generate barcode error:",s),k.error("حدث خطأ أثناء توليد الباركود")}finally{f.value=!1}},pt=i=>{if(!i.barcode){k.error("لا يوجد باركود للطباعة");return}x.value=i,l.price=i.selling_price||0,S.value=!0,N()},N=async()=>{if(!(!x.value||!x.value.barcode))try{const i=(await kt(async()=>{const{default:y}=await import("./BarcodePrinter.vue_vue_type_style_index_0_scoped_3a0f17fc_lang-BQZ7pUh4.js").then(D=>D.J);return{default:y}},__vite__mapDeps([0,1,2,3]))).default,s=document.createElementNS("http://www.w3.org/2000/svg","svg");i(s,x.value.barcode,{format:"CODE128",width:l.width,height:l.height,displayValue:!1,margin:l.margin,background:"#ffffff",lineColor:"#000000",xmlDocument:document});const b=new XMLSerializer().serializeToString(s);M.value="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(b)))}catch(i){console.error("Preview generation error:",i)}},ft=async()=>{if(x.value){f.value=!0;try{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");St(i,x.value.barcode,{format:"CODE128",width:l.width,height:l.height,displayValue:!1,margin:l.margin,background:"#ffffff",lineColor:"#000000",xmlDocument:document});const s=new XMLSerializer().serializeToString(i),b="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(s))),y=window.open("","_blank","width=400,height=600");if(!y){k.error("فشل فتح نافذة الطباعة. يرجى السماح بالنوافذ المنبثقة.");return}const D=l.landscape?"landscape":"portrait",P=`${l.pageWidth}mm`,U=`${l.pageHeight}mm`,R=l.landscape?`${P} ${U}`:`${U} ${P}`,G=l.landscape?"18mm":"22mm";let e="";for(let q=0;q<l.copies;q++)e+=`
  <div class="label-page">
    <div class="label-container">
      <div class="product-name">${x.value.name}</div>
      <img class="barcode-image" src="${b}" alt="Barcode">
      ${l.showBarcodeNumber?`<div class="barcode-text">${x.value.barcode}</div>`:""}
      ${l.showPrice&&l.price>0?`<div class="price-text">${l.price} دينار</div>`:""}
    </div>
  </div>
      `;const Q=`
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>طباعة الباركود</title>
  <style>
    /* Optimized for thermal printers */
    @page { 
      size: ${R}; 
      margin: 0; 
      orientation: ${D};
    }
    
    @media print {
      * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        color-adjust: exact !important;
      }
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    
    .label-page {
      width: ${P};
      height: ${U};
      margin: 0;
      padding: 0;
      overflow: hidden;
      page-break-after: always;
    }
    
    .label-container {
      width: ${P};
      height: ${U};
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 1mm;
      box-sizing: border-box;
    }
    
    .product-name {
      width: 100%;
      font-size: ${l.fontSize}px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 1mm;
      line-height: 1.1;
      max-height: 8mm;
      overflow: hidden;
      word-wrap: break-word;
    }
    
    .barcode-image {
      width: auto;
      max-width: 90%;
      height: auto;
      max-height: ${G};
      margin: 1mm auto;
      display: block;
      object-fit: contain;
    }
    
    .barcode-text {
      width: 100%;
      font-size: ${Math.max(l.fontSize-2,4)}px;
      font-family: monospace;
      text-align: center;
      margin-top: 1mm;
      font-weight: bold;
    }
    
    .price-text {
      width: 100%;
      font-size: ${Math.max(l.fontSize-1,5)}px;
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 1mm;
      font-weight: bold;
      color: #dc3545;
    }
  </style>
</head>
<body>
  ${e}
  
  <script>
    window.onload = function() {
      setTimeout(function() {
        window.print();
        setTimeout(function() {
          window.close();
        }, 2000);
      }, 1500);
    }
  <\/script>
</body>
</html>
    `;y.document.write(Q),y.document.close(),S.value=!1,k.success(`تم إرسال ${l.copies} نسخة من الباركود للطباعة`)}catch(i){console.error("Print error:",i),k.error("حدث خطأ أثناء الطباعة")}finally{f.value=!1}}},A=()=>{X.get(route("products.index"),n,{preserveState:!0,preserveScroll:!0})},B=i=>V.props.auth_permissions.includes(i),lt=i=>{z.fire({title:p.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:p.translations.yes,cancelButtonText:p.translations.cancel}).then(s=>{s.isConfirmed&&X.post(`/products/${i}/activate`,{onSuccess:()=>{z.fire("Updated !","product stuaus item has been updated.","success")},onError:()=>{z.fire("Error!","There was an issue updating product status.","error")}})})},gt=i=>{X.post(`/products/${i}/toggle-featured`,{onSuccess:()=>{},onError:()=>{z.fire("خطأ!","حدث خطأ أثناء تحديث حالة المنتج المميز.","error")}})},at=i=>{z.fire({title:p.translations.are_you_sure,text:p.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:p.translations.yes,cancelButtonText:p.translations.cancel}).then(s=>{s.isConfirmed&&X.delete("products/"+i,{onSuccess:()=>{z.fire({title:p.translations.data_deleted_successfully,icon:"success"})},onError:()=>{z.fire("Error!","There was an issue deleting the product.","error")}})})};return(i,s)=>(d(),O($t,{translations:a.translations},{default:j(()=>{var b,y,D,P,U,R,G;return[t("div",is,[t("h1",rs,o(a.translations.products),1),t("nav",null,[t("ol",ds,[t("li",cs,[Z(I(Y),{class:"nav-link dark:text-white",href:i.route("dashboard")},{default:j(()=>[c(o(a.translations.home),1)]),_:1},8,["href"])]),t("li",us,o(a.translations.products),1)])])]),t("section",ms,[t("div",bs,[t("div",hs,[t("div",vs,[t("div",ps,[t("h5",fs,[c(o(a.translations.total_products)+" ",1),t("span",null,"| "+o(a.translations.all),1)]),t("div",gs,[s[24]||(s[24]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-box-seam"})],-1)),t("div",ys,[t("h6",null,o(((b=p.products)==null?void 0:b.total)||0),1),t("span",_s,o(a.translations.products),1)])])])])]),t("div",xs,[t("div",ws,[t("div",ks,[t("h5",$s,[c(o(a.translations.active_products)+" ",1),t("span",null,"| "+o(a.translations.enabled),1)]),t("div",Cs,[s[25]||(s[25]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",Ss,[t("h6",null,o(mt()),1),t("span",qs,o(a.translations.active),1)])])])])]),t("div",Vs,[t("div",Bs,[t("div",Ps,[t("h5",Us,[c(o(a.translations.total_value)+" ",1),t("span",null,"| "+o(a.translations.dollar),1)]),t("div",zs,[s[26]||(s[26]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",Ts,[t("h6",null,o(bt())+" $",1),t("span",Ds,o(a.translations.value),1)])])])])]),t("div",Is,[t("div",Es,[t("div",Fs,[t("h5",js,[c(o(a.translations.total_value)+" ",1),t("span",null,"| "+o(a.translations.dinar),1)]),t("div",Hs,[s[27]||(s[27]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-exchange"})],-1)),t("div",Ms,[t("h6",null,o(ht())+" IQD",1),t("span",Ws,o(a.translations.value),1)])])])])])]),t("div",Ns,[t("div",As,[t("h5",Qs,[s[28]||(s[28]=t("i",{class:"bi bi-box-seam me-2"},null,-1)),c(" "+o(a.translations.products_management),1)]),t("div",Os,[t("button",{class:"btn btn-outline-primary",onClick:J},[t("i",{class:E(C.value==="grid"?"bi bi-list":"bi bi-grid")},null,2),c(" "+o(C.value==="grid"?a.translations.list_view:a.translations.grid_view),1)]),B("create product")?(d(),O(I(Y),{key:0,class:"btn btn-primary",href:i.route("products.create")},{default:j(()=>[s[29]||(s[29]=t("i",{class:"bi bi-plus-circle"},null,-1)),c(" "+o(a.translations.add_product),1)]),_:1},8,["href"])):h("",!0)])]),t("div",Ls,[t("div",Js,[t("div",Rs,[t("div",Gs,[v(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>n.search=e),placeholder:a.translations.search_by_name_or_barcode,onInput:s[1]||(s[1]=(...e)=>I(W)&&I(W)(...e))},null,40,Xs),[[$,n.search]]),s[30]||(s[30]=t("i",{class:"bi bi-search search-icon"},null,-1))])]),t("div",Ys,[v(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=e=>n.status=e),onChange:A},[t("option",Ks,o(a.translations.all_status),1),t("option",Zs,o(a.translations.active),1),t("option",te,o(a.translations.inactive),1)],544),[[K,n.status]])]),t("div",se,[v(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=e=>n.stock=e),onChange:A},[t("option",ee,o(a.translations.all_stock),1),t("option",oe,o(a.translations.low_stock),1),t("option",le,o(a.translations.out_of_stock),1),t("option",ae,o(a.translations.in_stock),1)],544),[[K,n.stock]])]),t("div",ne,[v(t("select",{class:"form-select","onUpdate:modelValue":s[4]||(s[4]=e=>n.sort=e),onChange:A},[t("option",ie,o(a.translations.sort_by_name),1),t("option",re,o(a.translations.sort_by_price),1),t("option",de,o(a.translations.sort_by_quantity),1),s[31]||(s[31]=t("option",{value:"best_selling"},"الأكثر مبيعاً",-1)),t("option",ce,o(a.translations.sort_by_date),1)],544),[[K,n.sort]])]),t("div",ue,[t("button",{class:"btn btn-outline-secondary w-100",onClick:g},[s[32]||(s[32]=t("i",{class:"bi bi-arrow-clockwise"},null,-1)),c(" "+o(a.translations.clear),1)])])]),C.value==="table"?(d(),u("div",me,[t("div",be,[t("table",he,[t("thead",ve,[t("tr",null,[s[33]||(s[33]=t("th",{scope:"col",class:"text-center"},[t("i",{class:"bi bi-image"})],-1)),t("th",pe,o(a.translations.product_info),1),t("th",fe,o(a.translations.barcode),1),t("th",ge,o(a.translations.stock),1),t("th",ye,o(a.translations.price),1),t("th",_e,o(a.translations.status),1),t("th",xe,o(a.translations.actions),1)])]),t("tbody",null,[(d(!0),u(it,null,rt((y=p.products)==null?void 0:y.data,(e,Q)=>(d(),u("tr",{key:e.id,class:"product-row"},[t("td",we,[t("div",ke,[t("img",{src:tt(e),alt:e.name,class:"product-image",onError:st},null,40,$e),e.quantity<=5?(d(),u("div",Ce,s[34]||(s[34]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):h("",!0),e.quantity===0?(d(),u("div",Se,s[35]||(s[35]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):h("",!0)])]),t("td",null,[t("div",qe,[t("h6",Ve,o(e.name),1),t("small",Be,o(e.model),1),s[36]||(s[36]=t("br",null,null,-1)),t("small",Pe,o(a.translations.created)+": "+o(ut(e.created)),1)])]),t("td",null,[t("div",Ue,[e.barcode?(d(),u("span",ze,o(e.barcode),1)):(d(),u("span",Te,o(a.translations.no_barcode),1))])]),t("td",null,[t("div",De,[t("span",{class:E(["stock-quantity",et(e.quantity)])},o(e.quantity),3),t("small",Ie,o(a.translations.units),1)])]),t("td",null,[t("div",Ee,[t("span",Fe,o(ot(e.price,e.currency)),1),t("small",je,o(a.translations.selling_price),1)])]),t("td",null,[t("div",He,[t("label",Me,[t("input",{type:"checkbox",checked:e.is_active==1,onChange:q=>lt(e.id)},null,40,We),s[37]||(s[37]=t("span",{class:"slider round"},null,-1))]),t("small",{class:E(["d-block mt-1",e.is_active?"text-success":"text-danger"])},o(e.is_active?a.translations.active:a.translations.inactive),3)]),t("div",Ne,[t("label",Ae,[t("input",{type:"checkbox",checked:e.is_featured==1,onChange:q=>gt(e.id)},null,40,Qe),s[38]||(s[38]=t("span",{class:"slider round featured-slider"},null,-1))]),t("small",{class:E(["d-block mt-1",e.is_featured?"text-warning":"text-muted"])},[e.is_featured?(d(),u("i",Oe)):h("",!0),c(" "+o(e.is_featured?"مميز":"عادي"),1)],2)]),e.total_sales>0?(d(),u("div",Le,[s[40]||(s[40]=t("div",{class:"badge bg-warning text-dark"},[t("i",{class:"bi bi-trophy-fill me-1"}),c(" الأكثر مبيعاً ")],-1)),t("small",Je,[s[39]||(s[39]=t("i",{class:"bi bi-cart-fill me-1"},null,-1)),c(" "+o(e.total_sales)+" مبيع ",1)])])):h("",!0)]),t("td",null,[t("div",Re,[t("div",Ge,[B("update product")?(d(),O(I(Y),{key:0,class:"btn btn-sm btn-outline-primary mb-1",href:i.route("products.edit",{product:e.id}),title:a.translations.edit},{default:j(()=>s[41]||(s[41]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):h("",!0),B("update product")?(d(),u("button",{key:1,class:"btn btn-sm btn-outline-success mb-1",onClick:q=>{_.value=!0,r.value=e},title:"{{ translations.add_stock }}"},s[42]||(s[42]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,Xe)):h("",!0),t("div",Ye,[e.barcode?h("",!0):(d(),u("button",{key:0,class:"btn btn-sm btn-outline-info",onClick:q=>vt(e),disabled:f.value,title:"{{ translations.generate_barcode }}"},s[43]||(s[43]=[t("i",{class:"bi bi-qr-code"},null,-1)]),8,Ke)),e.barcode?(d(),u("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:q=>pt(e),title:"{{ translations.print_barcode }}"},s[44]||(s[44]=[t("i",{class:"bi bi-printer"},null,-1)]),8,Ze)):h("",!0)]),B("delete product")?(d(),u("button",{key:2,class:"btn btn-sm btn-outline-danger mt-1",onClick:q=>at(e.id),title:"{{ translations.delete }}"},s[45]||(s[45]=[t("i",{class:"bi bi-trash"},null,-1)]),8,to)):h("",!0)])])])]))),128))])])])])):(d(),u("div",so,[(d(!0),u(it,null,rt((D=p.products)==null?void 0:D.data,e=>(d(),u("div",{key:e.id,class:"col-xl-3 col-lg-4 col-md-6 mb-4"},[t("div",eo,[t("div",oo,[t("div",lo,[t("img",{src:tt(e),alt:e.name,class:"product-image-large",onError:st},null,40,ao),e.quantity<=5?(d(),u("div",no,s[46]||(s[46]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):h("",!0),e.quantity===0?(d(),u("div",io,s[47]||(s[47]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):h("",!0)]),t("h6",ro,o(e.name),1),t("p",co,o(e.model),1),t("div",uo,[t("div",mo,[t("small",bo,o(a.translations.stock),1),t("span",{class:E(["fw-bold",et(e.quantity)])},o(e.quantity),3)]),t("div",ho,[t("small",vo,o(a.translations.price),1),t("span",po,o(ot(e.price,e.currency)),1)])]),t("div",fo,[t("div",go,[t("label",yo,[t("input",{type:"checkbox",checked:e.is_active==1,onChange:Q=>lt(e.id)},null,40,_o),s[48]||(s[48]=t("span",{class:"slider round"},null,-1))])]),t("div",xo,[B("update product")?(d(),O(I(Y),{key:0,class:"btn btn-sm btn-outline-primary",href:i.route("products.edit",{product:e.id}),title:a.translations.edit},{default:j(()=>s[49]||(s[49]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):h("",!0),B("update product")?(d(),u("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:Q=>{_.value=!0,r.value=e},title:"{{ translations.add_stock }}"},s[50]||(s[50]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,wo)):h("",!0),B("delete product")?(d(),u("button",{key:2,class:"btn btn-sm btn-outline-danger",onClick:Q=>at(e.id),title:"{{ translations.delete }}"},s[51]||(s[51]=[t("i",{class:"bi bi-trash"},null,-1)]),8,ko)):h("",!0)])])])])]))),128))]))])]),Z(Ct,{links:(P=p.products)==null?void 0:P.links},null,8,["links"])]),Z(ns,{show:_.value,translations:a.translations,data:r.value,onClose:s[5]||(s[5]=e=>_.value=!1),onSuccess:L},null,8,["show","translations","data"]),t("div",{class:E(["modal fade",{show:S.value}]),style:F({display:S.value?"block":"none"})},[t("div",$o,[t("div",Co,[t("div",So,[s[52]||(s[52]=t("h5",{class:"modal-title"},[t("i",{class:"bi bi-printer"}),c(" طباعة الباركود ")],-1)),t("button",{type:"button",class:"btn-close",onClick:s[6]||(s[6]=e=>S.value=!1)})]),t("div",qo,[t("div",Vo,[s[53]||(s[53]=t("strong",null,[t("i",{class:"bi bi-box"}),c(" المنتج:")],-1)),c(" "+o((U=x.value)==null?void 0:U.name),1)]),t("div",Bo,[s[54]||(s[54]=t("h6",{class:"mb-3"},[t("i",{class:"bi bi-eye"}),c(" معاينة الباركود")],-1)),t("div",{class:"preview-container",style:F({width:`${l.pageWidth*3.78}px`,height:`${l.pageHeight*3.78}px`,margin:"0 auto",border:"1px solid #ccc",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"8px",background:"#fff"})},[t("div",{class:"product-name",style:F({fontSize:`${l.fontSize}px`,fontWeight:"bold",textAlign:"center",marginBottom:"4px",maxHeight:"30px",overflow:"hidden",wordWrap:"break-word",width:"100%"})},o((R=x.value)==null?void 0:R.name),5),M.value?(d(),u("img",{key:0,src:M.value,alt:"Barcode Preview",style:F({maxWidth:"90%",height:"auto",maxHeight:l.landscape?"68px":"83px",margin:"4px auto"})},null,12,Po)):h("",!0),l.showBarcodeNumber?(d(),u("div",{key:1,class:"barcode-text",style:F({fontSize:`${Math.max(l.fontSize-2,4)}px`,fontFamily:"monospace",textAlign:"center",marginTop:"4px",fontWeight:"bold",width:"100%"})},o((G=x.value)==null?void 0:G.barcode),5)):h("",!0),l.showPrice&&l.price>0?(d(),u("div",{key:2,class:"price-text",style:F({fontSize:`${Math.max(l.fontSize-1,5)}px`,textAlign:"center",marginTop:"4px",fontWeight:"bold",color:"#dc3545",width:"100%"})},o(l.price)+" دينار ",5)):h("",!0)],4),t("small",Uo,"الحجم الفعلي: "+o(l.pageWidth)+"mm × "+o(l.pageHeight)+"mm",1)]),t("div",zo,[s[55]||(s[55]=t("label",{class:"form-label"},[t("strong",null,[t("i",{class:"bi bi-files"}),c(" عدد النسخ")])],-1)),v(t("input",{type:"number",class:"form-control",min:"1",max:"100","onUpdate:modelValue":s[7]||(s[7]=e=>l.copies=e),placeholder:"أدخل عدد النسخ المطلوبة"},null,512),[[$,l.copies,void 0,{number:!0}]]),t("small",To,"سيتم طباعة "+o(l.copies)+" نسخة من الباركود",1)]),t("div",Do,[s[69]||(s[69]=t("h6",{class:"mb-3"},[t("i",{class:"bi bi-sliders"}),c(" إعدادات الباركود")],-1)),t("div",Io,[t("div",Eo,[s[56]||(s[56]=t("label",{class:"form-label"},[t("strong",null,"📏 عرض الورق (mm)")],-1)),v(t("input",{type:"number",class:"form-control form-control-sm",min:"20",max:"80",step:"1","onUpdate:modelValue":s[8]||(s[8]=e=>l.pageWidth=e)},null,512),[[$,l.pageWidth,void 0,{number:!0}]])]),t("div",Fo,[s[57]||(s[57]=t("label",{class:"form-label"},[t("strong",null,"📏 ارتفاع الورق (mm)")],-1)),v(t("input",{type:"number",class:"form-control form-control-sm",min:"20",max:"80",step:"1","onUpdate:modelValue":s[9]||(s[9]=e=>l.pageHeight=e)},null,512),[[$,l.pageHeight,void 0,{number:!0}]])])]),t("div",jo,[s[59]||(s[59]=t("small",{class:"text-muted"},"أحجام شائعة:",-1)),t("div",Ho,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:s[10]||(s[10]=e=>{l.pageWidth=38,l.pageHeight=26})},s[58]||(s[58]=[t("strong",null,"38×26",-1)])),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[11]||(s[11]=e=>{l.pageWidth=35,l.pageHeight=28})}," 35×28 "),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[12]||(s[12]=e=>{l.pageWidth=38,l.pageHeight=28})}," 38×28 "),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[13]||(s[13]=e=>{l.pageWidth=40,l.pageHeight=30})}," 40×30 ")])]),s[70]||(s[70]=t("hr",null,null,-1)),t("div",Mo,[t("div",Wo,[s[60]||(s[60]=t("label",{class:"form-label"},"عرض الخط",-1)),v(t("input",{type:"range",class:"form-range",min:"1",max:"5",step:"0.1","onUpdate:modelValue":s[14]||(s[14]=e=>l.width=e),onInput:N},null,544),[[$,l.width]]),t("small",No,o(l.width),1)]),t("div",Ao,[s[61]||(s[61]=t("label",{class:"form-label"},"ارتفاع الباركود",-1)),v(t("input",{type:"range",class:"form-range",min:"30",max:"150",step:"5","onUpdate:modelValue":s[15]||(s[15]=e=>l.height=e),onInput:N},null,544),[[$,l.height]]),t("small",Qo,o(l.height)+"px",1)]),t("div",Oo,[s[62]||(s[62]=t("label",{class:"form-label"},"حجم الخط",-1)),v(t("input",{type:"range",class:"form-range",min:"6",max:"20",step:"1","onUpdate:modelValue":s[16]||(s[16]=e=>l.fontSize=e),onInput:N},null,544),[[$,l.fontSize]]),t("small",Lo,o(l.fontSize)+"px",1)])]),t("div",Jo,[t("div",Ro,[t("div",Go,[v(t("input",{class:"form-check-input",type:"checkbox",id:"printLandscapeMode","onUpdate:modelValue":s[17]||(s[17]=e=>l.landscape=e)},null,512),[[H,l.landscape]]),s[63]||(s[63]=t("label",{class:"form-check-label",for:"printLandscapeMode"}," طباعة بالعرض (Landscape) ",-1))])]),t("div",Xo,[t("div",Yo,[v(t("input",{class:"form-check-input",type:"checkbox",id:"printHighQuality","onUpdate:modelValue":s[18]||(s[18]=e=>l.highQuality=e)},null,512),[[H,l.highQuality]]),s[64]||(s[64]=t("label",{class:"form-check-label",for:"printHighQuality"}," جودة عالية (SVG) ",-1))])]),t("div",Ko,[t("div",Zo,[v(t("input",{class:"form-check-input",type:"checkbox",id:"showBarcodeNumber","onUpdate:modelValue":s[19]||(s[19]=e=>l.showBarcodeNumber=e)},null,512),[[H,l.showBarcodeNumber]]),s[65]||(s[65]=t("label",{class:"form-check-label",for:"showBarcodeNumber"}," عرض رقم الباركود ",-1))])])]),l.showPrice?(d(),u("div",tl,[t("div",sl,[s[66]||(s[66]=t("label",{class:"form-label"},[t("strong",null,[t("i",{class:"bi bi-currency-dollar"}),c(" سعر البيع")])],-1)),v(t("input",{type:"number",class:"form-control",min:"0",step:"0.01","onUpdate:modelValue":s[20]||(s[20]=e=>l.price=e),placeholder:"أدخل سعر البيع",onInput:N},null,544),[[$,l.price,void 0,{number:!0}]])]),t("div",el,[t("div",ol,[v(t("input",{class:"form-check-input",type:"checkbox",id:"showPrice","onUpdate:modelValue":s[21]||(s[21]=e=>l.showPrice=e)},null,512),[[H,l.showPrice]]),s[67]||(s[67]=t("label",{class:"form-check-label",for:"showPrice"}," عرض سعر البيع ",-1))])])])):h("",!0),l.showPrice?h("",!0):(d(),u("div",ll,[t("div",al,[t("div",nl,[v(t("input",{class:"form-check-input",type:"checkbox",id:"showPrice","onUpdate:modelValue":s[22]||(s[22]=e=>l.showPrice=e)},null,512),[[H,l.showPrice]]),s[68]||(s[68]=t("label",{class:"form-check-label",for:"showPrice"}," عرض سعر البيع ",-1))])])]))])]),t("div",il,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[23]||(s[23]=e=>S.value=!1)},o(a.translations.cancel||"إلغاء"),1),t("button",{type:"button",class:"btn btn-success",onClick:ft,disabled:f.value},[f.value?(d(),u("span",dl)):h("",!0),s[71]||(s[71]=t("i",{class:"bi bi-printer"},null,-1)),c(" "+o(a.translations.print||"طباعة")+" ("+o(l.copies)+") ",1)],8,rl)])])])],6)]}),_:1},8,["translations"]))}},gl=qt(cl,[["__scopeId","data-v-aab791bf"]]);export{gl as default};
