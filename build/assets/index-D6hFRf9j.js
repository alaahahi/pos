import{s as Z,r as w,B as it,a as r,c as A,w as D,e as m,b as t,d,t as e,l as k,y as L,A as R,v as lt,f,D as rt,E as ct,Q as dt,x as ut,h as G,i as H,u as U,p as z,n as N,F as X,g as Y}from"./app-rrtI315f.js";import{_ as mt}from"./AuthenticatedLayout-CiFcEoWJ.js";import{_ as bt}from"./Pagination-CO4ga6T5.js";/* empty css                                                                       */import{_ as vt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as P}from"./sweetalert2.esm.all-DwEdJQJv.js";import{l as W}from"./lodash-279fxCeF.js";const ht={key:0,class:"modal-mask"},pt={class:"modal-wrapper max-h-[80vh]"},ft={class:"modal-container"},gt={class:"modal-header"},_t={class:"text-primary"},yt={class:"modal-body"},xt={class:"row g-3"},wt={class:"col-12"},kt={class:"alert alert-info"},$t={class:"col-md-6"},Ct={for:"price_cost",class:"form-label"},qt=["placeholder"],Bt={class:"col-md-6"},St={for:"price",class:"form-label"},Vt=["placeholder"],Ft={class:"col-md-6"},Ut={for:"quantity",class:"form-label"},Pt=["placeholder"],Dt={class:"col-md-6"},Tt={class:"col-md-6"},It={for:"date",class:"form-label"},jt={class:"col-md-6"},Et={class:"form-control-plaintext bg-light p-2 rounded"},At={class:"col-12"},Lt={class:"form-check"},Mt={class:"text-muted"},Ot={class:"modal-footer"},zt={class:"d-flex w-100 gap-2"},Nt=["disabled"],Rt=["disabled"],Qt={key:0,class:"spinner-border spinner-border-sm me-2"},Gt={key:1,class:"bi bi-check-circle"},Ht={__name:"ModalPurchasesProduct",props:{show:Boolean,data:Object,accounts:Array,translations:Array},emits:["close","success"],setup(o,{emit:b}){const C=o,y=b,g=Z(),i=w({date:q(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}),_=w(!1);function q(){const c=new Date,n=c.getFullYear(),V=String(c.getMonth()+1).padStart(2,"0"),F=String(c.getDate()).padStart(2,"0");return`${n}-${V}-${F}`}const h=()=>{i.value={date:q(),price_cost:0,quantity:0,price:0,withdraw_from_box:!1,currency:"IQD"}};it(()=>C.data,c=>{c&&c.id&&(i.value.price_cost=c.price_cost||0,i.value.price=c.price||0,i.value.quantity=0)},{immediate:!0});const B=async()=>{if(!C.data||!C.data.id){g.error("لم يتم تحديد المنتج");return}if(i.value.quantity<=0){g.error("يجب إدخال كمية أكبر من صفر");return}if(i.value.price_cost<=0){g.error("يجب إدخال سعر التكلفة");return}if(i.value.price<=0){g.error("يجب إدخال سعر البيع");return}_.value=!0;try{console.log("Sending data:",{product_id:C.data.id,quantity:i.value.quantity,price_cost:i.value.price_cost,price:i.value.price,date:i.value.date,withdraw_from_box:i.value.withdraw_from_box,currency:i.value.currency});const c=await ct.post("api/products/process-purchase",{product_id:C.data.id,quantity:i.value.quantity,price_cost:i.value.price_cost,price:i.value.price,date:i.value.date,withdraw_from_box:i.value.withdraw_from_box,currency:i.value.currency});c.data.success?(g.success(c.data.message),y("success",c.data),y("close"),h()):g.error(c.data.message||"حدث خطأ أثناء المعالجة")}catch(c){console.error("Purchase error:",c),c.response&&c.response.data&&c.response.data.message?g.error(c.response.data.message):g.error("حدث خطأ أثناء معالجة المشتريات")}finally{_.value=!1}},M=()=>(i.value.quantity*i.value.price_cost).toFixed(2);return(c,n)=>(r(),A(rt,{name:"modal"},{default:D(()=>{var V,F,T,I,j;return[o.show?(r(),m("div",ht,[t("div",pt,[t("div",ft,[t("div",gt,[t("h3",_t,[n[7]||(n[7]=t("i",{class:"bi bi-cart-plus"},null,-1)),d(" إضافة مشتريات - "+e(((V=o.data)==null?void 0:V.name)||"منتج"),1)])]),t("div",yt,[t("div",xt,[t("div",wt,[t("div",kt,[n[8]||(n[8]=t("strong",null,"المنتج:",-1)),d(" "+e(((F=o.data)==null?void 0:F.name)||"غير محدد"),1),n[9]||(n[9]=t("br",null,null,-1)),n[10]||(n[10]=t("strong",null,"الكمية الحالية:",-1)),d(" "+e(((T=o.data)==null?void 0:T.quantity)||0),1),n[11]||(n[11]=t("br",null,null,-1)),n[12]||(n[12]=t("strong",null,"سعر التكلفة الحالي:",-1)),d(" "+e(((I=o.data)==null?void 0:I.price_cost)||0),1),n[13]||(n[13]=t("br",null,null,-1)),n[14]||(n[14]=t("strong",null,"سعر البيع الحالي:",-1)),d(" "+e(((j=o.data)==null?void 0:j.price)||0),1)])]),t("div",$t,[t("label",Ct,[n[15]||(n[15]=t("i",{class:"bi bi-currency-dollar"},null,-1)),d(" "+e(o.translations.price_cost),1)]),k(t("input",{id:"price_cost",type:"number",step:"0.01",class:"form-control",placeholder:o.translations.price_cost,"onUpdate:modelValue":n[0]||(n[0]=p=>i.value.price_cost=p),required:""},null,8,qt),[[L,i.value.price_cost]])]),t("div",Bt,[t("label",St,[n[16]||(n[16]=t("i",{class:"bi bi-tag"},null,-1)),d(" "+e(o.translations.price),1)]),k(t("input",{id:"price",type:"number",step:"0.01",class:"form-control",placeholder:o.translations.price,"onUpdate:modelValue":n[1]||(n[1]=p=>i.value.price=p),required:""},null,8,Vt),[[L,i.value.price]])]),t("div",Ft,[t("label",Ut,[n[17]||(n[17]=t("i",{class:"bi bi-box"},null,-1)),d(" "+e(o.translations.quantity),1)]),k(t("input",{id:"quantity",type:"number",min:"1",class:"form-control",placeholder:o.translations.quantity,"onUpdate:modelValue":n[2]||(n[2]=p=>i.value.quantity=p),required:""},null,8,Pt),[[L,i.value.quantity]])]),t("div",Dt,[n[19]||(n[19]=t("label",{for:"currency",class:"form-label"},[t("i",{class:"bi bi-currency-exchange"}),d(" العملة ")],-1)),k(t("select",{id:"currency",class:"form-control","onUpdate:modelValue":n[3]||(n[3]=p=>i.value.currency=p)},n[18]||(n[18]=[t("option",{value:"IQD"},"دينار عراقي",-1),t("option",{value:"$"},"دولار",-1)]),512),[[R,i.value.currency]])]),t("div",Tt,[t("label",It,[n[20]||(n[20]=t("i",{class:"bi bi-calendar"},null,-1)),d(" "+e(o.translations.date),1)]),k(t("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":n[4]||(n[4]=p=>i.value.date=p),required:""},null,512),[[L,i.value.date]])]),t("div",jt,[n[21]||(n[21]=t("label",{class:"form-label"},[t("i",{class:"bi bi-calculator"}),d(" إجمالي التكلفة ")],-1)),t("div",Et,[t("strong",null,e(M())+" "+e(i.value.currency),1)])]),t("div",At,[t("div",Lt,[k(t("input",{class:"form-check-input",type:"checkbox",id:"withdraw_from_box","onUpdate:modelValue":n[5]||(n[5]=p=>i.value.withdraw_from_box=p)},null,512),[[lt,i.value.withdraw_from_box]]),n[22]||(n[22]=t("label",{class:"form-check-label",for:"withdraw_from_box"},[t("i",{class:"bi bi-wallet2"}),d(" سحب المبلغ من الصندوق تلقائياً ")],-1))]),t("small",Mt," عند تفعيل هذا الخيار، سيتم سحب "+e(M())+" "+e(i.value.currency)+" من الصندوق الرئيسي تلقائياً ",1)])])]),t("div",Ot,[t("div",zt,[t("button",{class:"btn btn-secondary flex-fill",onClick:n[6]||(n[6]=p=>c.$emit("close")),disabled:_.value},n[23]||(n[23]=[t("i",{class:"bi bi-x-circle"},null,-1),d(" إلغاء ")]),8,Nt),t("button",{class:"btn btn-primary flex-fill",onClick:B,disabled:_.value||i.value.quantity<=0||i.value.price_cost<=0||i.value.price<=0},[_.value?(r(),m("span",Qt)):(r(),m("i",Gt)),d(" "+e(_.value?"جاري المعالجة...":"تأكيد المشتريات"),1)],8,Rt)])])])])])):f("",!0)]}),_:1}))}},Jt={class:"pagetitle dark:text-white"},Kt={class:"dark:text-white"},Xt={class:"breadcrumb"},Yt={class:"breadcrumb-item"},Wt={class:"breadcrumb-item active dark:text-white"},Zt={class:"section dashboard"},ts={class:"row mb-4"},ss={class:"col-xl-3 col-md-6"},es={class:"card info-card sales-card"},os={class:"card-body"},as={class:"card-title"},ns={class:"d-flex align-items-center"},is={class:"ps-3"},ls={class:"text-success small pt-1 fw-bold"},rs={class:"col-xl-3 col-md-6"},cs={class:"card info-card customers-card"},ds={class:"card-body"},us={class:"card-title"},ms={class:"d-flex align-items-center"},bs={class:"ps-3"},vs={class:"text-success small pt-1 fw-bold"},hs={class:"col-xl-3 col-md-6"},ps={class:"card info-card revenue-card"},fs={class:"card-body"},gs={class:"card-title"},_s={class:"d-flex align-items-center"},ys={class:"ps-3"},xs={class:"text-primary small pt-1 fw-bold"},ws={class:"col-xl-3 col-md-6"},ks={class:"card info-card revenue-card"},$s={class:"card-body"},Cs={class:"card-title"},qs={class:"d-flex align-items-center"},Bs={class:"ps-3"},Ss={class:"text-primary small pt-1 fw-bold"},Vs={class:"card"},Fs={class:"card-header d-flex justify-content-between align-items-center"},Us={class:"card-title mb-0"},Ps={class:"d-flex gap-2"},Ds={class:"card-body"},Ts={class:"row mb-4"},Is={class:"col-md-4"},js={class:"search-box"},Es=["placeholder"],As={class:"col-md-2"},Ls={value:""},Ms={value:"active"},Os={value:"inactive"},zs={class:"col-md-2"},Ns={value:""},Rs={value:"low"},Qs={value:"out"},Gs={value:"available"},Hs={class:"col-md-2"},Js={value:"name"},Ks={value:"price"},Xs={value:"quantity"},Ys={value:"created"},Ws={class:"col-md-2"},Zs={key:0},te={class:"table-responsive"},se={class:"table table-hover"},ee={class:"table-dark"},oe={scope:"col"},ae={scope:"col"},ne={scope:"col"},ie={scope:"col"},le={scope:"col"},re={scope:"col",class:"text-center"},ce={class:"text-center"},de={class:"product-image-container"},ue=["src","alt"],me={key:0,class:"stock-badge low-stock"},be={key:1,class:"stock-badge out-of-stock"},ve={class:"product-info"},he={class:"product-name mb-1"},pe={class:"text-muted"},fe={class:"text-muted"},ge={class:"barcode-info"},_e={key:0,class:"barcode-text"},ye={key:1,class:"text-muted"},xe={class:"stock-info"},we={class:"d-block text-muted"},ke={class:"price-info"},$e={class:"price-amount"},Ce={class:"d-block text-muted"},qe={class:"status-toggle"},Be={class:"switch"},Se=["checked","onChange"],Ve={class:"action-buttons"},Fe={class:"btn-group-vertical",role:"group"},Ue=["onClick"],Pe={class:"btn-group",role:"group"},De=["onClick","disabled"],Te=["onClick"],Ie=["onClick"],je={key:1,class:"row"},Ee={class:"card product-card h-100"},Ae={class:"card-body"},Le={class:"product-image-container mb-3"},Me=["src","alt"],Oe={key:0,class:"stock-badge low-stock"},ze={key:1,class:"stock-badge out-of-stock"},Ne={class:"card-title"},Re={class:"card-text text-muted small"},Qe={class:"row mb-3"},Ge={class:"col-6"},He={class:"text-muted d-block"},Je={class:"col-6"},Ke={class:"text-muted d-block"},Xe={class:"fw-bold text-primary"},Ye={class:"d-flex justify-content-between align-items-center"},We={class:"status-toggle"},Ze={class:"switch"},to=["checked","onChange"],so={class:"btn-group",role:"group"},eo=["onClick"],oo=["onClick"],ao={__name:"index",props:{products:Object,translations:Array},setup(o){const b=o,C=dt(),y=Z(),g=w(!1),i=w({}),_=w(!1);w(!1),w(null),w(null);const q=w({checking:!1,isValid:!0,message:""}),h=ut({search:"",status:"",stock:"",sort:"name"}),B=w("table"),M=async l=>{if(!l||l.length<3){q.value={checking:!1,isValid:!0,message:""};return}q.value.checking=!0;try{const u=await(await fetch(route("products.checkBarcodeUnique",l))).json();q.value={checking:!1,isValid:u.unique,message:u.message},u.unique||y.warning(u.message)}catch(s){console.error("Barcode validation error:",s),q.value={checking:!1,isValid:!1,message:"خطأ في التحقق من الباركود"}}};W.debounce(M,500);const c=W.debounce(()=>{E()},500),n=l=>{y.success("تم تحديث المنتج بنجاح"),window.location.reload()},V=()=>{B.value=B.value==="table"?"grid":"table"},F=()=>{h.search="",h.status="",h.stock="",h.sort="name",E()},T=l=>l.image&&l.image!=="products/default_product.png"?`/storage/${l.image}`:"/dashboard-assets/img/product-placeholder.svg",I=l=>{l.target.src="/dashboard-assets/img/product-placeholder.svg"},j=l=>l===0?"text-danger":l<=5?"text-warning":"text-success",p=(l,s="IQD")=>parseFloat(l||0).toFixed(2)+" "+s,tt=l=>l?new Date(l).toLocaleDateString("ar-SA"):"-",st=()=>{var l;return(l=b.products)!=null&&l.data?b.products.data.filter(s=>s.is_active).length:0},et=()=>{var s;return(s=b.products)!=null&&s.data?b.products.data.filter(u=>u.currency==="USD").reduce((u,x)=>u+parseFloat(x.price||0)*parseInt(x.quantity||0),0).toFixed(2):"0.00"},ot=()=>{var s;return(s=b.products)!=null&&s.data?b.products.data.filter(u=>u.currency==="IQD").reduce((u,x)=>u+parseFloat(x.price||0)*parseInt(x.quantity||0),0).toFixed(2):"0.00"},at=async l=>{_.value=!0;try{const u=await(await fetch(route("barcode.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({product_id:l.id,type:"PNG",width:2,height:30})})).json();u.success?(y.success("تم توليد الباركود بنجاح"),window.location.reload()):y.error(u.message||"حدث خطأ أثناء توليد الباركود")}catch(s){console.error("Generate barcode error:",s),y.error("حدث خطأ أثناء توليد الباركود")}finally{_.value=!1}},nt=async l=>{if(!l.barcode){y.error("لا يوجد باركود للطباعة");return}_.value=!0;try{const s=new URLSearchParams({code:l.barcode,type:"PNG",width:2,height:30}),u=await fetch(`/barcode/preview?${s}`);if(!u.ok)throw new Error("Failed to generate barcode image");const x=await u.blob(),$=URL.createObjectURL(x),v=document.createElement("div");v.id="barcode-print-overlay",v.style.position="fixed",v.style.top="0",v.style.left="0",v.style.width="100%",v.style.height="100%",v.style.backgroundColor="white",v.style.zIndex="9999",v.style.padding="20px",v.style.textAlign="center",v.style.fontFamily="Arial, sans-serif",v.style.overflow="auto",v.innerHTML=`
      <style>
        @media print {
          body { margin: 0; padding: 0; }
          .print-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 20px !important; 
            border: none !important;
            box-shadow: none !important;
          }
          .barcode-container { 
            max-width: 100% !important; 
            width: 100% !important; 
            margin: 0 !important; 
            padding: 30px !important; 
            border: 2px solid #000 !important;
            background: white !important;
          }
          .barcode-image { 
            width: 100% !important; 
            height: auto !important; 
            min-height: 300px !important; 
            max-height: 500px !important;
            border: 1px solid #000 !important;
          }
          .product-name { 
            font-size: 24px !important; 
            font-weight: bold !important; 
            margin-bottom: 20px !important; 
            text-align: center !important;
          }
          .barcode-text { 
            font-size: 18px !important; 
            margin-top: 20px !important; 
            font-family: monospace !important; 
            text-align: center !important;
            font-weight: bold !important;
          }
          .no-print { display: none !important; }
        }
      </style>
      <div class="print-container" style="max-width: 400px; margin: 50px auto; border: 2px solid #333; padding: 30px; background: white; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #333;">طباعة الباركود</h3>
        
        <div class="barcode-container" style="border: 1px solid #ddd; padding: 20px; margin: 20px 0; background: #f9f9f9;">
          <div class="product-name" style="font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #2c3e50;">${l.name||"Product"}</div>
          <img class="barcode-image" src="${$}" alt="Barcode" style="max-width: 100%;width: 100%; height: auto; border: 1px solid #ccc;" onload="console.log('Barcode image loaded successfully')" onerror="console.error('Failed to load barcode image')">
          <div class="barcode-text" style="font-size: 14px; margin-top: 15px; font-family: monospace; color: #666;">${l.barcode}</div>
        </div>
        
        <div class="no-print" style="margin-top: 30px;">
          <button onclick="printBarcodeContent()" style="padding: 12px 25px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 15px; font-size: 16px;">
            <i class="bi bi-printer"></i> طباعة
          </button>
          <button onclick="closePrintOverlay()" style="padding: 12px 25px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
            <i class="bi bi-x"></i> إلغاء
          </button>
        </div>
        
        <div class="no-print" style="margin-top: 20px; font-size: 12px; color: #666;">
          <p>💡 نصيحة: اختر "Microsoft Print to PDF" لطباعة إلى ملف PDF</p>
        </div>
      </div>
    `,window.printBarcodeContent=function(){const a=v.querySelector("img");if(a&&!a.complete){a.onload=function(){window.print()};return}window.print()},window.closePrintOverlay=function(){document.body.removeChild(v),$&&URL.revokeObjectURL($)},document.body.appendChild(v),y.success("تم تحضير الباركود للطباعة. اضغط زر الطباعة في الأعلى."),$&&setTimeout(()=>{document.getElementById("barcode-print-overlay")&&URL.revokeObjectURL($)},3e4)}catch(s){console.error("Print error:",s),y.error("حدث خطأ أثناء تحضير الطباعة")}finally{_.value=!1}},E=()=>{G.get(route("products.index"),h,{preserveState:!0,preserveScroll:!0})},S=l=>C.props.auth_permissions.includes(l),J=l=>{P.fire({title:b.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:b.translations.yes,cancelButtonText:b.translations.cancel}).then(s=>{s.isConfirmed&&G.post(`/products/${l}/activate`,{onSuccess:()=>{P.fire("Updated !","product stuaus item has been updated.","success")},onError:()=>{P.fire("Error!","There was an issue updating product status.","error")}})})},K=l=>{P.fire({title:b.translations.are_you_sure,text:b.translations.you_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:b.translations.yes,cancelButtonText:b.translations.cancel}).then(s=>{s.isConfirmed&&G.delete("products/"+l,{onSuccess:()=>{P.fire({title:b.translations.data_deleted_successfully,icon:"success"})},onError:()=>{P.fire("Error!","There was an issue deleting the product.","error")}})})};return(l,s)=>(r(),A(mt,{translations:o.translations},{default:D(()=>{var u,x,$,v;return[t("div",Jt,[t("h1",Kt,e(o.translations.products),1),t("nav",null,[t("ol",Xt,[t("li",Yt,[H(U(z),{class:"nav-link dark:text-white",href:l.route("dashboard")},{default:D(()=>[d(e(o.translations.home),1)]),_:1},8,["href"])]),t("li",Wt,e(o.translations.products),1)])])]),t("section",Zt,[t("div",ts,[t("div",ss,[t("div",es,[t("div",os,[t("h5",as,[d(e(o.translations.total_products)+" ",1),t("span",null,"| "+e(o.translations.all),1)]),t("div",ns,[s[6]||(s[6]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-box-seam"})],-1)),t("div",is,[t("h6",null,e(((u=b.products)==null?void 0:u.total)||0),1),t("span",ls,e(o.translations.products),1)])])])])]),t("div",rs,[t("div",cs,[t("div",ds,[t("h5",us,[d(e(o.translations.active_products)+" ",1),t("span",null,"| "+e(o.translations.enabled),1)]),t("div",ms,[s[7]||(s[7]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-check-circle"})],-1)),t("div",bs,[t("h6",null,e(st()),1),t("span",vs,e(o.translations.active),1)])])])])]),t("div",hs,[t("div",ps,[t("div",fs,[t("h5",gs,[d(e(o.translations.total_value)+" ",1),t("span",null,"| "+e(o.translations.dollar),1)]),t("div",_s,[s[8]||(s[8]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-dollar"})],-1)),t("div",ys,[t("h6",null,e(et())+" $",1),t("span",xs,e(o.translations.value),1)])])])])]),t("div",ws,[t("div",ks,[t("div",$s,[t("h5",Cs,[d(e(o.translations.total_value)+" ",1),t("span",null,"| "+e(o.translations.dinar),1)]),t("div",qs,[s[9]||(s[9]=t("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center"},[t("i",{class:"bi bi-currency-exchange"})],-1)),t("div",Bs,[t("h6",null,e(ot())+" IQD",1),t("span",Ss,e(o.translations.value),1)])])])])])]),t("div",Vs,[t("div",Fs,[t("h5",Us,[s[10]||(s[10]=t("i",{class:"bi bi-box-seam me-2"},null,-1)),d(" "+e(o.translations.products_management),1)]),t("div",Ps,[t("button",{class:"btn btn-outline-primary",onClick:V},[t("i",{class:N(B.value==="grid"?"bi bi-list":"bi bi-grid")},null,2),d(" "+e(B.value==="grid"?o.translations.list_view:o.translations.grid_view),1)]),S("create product")?(r(),A(U(z),{key:0,class:"btn btn-primary",href:l.route("products.create")},{default:D(()=>[s[11]||(s[11]=t("i",{class:"bi bi-plus-circle"},null,-1)),d(" "+e(o.translations.add_product),1)]),_:1},8,["href"])):f("",!0)])]),t("div",Ds,[t("div",Ts,[t("div",Is,[t("div",js,[k(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=a=>h.search=a),placeholder:o.translations.search_by_name_or_barcode,onInput:s[1]||(s[1]=(...a)=>U(c)&&U(c)(...a))},null,40,Es),[[L,h.search]]),s[12]||(s[12]=t("i",{class:"bi bi-search search-icon"},null,-1))])]),t("div",As,[k(t("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=a=>h.status=a),onChange:E},[t("option",Ls,e(o.translations.all_status),1),t("option",Ms,e(o.translations.active),1),t("option",Os,e(o.translations.inactive),1)],544),[[R,h.status]])]),t("div",zs,[k(t("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=a=>h.stock=a),onChange:E},[t("option",Ns,e(o.translations.all_stock),1),t("option",Rs,e(o.translations.low_stock),1),t("option",Qs,e(o.translations.out_of_stock),1),t("option",Gs,e(o.translations.in_stock),1)],544),[[R,h.stock]])]),t("div",Hs,[k(t("select",{class:"form-select","onUpdate:modelValue":s[4]||(s[4]=a=>h.sort=a),onChange:E},[t("option",Js,e(o.translations.sort_by_name),1),t("option",Ks,e(o.translations.sort_by_price),1),t("option",Xs,e(o.translations.sort_by_quantity),1),t("option",Ys,e(o.translations.sort_by_date),1)],544),[[R,h.sort]])]),t("div",Ws,[t("button",{class:"btn btn-outline-secondary w-100",onClick:F},[s[13]||(s[13]=t("i",{class:"bi bi-arrow-clockwise"},null,-1)),d(" "+e(o.translations.clear),1)])])]),B.value==="table"?(r(),m("div",Zs,[t("div",te,[t("table",se,[t("thead",ee,[t("tr",null,[s[14]||(s[14]=t("th",{scope:"col",class:"text-center"},[t("i",{class:"bi bi-image"})],-1)),t("th",oe,e(o.translations.product_info),1),t("th",ae,e(o.translations.barcode),1),t("th",ne,e(o.translations.stock),1),t("th",ie,e(o.translations.price),1),t("th",le,e(o.translations.status),1),t("th",re,e(o.translations.actions),1)])]),t("tbody",null,[(r(!0),m(X,null,Y((x=b.products)==null?void 0:x.data,(a,Q)=>(r(),m("tr",{key:a.id,class:"product-row"},[t("td",ce,[t("div",de,[t("img",{src:T(a),alt:a.name,class:"product-image",onError:I},null,40,ue),a.quantity<=5?(r(),m("div",me,s[15]||(s[15]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):f("",!0),a.quantity===0?(r(),m("div",be,s[16]||(s[16]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):f("",!0)])]),t("td",null,[t("div",ve,[t("h6",he,e(a.name),1),t("small",pe,e(a.model),1),s[17]||(s[17]=t("br",null,null,-1)),t("small",fe,e(o.translations.created)+": "+e(tt(a.created)),1)])]),t("td",null,[t("div",ge,[a.barcode?(r(),m("span",_e,e(a.barcode),1)):(r(),m("span",ye,e(o.translations.no_barcode),1))])]),t("td",null,[t("div",xe,[t("span",{class:N(["stock-quantity",j(a.quantity)])},e(a.quantity),3),t("small",we,e(o.translations.units),1)])]),t("td",null,[t("div",ke,[t("span",$e,e(p(a.price,a.currency)),1),t("small",Ce,e(o.translations.selling_price),1)])]),t("td",null,[t("div",qe,[t("label",Be,[t("input",{type:"checkbox",checked:a.is_active==1,onChange:O=>J(a.id)},null,40,Se),s[18]||(s[18]=t("span",{class:"slider round"},null,-1))]),t("small",{class:N(["d-block mt-1",a.is_active?"text-success":"text-danger"])},e(a.is_active?o.translations.active:o.translations.inactive),3)])]),t("td",null,[t("div",Ve,[t("div",Fe,[S("update product")?(r(),A(U(z),{key:0,class:"btn btn-sm btn-outline-primary mb-1",href:l.route("products.edit",{product:a.id}),title:o.translations.edit},{default:D(()=>s[19]||(s[19]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):f("",!0),S("update product")?(r(),m("button",{key:1,class:"btn btn-sm btn-outline-success mb-1",onClick:O=>{g.value=!0,i.value=a},title:"{{ translations.add_stock }}"},s[20]||(s[20]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,Ue)):f("",!0),t("div",Pe,[a.barcode?f("",!0):(r(),m("button",{key:0,class:"btn btn-sm btn-outline-info",onClick:O=>at(a),disabled:_.value,title:"{{ translations.generate_barcode }}"},s[21]||(s[21]=[t("i",{class:"bi bi-qr-code"},null,-1)]),8,De)),a.barcode?(r(),m("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:O=>nt(a),title:"{{ translations.print_barcode }}"},s[22]||(s[22]=[t("i",{class:"bi bi-printer"},null,-1)]),8,Te)):f("",!0)]),S("delete product")?(r(),m("button",{key:2,class:"btn btn-sm btn-outline-danger mt-1",onClick:O=>K(a.id),title:"{{ translations.delete }}"},s[23]||(s[23]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Ie)):f("",!0)])])])]))),128))])])])])):(r(),m("div",je,[(r(!0),m(X,null,Y(($=b.products)==null?void 0:$.data,a=>(r(),m("div",{key:a.id,class:"col-xl-3 col-lg-4 col-md-6 mb-4"},[t("div",Ee,[t("div",Ae,[t("div",Le,[t("img",{src:T(a),alt:a.name,class:"product-image-large",onError:I},null,40,Me),a.quantity<=5?(r(),m("div",Oe,s[24]||(s[24]=[t("i",{class:"bi bi-exclamation-triangle"},null,-1)]))):f("",!0),a.quantity===0?(r(),m("div",ze,s[25]||(s[25]=[t("i",{class:"bi bi-x-circle"},null,-1)]))):f("",!0)]),t("h6",Ne,e(a.name),1),t("p",Re,e(a.model),1),t("div",Qe,[t("div",Ge,[t("small",He,e(o.translations.stock),1),t("span",{class:N(["fw-bold",j(a.quantity)])},e(a.quantity),3)]),t("div",Je,[t("small",Ke,e(o.translations.price),1),t("span",Xe,e(p(a.price,a.currency)),1)])]),t("div",Ye,[t("div",We,[t("label",Ze,[t("input",{type:"checkbox",checked:a.is_active==1,onChange:Q=>J(a.id)},null,40,to),s[26]||(s[26]=t("span",{class:"slider round"},null,-1))])]),t("div",so,[S("update product")?(r(),A(U(z),{key:0,class:"btn btn-sm btn-outline-primary",href:l.route("products.edit",{product:a.id}),title:o.translations.edit},{default:D(()=>s[27]||(s[27]=[t("i",{class:"bi bi-pencil"},null,-1)])),_:2},1032,["href","title"])):f("",!0),S("update product")?(r(),m("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:Q=>{g.value=!0,i.value=a},title:"{{ translations.add_stock }}"},s[28]||(s[28]=[t("i",{class:"bi bi-plus-circle"},null,-1)]),8,eo)):f("",!0),S("delete product")?(r(),m("button",{key:2,class:"btn btn-sm btn-outline-danger",onClick:Q=>K(a.id),title:"{{ translations.delete }}"},s[29]||(s[29]=[t("i",{class:"bi bi-trash"},null,-1)]),8,oo)):f("",!0)])])])])]))),128))]))])]),H(bt,{links:(v=b.products)==null?void 0:v.links},null,8,["links"])]),H(Ht,{show:g.value,translations:o.translations,data:i.value,onClose:s[5]||(s[5]=a=>g.value=!1),onSuccess:n},null,8,["show","translations","data"])]}),_:1},8,["translations"]))}},bo=vt(ao,[["__scopeId","data-v-ded54233"]]);export{bo as default};
