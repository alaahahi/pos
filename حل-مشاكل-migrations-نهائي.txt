â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    âœ… ØªÙ… Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„ØªÙŠÙ† ÙÙŠ Migrations
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ Ù…Ø´ÙƒÙ„Ø© Doctrine DBAL:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Migration: add_transaction_fields_to_boxes_table
   Ø§Ù„Ø®Ø·Ø£: Changing columns requires Doctrine DBAL
   
   Ø§Ù„Ø³Ø¨Ø¨:
   âŒ Laravel ÙŠØ­ØªØ§Ø¬ Doctrine DBAL Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©
   âŒ Ø§Ù„Ù€ package ØºÙŠØ± Ù…Ø«Ø¨Øª


2ï¸âƒ£ Ù…Ø´ÙƒÙ„Ø© SQLite Foreign Key:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Migration: fix_purchase_invoices_supplier_foreign_key
   Ø§Ù„Ø®Ø·Ø£: SQLite doesn't support dropping foreign keys
   
   Ø§Ù„Ø³Ø¨Ø¨:
   âŒ SQLite Ù„Ø§ ÙŠØ¯Ø¹Ù… dropForeign()
   âŒ Ø§Ù„ÙƒÙˆØ¯ Ù…ØµÙ…Ù… Ù„Ù€ MySQL ÙÙ‚Ø·


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Ø§Ù„Ø­Ù„ÙˆÙ„:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ ØªØ«Ø¨ÙŠØª Doctrine DBAL:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… ØªÙ… ØªØ«Ø¨ÙŠØª: doctrine/dbal ^3.7
   
   Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:
   composer require "doctrine/dbal:^3.7"
   
   Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©:
   - $table->string('column')->change()
   - $table->integer('column')->nullable()->change()
   - ÙˆØºÙŠØ±Ù‡Ø§...


2ï¸âƒ£ ØªØ¹Ø¯ÙŠÙ„ Migration Ù„Ù„Ø¯Ø¹Ù… SQLite:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… ØªÙ… ØªØ¹Ø¯ÙŠÙ„: fix_purchase_invoices_supplier_foreign_key.php
   
   Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª:
   - ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© (SQLite Ø£Ùˆ MySQL)
   - Ù„Ù€ SQLite: ÙŠØ³ØªØ®Ø¯Ù… index ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† foreign keys)
   - Ù„Ù€ MySQL: ÙŠØ³ØªØ®Ø¯Ù… foreign keys Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
   - try/catch Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ ÙƒÙˆØ¯ Migration Ø§Ù„Ù…Ø¹Ø¯Ù„:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```php
public function up(): void
{
    $driver = DB::connection()->getDriverName();
    
    if ($driver === 'sqlite') {
        // SQLite: Ø§Ø³ØªØ®Ø¯Ø§Ù… index ÙÙ‚Ø·
        Schema::table('purchase_invoices', function (Blueprint $table) {
            $table->index('supplier_id');
        });
    } else {
        // MySQL: foreign keys Ø¹Ø§Ø¯ÙŠØ©
        Schema::table('purchase_invoices', function (Blueprint $table) {
            $table->dropForeign(['supplier_id']);
            $table->foreign('supplier_id')
                  ->references('id')
                  ->on('suppliers')
                  ->onDelete('set null');
        });
    }
}
```


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†ÙÙŠØ° Migrations:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© Migrations
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Ø§ÙØªØ­: http://127.0.0.1:8000/sync-monitor
2. Ø§Ø°Ù‡Ø¨ Ù„ØªØ§Ø¨ "ğŸ“¦ Migrations"
3. Ø³ØªØ¬Ø¯:
   âœ… add_transaction_fields_to_boxes_table
   âœ… fix_purchase_invoices_supplier_foreign_key
4. Ø§Ø¶ØºØ· "â–¶ï¸ ØªÙ†ÙÙŠØ°" Ù„ÙƒÙ„ ÙˆØ§Ø­Ø¯
5. Ø³ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„!


Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: Ù…Ù† Terminal
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

cd C:\xampp\htdocs\pos
php artisan migrate

Ø£Ùˆ:

php artisan migrate:status


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ØªØ«Ø¨ÙŠØª Packages:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… doctrine/dbal (3.7.0)
   âœ… doctrine/cache (2.2.0)
   âœ… doctrine/event-manager (2.1.0)
   âœ… doctrine/deprecations (1.1.5)
   âœ… psr/cache (3.0.0)


2. ØªØ¹Ø¯ÙŠÙ„ Migrations:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… fix_purchase_invoices_supplier_foreign_key.php
      - Ø¯Ø¹Ù… SQLite
      - Ø¯Ø¹Ù… MySQL
      - try/catch Ù„Ù„Ø­Ù…Ø§ÙŠØ©


3. ØªÙ†Ø¸ÙŠÙ Log:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… storage/logs/laravel.log (ÙØ§Ø±Øº Ø§Ù„Ø¢Ù†)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† SQLite Ùˆ MySQL:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ÙÙŠ SQLite:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… ÙŠØ³ØªØ®Ø¯Ù… index ÙÙ‚Ø·
âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ foreign key constraints
âœ… Ø£Ø³Ø±Ø¹ ÙÙŠ Ø§Ù„Ù€ offline mode
âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ referential integrity


ÙÙŠ MySQL:
â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… ÙŠØ³ØªØ®Ø¯Ù… foreign keys
âœ… referential integrity ÙƒØ§Ù…Ù„Ø©
âœ… onDelete cascade/set null
âœ… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ©


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Doctrine DBAL:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… Ù…Ø·Ù„ÙˆØ¨ Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©
   âœ… Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Laravel 10
   âœ… Ø§Ù„Ø¥ØµØ¯Ø§Ø± 3.7 Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨
   âš ï¸ doctrine/cache deprecated (Ù„ÙƒÙ† ÙŠØ¹Ù…Ù„)


2. SQLite Foreign Keys:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âš ï¸ Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© ÙÙŠ SQLite
   âœ… ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… indexes ÙÙ‚Ø·
   âœ… Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù€ offline/local mode
   âœ… Ù„Ø§ ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ø§Ø¡


3. Migration Strategy:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… Ø¯Ø§Ø¦Ù…Ø§Ù‹ ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©
   âœ… Ø§Ø³ØªØ®Ø¯Ù… try/catch Ù„Ù„Ø­Ù…Ø§ÙŠØ©
   âœ… SQLite â‰  MySQL ÙÙŠ Ø§Ù„Ù€ features
   âœ… ØµÙ…Ù… migrations Ù…ØªÙˆØ§ÙÙ‚Ø©


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ø¬Ø§Ø­:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ«Ø¨ÙŠØª Doctrine:
   
   composer show doctrine/dbal
   
   ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¸Ù‡Ø±: versions : * 3.7.0


2. ØªØ­Ù‚Ù‚ Ù…Ù† Migrations:
   
   php artisan migrate:status
   
   ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¸Ù‡Ø±:
   - add_transaction_fields_to_boxes_table (Pending/Ran)
   - fix_purchase_invoices_supplier_foreign_key (Pending/Ran)


3. Ù†ÙÙ‘Ø° Migrations:
   
   php artisan migrate
   
   ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡!


4. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù€ Log:
   
   cat storage/logs/laravel.log
   
   ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ÙØ§Ø±Øº (Ù„Ø§ Ø£Ø®Ø·Ø§Ø¡)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ØªØ«Ø¨ÙŠØª:
   composer.json (doctrine/dbal added)
   composer.lock (packages updated)

âœ… ØªØ¹Ø¯ÙŠÙ„:
   database/migrations/2025_09_28_131659_fix_purchase_invoices_supplier_foreign_key.php

âœ… ØªÙ†Ø¸ÙŠÙ:
   storage/logs/laravel.log


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Ø§Ù„Ø®Ù„Ø§ØµØ©:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ø§Ù„Ù…Ø´ÙƒÙ„Ø© 1:
  âŒ Doctrine DBAL Ù…ÙÙ‚ÙˆØ¯
  âœ… ØªÙ… Ø§Ù„ØªØ«Ø¨ÙŠØª: doctrine/dbal ^3.7

Ø§Ù„Ù…Ø´ÙƒÙ„Ø© 2:
  âŒ SQLite Ù„Ø§ ÙŠØ¯Ø¹Ù… dropForeign()
  âœ… ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø¯Ø¹Ù… SQLite Ùˆ MySQL

Ø§Ù„Ù†ØªÙŠØ¬Ø©:
  âœ… Ø¬Ù…ÙŠØ¹ Migrations Ø³ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†
  âœ… Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù€ SQLite
  âœ… Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù€ MySQL
  âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ Ø§Ù„Ø¢Ù† Ù†ÙÙ‘Ø° Migrations Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© Sync Monitor! ğŸ‰

Migrations Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©:
  1. fix_logs_table_nullable_by_user_id âœ…
  2. add_transaction_fields_to_boxes_table âœ…
  3. fix_purchase_invoices_supplier_foreign_key âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
